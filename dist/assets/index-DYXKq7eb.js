function mT(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function gT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var l_={exports:{}},mu={},c_={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var za=Symbol.for("react.element"),yT=Symbol.for("react.portal"),vT=Symbol.for("react.fragment"),_T=Symbol.for("react.strict_mode"),wT=Symbol.for("react.profiler"),ET=Symbol.for("react.provider"),xT=Symbol.for("react.context"),IT=Symbol.for("react.forward_ref"),TT=Symbol.for("react.suspense"),ST=Symbol.for("react.memo"),NT=Symbol.for("react.lazy"),Ug=Symbol.iterator;function RT(t){return t===null||typeof t!="object"?null:(t=Ug&&t[Ug]||t["@@iterator"],typeof t=="function"?t:null)}var u_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},d_=Object.assign,h_={};function Ui(t,e,n){this.props=t,this.context=e,this.refs=h_,this.updater=n||u_}Ui.prototype.isReactComponent={};Ui.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ui.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function f_(){}f_.prototype=Ui.prototype;function Zf(t,e,n){this.props=t,this.context=e,this.refs=h_,this.updater=n||u_}var ep=Zf.prototype=new f_;ep.constructor=Zf;d_(ep,Ui.prototype);ep.isPureReactComponent=!0;var zg=Array.isArray,p_=Object.prototype.hasOwnProperty,tp={current:null},m_={key:!0,ref:!0,__self:!0,__source:!0};function g_(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)p_.call(e,r)&&!m_.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:za,type:t,key:i,ref:o,props:s,_owner:tp.current}}function bT(t,e){return{$$typeof:za,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function np(t){return typeof t=="object"&&t!==null&&t.$$typeof===za}function kT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $g=/\/+/g;function Ad(t,e){return typeof t=="object"&&t!==null&&t.key!=null?kT(""+t.key):e.toString(36)}function Ql(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case za:case yT:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Ad(o,0):r,zg(s)?(n="",t!=null&&(n=t.replace($g,"$&/")+"/"),Ql(s,e,n,"",function(u){return u})):s!=null&&(np(s)&&(s=bT(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace($g,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",zg(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Ad(i,l);o+=Ql(i,e,n,c,s)}else if(c=RT(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Ad(i,l++),o+=Ql(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Tl(t,e,n){if(t==null)return t;var r=[],s=0;return Ql(t,r,"","",function(i){return e.call(n,i,s++)}),r}function CT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Et={current:null},Yl={transition:null},AT={ReactCurrentDispatcher:Et,ReactCurrentBatchConfig:Yl,ReactCurrentOwner:tp};function y_(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:Tl,forEach:function(t,e,n){Tl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Tl(t,function(){e++}),e},toArray:function(t){return Tl(t,function(e){return e})||[]},only:function(t){if(!np(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=Ui;re.Fragment=vT;re.Profiler=wT;re.PureComponent=Zf;re.StrictMode=_T;re.Suspense=TT;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AT;re.act=y_;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=d_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=tp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)p_.call(e,c)&&!m_.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:za,type:t.type,key:s,ref:i,props:r,_owner:o}};re.createContext=function(t){return t={$$typeof:xT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ET,_context:t},t.Consumer=t};re.createElement=g_;re.createFactory=function(t){var e=g_.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:IT,render:t}};re.isValidElement=np;re.lazy=function(t){return{$$typeof:NT,_payload:{_status:-1,_result:t},_init:CT}};re.memo=function(t,e){return{$$typeof:ST,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=Yl.transition;Yl.transition={};try{t()}finally{Yl.transition=e}};re.unstable_act=y_;re.useCallback=function(t,e){return Et.current.useCallback(t,e)};re.useContext=function(t){return Et.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return Et.current.useDeferredValue(t)};re.useEffect=function(t,e){return Et.current.useEffect(t,e)};re.useId=function(){return Et.current.useId()};re.useImperativeHandle=function(t,e,n){return Et.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return Et.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return Et.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return Et.current.useMemo(t,e)};re.useReducer=function(t,e,n){return Et.current.useReducer(t,e,n)};re.useRef=function(t){return Et.current.useRef(t)};re.useState=function(t){return Et.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return Et.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return Et.current.useTransition()};re.version="18.3.1";c_.exports=re;var V=c_.exports;const li=gT(V),PT=mT({__proto__:null,default:li},[V]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DT=V,OT=Symbol.for("react.element"),LT=Symbol.for("react.fragment"),jT=Object.prototype.hasOwnProperty,VT=DT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,MT={key:!0,ref:!0,__self:!0,__source:!0};function v_(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)jT.call(e,r)&&!MT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:OT,type:t,key:i,ref:o,props:s,_owner:VT.current}}mu.Fragment=LT;mu.jsx=v_;mu.jsxs=v_;l_.exports=mu;var d=l_.exports,Nh={},__={exports:{}},$t={},w_={exports:{}},E_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,K){var Y=z.length;z.push(K);e:for(;0<Y;){var le=Y-1>>>1,ge=z[le];if(0<s(ge,K))z[le]=K,z[Y]=ge,Y=le;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var K=z[0],Y=z.pop();if(Y!==K){z[0]=Y;e:for(var le=0,ge=z.length,It=ge>>>1;le<It;){var qe=2*(le+1)-1,pn=z[qe],Ot=qe+1,Zt=z[Ot];if(0>s(pn,Y))Ot<ge&&0>s(Zt,pn)?(z[le]=Zt,z[Ot]=Y,le=Ot):(z[le]=pn,z[qe]=Y,le=qe);else if(Ot<ge&&0>s(Zt,Y))z[le]=Zt,z[Ot]=Y,le=Ot;else break e}}return K}function s(z,K){var Y=z.sortIndex-K.sortIndex;return Y!==0?Y:z.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],f=1,p=null,m=3,I=!1,b=!1,C=!1,S=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(z){for(var K=n(u);K!==null;){if(K.callback===null)r(u);else if(K.startTime<=z)r(u),K.sortIndex=K.expirationTime,e(c,K);else break;K=n(u)}}function A(z){if(C=!1,w(z),!b)if(n(c)!==null)b=!0,Q(L);else{var K=n(u);K!==null&&ae(A,K.startTime-z)}}function L(z,K){b=!1,C&&(C=!1,_(y),y=-1),I=!0;var Y=m;try{for(w(K),p=n(c);p!==null&&(!(p.expirationTime>K)||z&&!k());){var le=p.callback;if(typeof le=="function"){p.callback=null,m=p.priorityLevel;var ge=le(p.expirationTime<=K);K=t.unstable_now(),typeof ge=="function"?p.callback=ge:p===n(c)&&r(c),w(K)}else r(c);p=n(c)}if(p!==null)var It=!0;else{var qe=n(u);qe!==null&&ae(A,qe.startTime-K),It=!1}return It}finally{p=null,m=Y,I=!1}}var D=!1,x=null,y=-1,T=5,R=-1;function k(){return!(t.unstable_now()-R<T)}function P(){if(x!==null){var z=t.unstable_now();R=z;var K=!0;try{K=x(!0,z)}finally{K?N():(D=!1,x=null)}}else D=!1}var N;if(typeof v=="function")N=function(){v(P)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,pe=he.port2;he.port1.onmessage=P,N=function(){pe.postMessage(null)}}else N=function(){S(P,0)};function Q(z){x=z,D||(D=!0,N())}function ae(z,K){y=S(function(){z(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){b||I||(b=!0,Q(L))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(z){switch(m){case 1:case 2:case 3:var K=3;break;default:K=m}var Y=m;m=K;try{return z()}finally{m=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,K){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Y=m;m=z;try{return K()}finally{m=Y}},t.unstable_scheduleCallback=function(z,K,Y){var le=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?le+Y:le):Y=le,z){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=Y+ge,z={id:f++,callback:K,priorityLevel:z,startTime:Y,expirationTime:ge,sortIndex:-1},Y>le?(z.sortIndex=Y,e(u,z),n(c)===null&&z===n(u)&&(C?(_(y),y=-1):C=!0,ae(A,Y-le))):(z.sortIndex=ge,e(c,z),b||I||(b=!0,Q(L))),z},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(z){var K=m;return function(){var Y=m;m=K;try{return z.apply(this,arguments)}finally{m=Y}}}})(E_);w_.exports=E_;var FT=w_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UT=V,zt=FT;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var x_=new Set,ca={};function Ps(t,e){Ti(t,e),Ti(t+"Capture",e)}function Ti(t,e){for(ca[t]=e,t=0;t<e.length;t++)x_.add(e[t])}var Bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rh=Object.prototype.hasOwnProperty,zT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Bg={},Wg={};function $T(t){return Rh.call(Wg,t)?!0:Rh.call(Bg,t)?!1:zT.test(t)?Wg[t]=!0:(Bg[t]=!0,!1)}function BT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function WT(t,e,n,r){if(e===null||typeof e>"u"||BT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function xt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var it={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){it[t]=new xt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];it[e]=new xt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){it[t]=new xt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){it[t]=new xt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){it[t]=new xt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){it[t]=new xt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){it[t]=new xt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){it[t]=new xt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){it[t]=new xt(t,5,!1,t.toLowerCase(),null,!1,!1)});var rp=/[\-:]([a-z])/g;function sp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(rp,sp);it[e]=new xt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(rp,sp);it[e]=new xt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(rp,sp);it[e]=new xt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){it[t]=new xt(t,1,!1,t.toLowerCase(),null,!1,!1)});it.xlinkHref=new xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){it[t]=new xt(t,1,!1,t.toLowerCase(),null,!0,!0)});function ip(t,e,n,r){var s=it.hasOwnProperty(e)?it[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(WT(e,n,s,r)&&(n=null),r||s===null?$T(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var er=UT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sl=Symbol.for("react.element"),Qs=Symbol.for("react.portal"),Ys=Symbol.for("react.fragment"),op=Symbol.for("react.strict_mode"),bh=Symbol.for("react.profiler"),I_=Symbol.for("react.provider"),T_=Symbol.for("react.context"),ap=Symbol.for("react.forward_ref"),kh=Symbol.for("react.suspense"),Ch=Symbol.for("react.suspense_list"),lp=Symbol.for("react.memo"),pr=Symbol.for("react.lazy"),S_=Symbol.for("react.offscreen"),Hg=Symbol.iterator;function Eo(t){return t===null||typeof t!="object"?null:(t=Hg&&t[Hg]||t["@@iterator"],typeof t=="function"?t:null)}var Ne=Object.assign,Pd;function Ao(t){if(Pd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Pd=e&&e[1]||""}return`
`+Pd+t}var Dd=!1;function Od(t,e){if(!t||Dd)return"";Dd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Dd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ao(t):""}function HT(t){switch(t.tag){case 5:return Ao(t.type);case 16:return Ao("Lazy");case 13:return Ao("Suspense");case 19:return Ao("SuspenseList");case 0:case 2:case 15:return t=Od(t.type,!1),t;case 11:return t=Od(t.type.render,!1),t;case 1:return t=Od(t.type,!0),t;default:return""}}function Ah(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ys:return"Fragment";case Qs:return"Portal";case bh:return"Profiler";case op:return"StrictMode";case kh:return"Suspense";case Ch:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case T_:return(t.displayName||"Context")+".Consumer";case I_:return(t._context.displayName||"Context")+".Provider";case ap:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case lp:return e=t.displayName||null,e!==null?e:Ah(t.type)||"Memo";case pr:e=t._payload,t=t._init;try{return Ah(t(e))}catch{}}return null}function qT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ah(e);case 8:return e===op?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $r(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function N_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function KT(t){var e=N_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Nl(t){t._valueTracker||(t._valueTracker=KT(t))}function R_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=N_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function vc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ph(t,e){var n=e.checked;return Ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function qg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=$r(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function b_(t,e){e=e.checked,e!=null&&ip(t,"checked",e,!1)}function Dh(t,e){b_(t,e);var n=$r(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Oh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Oh(t,e.type,$r(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Kg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Oh(t,e,n){(e!=="number"||vc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Po=Array.isArray;function ci(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+$r(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Lh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Gg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Po(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:$r(n)}}function k_(t,e){var n=$r(e.value),r=$r(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Qg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function C_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?C_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Rl,A_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Rl=Rl||document.createElement("div"),Rl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Rl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ua(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var zo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},GT=["Webkit","ms","Moz","O"];Object.keys(zo).forEach(function(t){GT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),zo[e]=zo[t]})});function P_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||zo.hasOwnProperty(t)&&zo[t]?(""+e).trim():e+"px"}function D_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=P_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var QT=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vh(t,e){if(e){if(QT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Mh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fh=null;function cp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Uh=null,ui=null,di=null;function Yg(t){if(t=Wa(t)){if(typeof Uh!="function")throw Error(U(280));var e=t.stateNode;e&&(e=wu(e),Uh(t.stateNode,t.type,e))}}function O_(t){ui?di?di.push(t):di=[t]:ui=t}function L_(){if(ui){var t=ui,e=di;if(di=ui=null,Yg(t),e)for(t=0;t<e.length;t++)Yg(e[t])}}function j_(t,e){return t(e)}function V_(){}var Ld=!1;function M_(t,e,n){if(Ld)return t(e,n);Ld=!0;try{return j_(t,e,n)}finally{Ld=!1,(ui!==null||di!==null)&&(V_(),L_())}}function da(t,e){var n=t.stateNode;if(n===null)return null;var r=wu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var zh=!1;if(Bn)try{var xo={};Object.defineProperty(xo,"passive",{get:function(){zh=!0}}),window.addEventListener("test",xo,xo),window.removeEventListener("test",xo,xo)}catch{zh=!1}function YT(t,e,n,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(f){this.onError(f)}}var $o=!1,_c=null,wc=!1,$h=null,JT={onError:function(t){$o=!0,_c=t}};function XT(t,e,n,r,s,i,o,l,c){$o=!1,_c=null,YT.apply(JT,arguments)}function ZT(t,e,n,r,s,i,o,l,c){if(XT.apply(this,arguments),$o){if($o){var u=_c;$o=!1,_c=null}else throw Error(U(198));wc||(wc=!0,$h=u)}}function Ds(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function F_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Jg(t){if(Ds(t)!==t)throw Error(U(188))}function e2(t){var e=t.alternate;if(!e){if(e=Ds(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Jg(s),t;if(i===r)return Jg(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function U_(t){return t=e2(t),t!==null?z_(t):null}function z_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=z_(t);if(e!==null)return e;t=t.sibling}return null}var $_=zt.unstable_scheduleCallback,Xg=zt.unstable_cancelCallback,t2=zt.unstable_shouldYield,n2=zt.unstable_requestPaint,Ae=zt.unstable_now,r2=zt.unstable_getCurrentPriorityLevel,up=zt.unstable_ImmediatePriority,B_=zt.unstable_UserBlockingPriority,Ec=zt.unstable_NormalPriority,s2=zt.unstable_LowPriority,W_=zt.unstable_IdlePriority,gu=null,xn=null;function i2(t){if(xn&&typeof xn.onCommitFiberRoot=="function")try{xn.onCommitFiberRoot(gu,t,void 0,(t.current.flags&128)===128)}catch{}}var cn=Math.clz32?Math.clz32:l2,o2=Math.log,a2=Math.LN2;function l2(t){return t>>>=0,t===0?32:31-(o2(t)/a2|0)|0}var bl=64,kl=4194304;function Do(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function xc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Do(l):(i&=o,i!==0&&(r=Do(i)))}else o=n&~s,o!==0?r=Do(o):i!==0&&(r=Do(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-cn(e),s=1<<n,r|=t[n],e&=~s;return r}function c2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function u2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-cn(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=c2(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Bh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function H_(){var t=bl;return bl<<=1,!(bl&4194240)&&(bl=64),t}function jd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function $a(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-cn(e),t[e]=n}function d2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-cn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function dp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-cn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var fe=0;function q_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var K_,hp,G_,Q_,Y_,Wh=!1,Cl=[],Nr=null,Rr=null,br=null,ha=new Map,fa=new Map,gr=[],h2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zg(t,e){switch(t){case"focusin":case"focusout":Nr=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":br=null;break;case"pointerover":case"pointerout":ha.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":fa.delete(e.pointerId)}}function Io(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Wa(e),e!==null&&hp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function f2(t,e,n,r,s){switch(e){case"focusin":return Nr=Io(Nr,t,e,n,r,s),!0;case"dragenter":return Rr=Io(Rr,t,e,n,r,s),!0;case"mouseover":return br=Io(br,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ha.set(i,Io(ha.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,fa.set(i,Io(fa.get(i)||null,t,e,n,r,s)),!0}return!1}function J_(t){var e=fs(t.target);if(e!==null){var n=Ds(e);if(n!==null){if(e=n.tag,e===13){if(e=F_(n),e!==null){t.blockedOn=e,Y_(t.priority,function(){G_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Jl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Hh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Fh=r,n.target.dispatchEvent(r),Fh=null}else return e=Wa(n),e!==null&&hp(e),t.blockedOn=n,!1;e.shift()}return!0}function ey(t,e,n){Jl(t)&&n.delete(e)}function p2(){Wh=!1,Nr!==null&&Jl(Nr)&&(Nr=null),Rr!==null&&Jl(Rr)&&(Rr=null),br!==null&&Jl(br)&&(br=null),ha.forEach(ey),fa.forEach(ey)}function To(t,e){t.blockedOn===e&&(t.blockedOn=null,Wh||(Wh=!0,zt.unstable_scheduleCallback(zt.unstable_NormalPriority,p2)))}function pa(t){function e(s){return To(s,t)}if(0<Cl.length){To(Cl[0],t);for(var n=1;n<Cl.length;n++){var r=Cl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Nr!==null&&To(Nr,t),Rr!==null&&To(Rr,t),br!==null&&To(br,t),ha.forEach(e),fa.forEach(e),n=0;n<gr.length;n++)r=gr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<gr.length&&(n=gr[0],n.blockedOn===null);)J_(n),n.blockedOn===null&&gr.shift()}var hi=er.ReactCurrentBatchConfig,Ic=!0;function m2(t,e,n,r){var s=fe,i=hi.transition;hi.transition=null;try{fe=1,fp(t,e,n,r)}finally{fe=s,hi.transition=i}}function g2(t,e,n,r){var s=fe,i=hi.transition;hi.transition=null;try{fe=4,fp(t,e,n,r)}finally{fe=s,hi.transition=i}}function fp(t,e,n,r){if(Ic){var s=Hh(t,e,n,r);if(s===null)qd(t,e,r,Tc,n),Zg(t,r);else if(f2(s,t,e,n,r))r.stopPropagation();else if(Zg(t,r),e&4&&-1<h2.indexOf(t)){for(;s!==null;){var i=Wa(s);if(i!==null&&K_(i),i=Hh(t,e,n,r),i===null&&qd(t,e,r,Tc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else qd(t,e,r,null,n)}}var Tc=null;function Hh(t,e,n,r){if(Tc=null,t=cp(r),t=fs(t),t!==null)if(e=Ds(t),e===null)t=null;else if(n=e.tag,n===13){if(t=F_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Tc=t,null}function X_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(r2()){case up:return 1;case B_:return 4;case Ec:case s2:return 16;case W_:return 536870912;default:return 16}default:return 16}}var Er=null,pp=null,Xl=null;function Z_(){if(Xl)return Xl;var t,e=pp,n=e.length,r,s="value"in Er?Er.value:Er.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Xl=s.slice(t,1<r?1-r:void 0)}function Zl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Al(){return!0}function ty(){return!1}function Bt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Al:ty,this.isPropagationStopped=ty,this}return Ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Al)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Al)},persist:function(){},isPersistent:Al}),e}var zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mp=Bt(zi),Ba=Ne({},zi,{view:0,detail:0}),y2=Bt(Ba),Vd,Md,So,yu=Ne({},Ba,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==So&&(So&&t.type==="mousemove"?(Vd=t.screenX-So.screenX,Md=t.screenY-So.screenY):Md=Vd=0,So=t),Vd)},movementY:function(t){return"movementY"in t?t.movementY:Md}}),ny=Bt(yu),v2=Ne({},yu,{dataTransfer:0}),_2=Bt(v2),w2=Ne({},Ba,{relatedTarget:0}),Fd=Bt(w2),E2=Ne({},zi,{animationName:0,elapsedTime:0,pseudoElement:0}),x2=Bt(E2),I2=Ne({},zi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),T2=Bt(I2),S2=Ne({},zi,{data:0}),ry=Bt(S2),N2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},R2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},b2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function k2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=b2[t])?!!e[t]:!1}function gp(){return k2}var C2=Ne({},Ba,{key:function(t){if(t.key){var e=N2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Zl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?R2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gp,charCode:function(t){return t.type==="keypress"?Zl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),A2=Bt(C2),P2=Ne({},yu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sy=Bt(P2),D2=Ne({},Ba,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gp}),O2=Bt(D2),L2=Ne({},zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),j2=Bt(L2),V2=Ne({},yu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),M2=Bt(V2),F2=[9,13,27,32],yp=Bn&&"CompositionEvent"in window,Bo=null;Bn&&"documentMode"in document&&(Bo=document.documentMode);var U2=Bn&&"TextEvent"in window&&!Bo,ew=Bn&&(!yp||Bo&&8<Bo&&11>=Bo),iy=" ",oy=!1;function tw(t,e){switch(t){case"keyup":return F2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Js=!1;function z2(t,e){switch(t){case"compositionend":return nw(e);case"keypress":return e.which!==32?null:(oy=!0,iy);case"textInput":return t=e.data,t===iy&&oy?null:t;default:return null}}function $2(t,e){if(Js)return t==="compositionend"||!yp&&tw(t,e)?(t=Z_(),Xl=pp=Er=null,Js=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ew&&e.locale!=="ko"?null:e.data;default:return null}}var B2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ay(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!B2[t.type]:e==="textarea"}function rw(t,e,n,r){O_(r),e=Sc(e,"onChange"),0<e.length&&(n=new mp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Wo=null,ma=null;function W2(t){pw(t,0)}function vu(t){var e=ei(t);if(R_(e))return t}function H2(t,e){if(t==="change")return e}var sw=!1;if(Bn){var Ud;if(Bn){var zd="oninput"in document;if(!zd){var ly=document.createElement("div");ly.setAttribute("oninput","return;"),zd=typeof ly.oninput=="function"}Ud=zd}else Ud=!1;sw=Ud&&(!document.documentMode||9<document.documentMode)}function cy(){Wo&&(Wo.detachEvent("onpropertychange",iw),ma=Wo=null)}function iw(t){if(t.propertyName==="value"&&vu(ma)){var e=[];rw(e,ma,t,cp(t)),M_(W2,e)}}function q2(t,e,n){t==="focusin"?(cy(),Wo=e,ma=n,Wo.attachEvent("onpropertychange",iw)):t==="focusout"&&cy()}function K2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vu(ma)}function G2(t,e){if(t==="click")return vu(e)}function Q2(t,e){if(t==="input"||t==="change")return vu(e)}function Y2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hn=typeof Object.is=="function"?Object.is:Y2;function ga(t,e){if(hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Rh.call(e,s)||!hn(t[s],e[s]))return!1}return!0}function uy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function dy(t,e){var n=uy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=uy(n)}}function ow(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ow(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function aw(){for(var t=window,e=vc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=vc(t.document)}return e}function vp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function J2(t){var e=aw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ow(n.ownerDocument.documentElement,n)){if(r!==null&&vp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=dy(n,i);var o=dy(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var X2=Bn&&"documentMode"in document&&11>=document.documentMode,Xs=null,qh=null,Ho=null,Kh=!1;function hy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kh||Xs==null||Xs!==vc(r)||(r=Xs,"selectionStart"in r&&vp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ho&&ga(Ho,r)||(Ho=r,r=Sc(qh,"onSelect"),0<r.length&&(e=new mp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Xs)))}function Pl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Zs={animationend:Pl("Animation","AnimationEnd"),animationiteration:Pl("Animation","AnimationIteration"),animationstart:Pl("Animation","AnimationStart"),transitionend:Pl("Transition","TransitionEnd")},$d={},lw={};Bn&&(lw=document.createElement("div").style,"AnimationEvent"in window||(delete Zs.animationend.animation,delete Zs.animationiteration.animation,delete Zs.animationstart.animation),"TransitionEvent"in window||delete Zs.transitionend.transition);function _u(t){if($d[t])return $d[t];if(!Zs[t])return t;var e=Zs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in lw)return $d[t]=e[n];return t}var cw=_u("animationend"),uw=_u("animationiteration"),dw=_u("animationstart"),hw=_u("transitionend"),fw=new Map,fy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jr(t,e){fw.set(t,e),Ps(e,[t])}for(var Bd=0;Bd<fy.length;Bd++){var Wd=fy[Bd],Z2=Wd.toLowerCase(),eS=Wd[0].toUpperCase()+Wd.slice(1);Jr(Z2,"on"+eS)}Jr(cw,"onAnimationEnd");Jr(uw,"onAnimationIteration");Jr(dw,"onAnimationStart");Jr("dblclick","onDoubleClick");Jr("focusin","onFocus");Jr("focusout","onBlur");Jr(hw,"onTransitionEnd");Ti("onMouseEnter",["mouseout","mouseover"]);Ti("onMouseLeave",["mouseout","mouseover"]);Ti("onPointerEnter",["pointerout","pointerover"]);Ti("onPointerLeave",["pointerout","pointerover"]);Ps("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ps("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ps("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ps("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ps("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ps("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oo));function py(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ZT(r,e,void 0,t),t.currentTarget=null}function pw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;py(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;py(s,l,u),i=c}}}if(wc)throw t=$h,wc=!1,$h=null,t}function Ee(t,e){var n=e[Xh];n===void 0&&(n=e[Xh]=new Set);var r=t+"__bubble";n.has(r)||(mw(e,t,2,!1),n.add(r))}function Hd(t,e,n){var r=0;e&&(r|=4),mw(n,t,r,e)}var Dl="_reactListening"+Math.random().toString(36).slice(2);function ya(t){if(!t[Dl]){t[Dl]=!0,x_.forEach(function(n){n!=="selectionchange"&&(tS.has(n)||Hd(n,!1,t),Hd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Dl]||(e[Dl]=!0,Hd("selectionchange",!1,e))}}function mw(t,e,n,r){switch(X_(e)){case 1:var s=m2;break;case 4:s=g2;break;default:s=fp}n=s.bind(null,e,n,t),s=void 0,!zh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function qd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=fs(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}M_(function(){var u=i,f=cp(n),p=[];e:{var m=fw.get(t);if(m!==void 0){var I=mp,b=t;switch(t){case"keypress":if(Zl(n)===0)break e;case"keydown":case"keyup":I=A2;break;case"focusin":b="focus",I=Fd;break;case"focusout":b="blur",I=Fd;break;case"beforeblur":case"afterblur":I=Fd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=ny;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=_2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=O2;break;case cw:case uw:case dw:I=x2;break;case hw:I=j2;break;case"scroll":I=y2;break;case"wheel":I=M2;break;case"copy":case"cut":case"paste":I=T2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=sy}var C=(e&4)!==0,S=!C&&t==="scroll",_=C?m!==null?m+"Capture":null:m;C=[];for(var v=u,w;v!==null;){w=v;var A=w.stateNode;if(w.tag===5&&A!==null&&(w=A,_!==null&&(A=da(v,_),A!=null&&C.push(va(v,A,w)))),S)break;v=v.return}0<C.length&&(m=new I(m,b,null,n,f),p.push({event:m,listeners:C}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",m&&n!==Fh&&(b=n.relatedTarget||n.fromElement)&&(fs(b)||b[Wn]))break e;if((I||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,I?(b=n.relatedTarget||n.toElement,I=u,b=b?fs(b):null,b!==null&&(S=Ds(b),b!==S||b.tag!==5&&b.tag!==6)&&(b=null)):(I=null,b=u),I!==b)){if(C=ny,A="onMouseLeave",_="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(C=sy,A="onPointerLeave",_="onPointerEnter",v="pointer"),S=I==null?m:ei(I),w=b==null?m:ei(b),m=new C(A,v+"leave",I,n,f),m.target=S,m.relatedTarget=w,A=null,fs(f)===u&&(C=new C(_,v+"enter",b,n,f),C.target=w,C.relatedTarget=S,A=C),S=A,I&&b)t:{for(C=I,_=b,v=0,w=C;w;w=$s(w))v++;for(w=0,A=_;A;A=$s(A))w++;for(;0<v-w;)C=$s(C),v--;for(;0<w-v;)_=$s(_),w--;for(;v--;){if(C===_||_!==null&&C===_.alternate)break t;C=$s(C),_=$s(_)}C=null}else C=null;I!==null&&my(p,m,I,C,!1),b!==null&&S!==null&&my(p,S,b,C,!0)}}e:{if(m=u?ei(u):window,I=m.nodeName&&m.nodeName.toLowerCase(),I==="select"||I==="input"&&m.type==="file")var L=H2;else if(ay(m))if(sw)L=Q2;else{L=K2;var D=q2}else(I=m.nodeName)&&I.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(L=G2);if(L&&(L=L(t,u))){rw(p,L,n,f);break e}D&&D(t,m,u),t==="focusout"&&(D=m._wrapperState)&&D.controlled&&m.type==="number"&&Oh(m,"number",m.value)}switch(D=u?ei(u):window,t){case"focusin":(ay(D)||D.contentEditable==="true")&&(Xs=D,qh=u,Ho=null);break;case"focusout":Ho=qh=Xs=null;break;case"mousedown":Kh=!0;break;case"contextmenu":case"mouseup":case"dragend":Kh=!1,hy(p,n,f);break;case"selectionchange":if(X2)break;case"keydown":case"keyup":hy(p,n,f)}var x;if(yp)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Js?tw(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(ew&&n.locale!=="ko"&&(Js||y!=="onCompositionStart"?y==="onCompositionEnd"&&Js&&(x=Z_()):(Er=f,pp="value"in Er?Er.value:Er.textContent,Js=!0)),D=Sc(u,y),0<D.length&&(y=new ry(y,t,null,n,f),p.push({event:y,listeners:D}),x?y.data=x:(x=nw(n),x!==null&&(y.data=x)))),(x=U2?z2(t,n):$2(t,n))&&(u=Sc(u,"onBeforeInput"),0<u.length&&(f=new ry("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:u}),f.data=x))}pw(p,e)})}function va(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=da(t,n),i!=null&&r.unshift(va(t,i,s)),i=da(t,e),i!=null&&r.push(va(t,i,s))),t=t.return}return r}function $s(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function my(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=da(n,i),c!=null&&o.unshift(va(n,c,l))):s||(c=da(n,i),c!=null&&o.push(va(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var nS=/\r\n?/g,rS=/\u0000|\uFFFD/g;function gy(t){return(typeof t=="string"?t:""+t).replace(nS,`
`).replace(rS,"")}function Ol(t,e,n){if(e=gy(e),gy(t)!==e&&n)throw Error(U(425))}function Nc(){}var Gh=null,Qh=null;function Yh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jh=typeof setTimeout=="function"?setTimeout:void 0,sS=typeof clearTimeout=="function"?clearTimeout:void 0,yy=typeof Promise=="function"?Promise:void 0,iS=typeof queueMicrotask=="function"?queueMicrotask:typeof yy<"u"?function(t){return yy.resolve(null).then(t).catch(oS)}:Jh;function oS(t){setTimeout(function(){throw t})}function Kd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),pa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);pa(e)}function kr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function vy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var $i=Math.random().toString(36).slice(2),wn="__reactFiber$"+$i,_a="__reactProps$"+$i,Wn="__reactContainer$"+$i,Xh="__reactEvents$"+$i,aS="__reactListeners$"+$i,lS="__reactHandles$"+$i;function fs(t){var e=t[wn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Wn]||n[wn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=vy(t);t!==null;){if(n=t[wn])return n;t=vy(t)}return e}t=n,n=t.parentNode}return null}function Wa(t){return t=t[wn]||t[Wn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ei(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function wu(t){return t[_a]||null}var Zh=[],ti=-1;function Xr(t){return{current:t}}function xe(t){0>ti||(t.current=Zh[ti],Zh[ti]=null,ti--)}function _e(t,e){ti++,Zh[ti]=t.current,t.current=e}var Br={},pt=Xr(Br),kt=Xr(!1),ws=Br;function Si(t,e){var n=t.type.contextTypes;if(!n)return Br;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ct(t){return t=t.childContextTypes,t!=null}function Rc(){xe(kt),xe(pt)}function _y(t,e,n){if(pt.current!==Br)throw Error(U(168));_e(pt,e),_e(kt,n)}function gw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,qT(t)||"Unknown",s));return Ne({},n,r)}function bc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Br,ws=pt.current,_e(pt,t),_e(kt,kt.current),!0}function wy(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=gw(t,e,ws),r.__reactInternalMemoizedMergedChildContext=t,xe(kt),xe(pt),_e(pt,t)):xe(kt),_e(kt,n)}var Ln=null,Eu=!1,Gd=!1;function yw(t){Ln===null?Ln=[t]:Ln.push(t)}function cS(t){Eu=!0,yw(t)}function Zr(){if(!Gd&&Ln!==null){Gd=!0;var t=0,e=fe;try{var n=Ln;for(fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ln=null,Eu=!1}catch(s){throw Ln!==null&&(Ln=Ln.slice(t+1)),$_(up,Zr),s}finally{fe=e,Gd=!1}}return null}var ni=[],ri=0,kc=null,Cc=0,Wt=[],Ht=0,Es=null,Vn=1,Mn="";function us(t,e){ni[ri++]=Cc,ni[ri++]=kc,kc=t,Cc=e}function vw(t,e,n){Wt[Ht++]=Vn,Wt[Ht++]=Mn,Wt[Ht++]=Es,Es=t;var r=Vn;t=Mn;var s=32-cn(r)-1;r&=~(1<<s),n+=1;var i=32-cn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Vn=1<<32-cn(e)+s|n<<s|r,Mn=i+t}else Vn=1<<i|n<<s|r,Mn=t}function _p(t){t.return!==null&&(us(t,1),vw(t,1,0))}function wp(t){for(;t===kc;)kc=ni[--ri],ni[ri]=null,Cc=ni[--ri],ni[ri]=null;for(;t===Es;)Es=Wt[--Ht],Wt[Ht]=null,Mn=Wt[--Ht],Wt[Ht]=null,Vn=Wt[--Ht],Wt[Ht]=null}var Ut=null,Mt=null,Ie=!1,rn=null;function _w(t,e){var n=qt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ey(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ut=t,Mt=kr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ut=t,Mt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Es!==null?{id:Vn,overflow:Mn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ut=t,Mt=null,!0):!1;default:return!1}}function ef(t){return(t.mode&1)!==0&&(t.flags&128)===0}function tf(t){if(Ie){var e=Mt;if(e){var n=e;if(!Ey(t,e)){if(ef(t))throw Error(U(418));e=kr(n.nextSibling);var r=Ut;e&&Ey(t,e)?_w(r,n):(t.flags=t.flags&-4097|2,Ie=!1,Ut=t)}}else{if(ef(t))throw Error(U(418));t.flags=t.flags&-4097|2,Ie=!1,Ut=t}}}function xy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ut=t}function Ll(t){if(t!==Ut)return!1;if(!Ie)return xy(t),Ie=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yh(t.type,t.memoizedProps)),e&&(e=Mt)){if(ef(t))throw ww(),Error(U(418));for(;e;)_w(t,e),e=kr(e.nextSibling)}if(xy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Mt=kr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Mt=null}}else Mt=Ut?kr(t.stateNode.nextSibling):null;return!0}function ww(){for(var t=Mt;t;)t=kr(t.nextSibling)}function Ni(){Mt=Ut=null,Ie=!1}function Ep(t){rn===null?rn=[t]:rn.push(t)}var uS=er.ReactCurrentBatchConfig;function No(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function jl(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Iy(t){var e=t._init;return e(t._payload)}function Ew(t){function e(_,v){if(t){var w=_.deletions;w===null?(_.deletions=[v],_.flags|=16):w.push(v)}}function n(_,v){if(!t)return null;for(;v!==null;)e(_,v),v=v.sibling;return null}function r(_,v){for(_=new Map;v!==null;)v.key!==null?_.set(v.key,v):_.set(v.index,v),v=v.sibling;return _}function s(_,v){return _=Dr(_,v),_.index=0,_.sibling=null,_}function i(_,v,w){return _.index=w,t?(w=_.alternate,w!==null?(w=w.index,w<v?(_.flags|=2,v):w):(_.flags|=2,v)):(_.flags|=1048576,v)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function l(_,v,w,A){return v===null||v.tag!==6?(v=th(w,_.mode,A),v.return=_,v):(v=s(v,w),v.return=_,v)}function c(_,v,w,A){var L=w.type;return L===Ys?f(_,v,w.props.children,A,w.key):v!==null&&(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===pr&&Iy(L)===v.type)?(A=s(v,w.props),A.ref=No(_,v,w),A.return=_,A):(A=oc(w.type,w.key,w.props,null,_.mode,A),A.ref=No(_,v,w),A.return=_,A)}function u(_,v,w,A){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=nh(w,_.mode,A),v.return=_,v):(v=s(v,w.children||[]),v.return=_,v)}function f(_,v,w,A,L){return v===null||v.tag!==7?(v=vs(w,_.mode,A,L),v.return=_,v):(v=s(v,w),v.return=_,v)}function p(_,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=th(""+v,_.mode,w),v.return=_,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Sl:return w=oc(v.type,v.key,v.props,null,_.mode,w),w.ref=No(_,null,v),w.return=_,w;case Qs:return v=nh(v,_.mode,w),v.return=_,v;case pr:var A=v._init;return p(_,A(v._payload),w)}if(Po(v)||Eo(v))return v=vs(v,_.mode,w,null),v.return=_,v;jl(_,v)}return null}function m(_,v,w,A){var L=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return L!==null?null:l(_,v,""+w,A);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Sl:return w.key===L?c(_,v,w,A):null;case Qs:return w.key===L?u(_,v,w,A):null;case pr:return L=w._init,m(_,v,L(w._payload),A)}if(Po(w)||Eo(w))return L!==null?null:f(_,v,w,A,null);jl(_,w)}return null}function I(_,v,w,A,L){if(typeof A=="string"&&A!==""||typeof A=="number")return _=_.get(w)||null,l(v,_,""+A,L);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Sl:return _=_.get(A.key===null?w:A.key)||null,c(v,_,A,L);case Qs:return _=_.get(A.key===null?w:A.key)||null,u(v,_,A,L);case pr:var D=A._init;return I(_,v,w,D(A._payload),L)}if(Po(A)||Eo(A))return _=_.get(w)||null,f(v,_,A,L,null);jl(v,A)}return null}function b(_,v,w,A){for(var L=null,D=null,x=v,y=v=0,T=null;x!==null&&y<w.length;y++){x.index>y?(T=x,x=null):T=x.sibling;var R=m(_,x,w[y],A);if(R===null){x===null&&(x=T);break}t&&x&&R.alternate===null&&e(_,x),v=i(R,v,y),D===null?L=R:D.sibling=R,D=R,x=T}if(y===w.length)return n(_,x),Ie&&us(_,y),L;if(x===null){for(;y<w.length;y++)x=p(_,w[y],A),x!==null&&(v=i(x,v,y),D===null?L=x:D.sibling=x,D=x);return Ie&&us(_,y),L}for(x=r(_,x);y<w.length;y++)T=I(x,_,y,w[y],A),T!==null&&(t&&T.alternate!==null&&x.delete(T.key===null?y:T.key),v=i(T,v,y),D===null?L=T:D.sibling=T,D=T);return t&&x.forEach(function(k){return e(_,k)}),Ie&&us(_,y),L}function C(_,v,w,A){var L=Eo(w);if(typeof L!="function")throw Error(U(150));if(w=L.call(w),w==null)throw Error(U(151));for(var D=L=null,x=v,y=v=0,T=null,R=w.next();x!==null&&!R.done;y++,R=w.next()){x.index>y?(T=x,x=null):T=x.sibling;var k=m(_,x,R.value,A);if(k===null){x===null&&(x=T);break}t&&x&&k.alternate===null&&e(_,x),v=i(k,v,y),D===null?L=k:D.sibling=k,D=k,x=T}if(R.done)return n(_,x),Ie&&us(_,y),L;if(x===null){for(;!R.done;y++,R=w.next())R=p(_,R.value,A),R!==null&&(v=i(R,v,y),D===null?L=R:D.sibling=R,D=R);return Ie&&us(_,y),L}for(x=r(_,x);!R.done;y++,R=w.next())R=I(x,_,y,R.value,A),R!==null&&(t&&R.alternate!==null&&x.delete(R.key===null?y:R.key),v=i(R,v,y),D===null?L=R:D.sibling=R,D=R);return t&&x.forEach(function(P){return e(_,P)}),Ie&&us(_,y),L}function S(_,v,w,A){if(typeof w=="object"&&w!==null&&w.type===Ys&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Sl:e:{for(var L=w.key,D=v;D!==null;){if(D.key===L){if(L=w.type,L===Ys){if(D.tag===7){n(_,D.sibling),v=s(D,w.props.children),v.return=_,_=v;break e}}else if(D.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===pr&&Iy(L)===D.type){n(_,D.sibling),v=s(D,w.props),v.ref=No(_,D,w),v.return=_,_=v;break e}n(_,D);break}else e(_,D);D=D.sibling}w.type===Ys?(v=vs(w.props.children,_.mode,A,w.key),v.return=_,_=v):(A=oc(w.type,w.key,w.props,null,_.mode,A),A.ref=No(_,v,w),A.return=_,_=A)}return o(_);case Qs:e:{for(D=w.key;v!==null;){if(v.key===D)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(_,v.sibling),v=s(v,w.children||[]),v.return=_,_=v;break e}else{n(_,v);break}else e(_,v);v=v.sibling}v=nh(w,_.mode,A),v.return=_,_=v}return o(_);case pr:return D=w._init,S(_,v,D(w._payload),A)}if(Po(w))return b(_,v,w,A);if(Eo(w))return C(_,v,w,A);jl(_,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(n(_,v.sibling),v=s(v,w),v.return=_,_=v):(n(_,v),v=th(w,_.mode,A),v.return=_,_=v),o(_)):n(_,v)}return S}var Ri=Ew(!0),xw=Ew(!1),Ac=Xr(null),Pc=null,si=null,xp=null;function Ip(){xp=si=Pc=null}function Tp(t){var e=Ac.current;xe(Ac),t._currentValue=e}function nf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function fi(t,e){Pc=t,xp=si=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(bt=!0),t.firstContext=null)}function Yt(t){var e=t._currentValue;if(xp!==t)if(t={context:t,memoizedValue:e,next:null},si===null){if(Pc===null)throw Error(U(308));si=t,Pc.dependencies={lanes:0,firstContext:t}}else si=si.next=t;return e}var ps=null;function Sp(t){ps===null?ps=[t]:ps.push(t)}function Iw(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Sp(e)):(n.next=s.next,s.next=n),e.interleaved=n,Hn(t,r)}function Hn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var mr=!1;function Np(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Cr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ue&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Hn(t,n)}return s=r.interleaved,s===null?(e.next=e,Sp(r)):(e.next=s.next,s.next=e),r.interleaved=e,Hn(t,n)}function ec(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,dp(t,n)}}function Ty(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Dc(t,e,n,r){var s=t.updateQueue;mr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=c))}if(i!==null){var p=s.baseState;o=0,f=u=c=null,l=i;do{var m=l.lane,I=l.eventTime;if((r&m)===m){f!==null&&(f=f.next={eventTime:I,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,C=l;switch(m=e,I=n,C.tag){case 1:if(b=C.payload,typeof b=="function"){p=b.call(I,p,m);break e}p=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=C.payload,m=typeof b=="function"?b.call(I,p,m):b,m==null)break e;p=Ne({},p,m);break e;case 2:mr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else I={eventTime:I,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=I,c=p):f=f.next=I,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(f===null&&(c=p),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Is|=o,t.lanes=o,t.memoizedState=p}}function Sy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var Ha={},In=Xr(Ha),wa=Xr(Ha),Ea=Xr(Ha);function ms(t){if(t===Ha)throw Error(U(174));return t}function Rp(t,e){switch(_e(Ea,e),_e(wa,t),_e(In,Ha),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:jh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=jh(e,t)}xe(In),_e(In,e)}function bi(){xe(In),xe(wa),xe(Ea)}function Sw(t){ms(Ea.current);var e=ms(In.current),n=jh(e,t.type);e!==n&&(_e(wa,t),_e(In,n))}function bp(t){wa.current===t&&(xe(In),xe(wa))}var Te=Xr(0);function Oc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qd=[];function kp(){for(var t=0;t<Qd.length;t++)Qd[t]._workInProgressVersionPrimary=null;Qd.length=0}var tc=er.ReactCurrentDispatcher,Yd=er.ReactCurrentBatchConfig,xs=0,Se=null,ze=null,Qe=null,Lc=!1,qo=!1,xa=0,dS=0;function at(){throw Error(U(321))}function Cp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!hn(t[n],e[n]))return!1;return!0}function Ap(t,e,n,r,s,i){if(xs=i,Se=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tc.current=t===null||t.memoizedState===null?mS:gS,t=n(r,s),qo){i=0;do{if(qo=!1,xa=0,25<=i)throw Error(U(301));i+=1,Qe=ze=null,e.updateQueue=null,tc.current=yS,t=n(r,s)}while(qo)}if(tc.current=jc,e=ze!==null&&ze.next!==null,xs=0,Qe=ze=Se=null,Lc=!1,e)throw Error(U(300));return t}function Pp(){var t=xa!==0;return xa=0,t}function vn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?Se.memoizedState=Qe=t:Qe=Qe.next=t,Qe}function Jt(){if(ze===null){var t=Se.alternate;t=t!==null?t.memoizedState:null}else t=ze.next;var e=Qe===null?Se.memoizedState:Qe.next;if(e!==null)Qe=e,ze=t;else{if(t===null)throw Error(U(310));ze=t,t={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},Qe===null?Se.memoizedState=Qe=t:Qe=Qe.next=t}return Qe}function Ia(t,e){return typeof e=="function"?e(t):e}function Jd(t){var e=Jt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=ze,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var f=u.lane;if((xs&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var p={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=p,o=r):c=c.next=p,Se.lanes|=f,Is|=f}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,hn(r,e.memoizedState)||(bt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Se.lanes|=i,Is|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Xd(t){var e=Jt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);hn(i,e.memoizedState)||(bt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Nw(){}function Rw(t,e){var n=Se,r=Jt(),s=e(),i=!hn(r.memoizedState,s);if(i&&(r.memoizedState=s,bt=!0),r=r.queue,Dp(Cw.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Qe!==null&&Qe.memoizedState.tag&1){if(n.flags|=2048,Ta(9,kw.bind(null,n,r,s,e),void 0,null),Ze===null)throw Error(U(349));xs&30||bw(n,e,s)}return s}function bw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function kw(t,e,n,r){e.value=n,e.getSnapshot=r,Aw(e)&&Pw(t)}function Cw(t,e,n){return n(function(){Aw(e)&&Pw(t)})}function Aw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!hn(t,n)}catch{return!0}}function Pw(t){var e=Hn(t,1);e!==null&&un(e,t,1,-1)}function Ny(t){var e=vn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:t},e.queue=t,t=t.dispatch=pS.bind(null,Se,t),[e.memoizedState,t]}function Ta(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Dw(){return Jt().memoizedState}function nc(t,e,n,r){var s=vn();Se.flags|=t,s.memoizedState=Ta(1|e,n,void 0,r===void 0?null:r)}function xu(t,e,n,r){var s=Jt();r=r===void 0?null:r;var i=void 0;if(ze!==null){var o=ze.memoizedState;if(i=o.destroy,r!==null&&Cp(r,o.deps)){s.memoizedState=Ta(e,n,i,r);return}}Se.flags|=t,s.memoizedState=Ta(1|e,n,i,r)}function Ry(t,e){return nc(8390656,8,t,e)}function Dp(t,e){return xu(2048,8,t,e)}function Ow(t,e){return xu(4,2,t,e)}function Lw(t,e){return xu(4,4,t,e)}function jw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Vw(t,e,n){return n=n!=null?n.concat([t]):null,xu(4,4,jw.bind(null,e,t),n)}function Op(){}function Mw(t,e){var n=Jt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Fw(t,e){var n=Jt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Uw(t,e,n){return xs&21?(hn(n,e)||(n=H_(),Se.lanes|=n,Is|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,bt=!0),t.memoizedState=n)}function hS(t,e){var n=fe;fe=n!==0&&4>n?n:4,t(!0);var r=Yd.transition;Yd.transition={};try{t(!1),e()}finally{fe=n,Yd.transition=r}}function zw(){return Jt().memoizedState}function fS(t,e,n){var r=Pr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$w(t))Bw(e,n);else if(n=Iw(t,e,n,r),n!==null){var s=_t();un(n,t,r,s),Ww(n,e,r)}}function pS(t,e,n){var r=Pr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($w(t))Bw(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,hn(l,o)){var c=e.interleaved;c===null?(s.next=s,Sp(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=Iw(t,e,s,r),n!==null&&(s=_t(),un(n,t,r,s),Ww(n,e,r))}}function $w(t){var e=t.alternate;return t===Se||e!==null&&e===Se}function Bw(t,e){qo=Lc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ww(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,dp(t,n)}}var jc={readContext:Yt,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},mS={readContext:Yt,useCallback:function(t,e){return vn().memoizedState=[t,e===void 0?null:e],t},useContext:Yt,useEffect:Ry,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,nc(4194308,4,jw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return nc(4194308,4,t,e)},useInsertionEffect:function(t,e){return nc(4,2,t,e)},useMemo:function(t,e){var n=vn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=vn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=fS.bind(null,Se,t),[r.memoizedState,t]},useRef:function(t){var e=vn();return t={current:t},e.memoizedState=t},useState:Ny,useDebugValue:Op,useDeferredValue:function(t){return vn().memoizedState=t},useTransition:function(){var t=Ny(!1),e=t[0];return t=hS.bind(null,t[1]),vn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Se,s=vn();if(Ie){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Ze===null)throw Error(U(349));xs&30||bw(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Ry(Cw.bind(null,r,i,t),[t]),r.flags|=2048,Ta(9,kw.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=vn(),e=Ze.identifierPrefix;if(Ie){var n=Mn,r=Vn;n=(r&~(1<<32-cn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=xa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=dS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},gS={readContext:Yt,useCallback:Mw,useContext:Yt,useEffect:Dp,useImperativeHandle:Vw,useInsertionEffect:Ow,useLayoutEffect:Lw,useMemo:Fw,useReducer:Jd,useRef:Dw,useState:function(){return Jd(Ia)},useDebugValue:Op,useDeferredValue:function(t){var e=Jt();return Uw(e,ze.memoizedState,t)},useTransition:function(){var t=Jd(Ia)[0],e=Jt().memoizedState;return[t,e]},useMutableSource:Nw,useSyncExternalStore:Rw,useId:zw,unstable_isNewReconciler:!1},yS={readContext:Yt,useCallback:Mw,useContext:Yt,useEffect:Dp,useImperativeHandle:Vw,useInsertionEffect:Ow,useLayoutEffect:Lw,useMemo:Fw,useReducer:Xd,useRef:Dw,useState:function(){return Xd(Ia)},useDebugValue:Op,useDeferredValue:function(t){var e=Jt();return ze===null?e.memoizedState=t:Uw(e,ze.memoizedState,t)},useTransition:function(){var t=Xd(Ia)[0],e=Jt().memoizedState;return[t,e]},useMutableSource:Nw,useSyncExternalStore:Rw,useId:zw,unstable_isNewReconciler:!1};function tn(t,e){if(t&&t.defaultProps){e=Ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function rf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Iu={isMounted:function(t){return(t=t._reactInternals)?Ds(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=_t(),s=Pr(t),i=zn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Cr(t,i,s),e!==null&&(un(e,t,s,r),ec(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=_t(),s=Pr(t),i=zn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Cr(t,i,s),e!==null&&(un(e,t,s,r),ec(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=_t(),r=Pr(t),s=zn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Cr(t,s,r),e!==null&&(un(e,t,r,n),ec(e,t,r))}};function by(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ga(n,r)||!ga(s,i):!0}function Hw(t,e,n){var r=!1,s=Br,i=e.contextType;return typeof i=="object"&&i!==null?i=Yt(i):(s=Ct(e)?ws:pt.current,r=e.contextTypes,i=(r=r!=null)?Si(t,s):Br),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Iu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function ky(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Iu.enqueueReplaceState(e,e.state,null)}function sf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Np(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Yt(i):(i=Ct(e)?ws:pt.current,s.context=Si(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(rf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Iu.enqueueReplaceState(s,s.state,null),Dc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ki(t,e){try{var n="",r=e;do n+=HT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Zd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function of(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var vS=typeof WeakMap=="function"?WeakMap:Map;function qw(t,e,n){n=zn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Mc||(Mc=!0,gf=r),of(t,e)},n}function Kw(t,e,n){n=zn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){of(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){of(t,e),typeof r!="function"&&(Ar===null?Ar=new Set([this]):Ar.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Cy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new vS;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=PS.bind(null,t,e,n),e.then(t,t))}function Ay(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Py(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=zn(-1,1),e.tag=2,Cr(n,e,1))),n.lanes|=1),t)}var _S=er.ReactCurrentOwner,bt=!1;function vt(t,e,n,r){e.child=t===null?xw(e,null,n,r):Ri(e,t.child,n,r)}function Dy(t,e,n,r,s){n=n.render;var i=e.ref;return fi(e,s),r=Ap(t,e,n,r,i,s),n=Pp(),t!==null&&!bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,qn(t,e,s)):(Ie&&n&&_p(e),e.flags|=1,vt(t,e,r,s),e.child)}function Oy(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!$p(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Gw(t,e,i,r,s)):(t=oc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ga,n(o,r)&&t.ref===e.ref)return qn(t,e,s)}return e.flags|=1,t=Dr(i,r),t.ref=e.ref,t.return=e,e.child=t}function Gw(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ga(i,r)&&t.ref===e.ref)if(bt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(bt=!0);else return e.lanes=t.lanes,qn(t,e,s)}return af(t,e,n,r,s)}function Qw(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(oi,jt),jt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_e(oi,jt),jt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,_e(oi,jt),jt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,_e(oi,jt),jt|=r;return vt(t,e,s,n),e.child}function Yw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function af(t,e,n,r,s){var i=Ct(n)?ws:pt.current;return i=Si(e,i),fi(e,s),n=Ap(t,e,n,r,i,s),r=Pp(),t!==null&&!bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,qn(t,e,s)):(Ie&&r&&_p(e),e.flags|=1,vt(t,e,n,s),e.child)}function Ly(t,e,n,r,s){if(Ct(n)){var i=!0;bc(e)}else i=!1;if(fi(e,s),e.stateNode===null)rc(t,e),Hw(e,n,r),sf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Yt(u):(u=Ct(n)?ws:pt.current,u=Si(e,u));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&ky(e,o,r,u),mr=!1;var m=e.memoizedState;o.state=m,Dc(e,r,o,s),c=e.memoizedState,l!==r||m!==c||kt.current||mr?(typeof f=="function"&&(rf(e,n,f,r),c=e.memoizedState),(l=mr||by(e,n,l,r,m,c,u))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Tw(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:tn(e.type,l),o.props=u,p=e.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Yt(c):(c=Ct(n)?ws:pt.current,c=Si(e,c));var I=n.getDerivedStateFromProps;(f=typeof I=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||m!==c)&&ky(e,o,r,c),mr=!1,m=e.memoizedState,o.state=m,Dc(e,r,o,s);var b=e.memoizedState;l!==p||m!==b||kt.current||mr?(typeof I=="function"&&(rf(e,n,I,r),b=e.memoizedState),(u=mr||by(e,n,u,r,m,b,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return lf(t,e,n,r,i,s)}function lf(t,e,n,r,s,i){Yw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&wy(e,n,!1),qn(t,e,i);r=e.stateNode,_S.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ri(e,t.child,null,i),e.child=Ri(e,null,l,i)):vt(t,e,l,i),e.memoizedState=r.state,s&&wy(e,n,!0),e.child}function Jw(t){var e=t.stateNode;e.pendingContext?_y(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_y(t,e.context,!1),Rp(t,e.containerInfo)}function jy(t,e,n,r,s){return Ni(),Ep(s),e.flags|=256,vt(t,e,n,r),e.child}var cf={dehydrated:null,treeContext:null,retryLane:0};function uf(t){return{baseLanes:t,cachePool:null,transitions:null}}function Xw(t,e,n){var r=e.pendingProps,s=Te.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),_e(Te,s&1),t===null)return tf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Nu(o,r,0,null),t=vs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=uf(n),e.memoizedState=cf,t):Lp(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return wS(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Dr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Dr(l,i):(i=vs(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?uf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=cf,r}return i=t.child,t=i.sibling,r=Dr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Lp(t,e){return e=Nu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vl(t,e,n,r){return r!==null&&Ep(r),Ri(e,t.child,null,n),t=Lp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function wS(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Zd(Error(U(422))),Vl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Nu({mode:"visible",children:r.children},s,0,null),i=vs(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ri(e,t.child,null,o),e.child.memoizedState=uf(o),e.memoizedState=cf,i);if(!(e.mode&1))return Vl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(U(419)),r=Zd(i,r,void 0),Vl(t,e,o,r)}if(l=(o&t.childLanes)!==0,bt||l){if(r=Ze,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Hn(t,s),un(r,t,s,-1))}return zp(),r=Zd(Error(U(421))),Vl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=DS.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Mt=kr(s.nextSibling),Ut=e,Ie=!0,rn=null,t!==null&&(Wt[Ht++]=Vn,Wt[Ht++]=Mn,Wt[Ht++]=Es,Vn=t.id,Mn=t.overflow,Es=e),e=Lp(e,r.children),e.flags|=4096,e)}function Vy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),nf(t.return,e,n)}function eh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Zw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(vt(t,e,r.children,n),r=Te.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Vy(t,n,e);else if(t.tag===19)Vy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(_e(Te,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Oc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),eh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Oc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}eh(e,!0,n,null,i);break;case"together":eh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function rc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function qn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Is|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Dr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Dr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ES(t,e,n){switch(e.tag){case 3:Jw(e),Ni();break;case 5:Sw(e);break;case 1:Ct(e.type)&&bc(e);break;case 4:Rp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;_e(Ac,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(_e(Te,Te.current&1),e.flags|=128,null):n&e.child.childLanes?Xw(t,e,n):(_e(Te,Te.current&1),t=qn(t,e,n),t!==null?t.sibling:null);_e(Te,Te.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Zw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),_e(Te,Te.current),r)break;return null;case 22:case 23:return e.lanes=0,Qw(t,e,n)}return qn(t,e,n)}var e1,df,t1,n1;e1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};df=function(){};t1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ms(In.current);var i=null;switch(n){case"input":s=Ph(t,s),r=Ph(t,r),i=[];break;case"select":s=Ne({},s,{value:void 0}),r=Ne({},r,{value:void 0}),i=[];break;case"textarea":s=Lh(t,s),r=Lh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Nc)}Vh(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ca.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ca.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ee("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};n1=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ro(t,e){if(!Ie)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function xS(t,e,n){var r=e.pendingProps;switch(wp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(e),null;case 1:return Ct(e.type)&&Rc(),lt(e),null;case 3:return r=e.stateNode,bi(),xe(kt),xe(pt),kp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ll(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,rn!==null&&(_f(rn),rn=null))),df(t,e),lt(e),null;case 5:bp(e);var s=ms(Ea.current);if(n=e.type,t!==null&&e.stateNode!=null)t1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return lt(e),null}if(t=ms(In.current),Ll(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[wn]=e,r[_a]=i,t=(e.mode&1)!==0,n){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(s=0;s<Oo.length;s++)Ee(Oo[s],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":qg(r,i),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ee("invalid",r);break;case"textarea":Gg(r,i),Ee("invalid",r)}Vh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ol(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ol(r.textContent,l,t),s=["children",""+l]):ca.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ee("scroll",r)}switch(n){case"input":Nl(r),Kg(r,i,!0);break;case"textarea":Nl(r),Qg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Nc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=C_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[wn]=e,t[_a]=r,e1(t,e,!1,!1),e.stateNode=t;e:{switch(o=Mh(n,r),n){case"dialog":Ee("cancel",t),Ee("close",t),s=r;break;case"iframe":case"object":case"embed":Ee("load",t),s=r;break;case"video":case"audio":for(s=0;s<Oo.length;s++)Ee(Oo[s],t);s=r;break;case"source":Ee("error",t),s=r;break;case"img":case"image":case"link":Ee("error",t),Ee("load",t),s=r;break;case"details":Ee("toggle",t),s=r;break;case"input":qg(t,r),s=Ph(t,r),Ee("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ne({},r,{value:void 0}),Ee("invalid",t);break;case"textarea":Gg(t,r),s=Lh(t,r),Ee("invalid",t);break;default:s=r}Vh(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?D_(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&A_(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ua(t,c):typeof c=="number"&&ua(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ca.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ee("scroll",t):c!=null&&ip(t,i,c,o))}switch(n){case"input":Nl(t),Kg(t,r,!1);break;case"textarea":Nl(t),Qg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+$r(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ci(t,!!r.multiple,i,!1):r.defaultValue!=null&&ci(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Nc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return lt(e),null;case 6:if(t&&e.stateNode!=null)n1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=ms(Ea.current),ms(In.current),Ll(e)){if(r=e.stateNode,n=e.memoizedProps,r[wn]=e,(i=r.nodeValue!==n)&&(t=Ut,t!==null))switch(t.tag){case 3:Ol(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ol(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[wn]=e,e.stateNode=r}return lt(e),null;case 13:if(xe(Te),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ie&&Mt!==null&&e.mode&1&&!(e.flags&128))ww(),Ni(),e.flags|=98560,i=!1;else if(i=Ll(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[wn]=e}else Ni(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;lt(e),i=!1}else rn!==null&&(_f(rn),rn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Te.current&1?$e===0&&($e=3):zp())),e.updateQueue!==null&&(e.flags|=4),lt(e),null);case 4:return bi(),df(t,e),t===null&&ya(e.stateNode.containerInfo),lt(e),null;case 10:return Tp(e.type._context),lt(e),null;case 17:return Ct(e.type)&&Rc(),lt(e),null;case 19:if(xe(Te),i=e.memoizedState,i===null)return lt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ro(i,!1);else{if($e!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Oc(t),o!==null){for(e.flags|=128,Ro(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _e(Te,Te.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ae()>Ci&&(e.flags|=128,r=!0,Ro(i,!1),e.lanes=4194304)}else{if(!r)if(t=Oc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ro(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ie)return lt(e),null}else 2*Ae()-i.renderingStartTime>Ci&&n!==1073741824&&(e.flags|=128,r=!0,Ro(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ae(),e.sibling=null,n=Te.current,_e(Te,r?n&1|2:n&1),e):(lt(e),null);case 22:case 23:return Up(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?jt&1073741824&&(lt(e),e.subtreeFlags&6&&(e.flags|=8192)):lt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function IS(t,e){switch(wp(e),e.tag){case 1:return Ct(e.type)&&Rc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return bi(),xe(kt),xe(pt),kp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return bp(e),null;case 13:if(xe(Te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Ni()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xe(Te),null;case 4:return bi(),null;case 10:return Tp(e.type._context),null;case 22:case 23:return Up(),null;case 24:return null;default:return null}}var Ml=!1,dt=!1,TS=typeof WeakSet=="function"?WeakSet:Set,q=null;function ii(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ke(t,e,r)}else n.current=null}function hf(t,e,n){try{n()}catch(r){ke(t,e,r)}}var My=!1;function SS(t,e){if(Gh=Ic,t=aw(),vp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,f=0,p=t,m=null;t:for(;;){for(var I;p!==n||s!==0&&p.nodeType!==3||(l=o+s),p!==i||r!==0&&p.nodeType!==3||(c=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(I=p.firstChild)!==null;)m=p,p=I;for(;;){if(p===t)break t;if(m===n&&++u===s&&(l=o),m===i&&++f===r&&(c=o),(I=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=I}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qh={focusedElem:t,selectionRange:n},Ic=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var C=b.memoizedProps,S=b.memoizedState,_=e.stateNode,v=_.getSnapshotBeforeUpdate(e.elementType===e.type?C:tn(e.type,C),S);_.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(A){ke(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return b=My,My=!1,b}function Ko(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&hf(e,n,i)}s=s.next}while(s!==r)}}function Tu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ff(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function r1(t){var e=t.alternate;e!==null&&(t.alternate=null,r1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[wn],delete e[_a],delete e[Xh],delete e[aS],delete e[lS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function s1(t){return t.tag===5||t.tag===3||t.tag===4}function Fy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||s1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function pf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Nc));else if(r!==4&&(t=t.child,t!==null))for(pf(t,e,n),t=t.sibling;t!==null;)pf(t,e,n),t=t.sibling}function mf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(mf(t,e,n),t=t.sibling;t!==null;)mf(t,e,n),t=t.sibling}var nt=null,nn=!1;function hr(t,e,n){for(n=n.child;n!==null;)i1(t,e,n),n=n.sibling}function i1(t,e,n){if(xn&&typeof xn.onCommitFiberUnmount=="function")try{xn.onCommitFiberUnmount(gu,n)}catch{}switch(n.tag){case 5:dt||ii(n,e);case 6:var r=nt,s=nn;nt=null,hr(t,e,n),nt=r,nn=s,nt!==null&&(nn?(t=nt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):nt.removeChild(n.stateNode));break;case 18:nt!==null&&(nn?(t=nt,n=n.stateNode,t.nodeType===8?Kd(t.parentNode,n):t.nodeType===1&&Kd(t,n),pa(t)):Kd(nt,n.stateNode));break;case 4:r=nt,s=nn,nt=n.stateNode.containerInfo,nn=!0,hr(t,e,n),nt=r,nn=s;break;case 0:case 11:case 14:case 15:if(!dt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&hf(n,e,o),s=s.next}while(s!==r)}hr(t,e,n);break;case 1:if(!dt&&(ii(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ke(n,e,l)}hr(t,e,n);break;case 21:hr(t,e,n);break;case 22:n.mode&1?(dt=(r=dt)||n.memoizedState!==null,hr(t,e,n),dt=r):hr(t,e,n);break;default:hr(t,e,n)}}function Uy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new TS),e.forEach(function(r){var s=OS.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function en(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:nt=l.stateNode,nn=!1;break e;case 3:nt=l.stateNode.containerInfo,nn=!0;break e;case 4:nt=l.stateNode.containerInfo,nn=!0;break e}l=l.return}if(nt===null)throw Error(U(160));i1(i,o,s),nt=null,nn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ke(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)o1(e,t),e=e.sibling}function o1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(en(e,t),yn(t),r&4){try{Ko(3,t,t.return),Tu(3,t)}catch(C){ke(t,t.return,C)}try{Ko(5,t,t.return)}catch(C){ke(t,t.return,C)}}break;case 1:en(e,t),yn(t),r&512&&n!==null&&ii(n,n.return);break;case 5:if(en(e,t),yn(t),r&512&&n!==null&&ii(n,n.return),t.flags&32){var s=t.stateNode;try{ua(s,"")}catch(C){ke(t,t.return,C)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&b_(s,i),Mh(l,o);var u=Mh(l,i);for(o=0;o<c.length;o+=2){var f=c[o],p=c[o+1];f==="style"?D_(s,p):f==="dangerouslySetInnerHTML"?A_(s,p):f==="children"?ua(s,p):ip(s,f,p,u)}switch(l){case"input":Dh(s,i);break;case"textarea":k_(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var I=i.value;I!=null?ci(s,!!i.multiple,I,!1):m!==!!i.multiple&&(i.defaultValue!=null?ci(s,!!i.multiple,i.defaultValue,!0):ci(s,!!i.multiple,i.multiple?[]:"",!1))}s[_a]=i}catch(C){ke(t,t.return,C)}}break;case 6:if(en(e,t),yn(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(C){ke(t,t.return,C)}}break;case 3:if(en(e,t),yn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{pa(e.containerInfo)}catch(C){ke(t,t.return,C)}break;case 4:en(e,t),yn(t);break;case 13:en(e,t),yn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Mp=Ae())),r&4&&Uy(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(dt=(u=dt)||f,en(e,t),dt=u):en(e,t),yn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!f&&t.mode&1)for(q=t,f=t.child;f!==null;){for(p=q=f;q!==null;){switch(m=q,I=m.child,m.tag){case 0:case 11:case 14:case 15:Ko(4,m,m.return);break;case 1:ii(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(C){ke(r,n,C)}}break;case 5:ii(m,m.return);break;case 22:if(m.memoizedState!==null){$y(p);continue}}I!==null?(I.return=m,q=I):$y(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{s=p.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=P_("display",o))}catch(C){ke(t,t.return,C)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(C){ke(t,t.return,C)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:en(e,t),yn(t),r&4&&Uy(t);break;case 21:break;default:en(e,t),yn(t)}}function yn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(s1(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ua(s,""),r.flags&=-33);var i=Fy(t);mf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Fy(t);pf(t,l,o);break;default:throw Error(U(161))}}catch(c){ke(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function NS(t,e,n){q=t,a1(t)}function a1(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var s=q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ml;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||dt;l=Ml;var u=dt;if(Ml=o,(dt=c)&&!u)for(q=s;q!==null;)o=q,c=o.child,o.tag===22&&o.memoizedState!==null?By(s):c!==null?(c.return=o,q=c):By(s);for(;i!==null;)q=i,a1(i),i=i.sibling;q=s,Ml=l,dt=u}zy(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,q=i):zy(t)}}function zy(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dt||Tu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!dt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:tn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Sy(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Sy(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&pa(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}dt||e.flags&512&&ff(e)}catch(m){ke(e,e.return,m)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function $y(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function By(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Tu(4,e)}catch(c){ke(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){ke(e,s,c)}}var i=e.return;try{ff(e)}catch(c){ke(e,i,c)}break;case 5:var o=e.return;try{ff(e)}catch(c){ke(e,o,c)}}}catch(c){ke(e,e.return,c)}if(e===t){q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,q=l;break}q=e.return}}var RS=Math.ceil,Vc=er.ReactCurrentDispatcher,jp=er.ReactCurrentOwner,Kt=er.ReactCurrentBatchConfig,ue=0,Ze=null,je=null,st=0,jt=0,oi=Xr(0),$e=0,Sa=null,Is=0,Su=0,Vp=0,Go=null,Nt=null,Mp=0,Ci=1/0,On=null,Mc=!1,gf=null,Ar=null,Fl=!1,xr=null,Fc=0,Qo=0,yf=null,sc=-1,ic=0;function _t(){return ue&6?Ae():sc!==-1?sc:sc=Ae()}function Pr(t){return t.mode&1?ue&2&&st!==0?st&-st:uS.transition!==null?(ic===0&&(ic=H_()),ic):(t=fe,t!==0||(t=window.event,t=t===void 0?16:X_(t.type)),t):1}function un(t,e,n,r){if(50<Qo)throw Qo=0,yf=null,Error(U(185));$a(t,n,r),(!(ue&2)||t!==Ze)&&(t===Ze&&(!(ue&2)&&(Su|=n),$e===4&&yr(t,st)),At(t,r),n===1&&ue===0&&!(e.mode&1)&&(Ci=Ae()+500,Eu&&Zr()))}function At(t,e){var n=t.callbackNode;u2(t,e);var r=xc(t,t===Ze?st:0);if(r===0)n!==null&&Xg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Xg(n),e===1)t.tag===0?cS(Wy.bind(null,t)):yw(Wy.bind(null,t)),iS(function(){!(ue&6)&&Zr()}),n=null;else{switch(q_(r)){case 1:n=up;break;case 4:n=B_;break;case 16:n=Ec;break;case 536870912:n=W_;break;default:n=Ec}n=m1(n,l1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function l1(t,e){if(sc=-1,ic=0,ue&6)throw Error(U(327));var n=t.callbackNode;if(pi()&&t.callbackNode!==n)return null;var r=xc(t,t===Ze?st:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Uc(t,r);else{e=r;var s=ue;ue|=2;var i=u1();(Ze!==t||st!==e)&&(On=null,Ci=Ae()+500,ys(t,e));do try{CS();break}catch(l){c1(t,l)}while(!0);Ip(),Vc.current=i,ue=s,je!==null?e=0:(Ze=null,st=0,e=$e)}if(e!==0){if(e===2&&(s=Bh(t),s!==0&&(r=s,e=vf(t,s))),e===1)throw n=Sa,ys(t,0),yr(t,r),At(t,Ae()),n;if(e===6)yr(t,r);else{if(s=t.current.alternate,!(r&30)&&!bS(s)&&(e=Uc(t,r),e===2&&(i=Bh(t),i!==0&&(r=i,e=vf(t,i))),e===1))throw n=Sa,ys(t,0),yr(t,r),At(t,Ae()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:ds(t,Nt,On);break;case 3:if(yr(t,r),(r&130023424)===r&&(e=Mp+500-Ae(),10<e)){if(xc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){_t(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Jh(ds.bind(null,t,Nt,On),e);break}ds(t,Nt,On);break;case 4:if(yr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-cn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ae()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*RS(r/1960))-r,10<r){t.timeoutHandle=Jh(ds.bind(null,t,Nt,On),r);break}ds(t,Nt,On);break;case 5:ds(t,Nt,On);break;default:throw Error(U(329))}}}return At(t,Ae()),t.callbackNode===n?l1.bind(null,t):null}function vf(t,e){var n=Go;return t.current.memoizedState.isDehydrated&&(ys(t,e).flags|=256),t=Uc(t,e),t!==2&&(e=Nt,Nt=n,e!==null&&_f(e)),t}function _f(t){Nt===null?Nt=t:Nt.push.apply(Nt,t)}function bS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!hn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function yr(t,e){for(e&=~Vp,e&=~Su,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-cn(e),r=1<<n;t[n]=-1,e&=~r}}function Wy(t){if(ue&6)throw Error(U(327));pi();var e=xc(t,0);if(!(e&1))return At(t,Ae()),null;var n=Uc(t,e);if(t.tag!==0&&n===2){var r=Bh(t);r!==0&&(e=r,n=vf(t,r))}if(n===1)throw n=Sa,ys(t,0),yr(t,e),At(t,Ae()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ds(t,Nt,On),At(t,Ae()),null}function Fp(t,e){var n=ue;ue|=1;try{return t(e)}finally{ue=n,ue===0&&(Ci=Ae()+500,Eu&&Zr())}}function Ts(t){xr!==null&&xr.tag===0&&!(ue&6)&&pi();var e=ue;ue|=1;var n=Kt.transition,r=fe;try{if(Kt.transition=null,fe=1,t)return t()}finally{fe=r,Kt.transition=n,ue=e,!(ue&6)&&Zr()}}function Up(){jt=oi.current,xe(oi)}function ys(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,sS(n)),je!==null)for(n=je.return;n!==null;){var r=n;switch(wp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Rc();break;case 3:bi(),xe(kt),xe(pt),kp();break;case 5:bp(r);break;case 4:bi();break;case 13:xe(Te);break;case 19:xe(Te);break;case 10:Tp(r.type._context);break;case 22:case 23:Up()}n=n.return}if(Ze=t,je=t=Dr(t.current,null),st=jt=e,$e=0,Sa=null,Vp=Su=Is=0,Nt=Go=null,ps!==null){for(e=0;e<ps.length;e++)if(n=ps[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ps=null}return t}function c1(t,e){do{var n=je;try{if(Ip(),tc.current=jc,Lc){for(var r=Se.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Lc=!1}if(xs=0,Qe=ze=Se=null,qo=!1,xa=0,jp.current=null,n===null||n.return===null){$e=1,Sa=e,je=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=st,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var I=Ay(o);if(I!==null){I.flags&=-257,Py(I,o,l,i,e),I.mode&1&&Cy(i,u,e),e=I,c=u;var b=e.updateQueue;if(b===null){var C=new Set;C.add(c),e.updateQueue=C}else b.add(c);break e}else{if(!(e&1)){Cy(i,u,e),zp();break e}c=Error(U(426))}}else if(Ie&&l.mode&1){var S=Ay(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Py(S,o,l,i,e),Ep(ki(c,l));break e}}i=c=ki(c,l),$e!==4&&($e=2),Go===null?Go=[i]:Go.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=qw(i,c,e);Ty(i,_);break e;case 1:l=c;var v=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ar===null||!Ar.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var A=Kw(i,l,e);Ty(i,A);break e}}i=i.return}while(i!==null)}h1(n)}catch(L){e=L,je===n&&n!==null&&(je=n=n.return);continue}break}while(!0)}function u1(){var t=Vc.current;return Vc.current=jc,t===null?jc:t}function zp(){($e===0||$e===3||$e===2)&&($e=4),Ze===null||!(Is&268435455)&&!(Su&268435455)||yr(Ze,st)}function Uc(t,e){var n=ue;ue|=2;var r=u1();(Ze!==t||st!==e)&&(On=null,ys(t,e));do try{kS();break}catch(s){c1(t,s)}while(!0);if(Ip(),ue=n,Vc.current=r,je!==null)throw Error(U(261));return Ze=null,st=0,$e}function kS(){for(;je!==null;)d1(je)}function CS(){for(;je!==null&&!t2();)d1(je)}function d1(t){var e=p1(t.alternate,t,jt);t.memoizedProps=t.pendingProps,e===null?h1(t):je=e,jp.current=null}function h1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=IS(n,e),n!==null){n.flags&=32767,je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{$e=6,je=null;return}}else if(n=xS(n,e,jt),n!==null){je=n;return}if(e=e.sibling,e!==null){je=e;return}je=e=t}while(e!==null);$e===0&&($e=5)}function ds(t,e,n){var r=fe,s=Kt.transition;try{Kt.transition=null,fe=1,AS(t,e,n,r)}finally{Kt.transition=s,fe=r}return null}function AS(t,e,n,r){do pi();while(xr!==null);if(ue&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(d2(t,i),t===Ze&&(je=Ze=null,st=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fl||(Fl=!0,m1(Ec,function(){return pi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Kt.transition,Kt.transition=null;var o=fe;fe=1;var l=ue;ue|=4,jp.current=null,SS(t,n),o1(n,t),J2(Qh),Ic=!!Gh,Qh=Gh=null,t.current=n,NS(n),n2(),ue=l,fe=o,Kt.transition=i}else t.current=n;if(Fl&&(Fl=!1,xr=t,Fc=s),i=t.pendingLanes,i===0&&(Ar=null),i2(n.stateNode),At(t,Ae()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Mc)throw Mc=!1,t=gf,gf=null,t;return Fc&1&&t.tag!==0&&pi(),i=t.pendingLanes,i&1?t===yf?Qo++:(Qo=0,yf=t):Qo=0,Zr(),null}function pi(){if(xr!==null){var t=q_(Fc),e=Kt.transition,n=fe;try{if(Kt.transition=null,fe=16>t?16:t,xr===null)var r=!1;else{if(t=xr,xr=null,Fc=0,ue&6)throw Error(U(331));var s=ue;for(ue|=4,q=t.current;q!==null;){var i=q,o=i.child;if(q.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(q=u;q!==null;){var f=q;switch(f.tag){case 0:case 11:case 15:Ko(8,f,i)}var p=f.child;if(p!==null)p.return=f,q=p;else for(;q!==null;){f=q;var m=f.sibling,I=f.return;if(r1(f),f===u){q=null;break}if(m!==null){m.return=I,q=m;break}q=I}}}var b=i.alternate;if(b!==null){var C=b.child;if(C!==null){b.child=null;do{var S=C.sibling;C.sibling=null,C=S}while(C!==null)}}q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,q=o;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ko(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,q=_;break e}q=i.return}}var v=t.current;for(q=v;q!==null;){o=q;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,q=w;else e:for(o=v;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Tu(9,l)}}catch(L){ke(l,l.return,L)}if(l===o){q=null;break e}var A=l.sibling;if(A!==null){A.return=l.return,q=A;break e}q=l.return}}if(ue=s,Zr(),xn&&typeof xn.onPostCommitFiberRoot=="function")try{xn.onPostCommitFiberRoot(gu,t)}catch{}r=!0}return r}finally{fe=n,Kt.transition=e}}return!1}function Hy(t,e,n){e=ki(n,e),e=qw(t,e,1),t=Cr(t,e,1),e=_t(),t!==null&&($a(t,1,e),At(t,e))}function ke(t,e,n){if(t.tag===3)Hy(t,t,n);else for(;e!==null;){if(e.tag===3){Hy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ar===null||!Ar.has(r))){t=ki(n,t),t=Kw(e,t,1),e=Cr(e,t,1),t=_t(),e!==null&&($a(e,1,t),At(e,t));break}}e=e.return}}function PS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=_t(),t.pingedLanes|=t.suspendedLanes&n,Ze===t&&(st&n)===n&&($e===4||$e===3&&(st&130023424)===st&&500>Ae()-Mp?ys(t,0):Vp|=n),At(t,e)}function f1(t,e){e===0&&(t.mode&1?(e=kl,kl<<=1,!(kl&130023424)&&(kl=4194304)):e=1);var n=_t();t=Hn(t,e),t!==null&&($a(t,e,n),At(t,n))}function DS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),f1(t,n)}function OS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),f1(t,n)}var p1;p1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||kt.current)bt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return bt=!1,ES(t,e,n);bt=!!(t.flags&131072)}else bt=!1,Ie&&e.flags&1048576&&vw(e,Cc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;rc(t,e),t=e.pendingProps;var s=Si(e,pt.current);fi(e,n),s=Ap(null,e,r,t,s,n);var i=Pp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ct(r)?(i=!0,bc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Np(e),s.updater=Iu,e.stateNode=s,s._reactInternals=e,sf(e,r,t,n),e=lf(null,e,r,!0,i,n)):(e.tag=0,Ie&&i&&_p(e),vt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(rc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=jS(r),t=tn(r,t),s){case 0:e=af(null,e,r,t,n);break e;case 1:e=Ly(null,e,r,t,n);break e;case 11:e=Dy(null,e,r,t,n);break e;case 14:e=Oy(null,e,r,tn(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),af(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),Ly(t,e,r,s,n);case 3:e:{if(Jw(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Tw(t,e),Dc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ki(Error(U(423)),e),e=jy(t,e,r,n,s);break e}else if(r!==s){s=ki(Error(U(424)),e),e=jy(t,e,r,n,s);break e}else for(Mt=kr(e.stateNode.containerInfo.firstChild),Ut=e,Ie=!0,rn=null,n=xw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ni(),r===s){e=qn(t,e,n);break e}vt(t,e,r,n)}e=e.child}return e;case 5:return Sw(e),t===null&&tf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Yh(r,s)?o=null:i!==null&&Yh(r,i)&&(e.flags|=32),Yw(t,e),vt(t,e,o,n),e.child;case 6:return t===null&&tf(e),null;case 13:return Xw(t,e,n);case 4:return Rp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ri(e,null,r,n):vt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),Dy(t,e,r,s,n);case 7:return vt(t,e,e.pendingProps,n),e.child;case 8:return vt(t,e,e.pendingProps.children,n),e.child;case 12:return vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,_e(Ac,r._currentValue),r._currentValue=o,i!==null)if(hn(i.value,o)){if(i.children===s.children&&!kt.current){e=qn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=zn(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),nf(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),nf(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}vt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,fi(e,n),s=Yt(s),r=r(s),e.flags|=1,vt(t,e,r,n),e.child;case 14:return r=e.type,s=tn(r,e.pendingProps),s=tn(r.type,s),Oy(t,e,r,s,n);case 15:return Gw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),rc(t,e),e.tag=1,Ct(r)?(t=!0,bc(e)):t=!1,fi(e,n),Hw(e,r,s),sf(e,r,s,n),lf(null,e,r,!0,t,n);case 19:return Zw(t,e,n);case 22:return Qw(t,e,n)}throw Error(U(156,e.tag))};function m1(t,e){return $_(t,e)}function LS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(t,e,n,r){return new LS(t,e,n,r)}function $p(t){return t=t.prototype,!(!t||!t.isReactComponent)}function jS(t){if(typeof t=="function")return $p(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ap)return 11;if(t===lp)return 14}return 2}function Dr(t,e){var n=t.alternate;return n===null?(n=qt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function oc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")$p(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ys:return vs(n.children,s,i,e);case op:o=8,s|=8;break;case bh:return t=qt(12,n,e,s|2),t.elementType=bh,t.lanes=i,t;case kh:return t=qt(13,n,e,s),t.elementType=kh,t.lanes=i,t;case Ch:return t=qt(19,n,e,s),t.elementType=Ch,t.lanes=i,t;case S_:return Nu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case I_:o=10;break e;case T_:o=9;break e;case ap:o=11;break e;case lp:o=14;break e;case pr:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=qt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function vs(t,e,n,r){return t=qt(7,t,r,e),t.lanes=n,t}function Nu(t,e,n,r){return t=qt(22,t,r,e),t.elementType=S_,t.lanes=n,t.stateNode={isHidden:!1},t}function th(t,e,n){return t=qt(6,t,null,e),t.lanes=n,t}function nh(t,e,n){return e=qt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function VS(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jd(0),this.expirationTimes=jd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Bp(t,e,n,r,s,i,o,l,c){return t=new VS(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=qt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Np(i),t}function MS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function g1(t){if(!t)return Br;t=t._reactInternals;e:{if(Ds(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ct(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Ct(n))return gw(t,n,e)}return e}function y1(t,e,n,r,s,i,o,l,c){return t=Bp(n,r,!0,t,s,i,o,l,c),t.context=g1(null),n=t.current,r=_t(),s=Pr(n),i=zn(r,s),i.callback=e??null,Cr(n,i,s),t.current.lanes=s,$a(t,s,r),At(t,r),t}function Ru(t,e,n,r){var s=e.current,i=_t(),o=Pr(s);return n=g1(n),e.context===null?e.context=n:e.pendingContext=n,e=zn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Cr(s,e,o),t!==null&&(un(t,s,o,i),ec(t,s,o)),o}function zc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function qy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Wp(t,e){qy(t,e),(t=t.alternate)&&qy(t,e)}function FS(){return null}var v1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hp(t){this._internalRoot=t}bu.prototype.render=Hp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Ru(t,e,null,null)};bu.prototype.unmount=Hp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ts(function(){Ru(null,t,null,null)}),e[Wn]=null}};function bu(t){this._internalRoot=t}bu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Q_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<gr.length&&e!==0&&e<gr[n].priority;n++);gr.splice(n,0,t),n===0&&J_(t)}};function qp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ku(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ky(){}function US(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=zc(o);i.call(u)}}var o=y1(e,r,t,0,null,!1,!1,"",Ky);return t._reactRootContainer=o,t[Wn]=o.current,ya(t.nodeType===8?t.parentNode:t),Ts(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=zc(c);l.call(u)}}var c=Bp(t,0,!1,null,null,!1,!1,"",Ky);return t._reactRootContainer=c,t[Wn]=c.current,ya(t.nodeType===8?t.parentNode:t),Ts(function(){Ru(e,c,n,r)}),c}function Cu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=zc(o);l.call(c)}}Ru(e,o,t,s)}else o=US(n,e,t,s,r);return zc(o)}K_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Do(e.pendingLanes);n!==0&&(dp(e,n|1),At(e,Ae()),!(ue&6)&&(Ci=Ae()+500,Zr()))}break;case 13:Ts(function(){var r=Hn(t,1);if(r!==null){var s=_t();un(r,t,1,s)}}),Wp(t,1)}};hp=function(t){if(t.tag===13){var e=Hn(t,134217728);if(e!==null){var n=_t();un(e,t,134217728,n)}Wp(t,134217728)}};G_=function(t){if(t.tag===13){var e=Pr(t),n=Hn(t,e);if(n!==null){var r=_t();un(n,t,e,r)}Wp(t,e)}};Q_=function(){return fe};Y_=function(t,e){var n=fe;try{return fe=t,e()}finally{fe=n}};Uh=function(t,e,n){switch(e){case"input":if(Dh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=wu(r);if(!s)throw Error(U(90));R_(r),Dh(r,s)}}}break;case"textarea":k_(t,n);break;case"select":e=n.value,e!=null&&ci(t,!!n.multiple,e,!1)}};j_=Fp;V_=Ts;var zS={usingClientEntryPoint:!1,Events:[Wa,ei,wu,O_,L_,Fp]},bo={findFiberByHostInstance:fs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$S={bundleType:bo.bundleType,version:bo.version,rendererPackageName:bo.rendererPackageName,rendererConfig:bo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:er.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=U_(t),t===null?null:t.stateNode},findFiberByHostInstance:bo.findFiberByHostInstance||FS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ul.isDisabled&&Ul.supportsFiber)try{gu=Ul.inject($S),xn=Ul}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zS;$t.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qp(e))throw Error(U(200));return MS(t,e,null,n)};$t.createRoot=function(t,e){if(!qp(t))throw Error(U(299));var n=!1,r="",s=v1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Bp(t,1,!1,null,null,n,!1,r,s),t[Wn]=e.current,ya(t.nodeType===8?t.parentNode:t),new Hp(e)};$t.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=U_(e),t=t===null?null:t.stateNode,t};$t.flushSync=function(t){return Ts(t)};$t.hydrate=function(t,e,n){if(!ku(e))throw Error(U(200));return Cu(null,t,e,!0,n)};$t.hydrateRoot=function(t,e,n){if(!qp(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=v1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=y1(e,null,t,1,n??null,s,!1,i,o),t[Wn]=e.current,ya(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new bu(e)};$t.render=function(t,e,n){if(!ku(e))throw Error(U(200));return Cu(null,t,e,!1,n)};$t.unmountComponentAtNode=function(t){if(!ku(t))throw Error(U(40));return t._reactRootContainer?(Ts(function(){Cu(null,null,t,!1,function(){t._reactRootContainer=null,t[Wn]=null})}),!0):!1};$t.unstable_batchedUpdates=Fp;$t.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ku(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Cu(t,e,n,!1,r)};$t.version="18.3.1-next-f1338f8080-20240426";function _1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_1)}catch(t){console.error(t)}}_1(),__.exports=$t;var BS=__.exports,Gy=BS;Nh.createRoot=Gy.createRoot,Nh.hydrateRoot=Gy.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Na(){return Na=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Na.apply(this,arguments)}var Ir;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ir||(Ir={}));const Qy="popstate";function WS(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return wf("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:$c(s)}return qS(e,n,null,t)}function De(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Kp(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function HS(){return Math.random().toString(36).substr(2,8)}function Yy(t,e){return{usr:t.state,key:t.key,idx:e}}function wf(t,e,n,r){return n===void 0&&(n=null),Na({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Bi(e):e,{state:n,key:e&&e.key||r||HS()})}function $c(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Bi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function qS(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=Ir.Pop,c=null,u=f();u==null&&(u=0,o.replaceState(Na({},o.state,{idx:u}),""));function f(){return(o.state||{idx:null}).idx}function p(){l=Ir.Pop;let S=f(),_=S==null?null:S-u;u=S,c&&c({action:l,location:C.location,delta:_})}function m(S,_){l=Ir.Push;let v=wf(C.location,S,_);u=f()+1;let w=Yy(v,u),A=C.createHref(v);try{o.pushState(w,"",A)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(A)}i&&c&&c({action:l,location:C.location,delta:1})}function I(S,_){l=Ir.Replace;let v=wf(C.location,S,_);u=f();let w=Yy(v,u),A=C.createHref(v);o.replaceState(w,"",A),i&&c&&c({action:l,location:C.location,delta:0})}function b(S){let _=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof S=="string"?S:$c(S);return v=v.replace(/ $/,"%20"),De(_,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,_)}let C={get action(){return l},get location(){return t(s,o)},listen(S){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Qy,p),c=S,()=>{s.removeEventListener(Qy,p),c=null}},createHref(S){return e(s,S)},createURL:b,encodeLocation(S){let _=b(S);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:m,replace:I,go(S){return o.go(S)}};return C}var Jy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Jy||(Jy={}));function KS(t,e,n){return n===void 0&&(n="/"),GS(t,e,n)}function GS(t,e,n,r){let s=typeof e=="string"?Bi(e):e,i=Gp(s.pathname||"/",n);if(i==null)return null;let o=w1(t);QS(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=aN(i);l=sN(o[c],u)}return l}function w1(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(De(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Or([r,c.relativePath]),f=n.concat(c);i.children&&i.children.length>0&&(De(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),w1(i.children,e,f,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:nN(u,i.index),routesMeta:f})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of E1(i.path))s(i,o,c)}),e}function E1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=E1(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function QS(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:rN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const YS=/^:[\w-]+$/,JS=3,XS=2,ZS=1,eN=10,tN=-2,Xy=t=>t==="*";function nN(t,e){let n=t.split("/"),r=n.length;return n.some(Xy)&&(r+=tN),e&&(r+=XS),n.filter(s=>!Xy(s)).reduce((s,i)=>s+(YS.test(i)?JS:i===""?ZS:eN),r)}function rN(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function sN(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",p=iN({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),m=c.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:Or([i,p.pathname]),pathnameBase:hN(Or([i,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(i=Or([i,p.pathnameBase]))}return o}function iN(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=oN(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,f,p)=>{let{paramName:m,isOptional:I}=f;if(m==="*"){let C=l[p]||"";o=i.slice(0,i.length-C.length).replace(/(.)\/+$/,"$1")}const b=l[p];return I&&!b?u[m]=void 0:u[m]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function oN(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Kp(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function aN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Kp(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Gp(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const lN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cN=t=>lN.test(t);function uN(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Bi(t):t,i;if(n)if(cN(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Kp(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=Zy(n.substring(1),"/"):i=Zy(n,e)}else i=e;return{pathname:i,search:fN(r),hash:pN(s)}}function Zy(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function rh(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dN(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Qp(t,e){let n=dN(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Yp(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Bi(t):(s=Na({},t),De(!s.pathname||!s.pathname.includes("?"),rh("?","pathname","search",s)),De(!s.pathname||!s.pathname.includes("#"),rh("#","pathname","hash",s)),De(!s.search||!s.search.includes("#"),rh("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;s.pathname=m.join("/")}l=p>=0?e[p]:"/"}let c=uN(s,l),u=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}const Or=t=>t.join("/").replace(/\/\/+/g,"/"),hN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),fN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,pN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function mN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const x1=["post","put","patch","delete"];new Set(x1);const gN=["get",...x1];new Set(gN);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ra(){return Ra=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ra.apply(this,arguments)}const Jp=V.createContext(null),yN=V.createContext(null),es=V.createContext(null),Au=V.createContext(null),tr=V.createContext({outlet:null,matches:[],isDataRoute:!1}),I1=V.createContext(null);function vN(t,e){let{relative:n}=e===void 0?{}:e;Wi()||De(!1);let{basename:r,navigator:s}=V.useContext(es),{hash:i,pathname:o,search:l}=N1(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Or([r,o])),s.createHref({pathname:c,search:l,hash:i})}function Wi(){return V.useContext(Au)!=null}function Hi(){return Wi()||De(!1),V.useContext(Au).location}function T1(t){V.useContext(es).static||V.useLayoutEffect(t)}function S1(){let{isDataRoute:t}=V.useContext(tr);return t?PN():_N()}function _N(){Wi()||De(!1);let t=V.useContext(Jp),{basename:e,future:n,navigator:r}=V.useContext(es),{matches:s}=V.useContext(tr),{pathname:i}=Hi(),o=JSON.stringify(Qp(s,n.v7_relativeSplatPath)),l=V.useRef(!1);return T1(()=>{l.current=!0}),V.useCallback(function(u,f){if(f===void 0&&(f={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let p=Yp(u,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Or([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,o,i,t])}function wN(){let{matches:t}=V.useContext(tr),e=t[t.length-1];return e?e.params:{}}function N1(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=V.useContext(es),{matches:s}=V.useContext(tr),{pathname:i}=Hi(),o=JSON.stringify(Qp(s,r.v7_relativeSplatPath));return V.useMemo(()=>Yp(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function EN(t,e){return xN(t,e)}function xN(t,e,n,r){Wi()||De(!1);let{navigator:s}=V.useContext(es),{matches:i}=V.useContext(tr),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Hi(),f;if(e){var p;let S=typeof e=="string"?Bi(e):e;c==="/"||(p=S.pathname)!=null&&p.startsWith(c)||De(!1),f=S}else f=u;let m=f.pathname||"/",I=m;if(c!=="/"){let S=c.replace(/^\//,"").split("/");I="/"+m.replace(/^\//,"").split("/").slice(S.length).join("/")}let b=KS(t,{pathname:I}),C=RN(b&&b.map(S=>Object.assign({},S,{params:Object.assign({},l,S.params),pathname:Or([c,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:Or([c,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),i,n,r);return e&&C?V.createElement(Au.Provider,{value:{location:Ra({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Ir.Pop}},C):C}function IN(){let t=AN(),e=mN(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),n?V.createElement("pre",{style:s},n):null,null)}const TN=V.createElement(IN,null);class SN extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?V.createElement(tr.Provider,{value:this.props.routeContext},V.createElement(I1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function NN(t){let{routeContext:e,match:n,children:r}=t,s=V.useContext(Jp);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),V.createElement(tr.Provider,{value:e},r)}function RN(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let f=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);f>=0||De(!1),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=f),p.route.id){let{loaderData:m,errors:I}=n,b=p.route.loader&&m[p.route.id]===void 0&&(!I||I[p.route.id]===void 0);if(p.route.lazy||b){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((f,p,m)=>{let I,b=!1,C=null,S=null;n&&(I=l&&p.route.id?l[p.route.id]:void 0,C=p.route.errorElement||TN,c&&(u<0&&m===0?(DN("route-fallback"),b=!0,S=null):u===m&&(b=!0,S=p.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,m+1)),v=()=>{let w;return I?w=C:b?w=S:p.route.Component?w=V.createElement(p.route.Component,null):p.route.element?w=p.route.element:w=f,V.createElement(NN,{match:p,routeContext:{outlet:f,matches:_,isDataRoute:n!=null},children:w})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?V.createElement(SN,{location:n.location,revalidation:n.revalidation,component:C,error:I,children:v(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):v()},null)}var R1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(R1||{}),b1=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(b1||{});function bN(t){let e=V.useContext(Jp);return e||De(!1),e}function kN(t){let e=V.useContext(yN);return e||De(!1),e}function CN(t){let e=V.useContext(tr);return e||De(!1),e}function k1(t){let e=CN(),n=e.matches[e.matches.length-1];return n.route.id||De(!1),n.route.id}function AN(){var t;let e=V.useContext(I1),n=kN(),r=k1();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function PN(){let{router:t}=bN(R1.UseNavigateStable),e=k1(b1.UseNavigateStable),n=V.useRef(!1);return T1(()=>{n.current=!0}),V.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ra({fromRouteId:e},i)))},[t,e])}const e0={};function DN(t,e,n){e0[t]||(e0[t]=!0)}function ON(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function C1(t){let{to:e,replace:n,state:r,relative:s}=t;Wi()||De(!1);let{future:i,static:o}=V.useContext(es),{matches:l}=V.useContext(tr),{pathname:c}=Hi(),u=S1(),f=Yp(e,Qp(l,i.v7_relativeSplatPath),c,s==="path"),p=JSON.stringify(f);return V.useEffect(()=>u(JSON.parse(p),{replace:n,state:r,relative:s}),[u,p,s,n,r]),null}function Dn(t){De(!1)}function LN(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Ir.Pop,navigator:i,static:o=!1,future:l}=t;Wi()&&De(!1);let c=e.replace(/^\/*/,"/"),u=V.useMemo(()=>({basename:c,navigator:i,static:o,future:Ra({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=Bi(r));let{pathname:f="/",search:p="",hash:m="",state:I=null,key:b="default"}=r,C=V.useMemo(()=>{let S=Gp(f,c);return S==null?null:{location:{pathname:S,search:p,hash:m,state:I,key:b},navigationType:s}},[c,f,p,m,I,b,s]);return C==null?null:V.createElement(es.Provider,{value:u},V.createElement(Au.Provider,{children:n,value:C}))}function jN(t){let{children:e,location:n}=t;return EN(Ef(e),n)}new Promise(()=>{});function Ef(t,e){e===void 0&&(e=[]);let n=[];return V.Children.forEach(t,(r,s)=>{if(!V.isValidElement(r))return;let i=[...e,s];if(r.type===V.Fragment){n.push.apply(n,Ef(r.props.children,i));return}r.type!==Dn&&De(!1),!r.props.index||!r.props.children||De(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ef(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xf(){return xf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xf.apply(this,arguments)}function VN(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function MN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function FN(t,e){return t.button===0&&(!e||e==="_self")&&!MN(t)}const UN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],zN="6";try{window.__reactRouterVersion=zN}catch{}const $N="startTransition",t0=PT[$N];function BN(t){let{basename:e,children:n,future:r,window:s}=t,i=V.useRef();i.current==null&&(i.current=WS({window:s,v5Compat:!0}));let o=i.current,[l,c]=V.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},f=V.useCallback(p=>{u&&t0?t0(()=>c(p)):c(p)},[c,u]);return V.useLayoutEffect(()=>o.listen(f),[o,f]),V.useEffect(()=>ON(r),[r]),V.createElement(LN,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const WN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",HN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,A1=V.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:f,viewTransition:p}=e,m=VN(e,UN),{basename:I}=V.useContext(es),b,C=!1;if(typeof u=="string"&&HN.test(u)&&(b=u,WN))try{let w=new URL(window.location.href),A=u.startsWith("//")?new URL(w.protocol+u):new URL(u),L=Gp(A.pathname,I);A.origin===w.origin&&L!=null?u=L+A.search+A.hash:C=!0}catch{}let S=vN(u,{relative:s}),_=qN(u,{replace:o,state:l,target:c,preventScrollReset:f,relative:s,viewTransition:p});function v(w){r&&r(w),w.defaultPrevented||_(w)}return V.createElement("a",xf({},m,{href:b||S,onClick:C||i?r:v,ref:n,target:c}))});var n0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(n0||(n0={}));var r0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(r0||(r0={}));function qN(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,c=S1(),u=Hi(),f=N1(t,{relative:o});return V.useCallback(p=>{if(FN(p,n)){p.preventDefault();let m=r!==void 0?r:$c(u)===$c(f);c(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,f,r,s,n,t,i,o,l])}const KN=()=>{};var s0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},GN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},D1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,f=i>>2,p=(i&3)<<4|l>>4;let m=(l&15)<<2|u>>6,I=u&63;c||(I=64,o||(m=64)),r.push(n[f],n[p],n[m],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(P1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):GN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||p==null)throw new QN;const m=i<<2|l>>4;if(r.push(m),u!==64){const I=l<<4&240|u>>2;if(r.push(I),p!==64){const b=u<<6&192|p;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class QN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const YN=function(t){const e=P1(t);return D1.encodeByteArray(e,!0)},Bc=function(t){return YN(t).replace(/\./g,"")},O1=function(t){try{return D1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=()=>JN().__FIREBASE_DEFAULTS__,ZN=()=>{if(typeof process>"u"||typeof s0>"u")return;const t=s0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},eR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&O1(t[1]);return e&&JSON.parse(e)},Pu=()=>{try{return KN()||XN()||ZN()||eR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},L1=t=>{var e,n;return(n=(e=Pu())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},j1=t=>{const e=L1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},V1=()=>{var t;return(t=Pu())==null?void 0:t.config},M1=t=>{var e;return(e=Pu())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Xp(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Bc(JSON.stringify(n)),Bc(JSON.stringify(o)),""].join(".")}const Yo={};function nR(){const t={prod:[],emulator:[]};for(const e of Object.keys(Yo))Yo[e]?t.emulator.push(e):t.prod.push(e);return t}function rR(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let i0=!1;function Zp(t,e){if(typeof window>"u"||typeof document>"u"||!Os(window.location.host)||Yo[t]===e||Yo[t]||i0)return;Yo[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=nR().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,I){m.setAttribute("width","24"),m.setAttribute("id",I),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{i0=!0,o()},m}function f(m,I){m.setAttribute("id",I),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=rR(r),I=n("text"),b=document.getElementById(I)||document.createElement("span"),C=n("learnmore"),S=document.getElementById(C)||document.createElement("a"),_=n("preprendIcon"),v=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const w=m.element;l(w),f(S,C);const A=u();c(v,_),w.append(v,b,S,A),document.body.appendChild(w)}i?(b.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mt())}function iR(){var e;const t=(e=Pu())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function lR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cR(){const t=mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function uR(){return!iR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dR(){try{return typeof indexedDB=="object"}catch{return!1}}function hR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR="FirebaseError";class An extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=fR,Object.setPrototypeOf(this,An.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qa.prototype.create)}}class qa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?pR(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new An(s,l,r)}}function pR(t,e){return t.replace(mR,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const mR=/\{\$([^}]+)}/g;function gR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ss(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(o0(i)&&o0(o)){if(!Ss(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function o0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Lo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function jo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function yR(t,e){const n=new vR(t,e);return n.subscribe.bind(n)}class vR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");_R(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=sh),s.error===void 0&&(s.error=sh),s.complete===void 0&&(s.complete=sh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _R(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function sh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t){return t&&t._delegate?t._delegate:t}class Wr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new tR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xR(e))try{this.getOrInitializeService({instanceIdentifier:hs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hs){return this.instances.has(e)}getOptions(e=hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ER(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=hs){return this.component?this.component.multipleInstances?e:hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ER(t){return t===hs?void 0:t}function xR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new wR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(se||(se={}));const TR={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},SR=se.INFO,NR={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},RR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=NR[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class em{constructor(e){this.name=e,this._logLevel=SR,this._logHandler=RR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}}const bR=(t,e)=>e.some(n=>t instanceof n);let a0,l0;function kR(){return a0||(a0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CR(){return l0||(l0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const U1=new WeakMap,If=new WeakMap,z1=new WeakMap,ih=new WeakMap,tm=new WeakMap;function AR(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Lr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&U1.set(n,t)}).catch(()=>{}),tm.set(e,t),e}function PR(t){if(If.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});If.set(t,e)}let Tf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return If.get(t);if(e==="objectStoreNames")return t.objectStoreNames||z1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Lr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function DR(t){Tf=t(Tf)}function OR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(oh(this),e,...n);return z1.set(r,e.sort?e.sort():[e]),Lr(r)}:CR().includes(t)?function(...e){return t.apply(oh(this),e),Lr(U1.get(this))}:function(...e){return Lr(t.apply(oh(this),e))}}function LR(t){return typeof t=="function"?OR(t):(t instanceof IDBTransaction&&PR(t),bR(t,kR())?new Proxy(t,Tf):t)}function Lr(t){if(t instanceof IDBRequest)return AR(t);if(ih.has(t))return ih.get(t);const e=LR(t);return e!==t&&(ih.set(t,e),tm.set(e,t)),e}const oh=t=>tm.get(t);function jR(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Lr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Lr(o.result),c.oldVersion,c.newVersion,Lr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const VR=["get","getKey","getAll","getAllKeys","count"],MR=["put","add","delete","clear"],ah=new Map;function c0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ah.get(e))return ah.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=MR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||VR.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return ah.set(e,i),i}DR(t=>({...t,get:(e,n,r)=>c0(e,n)||t.get(e,n,r),has:(e,n)=>!!c0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(UR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function UR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Sf="@firebase/app",u0="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn=new em("@firebase/app"),zR="@firebase/app-compat",$R="@firebase/analytics-compat",BR="@firebase/analytics",WR="@firebase/app-check-compat",HR="@firebase/app-check",qR="@firebase/auth",KR="@firebase/auth-compat",GR="@firebase/database",QR="@firebase/data-connect",YR="@firebase/database-compat",JR="@firebase/functions",XR="@firebase/functions-compat",ZR="@firebase/installations",eb="@firebase/installations-compat",tb="@firebase/messaging",nb="@firebase/messaging-compat",rb="@firebase/performance",sb="@firebase/performance-compat",ib="@firebase/remote-config",ob="@firebase/remote-config-compat",ab="@firebase/storage",lb="@firebase/storage-compat",cb="@firebase/firestore",ub="@firebase/ai",db="@firebase/firestore-compat",hb="firebase",fb="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf="[DEFAULT]",pb={[Sf]:"fire-core",[zR]:"fire-core-compat",[BR]:"fire-analytics",[$R]:"fire-analytics-compat",[HR]:"fire-app-check",[WR]:"fire-app-check-compat",[qR]:"fire-auth",[KR]:"fire-auth-compat",[GR]:"fire-rtdb",[QR]:"fire-data-connect",[YR]:"fire-rtdb-compat",[JR]:"fire-fn",[XR]:"fire-fn-compat",[ZR]:"fire-iid",[eb]:"fire-iid-compat",[tb]:"fire-fcm",[nb]:"fire-fcm-compat",[rb]:"fire-perf",[sb]:"fire-perf-compat",[ib]:"fire-rc",[ob]:"fire-rc-compat",[ab]:"fire-gcs",[lb]:"fire-gcs-compat",[cb]:"fire-fst",[db]:"fire-fst-compat",[ub]:"fire-vertex","fire-js":"fire-js",[hb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc=new Map,mb=new Map,Rf=new Map;function d0(t,e){try{t.container.addComponent(e)}catch(n){Kn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ns(t){const e=t.name;if(Rf.has(e))return Kn.debug(`There were multiple attempts to register component ${e}.`),!1;Rf.set(e,t);for(const n of Wc.values())d0(n,t);for(const n of mb.values())d0(n,t);return!0}function Du(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ve(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jr=new qa("app","Firebase",gb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls=fb;function $1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Nf,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw jr.create("bad-app-name",{appName:String(s)});if(n||(n=V1()),!n)throw jr.create("no-options");const i=Wc.get(s);if(i){if(Ss(n,i.options)&&Ss(r,i.config))return i;throw jr.create("duplicate-app",{appName:s})}const o=new IR(s);for(const c of Rf.values())o.addComponent(c);const l=new yb(n,r,o);return Wc.set(s,l),l}function nm(t=Nf){const e=Wc.get(t);if(!e&&t===Nf&&V1())return $1();if(!e)throw jr.create("no-app",{appName:t});return e}function Tn(t,e,n){let r=pb[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kn.warn(o.join(" "));return}Ns(new Wr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb="firebase-heartbeat-database",_b=1,ba="firebase-heartbeat-store";let lh=null;function B1(){return lh||(lh=jR(vb,_b,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ba)}catch(n){console.warn(n)}}}}).catch(t=>{throw jr.create("idb-open",{originalErrorMessage:t.message})})),lh}async function wb(t){try{const n=(await B1()).transaction(ba),r=await n.objectStore(ba).get(W1(t));return await n.done,r}catch(e){if(e instanceof An)Kn.warn(e.message);else{const n=jr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Kn.warn(n.message)}}}async function h0(t,e){try{const r=(await B1()).transaction(ba,"readwrite");await r.objectStore(ba).put(e,W1(t)),await r.done}catch(n){if(n instanceof An)Kn.warn(n.message);else{const r=jr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Kn.warn(r.message)}}}function W1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb=1024,xb=30;class Ib{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Sb(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=f0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>xb){const o=Nb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Kn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=f0(),{heartbeatsToSend:r,unsentEntries:s}=Tb(this._heartbeatsCache.heartbeats),i=Bc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Kn.warn(n),""}}}function f0(){return new Date().toISOString().substring(0,10)}function Tb(t,e=Eb){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),p0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),p0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Sb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dR()?hR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await wb(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return h0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return h0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function p0(t){return Bc(JSON.stringify({version:2,heartbeats:t})).length}function Nb(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(t){Ns(new Wr("platform-logger",e=>new FR(e),"PRIVATE")),Ns(new Wr("heartbeat",e=>new Ib(e),"PRIVATE")),Tn(Sf,u0,t),Tn(Sf,u0,"esm2020"),Tn("fire-js","")}Rb("");function H1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bb=H1,q1=new qa("auth","Firebase",H1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=new em("@firebase/auth");function kb(t,...e){Hc.logLevel<=se.WARN&&Hc.warn(`Auth (${Ls}): ${t}`,...e)}function ac(t,...e){Hc.logLevel<=se.ERROR&&Hc.error(`Auth (${Ls}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(t,...e){throw sm(t,...e)}function Pt(t,...e){return sm(t,...e)}function rm(t,e,n){const r={...bb(),[e]:n};return new qa("auth","Firebase",r).create(e,{appName:t.name})}function wt(t){return rm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ou(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Xt(t,"argument-error"),rm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function sm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return q1.create(t,...e)}function B(t,e,...n){if(!t)throw sm(e,...n)}function Fn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ac(e),new Error(e)}function Gn(t,e){t||Fn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ka(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function im(){return m0()==="http:"||m0()==="https:"}function m0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(im()||aR()||"connection"in navigator)?navigator.onLine:!0}function Ab(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n){this.shortDelay=e,this.longDelay=n,Gn(n>e,"Short delay should be less than long delay!"),this.isMobile=sR()||lR()}get(){return Cb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(t,e){Gn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ob=new Ka(3e4,6e4);function We(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function He(t,e,n,r,s={}){return G1(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=qi({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return oR()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Os(t.emulatorConfig.host)&&(u.credentials="include"),K1.fetch()(await Q1(t,t.config.apiHost,n,l),u)})}async function G1(t,e,n){t._canInitEmulator=!1;const r={...Pb,...e};try{const s=new jb(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Vo(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vo(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Vo(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Vo(t,"user-disabled",o);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw rm(t,f,u);Xt(t,f)}}catch(s){if(s instanceof An)throw s;Xt(t,"network-request-failed",{message:String(s)})}}async function nr(t,e,n,r,s={}){const i=await He(t,e,n,r,s);return"mfaPendingCredential"in i&&Xt(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Q1(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?om(t.config,s):`${t.config.apiScheme}://${s}`;return Db.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function Lb(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class jb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Pt(this.auth,"network-request-failed")),Ob.get())})}}function Vo(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Pt(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(t){return t!==void 0&&t.getResponse!==void 0}function y0(t){return t!==void 0&&t.enterprise!==void 0}class Y1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Lb(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vb(t){return(await He(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function J1(t,e){return He(t,"GET","/v2/recaptchaConfig",We(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mb(t,e){return He(t,"POST","/v1/accounts:delete",e)}async function Fb(t,e){return He(t,"POST","/v1/accounts:update",e)}async function qc(t,e){return He(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Ub(t,e=!1){const n=ne(t),r=await n.getIdToken(e),s=Lu(r);B(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Jo(ch(s.auth_time)),issuedAtTime:Jo(ch(s.iat)),expirationTime:Jo(ch(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function ch(t){return Number(t)*1e3}function Lu(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ac("JWT malformed, contained fewer than 3 sections"),null;try{const s=O1(n);return s?JSON.parse(s):(ac("Failed to decode base64 JWT payload"),null)}catch(s){return ac("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function v0(t){const e=Lu(t);return B(e,"internal-error"),B(typeof e.exp<"u","internal-error"),B(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rs(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof An&&zb(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function zb({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jo(this.lastLoginAt),this.creationTime=Jo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ca(t){var p;const e=t.auth,n=await t.getIdToken(),r=await Rs(t,qc(e,{idToken:n}));B(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(p=s.providerUserInfo)!=null&&p.length?X1(s.providerUserInfo):[],o=Wb(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new bf(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function Bb(t){const e=ne(t);await Ca(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Wb(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function X1(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hb(t,e){const n=await G1(t,{},async()=>{const r=qi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await Q1(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&Os(t.emulatorConfig.host)&&(c.credentials="include"),K1.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function qb(t,e){return He(t,"POST","/v2/accounts:revokeToken",We(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){B(e.idToken,"internal-error"),B(typeof e.idToken<"u","internal-error"),B(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):v0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){B(e.length!==0,"internal-error");const n=v0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(B(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await Hb(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new mi;return r&&(B(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(B(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(B(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new mi,this.toJSON())}_performRefresh(){return Fn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(t,e){B(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class an{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new $b(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new bf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Rs(this,this.stsTokenManager.getToken(this.auth,e));return B(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Ub(this,e)}reload(){return Bb(this)}_assign(e){this!==e&&(B(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new an({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ca(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ve(this.auth.app))return Promise.reject(wt(this.auth));const e=await this.getIdToken();return await Rs(this,Mb(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:I,providerData:b,stsTokenManager:C}=n;B(p&&C,e,"internal-error");const S=mi.fromJSON(this.name,C);B(typeof p=="string",e,"internal-error"),fr(r,e.name),fr(s,e.name),B(typeof m=="boolean",e,"internal-error"),B(typeof I=="boolean",e,"internal-error"),fr(i,e.name),fr(o,e.name),fr(l,e.name),fr(c,e.name),fr(u,e.name),fr(f,e.name);const _=new an({uid:p,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:I,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:S,createdAt:u,lastLoginAt:f});return b&&Array.isArray(b)&&(_.providerData=b.map(v=>({...v}))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(e,n,r=!1){const s=new mi;s.updateFromServerResponse(n);const i=new an({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ca(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];B(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?X1(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new mi;l.updateFromIdToken(r);const c=new an({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new bf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0=new Map;function Un(t){Gn(t instanceof Function,"Expected a class definition");let e=_0.get(t);return e?(Gn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,_0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Z1.type="NONE";const w0=Z1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(t,e,n){return`firebase:${t}:${e}:${n}`}class gi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=lc(this.userKey,s.apiKey,i),this.fullPersistenceKey=lc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await qc(this.auth,{idToken:e}).catch(()=>{});return n?an._fromGetAccountInfoResponse(this.auth,n,e):null}return an._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new gi(Un(w0),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Un(w0);const o=lc(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const f=await u._get(o);if(f){let p;if(typeof f=="string"){const m=await qc(e,{idToken:f}).catch(()=>{});if(!m)break;p=await an._fromGetAccountInfoResponse(e,m,f)}else p=an._fromJSON(e,f);u!==i&&(l=p),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new gi(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new gi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(eE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(iE(e))return"Blackberry";if(oE(e))return"Webos";if(tE(e))return"Safari";if((e.includes("chrome/")||nE(e))&&!e.includes("edge/"))return"Chrome";if(sE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function eE(t=mt()){return/firefox\//i.test(t)}function tE(t=mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function nE(t=mt()){return/crios\//i.test(t)}function rE(t=mt()){return/iemobile/i.test(t)}function sE(t=mt()){return/android/i.test(t)}function iE(t=mt()){return/blackberry/i.test(t)}function oE(t=mt()){return/webos/i.test(t)}function am(t=mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Kb(t=mt()){var e;return am(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Gb(){return cR()&&document.documentMode===10}function aE(t=mt()){return am(t)||sE(t)||oE(t)||iE(t)||/windows phone/i.test(t)||rE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(t,e=[]){let n;switch(t){case"Browser":n=E0(mt());break;case"Worker":n=`${E0(mt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ls}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yb(t,e={}){return He(t,"GET","/v2/passwordPolicy",We(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb=6;class Xb{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Jb,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new x0(this),this.idTokenSubscription=new x0(this),this.beforeStateQueue=new Qb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=q1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Un(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await gi.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await qc(this,{idToken:e}),r=await an._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Ve(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return B(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ca(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Ab()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ve(this.app))return Promise.reject(wt(this));const n=e?ne(e):null;return n&&B(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&B(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ve(this.app)?Promise.reject(wt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ve(this.app)?Promise.reject(wt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Un(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Yb(this),n=new Xb(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new qa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await qb(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Un(e)||this._popupRedirectResolver;B(n,this,"argument-error"),this.redirectPersistenceManager=await gi.create(this,[Un(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(B(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Ve(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&kb(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function tt(t){return ne(t)}class x0{constructor(e){this.auth=e,this.observer=null,this.addObserver=yR(n=>this.observer=n)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ga={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ek(t){Ga=t}function lm(t){return Ga.loadJS(t)}function tk(){return Ga.recaptchaV2Script}function nk(){return Ga.recaptchaEnterpriseScript}function rk(){return Ga.gapiScript}function cE(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=500,ik=6e4,zl=1e12;class ok{constructor(e){this.auth=e,this.counter=zl,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new ck(e,this.auth.name,n||{})),this.counter++,r}reset(e){var r;const n=e||zl;(r=this._widgets.get(n))==null||r.delete(),this._widgets.delete(n)}getResponse(e){var r;const n=e||zl;return((r=this._widgets.get(n))==null?void 0:r.getResponse())||""}async execute(e){var r;const n=e||zl;return(r=this._widgets.get(n))==null||r.execute(),""}}class ak{constructor(){this.enterprise=new lk}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class lk{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class ck{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;B(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=uk(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},ik)},sk))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function uk(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const dk="recaptcha-enterprise",Xo="NO_RECAPTCHA";class uE{constructor(e){this.type=dk,this.auth=tt(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{J1(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new Y1(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function s(i,o,l){const c=window.grecaptcha;y0(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(Xo)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ak().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&y0(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=nk();c.length!==0&&(c+=l),lm(c).then(()=>{s(l,i,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function ko(t,e,n,r=!1,s=!1){const i=new uE(t);let o;if(s)o=Xo;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Vr(t,e,n,r,s){var i,o;if(s==="EMAIL_PASSWORD_PROVIDER")if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await ko(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await ko(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(l)});else if(s==="PHONE_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const l=await ko(t,e,n);return r(t,l).catch(async c=>{var u;if(((u=t._getRecaptchaConfig())==null?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const f=await ko(t,e,n,!1,!0);return r(t,f)}return Promise.reject(c)})}else{const l=await ko(t,e,n,!1,!0);return r(t,l)}else return Promise.reject(s+" provider is not supported.")}async function hk(t){const e=tt(t),n=await J1(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Y1(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new uE(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(t,e){const n=Du(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ss(i,e??{}))return s;Xt(s,"already-initialized")}return n.initialize({options:e})}function fk(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Un);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function pk(t,e,n){const r=tt(t);B(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=hE(e),{host:o,port:l}=mk(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},f=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){B(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),B(Ss(u,r.config.emulator)&&Ss(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Os(o)?(Xp(`${i}//${o}${c}`),Zp("Auth",!0)):gk()}function hE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function mk(t){const e=hE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:I0(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:I0(o)}}}function I0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function gk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fn("not implemented")}_getIdTokenResponse(e){return Fn("not implemented")}_linkToIdToken(e,n){return Fn("not implemented")}_getReauthenticationResolver(e){return Fn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yk(t,e){return He(t,"POST","/v1/accounts:resetPassword",We(t,e))}async function vk(t,e){return He(t,"POST","/v1/accounts:update",e)}async function _k(t,e){return He(t,"POST","/v1/accounts:signUp",e)}async function wk(t,e){return He(t,"POST","/v1/accounts:update",We(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ek(t,e){return nr(t,"POST","/v1/accounts:signInWithPassword",We(t,e))}async function Vu(t,e){return He(t,"POST","/v1/accounts:sendOobCode",We(t,e))}async function xk(t,e){return Vu(t,e)}async function Ik(t,e){return Vu(t,e)}async function Tk(t,e){return Vu(t,e)}async function Sk(t,e){return Vu(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nk(t,e){return nr(t,"POST","/v1/accounts:signInWithEmailLink",We(t,e))}async function Rk(t,e){return nr(t,"POST","/v1/accounts:signInWithEmailLink",We(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa extends ju{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Aa(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Aa(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vr(e,n,"signInWithPassword",Ek,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Nk(e,{email:this._email,oobCode:this._password});default:Xt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vr(e,r,"signUpPassword",_k,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Rk(e,{idToken:n,email:this._email,oobCode:this._password});default:Xt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yi(t,e){return nr(t,"POST","/v1/accounts:signInWithIdp",We(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk="http://localhost";class Qn extends ju{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Qn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Xt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new Qn(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return yi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,yi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,yi(e,n)}buildRequest(){const e={requestUri:bk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=qi(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T0(t,e){return He(t,"POST","/v1/accounts:sendVerificationCode",We(t,e))}async function kk(t,e){return nr(t,"POST","/v1/accounts:signInWithPhoneNumber",We(t,e))}async function Ck(t,e){const n=await nr(t,"POST","/v1/accounts:signInWithPhoneNumber",We(t,e));if(n.temporaryProof)throw Vo(t,"account-exists-with-different-credential",n);return n}const Ak={USER_NOT_FOUND:"user-not-found"};async function Pk(t,e){const n={...e,operation:"REAUTH"};return nr(t,"POST","/v1/accounts:signInWithPhoneNumber",We(t,n),Ak)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo extends ju{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Zo({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Zo({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return kk(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return Ck(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return Pk(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i}=e;return!r&&!n&&!s&&!i?null:new Zo({verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Ok(t){const e=Lo(jo(t)).link,n=e?Lo(jo(e)).deep_link_id:null,r=Lo(jo(t)).deep_link_id;return(r?Lo(jo(r)).link:null)||r||n||e||t}class Mu{constructor(e){const n=Lo(jo(e)),r=n.apiKey??null,s=n.oobCode??null,i=Dk(n.mode??null);B(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Ok(e);try{return new Mu(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(){this.providerId=js.PROVIDER_ID}static credential(e,n){return Aa._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Mu.parseLink(n);return B(r,"argument-error"),Aa._fromEmailAndCode(e,r.code,r.tenantId)}}js.PROVIDER_ID="password";js.EMAIL_PASSWORD_SIGN_IN_METHOD="password";js.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends Ki{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class cc extends Gi{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return B("providerId"in n&&"signInMethod"in n,"argument-error"),Qn._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return B(e.idToken||e.accessToken,"argument-error"),Qn._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return cc.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return cc.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:s,pendingToken:i,nonce:o,providerId:l}=e;if(!r&&!s&&!n&&!i||!l)return null;try{return new cc(l)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:i})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends Gi{constructor(){super("facebook.com")}static credential(e){return Qn._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vr.credential(e.oauthAccessToken)}catch{return null}}}vr.FACEBOOK_SIGN_IN_METHOD="facebook.com";vr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En extends Gi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Qn._fromParams({providerId:En.PROVIDER_ID,signInMethod:En.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return En.credentialFromTaggedObject(e)}static credentialFromError(e){return En.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return En.credential(n,r)}catch{return null}}}En.GOOGLE_SIGN_IN_METHOD="google.com";En.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends Gi{constructor(){super("github.com")}static credential(e){return Qn._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _r.credential(e.oauthAccessToken)}catch{return null}}}_r.GITHUB_SIGN_IN_METHOD="github.com";_r.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends Gi{constructor(){super("twitter.com")}static credential(e,n){return Qn._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return wr.credential(n,r)}catch{return null}}}wr.TWITTER_SIGN_IN_METHOD="twitter.com";wr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fE(t,e){return nr(t,"POST","/v1/accounts:signUp",We(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await an._fromIdTokenResponse(e,r,s),o=S0(r);return new Rn({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=S0(r);return new Rn({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function S0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cL(t){var s;if(Ve(t.app))return Promise.reject(wt(t));const e=tt(t);if(await e._initializationPromise,(s=e.currentUser)!=null&&s.isAnonymous)return new Rn({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await fE(e,{returnSecureToken:!0}),r=await Rn._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc extends An{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Kc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Kc(e,n,r,s)}}function pE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Kc._fromErrorAndOperation(t,i,e,r):i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uL(t,e){const n=ne(t);await Fu(!0,n,e);const{providerUserInfo:r}=await Fb(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),s=mE(r||[]);return n.providerData=n.providerData.filter(i=>s.has(i.providerId)),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function gE(t,e,n=!1){const r=await Rs(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Rn._forOperation(t,"link",r)}async function Fu(t,e,n){await Ca(e);const r=mE(e.providerData),s=t===!1?"provider-already-linked":"no-such-provider";B(r.has(n)===t,e.auth,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lk(t,e,n=!1){const{auth:r}=t;if(Ve(r.app))return Promise.reject(wt(r));const s="reauthenticate";try{const i=await Rs(t,pE(r,s,e,t),n);B(i.idToken,r,"internal-error");const o=Lu(i.idToken);B(o,r,"internal-error");const{sub:l}=o;return B(t.uid===l,r,"user-mismatch"),Rn._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Xt(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yE(t,e,n=!1){if(Ve(t.app))return Promise.reject(wt(t));const r="signIn",s=await pE(t,r,e),i=await Rn._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Uu(t,e){return yE(tt(t),e)}async function jk(t,e){const n=ne(t);return await Fu(!1,n,e.providerId),gE(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vk(t,e){return nr(t,"POST","/v1/accounts:signInWithCustomToken",We(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dL(t,e){if(Ve(t.app))return Promise.reject(wt(t));const n=tt(t),r=await Vk(n,{token:e,returnSecureToken:!0}),s=await Rn._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(t,e,n){var r;B(((r=n.url)==null?void 0:r.length)>0,t,"invalid-continue-uri"),B(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),B(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(B(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(B(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cm(t){const e=tt(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function hL(t,e,n){const r=tt(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&zu(r,s,n),await Vr(r,s,"getOobCode",Ik,"EMAIL_PASSWORD_PROVIDER")}async function fL(t,e,n){await yk(ne(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&cm(t),r})}async function pL(t,e){await wk(ne(t),{oobCode:e})}async function mL(t,e,n){if(Ve(t.app))return Promise.reject(wt(t));const r=tt(t),o=await Vr(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",fE,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&cm(t),c}),l=await Rn._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function gL(t,e,n){return Ve(t.app)?Promise.reject(wt(t)):Uu(ne(t),js.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&cm(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yL(t,e,n){const r=tt(t),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function i(o,l){B(l.handleCodeInApp,r,"argument-error"),l&&zu(r,o,l)}i(s,n),await Vr(r,s,"getOobCode",Tk,"EMAIL_PASSWORD_PROVIDER")}function vL(t,e){const n=Mu.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function _L(t,e,n){if(Ve(t.app))return Promise.reject(wt(t));const r=ne(t),s=js.credentialWithLink(e,n||ka());return B(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Uu(r,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mk(t,e){return He(t,"POST","/v1/accounts:createAuthUri",We(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wL(t,e){const n=im()?ka():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await Mk(ne(t),r);return s||[]}async function EL(t,e){const n=ne(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&zu(n.auth,s,e);const{email:i}=await xk(n.auth,s);i!==t.email&&await t.reload()}async function xL(t,e,n){const r=ne(t),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&zu(r.auth,i,n);const{email:o}=await Sk(r.auth,i);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fk(t,e){return He(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IL(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ne(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Rs(r,Fk(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function TL(t,e){const n=ne(t);return Ve(n.auth.app)?Promise.reject(wt(n.auth)):vE(n,e,null)}function SL(t,e){return vE(ne(t),null,e)}async function vE(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(i.email=e),n&&(i.password=n);const o=await Rs(t,vk(r,i));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(t){var s,i;if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},r=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(t!=null&&t.idToken)){const o=(i=(s=Lu(t.idToken))==null?void 0:s.firebase)==null?void 0:i.sign_in_provider;if(o){const l=o!=="anonymous"&&o!=="custom"?o:null;return new vi(r,l)}}if(!e)return null;switch(e){case"facebook.com":return new zk(r,n);case"github.com":return new $k(r,n);case"google.com":return new Bk(r,n);case"twitter.com":return new Wk(r,n,t.screenName||null);case"custom":case"anonymous":return new vi(r,null);default:return new vi(r,e,n)}}class vi{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class _E extends vi{constructor(e,n,r,s){super(e,n,r),this.username=s}}class zk extends vi{constructor(e,n){super(e,"facebook.com",n)}}class $k extends _E{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class Bk extends vi{constructor(e,n){super(e,"google.com",n)}}class Wk extends _E{constructor(e,n,r){super(e,"twitter.com",n,r)}}function NL(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:Uk(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RL(t,e){return ne(t).setPersistence(e)}function Hk(t,e,n,r){return ne(t).onIdTokenChanged(e,n,r)}function qk(t,e,n){return ne(t).beforeAuthStateChanged(e,n)}function wE(t,e,n,r){return ne(t).onAuthStateChanged(e,n,r)}function kf(t){return ne(t).signOut()}function bL(t,e){return tt(t).revokeAccessToken(e)}async function kL(t){return ne(t).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(t,e){return He(t,"POST","/v2/accounts/mfaEnrollment:start",We(t,e))}const Gc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gc,"1"),this.storage.removeItem(Gc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=1e3,Gk=10;class xE extends EE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=aE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);Gb()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Gk):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Kk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}xE.type="LOCAL";const IE=xE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE extends EE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}TE.type="SESSION";const SE=TE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new $u(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,i)),c=await Qk(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$u.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=Bu("",20);s.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const m=p;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(f),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(){return window}function Jk(t){Le().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(){return typeof Le().WorkerGlobalScope<"u"&&typeof Le().importScripts=="function"}async function Xk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Zk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function eC(){return um()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="firebaseLocalStorageDb",tC=1,Qc="firebaseLocalStorage",RE="fbase_key";class Qa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Wu(t,e){return t.transaction([Qc],e?"readwrite":"readonly").objectStore(Qc)}function nC(){const t=indexedDB.deleteDatabase(NE);return new Qa(t).toPromise()}function Cf(){const t=indexedDB.open(NE,tC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Qc,{keyPath:RE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Qc)?e(r):(r.close(),await nC(),e(await Cf()))})})}async function R0(t,e,n){const r=Wu(t,!0).put({[RE]:e,value:n});return new Qa(r).toPromise()}async function rC(t,e){const n=Wu(t,!1).get(e),r=await new Qa(n).toPromise();return r===void 0?null:r.value}function b0(t,e){const n=Wu(t,!0).delete(e);return new Qa(n).toPromise()}const sC=800,iC=3;class bE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Cf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>iC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return um()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$u._getInstance(eC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Xk(),!this.activeServiceWorker)return;this.sender=new Yk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Zk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cf();return await R0(e,Gc,"1"),await b0(e,Gc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>R0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>rC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>b0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Wu(s,!1).getAll();return new Qa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bE.type="LOCAL";const oC=bE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(t,e){return He(t,"POST","/v2/accounts/mfaSignIn:start",We(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh=cE("rcb"),aC=new Ka(3e4,6e4);class lC{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=Le().grecaptcha)!=null&&e.render)}load(e,n=""){return B(cC(n),e,"argument-error"),this.shouldResolveImmediately(n)&&g0(Le().grecaptcha)?Promise.resolve(Le().grecaptcha):new Promise((r,s)=>{const i=Le().setTimeout(()=>{s(Pt(e,"network-request-failed"))},aC.get());Le()[uh]=()=>{Le().clearTimeout(i),delete Le()[uh];const l=Le().grecaptcha;if(!l||!g0(l)){s(Pt(e,"internal-error"));return}const c=l.render;l.render=(u,f)=>{const p=c(u,f);return this.counter++,p},this.hostLanguage=n,r(l)};const o=`${tk()}?${qi({onload:uh,render:"explicit",hl:n})}`;lm(o).catch(()=>{clearTimeout(i),s(Pt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=Le().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function cC(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class uC{async load(e){return new ok(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea="recaptcha",dC={theme:"light",type:"image"};class CL{constructor(e,n,r={...dC}){this.parameters=r,this.type=ea,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=tt(e),this.isInvisible=this.parameters.size==="invisible",B(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof n=="string"?document.getElementById(n):n;B(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new uC:new lC,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(s=>{const i=o=>{o&&(this.tokenChangeListeners.delete(i),s(o))};this.tokenChangeListeners.add(i),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){B(!this.parameters.sitekey,this.auth,"argument-error"),B(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),B(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Le()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){B(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){B(im()&&!um(),this.auth,"internal-error"),await hC(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await Vb(this.auth);B(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return B(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function hC(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Zo._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function AL(t,e,n){if(Ve(t.app))return Promise.reject(wt(t));const r=tt(t),s=await CE(r,e,ne(n));return new kE(s,i=>Uu(r,i))}async function PL(t,e,n){const r=ne(t);await Fu(!1,r,"phone");const s=await CE(r.auth,e,ne(n));return new kE(s,i=>jk(r,i))}async function CE(t,e,n){var r;if(!t._getRecaptchaConfig())try{await hk(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const i=s.session;if("phoneNumber"in s){B(i.type==="enroll",t,"internal-error");const o={idToken:i.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Vr(t,o,"mfaSmsEnrollment",async(f,p)=>{if(p.phoneEnrollmentInfo.captchaResponse===Xo){B((n==null?void 0:n.type)===ea,f,"argument-error");const m=await dh(f,p,n);return N0(f,m)}return N0(f,p)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).phoneSessionInfo.sessionInfo}else{B(i.type==="signin",t,"internal-error");const o=((r=s.multiFactorHint)==null?void 0:r.uid)||s.multiFactorUid;B(o,t,"missing-multi-factor-info");const l={mfaPendingCredential:i.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Vr(t,l,"mfaSmsSignIn",async(p,m)=>{if(m.phoneSignInInfo.captchaResponse===Xo){B((n==null?void 0:n.type)===ea,p,"argument-error");const I=await dh(p,m,n);return k0(p,I)}return k0(p,m)},"PHONE_PROVIDER").catch(p=>Promise.reject(p))).phoneResponseInfo.sessionInfo}}else{const i={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Vr(t,i,"sendVerificationCode",async(u,f)=>{if(f.captchaResponse===Xo){B((n==null?void 0:n.type)===ea,u,"argument-error");const p=await dh(u,f,n);return T0(u,p)}return T0(u,f)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).sessionInfo}}finally{n==null||n._reset()}}async function dh(t,e,n){B(n.type===ea,t,"argument-error");const r=await n.verify();B(typeof r=="string",t,"argument-error");const s={...e};if("phoneEnrollmentInfo"in s){const i=s.phoneEnrollmentInfo.phoneNumber,o=s.phoneEnrollmentInfo.captchaResponse,l=s.phoneEnrollmentInfo.clientType,c=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:i,recaptchaToken:r,captchaResponse:o,clientType:l,recaptchaVersion:c}}),s}else if("phoneSignInInfo"in s){const i=s.phoneSignInInfo.captchaResponse,o=s.phoneSignInInfo.clientType,l=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:i,clientType:o,recaptchaVersion:l}}),s}else return Object.assign(s,{recaptchaToken:r}),s}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(t,e){return e?Un(e):(B(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm extends ju{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return yi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return yi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function fC(t){return yE(t.auth,new dm(t),t.bypassAuthState)}function pC(t){const{auth:e,user:n}=t;return B(n,e,"internal-error"),Lk(n,new dm(t),t.bypassAuthState)}async function mC(t){const{auth:e,user:n}=t;return B(n,e,"internal-error"),gE(n,new dm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fC;case"linkViaPopup":case"linkViaRedirect":return mC;case"reauthViaPopup":case"reauthViaRedirect":return pC;default:Xt(this.auth,"internal-error")}}resolve(e){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=new Ka(2e3,1e4);async function PE(t,e,n){if(Ve(t.app))return Promise.reject(Pt(t,"operation-not-supported-in-this-environment"));const r=tt(t);Ou(t,e,Ki);const s=Ya(r,n);return new Tr(r,"signInViaPopup",e,s).executeNotNull()}async function DL(t,e,n){const r=ne(t);Ou(r.auth,e,Ki);const s=Ya(r.auth,n);return new Tr(r.auth,"linkViaPopup",e,s,r).executeNotNull()}class Tr extends AE{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Tr.currentPopupAction&&Tr.currentPopupAction.cancel(),Tr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return B(e,this.auth,"internal-error"),e}async onExecution(){Gn(this.filter.length===1,"Popup operations only handle one event");const e=Bu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Pt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Pt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Tr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,gC.get())};e()}}Tr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC="pendingRedirect",uc=new Map;class vC extends AE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=uc.get(this.auth._key());if(!e){try{const r=await _C(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}uc.set(this.auth._key(),e)}return this.bypassAuthState||uc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _C(t,e){const n=LE(e),r=OE(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function DE(t,e){return OE(t)._set(LE(e),"true")}function wC(t,e){uc.set(t._key(),e)}function OE(t){return Un(t._redirectPersistence)}function LE(t){return lc(yC,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OL(t,e,n){return EC(t,e,n)}async function EC(t,e,n){if(Ve(t.app))return Promise.reject(wt(t));const r=tt(t);Ou(t,e,Ki),await r._initializationPromise;const s=Ya(r,n);return await DE(s,r),s._openRedirect(r,e,"signInViaRedirect")}function LL(t,e,n){return xC(t,e,n)}async function xC(t,e,n){const r=ne(t);Ou(r.auth,e,Ki),await r.auth._initializationPromise;const s=Ya(r.auth,n);await Fu(!1,r,e.providerId),await DE(s,r.auth);const i=await IC(r);return s._openRedirect(r.auth,e,"linkViaRedirect",i)}async function jL(t,e){return await tt(t)._initializationPromise,jE(t,e,!1)}async function jE(t,e,n=!1){if(Ve(t.app))return Promise.reject(wt(t));const r=tt(t),s=Ya(r,e),o=await new vC(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function IC(t){const e=Bu(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=10*60*1e3;class SC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!NC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!VE(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Pt(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=TC&&this.cachedEventUids.clear(),this.cachedEventUids.has(C0(e))}saveEventToCache(e){this.cachedEventUids.add(C0(e)),this.lastProcessedEventTime=Date.now()}}function C0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function VE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function NC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return VE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RC(t,e={}){return He(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kC=/^https?/;async function CC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await RC(t);for(const n of e)try{if(AC(n))return}catch{}Xt(t,"unauthorized-domain")}function AC(t){const e=ka(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!kC.test(n))return!1;if(bC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=new Ka(3e4,6e4);function A0(){const t=Le().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function DC(t){return new Promise((e,n)=>{var s,i,o;function r(){A0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{A0(),n(Pt(t,"network-request-failed"))},timeout:PC.get()})}if((i=(s=Le().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Le().gapi)!=null&&o.load)r();else{const l=cE("iframefcb");return Le()[l]=()=>{gapi.load?r():n(Pt(t,"network-request-failed"))},lm(`${rk()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw dc=null,e})}let dc=null;function OC(t){return dc=dc||DC(t),dc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=new Ka(5e3,15e3),jC="__/auth/iframe",VC="emulator/auth/iframe",MC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UC(t){const e=t.config;B(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?om(e,VC):`https://${t.config.authDomain}/${jC}`,r={apiKey:e.apiKey,appName:t.name,v:Ls},s=FC.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${qi(r).slice(1)}`}async function zC(t){const e=await OC(t),n=Le().gapi;return B(n,t,"internal-error"),e.open({where:document.body,url:UC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:MC,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Pt(t,"network-request-failed"),l=Le().setTimeout(()=>{i(o)},LC.get());function c(){Le().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},BC=500,WC=600,HC="_blank",qC="http://localhost";class P0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function KC(t,e,n,r=BC,s=WC){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...$C,width:r.toString(),height:s.toString(),top:i,left:o},u=mt().toLowerCase();n&&(l=nE(u)?HC:n),eE(u)&&(e=e||qC,c.scrollbars="yes");const f=Object.entries(c).reduce((m,[I,b])=>`${m}${I}=${b},`,"");if(Kb(u)&&l!=="_self")return GC(e||"",l),new P0(null);const p=window.open(e||"",l,f);B(p,t,"popup-blocked");try{p.focus()}catch{}return new P0(p)}function GC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC="__/auth/handler",YC="emulator/auth/handler",JC=encodeURIComponent("fac");async function D0(t,e,n,r,s,i){B(t.config.authDomain,t,"auth-domain-config-required"),B(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ls,eventId:s};if(e instanceof Ki){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",gR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof Gi){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const c=await t._getAppCheckToken(),u=c?`#${JC}=${encodeURIComponent(c)}`:"";return`${XC(t)}?${qi(l).slice(1)}${u}`}function XC({config:t}){return t.emulator?om(t,YC):`https://${t.authDomain}/${QC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh="webStorageSupport";class ZC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=SE,this._completeRedirectFn=jE,this._overrideRedirectResult=wC}async _openPopup(e,n,r,s){var o;Gn((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await D0(e,n,r,ka(),s);return KC(e,i,Bu())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await D0(e,n,r,ka(),s);return Jk(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Gn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await zC(e),r=new SC(e);return n.register("authEvent",s=>(B(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(hh,{type:hh},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[hh];i!==void 0&&n(!!i),Xt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=CC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return aE()||tE()||am()}}const eA=ZC;var O0="@firebase/auth",L0="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rA(t){Ns(new Wr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;B(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lE(t)},u=new Zb(r,s,i,c);return fk(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ns(new Wr("auth-internal",e=>{const n=tt(e.getProvider("auth").getImmediate());return(r=>new tA(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tn(O0,L0,nA(t)),Tn(O0,L0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA=5*60,iA=M1("authIdTokenMaxAge")||sA;let j0=null;const oA=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>iA)return;const s=n==null?void 0:n.token;j0!==s&&(j0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function aA(t=nm()){const e=Du(t,"auth");if(e.isInitialized())return e.getImmediate();const n=dE(t,{popupRedirectResolver:eA,persistence:[oC,IE,SE]}),r=M1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=oA(i.toString());qk(n,o,()=>o(n.currentUser)),Hk(n,l=>o(l))}}const s=L1("auth");return s&&pk(n,`http://${s}`),n}function lA(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}ek({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Pt("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",lA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rA("Browser");var cA="firebase",uA="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tn(cA,uA,"app");var V0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mr,ME;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,y){function T(){}T.prototype=y.prototype,x.F=y.prototype,x.prototype=new T,x.prototype.constructor=x,x.D=function(R,k,P){for(var N=Array(arguments.length-2),he=2;he<arguments.length;he++)N[he-2]=arguments[he];return y.prototype[k].apply(R,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,y,T){T||(T=0);const R=Array(16);if(typeof y=="string")for(var k=0;k<16;++k)R[k]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(k=0;k<16;++k)R[k]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=x.g[0],T=x.g[1],k=x.g[2];let P=x.g[3],N;N=y+(P^T&(k^P))+R[0]+3614090360&4294967295,y=T+(N<<7&4294967295|N>>>25),N=P+(k^y&(T^k))+R[1]+3905402710&4294967295,P=y+(N<<12&4294967295|N>>>20),N=k+(T^P&(y^T))+R[2]+606105819&4294967295,k=P+(N<<17&4294967295|N>>>15),N=T+(y^k&(P^y))+R[3]+3250441966&4294967295,T=k+(N<<22&4294967295|N>>>10),N=y+(P^T&(k^P))+R[4]+4118548399&4294967295,y=T+(N<<7&4294967295|N>>>25),N=P+(k^y&(T^k))+R[5]+1200080426&4294967295,P=y+(N<<12&4294967295|N>>>20),N=k+(T^P&(y^T))+R[6]+2821735955&4294967295,k=P+(N<<17&4294967295|N>>>15),N=T+(y^k&(P^y))+R[7]+4249261313&4294967295,T=k+(N<<22&4294967295|N>>>10),N=y+(P^T&(k^P))+R[8]+1770035416&4294967295,y=T+(N<<7&4294967295|N>>>25),N=P+(k^y&(T^k))+R[9]+2336552879&4294967295,P=y+(N<<12&4294967295|N>>>20),N=k+(T^P&(y^T))+R[10]+4294925233&4294967295,k=P+(N<<17&4294967295|N>>>15),N=T+(y^k&(P^y))+R[11]+2304563134&4294967295,T=k+(N<<22&4294967295|N>>>10),N=y+(P^T&(k^P))+R[12]+1804603682&4294967295,y=T+(N<<7&4294967295|N>>>25),N=P+(k^y&(T^k))+R[13]+4254626195&4294967295,P=y+(N<<12&4294967295|N>>>20),N=k+(T^P&(y^T))+R[14]+2792965006&4294967295,k=P+(N<<17&4294967295|N>>>15),N=T+(y^k&(P^y))+R[15]+1236535329&4294967295,T=k+(N<<22&4294967295|N>>>10),N=y+(k^P&(T^k))+R[1]+4129170786&4294967295,y=T+(N<<5&4294967295|N>>>27),N=P+(T^k&(y^T))+R[6]+3225465664&4294967295,P=y+(N<<9&4294967295|N>>>23),N=k+(y^T&(P^y))+R[11]+643717713&4294967295,k=P+(N<<14&4294967295|N>>>18),N=T+(P^y&(k^P))+R[0]+3921069994&4294967295,T=k+(N<<20&4294967295|N>>>12),N=y+(k^P&(T^k))+R[5]+3593408605&4294967295,y=T+(N<<5&4294967295|N>>>27),N=P+(T^k&(y^T))+R[10]+38016083&4294967295,P=y+(N<<9&4294967295|N>>>23),N=k+(y^T&(P^y))+R[15]+3634488961&4294967295,k=P+(N<<14&4294967295|N>>>18),N=T+(P^y&(k^P))+R[4]+3889429448&4294967295,T=k+(N<<20&4294967295|N>>>12),N=y+(k^P&(T^k))+R[9]+568446438&4294967295,y=T+(N<<5&4294967295|N>>>27),N=P+(T^k&(y^T))+R[14]+3275163606&4294967295,P=y+(N<<9&4294967295|N>>>23),N=k+(y^T&(P^y))+R[3]+4107603335&4294967295,k=P+(N<<14&4294967295|N>>>18),N=T+(P^y&(k^P))+R[8]+1163531501&4294967295,T=k+(N<<20&4294967295|N>>>12),N=y+(k^P&(T^k))+R[13]+2850285829&4294967295,y=T+(N<<5&4294967295|N>>>27),N=P+(T^k&(y^T))+R[2]+4243563512&4294967295,P=y+(N<<9&4294967295|N>>>23),N=k+(y^T&(P^y))+R[7]+1735328473&4294967295,k=P+(N<<14&4294967295|N>>>18),N=T+(P^y&(k^P))+R[12]+2368359562&4294967295,T=k+(N<<20&4294967295|N>>>12),N=y+(T^k^P)+R[5]+4294588738&4294967295,y=T+(N<<4&4294967295|N>>>28),N=P+(y^T^k)+R[8]+2272392833&4294967295,P=y+(N<<11&4294967295|N>>>21),N=k+(P^y^T)+R[11]+1839030562&4294967295,k=P+(N<<16&4294967295|N>>>16),N=T+(k^P^y)+R[14]+4259657740&4294967295,T=k+(N<<23&4294967295|N>>>9),N=y+(T^k^P)+R[1]+2763975236&4294967295,y=T+(N<<4&4294967295|N>>>28),N=P+(y^T^k)+R[4]+1272893353&4294967295,P=y+(N<<11&4294967295|N>>>21),N=k+(P^y^T)+R[7]+4139469664&4294967295,k=P+(N<<16&4294967295|N>>>16),N=T+(k^P^y)+R[10]+3200236656&4294967295,T=k+(N<<23&4294967295|N>>>9),N=y+(T^k^P)+R[13]+681279174&4294967295,y=T+(N<<4&4294967295|N>>>28),N=P+(y^T^k)+R[0]+3936430074&4294967295,P=y+(N<<11&4294967295|N>>>21),N=k+(P^y^T)+R[3]+3572445317&4294967295,k=P+(N<<16&4294967295|N>>>16),N=T+(k^P^y)+R[6]+76029189&4294967295,T=k+(N<<23&4294967295|N>>>9),N=y+(T^k^P)+R[9]+3654602809&4294967295,y=T+(N<<4&4294967295|N>>>28),N=P+(y^T^k)+R[12]+3873151461&4294967295,P=y+(N<<11&4294967295|N>>>21),N=k+(P^y^T)+R[15]+530742520&4294967295,k=P+(N<<16&4294967295|N>>>16),N=T+(k^P^y)+R[2]+3299628645&4294967295,T=k+(N<<23&4294967295|N>>>9),N=y+(k^(T|~P))+R[0]+4096336452&4294967295,y=T+(N<<6&4294967295|N>>>26),N=P+(T^(y|~k))+R[7]+1126891415&4294967295,P=y+(N<<10&4294967295|N>>>22),N=k+(y^(P|~T))+R[14]+2878612391&4294967295,k=P+(N<<15&4294967295|N>>>17),N=T+(P^(k|~y))+R[5]+4237533241&4294967295,T=k+(N<<21&4294967295|N>>>11),N=y+(k^(T|~P))+R[12]+1700485571&4294967295,y=T+(N<<6&4294967295|N>>>26),N=P+(T^(y|~k))+R[3]+2399980690&4294967295,P=y+(N<<10&4294967295|N>>>22),N=k+(y^(P|~T))+R[10]+4293915773&4294967295,k=P+(N<<15&4294967295|N>>>17),N=T+(P^(k|~y))+R[1]+2240044497&4294967295,T=k+(N<<21&4294967295|N>>>11),N=y+(k^(T|~P))+R[8]+1873313359&4294967295,y=T+(N<<6&4294967295|N>>>26),N=P+(T^(y|~k))+R[15]+4264355552&4294967295,P=y+(N<<10&4294967295|N>>>22),N=k+(y^(P|~T))+R[6]+2734768916&4294967295,k=P+(N<<15&4294967295|N>>>17),N=T+(P^(k|~y))+R[13]+1309151649&4294967295,T=k+(N<<21&4294967295|N>>>11),N=y+(k^(T|~P))+R[4]+4149444226&4294967295,y=T+(N<<6&4294967295|N>>>26),N=P+(T^(y|~k))+R[11]+3174756917&4294967295,P=y+(N<<10&4294967295|N>>>22),N=k+(y^(P|~T))+R[2]+718787259&4294967295,k=P+(N<<15&4294967295|N>>>17),N=T+(P^(k|~y))+R[9]+3951481745&4294967295,x.g[0]=x.g[0]+y&4294967295,x.g[1]=x.g[1]+(k+(N<<21&4294967295|N>>>11))&4294967295,x.g[2]=x.g[2]+k&4294967295,x.g[3]=x.g[3]+P&4294967295}r.prototype.v=function(x,y){y===void 0&&(y=x.length);const T=y-this.blockSize,R=this.C;let k=this.h,P=0;for(;P<y;){if(k==0)for(;P<=T;)s(this,x,P),P+=this.blockSize;if(typeof x=="string"){for(;P<y;)if(R[k++]=x.charCodeAt(P++),k==this.blockSize){s(this,R),k=0;break}}else for(;P<y;)if(R[k++]=x[P++],k==this.blockSize){s(this,R),k=0;break}}this.h=k,this.o+=y},r.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var y=1;y<x.length-8;++y)x[y]=0;y=this.o*8;for(var T=x.length-8;T<x.length;++T)x[T]=y&255,y/=256;for(this.v(x),x=Array(16),y=0,T=0;T<4;++T)for(let R=0;R<32;R+=8)x[y++]=this.g[T]>>>R&255;return x};function i(x,y){var T=l;return Object.prototype.hasOwnProperty.call(T,x)?T[x]:T[x]=y(x)}function o(x,y){this.h=y;const T=[];let R=!0;for(let k=x.length-1;k>=0;k--){const P=x[k]|0;R&&P==y||(T[k]=P,R=!1)}this.g=T}var l={};function c(x){return-128<=x&&x<128?i(x,function(y){return new o([y|0],y<0?-1:0)}):new o([x|0],x<0?-1:0)}function u(x){if(isNaN(x)||!isFinite(x))return p;if(x<0)return S(u(-x));const y=[];let T=1;for(let R=0;x>=T;R++)y[R]=x/T|0,T*=4294967296;return new o(y,0)}function f(x,y){if(x.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(x.charAt(0)=="-")return S(f(x.substring(1),y));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=u(Math.pow(y,8));let R=p;for(let P=0;P<x.length;P+=8){var k=Math.min(8,x.length-P);const N=parseInt(x.substring(P,P+k),y);k<8?(k=u(Math.pow(y,k)),R=R.j(k).add(u(N))):(R=R.j(T),R=R.add(u(N)))}return R}var p=c(0),m=c(1),I=c(16777216);t=o.prototype,t.m=function(){if(C(this))return-S(this).m();let x=0,y=1;for(let T=0;T<this.g.length;T++){const R=this.i(T);x+=(R>=0?R:4294967296+R)*y,y*=4294967296}return x},t.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(b(this))return"0";if(C(this))return"-"+S(this).toString(x);const y=u(Math.pow(x,6));var T=this;let R="";for(;;){const k=A(T,y).g;T=_(T,k.j(y));let P=((T.g.length>0?T.g[0]:T.h)>>>0).toString(x);if(T=k,b(T))return P+R;for(;P.length<6;)P="0"+P;R=P+R}},t.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function b(x){if(x.h!=0)return!1;for(let y=0;y<x.g.length;y++)if(x.g[y]!=0)return!1;return!0}function C(x){return x.h==-1}t.l=function(x){return x=_(this,x),C(x)?-1:b(x)?0:1};function S(x){const y=x.g.length,T=[];for(let R=0;R<y;R++)T[R]=~x.g[R];return new o(T,~x.h).add(m)}t.abs=function(){return C(this)?S(this):this},t.add=function(x){const y=Math.max(this.g.length,x.g.length),T=[];let R=0;for(let k=0;k<=y;k++){let P=R+(this.i(k)&65535)+(x.i(k)&65535),N=(P>>>16)+(this.i(k)>>>16)+(x.i(k)>>>16);R=N>>>16,P&=65535,N&=65535,T[k]=N<<16|P}return new o(T,T[T.length-1]&-2147483648?-1:0)};function _(x,y){return x.add(S(y))}t.j=function(x){if(b(this)||b(x))return p;if(C(this))return C(x)?S(this).j(S(x)):S(S(this).j(x));if(C(x))return S(this.j(S(x)));if(this.l(I)<0&&x.l(I)<0)return u(this.m()*x.m());const y=this.g.length+x.g.length,T=[];for(var R=0;R<2*y;R++)T[R]=0;for(R=0;R<this.g.length;R++)for(let k=0;k<x.g.length;k++){const P=this.i(R)>>>16,N=this.i(R)&65535,he=x.i(k)>>>16,pe=x.i(k)&65535;T[2*R+2*k]+=N*pe,v(T,2*R+2*k),T[2*R+2*k+1]+=P*pe,v(T,2*R+2*k+1),T[2*R+2*k+1]+=N*he,v(T,2*R+2*k+1),T[2*R+2*k+2]+=P*he,v(T,2*R+2*k+2)}for(x=0;x<y;x++)T[x]=T[2*x+1]<<16|T[2*x];for(x=y;x<2*y;x++)T[x]=0;return new o(T,0)};function v(x,y){for(;(x[y]&65535)!=x[y];)x[y+1]+=x[y]>>>16,x[y]&=65535,y++}function w(x,y){this.g=x,this.h=y}function A(x,y){if(b(y))throw Error("division by zero");if(b(x))return new w(p,p);if(C(x))return y=A(S(x),y),new w(S(y.g),S(y.h));if(C(y))return y=A(x,S(y)),new w(S(y.g),y.h);if(x.g.length>30){if(C(x)||C(y))throw Error("slowDivide_ only works with positive integers.");for(var T=m,R=y;R.l(x)<=0;)T=L(T),R=L(R);var k=D(T,1),P=D(R,1);for(R=D(R,2),T=D(T,2);!b(R);){var N=P.add(R);N.l(x)<=0&&(k=k.add(T),P=N),R=D(R,1),T=D(T,1)}return y=_(x,k.j(y)),new w(k,y)}for(k=p;x.l(y)>=0;){for(T=Math.max(1,Math.floor(x.m()/y.m())),R=Math.ceil(Math.log(T)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),P=u(T),N=P.j(y);C(N)||N.l(x)>0;)T-=R,P=u(T),N=P.j(y);b(P)&&(P=m),k=k.add(P),x=_(x,N)}return new w(k,x)}t.B=function(x){return A(this,x).h},t.and=function(x){const y=Math.max(this.g.length,x.g.length),T=[];for(let R=0;R<y;R++)T[R]=this.i(R)&x.i(R);return new o(T,this.h&x.h)},t.or=function(x){const y=Math.max(this.g.length,x.g.length),T=[];for(let R=0;R<y;R++)T[R]=this.i(R)|x.i(R);return new o(T,this.h|x.h)},t.xor=function(x){const y=Math.max(this.g.length,x.g.length),T=[];for(let R=0;R<y;R++)T[R]=this.i(R)^x.i(R);return new o(T,this.h^x.h)};function L(x){const y=x.g.length+1,T=[];for(let R=0;R<y;R++)T[R]=x.i(R)<<1|x.i(R-1)>>>31;return new o(T,x.h)}function D(x,y){const T=y>>5;y%=32;const R=x.g.length-T,k=[];for(let P=0;P<R;P++)k[P]=y>0?x.i(P+T)>>>y|x.i(P+T+1)<<32-y:x.i(P+T);return new o(k,x.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,ME=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=f,Mr=o}).apply(typeof V0<"u"?V0:typeof self<"u"?self:typeof window<"u"?window:{});var $l=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var FE,Mo,UE,hc,Af,zE,$E,BE;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof $l=="object"&&$l];for(var h=0;h<a.length;++h){var g=a[h];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var g=r;a=a.split(".");for(var E=0;E<a.length-1;E++){var O=a[E];if(!(O in g))break e;g=g[O]}a=a[a.length-1],E=g[a],h=h(E),h!=E&&h!=null&&e(g,a,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(h){var g=[],E;for(E in h)Object.prototype.hasOwnProperty.call(h,E)&&g.push([E,h[E]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function c(a,h,g){return a.call.apply(a.bind,arguments)}function u(a,h,g){return u=c,u.apply(null,arguments)}function f(a,h){var g=Array.prototype.slice.call(arguments,1);return function(){var E=g.slice();return E.push.apply(E,arguments),a.apply(this,E)}}function p(a,h){function g(){}g.prototype=h.prototype,a.Z=h.prototype,a.prototype=new g,a.prototype.constructor=a,a.Ob=function(E,O,j){for(var $=Array(arguments.length-2),te=2;te<arguments.length;te++)$[te-2]=arguments[te];return h.prototype[O].apply(E,$)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function I(a){const h=a.length;if(h>0){const g=Array(h);for(let E=0;E<h;E++)g[E]=a[E];return g}return[]}function b(a,h){for(let E=1;E<arguments.length;E++){const O=arguments[E];var g=typeof O;if(g=g!="object"?g:O?Array.isArray(O)?"array":g:"null",g=="array"||g=="object"&&typeof O.length=="number"){g=a.length||0;const j=O.length||0;a.length=g+j;for(let $=0;$<j;$++)a[g+$]=O[$]}else a.push(O)}}class C{constructor(h,g){this.i=h,this.j=g,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function S(a){o.setTimeout(()=>{throw a},0)}function _(){var a=x;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class v{constructor(){this.h=this.g=null}add(h,g){const E=w.get();E.set(h,g),this.h?this.h.next=E:this.g=E,this.h=E}}var w=new C(()=>new A,a=>a.reset());class A{constructor(){this.next=this.g=this.h=null}set(h,g){this.h=h,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let L,D=!1,x=new v,y=()=>{const a=Promise.resolve(void 0);L=()=>{a.then(T)}};function T(){for(var a;a=_();){try{a.h.call(a.g)}catch(g){S(g)}var h=w;h.j(a),h.h<100&&(h.h++,a.next=h.g,h.g=a)}D=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const g=()=>{};o.addEventListener("test",g,h),o.removeEventListener("test",g,h)}catch{}return a}();function N(a){return/^[\s\xa0]*$/.test(a)}function he(a,h){k.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,h)}p(he,k),he.prototype.init=function(a,h){const g=this.type=a.type,E=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget,h||(g=="mouseover"?h=a.fromElement:g=="mouseout"&&(h=a.toElement)),this.relatedTarget=h,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&he.Z.h.call(this)},he.prototype.h=function(){he.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var pe="closure_listenable_"+(Math.random()*1e6|0),Q=0;function ae(a,h,g,E,O){this.listener=a,this.proxy=null,this.src=h,this.type=g,this.capture=!!E,this.ha=O,this.key=++Q,this.da=this.fa=!1}function z(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function K(a,h,g){for(const E in a)h.call(g,a[E],E,a)}function Y(a,h){for(const g in a)h.call(void 0,a[g],g,a)}function le(a){const h={};for(const g in a)h[g]=a[g];return h}const ge="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function It(a,h){let g,E;for(let O=1;O<arguments.length;O++){E=arguments[O];for(g in E)a[g]=E[g];for(let j=0;j<ge.length;j++)g=ge[j],Object.prototype.hasOwnProperty.call(E,g)&&(a[g]=E[g])}}function qe(a){this.src=a,this.g={},this.h=0}qe.prototype.add=function(a,h,g,E,O){const j=a.toString();a=this.g[j],a||(a=this.g[j]=[],this.h++);const $=Ot(a,h,E,O);return $>-1?(h=a[$],g||(h.fa=!1)):(h=new ae(h,this.src,j,!!E,O),h.fa=g,a.push(h)),h};function pn(a,h){const g=h.type;if(g in a.g){var E=a.g[g],O=Array.prototype.indexOf.call(E,h,void 0),j;(j=O>=0)&&Array.prototype.splice.call(E,O,1),j&&(z(h),a.g[g].length==0&&(delete a.g[g],a.h--))}}function Ot(a,h,g,E){for(let O=0;O<a.length;++O){const j=a[O];if(!j.da&&j.listener==h&&j.capture==!!g&&j.ha==E)return O}return-1}var Zt="closure_lm_"+(Math.random()*1e6|0),sr={};function cl(a,h,g,E,O){if(Array.isArray(h)){for(let j=0;j<h.length;j++)cl(a,h[j],g,E,O);return null}return g=Hm(g),a&&a[pe]?a.J(h,g,l(E)?!!E.capture:!1,O):ul(a,h,g,!1,E,O)}function ul(a,h,g,E,O,j){if(!h)throw Error("Invalid event type");const $=l(O)?!!O.capture:!!O;let te=rs(a);if(te||(a[Zt]=te=new qe(a)),g=te.add(h,g,E,$,j),g.proxy)return g;if(E=dl(),g.proxy=E,E.src=a,E.listener=g,a.addEventListener)P||(O=$),O===void 0&&(O=!1),a.addEventListener(h.toString(),E,O);else if(a.attachEvent)a.attachEvent(ir(h.toString()),E);else if(a.addListener&&a.removeListener)a.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return g}function dl(){function a(g){return h.call(a.src,a.listener,g)}const h=ro;return a}function fd(a,h,g,E,O){if(Array.isArray(h))for(var j=0;j<h.length;j++)fd(a,h[j],g,E,O);else E=l(E)?!!E.capture:!!E,g=Hm(g),a&&a[pe]?(a=a.i,j=String(h).toString(),j in a.g&&(h=a.g[j],g=Ot(h,g,E,O),g>-1&&(z(h[g]),Array.prototype.splice.call(h,g,1),h.length==0&&(delete a.g[j],a.h--)))):a&&(a=rs(a))&&(h=a.g[h.toString()],a=-1,h&&(a=Ot(h,g,E,O)),(g=a>-1?h[a]:null)&&no(g))}function no(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[pe])pn(h.i,a);else{var g=a.type,E=a.proxy;h.removeEventListener?h.removeEventListener(g,E,a.capture):h.detachEvent?h.detachEvent(ir(g),E):h.addListener&&h.removeListener&&h.removeListener(E),(g=rs(h))?(pn(g,a),g.h==0&&(g.src=null,h[Zt]=null)):z(a)}}}function ir(a){return a in sr?sr[a]:sr[a]="on"+a}function ro(a,h){if(a.da)a=!0;else{h=new he(h,this);const g=a.listener,E=a.ha||a.src;a.fa&&no(a),a=g.call(E,h)}return a}function rs(a){return a=a[Zt],a instanceof qe?a:null}var ss="__closure_events_fn_"+(Math.random()*1e9>>>0);function Hm(a){return typeof a=="function"?a:(a[ss]||(a[ss]=function(h){return a.handleEvent(h)}),a[ss])}function ot(){R.call(this),this.i=new qe(this),this.M=this,this.G=null}p(ot,R),ot.prototype[pe]=!0,ot.prototype.removeEventListener=function(a,h,g,E){fd(this,a,h,g,E)};function gt(a,h){var g,E=a.G;if(E)for(g=[];E;E=E.G)g.push(E);if(a=a.M,E=h.type||h,typeof h=="string")h=new k(h,a);else if(h instanceof k)h.target=h.target||a;else{var O=h;h=new k(E,a),It(h,O)}O=!0;let j,$;if(g)for($=g.length-1;$>=0;$--)j=h.g=g[$],O=hl(j,E,!0,h)&&O;if(j=h.g=a,O=hl(j,E,!0,h)&&O,O=hl(j,E,!1,h)&&O,g)for($=0;$<g.length;$++)j=h.g=g[$],O=hl(j,E,!1,h)&&O}ot.prototype.N=function(){if(ot.Z.N.call(this),this.i){var a=this.i;for(const h in a.g){const g=a.g[h];for(let E=0;E<g.length;E++)z(g[E]);delete a.g[h],a.h--}}this.G=null},ot.prototype.J=function(a,h,g,E){return this.i.add(String(a),h,!1,g,E)},ot.prototype.K=function(a,h,g,E){return this.i.add(String(a),h,!0,g,E)};function hl(a,h,g,E){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();let O=!0;for(let j=0;j<h.length;++j){const $=h[j];if($&&!$.da&&$.capture==g){const te=$.listener,Ue=$.ha||$.src;$.fa&&pn(a.i,$),O=te.call(Ue,E)!==!1&&O}}return O&&!E.defaultPrevented}function BI(a,h){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=u(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(a,h||0)}function qm(a){a.g=BI(()=>{a.g=null,a.i&&(a.i=!1,qm(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class WI extends R{constructor(h,g){super(),this.m=h,this.l=g,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:qm(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function so(a){R.call(this),this.h=a,this.g={}}p(so,R);var Km=[];function Gm(a){K(a.g,function(h,g){this.g.hasOwnProperty(g)&&no(h)},a),a.g={}}so.prototype.N=function(){so.Z.N.call(this),Gm(this)},so.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pd=o.JSON.stringify,HI=o.JSON.parse,qI=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Qm(){}function Ym(){}var io={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function md(){k.call(this,"d")}p(md,k);function gd(){k.call(this,"c")}p(gd,k);var is={},Jm=null;function fl(){return Jm=Jm||new ot}is.Ia="serverreachability";function Xm(a){k.call(this,is.Ia,a)}p(Xm,k);function oo(a){const h=fl();gt(h,new Xm(h))}is.STAT_EVENT="statevent";function Zm(a,h){k.call(this,is.STAT_EVENT,a),this.stat=h}p(Zm,k);function yt(a){const h=fl();gt(h,new Zm(h,a))}is.Ja="timingevent";function eg(a,h){k.call(this,is.Ja,a),this.size=h}p(eg,k);function ao(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},h)}function lo(){this.g=!0}lo.prototype.ua=function(){this.g=!1};function KI(a,h,g,E,O,j){a.info(function(){if(a.g)if(j){var $="",te=j.split("&");for(let me=0;me<te.length;me++){var Ue=te[me].split("=");if(Ue.length>1){const Ke=Ue[0];Ue=Ue[1];const gn=Ke.split("_");$=gn.length>=2&&gn[1]=="type"?$+(Ke+"="+Ue+"&"):$+(Ke+"=redacted&")}}}else $=null;else $=j;return"XMLHTTP REQ ("+E+") [attempt "+O+"]: "+h+`
`+g+`
`+$})}function GI(a,h,g,E,O,j,$){a.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+O+"]: "+h+`
`+g+`
`+j+" "+$})}function Fs(a,h,g,E){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+YI(a,g)+(E?" "+E:"")})}function QI(a,h){a.info(function(){return"TIMEOUT: "+h})}lo.prototype.info=function(){};function YI(a,h){if(!a.g)return h;if(!h)return null;try{const j=JSON.parse(h);if(j){for(a=0;a<j.length;a++)if(Array.isArray(j[a])){var g=j[a];if(!(g.length<2)){var E=g[1];if(Array.isArray(E)&&!(E.length<1)){var O=E[0];if(O!="noop"&&O!="stop"&&O!="close")for(let $=1;$<E.length;$++)E[$]=""}}}}return pd(j)}catch{return h}}var pl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},tg={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ng;function yd(){}p(yd,Qm),yd.prototype.g=function(){return new XMLHttpRequest},ng=new yd;function co(a){return encodeURIComponent(String(a))}function JI(a){var h=1;a=a.split(":");const g=[];for(;h>0&&a.length;)g.push(a.shift()),h--;return a.length&&g.push(a.join(":")),g}function or(a,h,g,E){this.j=a,this.i=h,this.l=g,this.S=E||1,this.V=new so(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new rg}function rg(){this.i=null,this.g="",this.h=!1}var sg={},vd={};function _d(a,h,g){a.M=1,a.A=gl(mn(h)),a.u=g,a.R=!0,ig(a,null)}function ig(a,h){a.F=Date.now(),ml(a),a.B=mn(a.A);var g=a.B,E=a.S;Array.isArray(E)||(E=[String(E)]),vg(g.i,"t",E),a.C=0,g=a.j.L,a.h=new rg,a.g=jg(a.j,g?h:null,!a.u),a.P>0&&(a.O=new WI(u(a.Y,a,a.g),a.P)),h=a.V,g=a.g,E=a.ba;var O="readystatechange";Array.isArray(O)||(O&&(Km[0]=O.toString()),O=Km);for(let j=0;j<O.length;j++){const $=cl(g,O[j],E||h.handleEvent,!1,h.h||h);if(!$)break;h.g[$.key]=$}h=a.J?le(a.J):{},a.u?(a.v||(a.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,h)):(a.v="GET",a.g.ea(a.B,a.v,null,h)),oo(),KI(a.i,a.v,a.B,a.l,a.S,a.u)}or.prototype.ba=function(a){a=a.target;const h=this.O;h&&cr(a)==3?h.j():this.Y(a)},or.prototype.Y=function(a){try{if(a==this.g)e:{const te=cr(this.g),Ue=this.g.ya(),me=this.g.ca();if(!(te<3)&&(te!=3||this.g&&(this.h.h||this.g.la()||Sg(this.g)))){this.K||te!=4||Ue==7||(Ue==8||me<=0?oo(3):oo(2)),wd(this);var h=this.g.ca();this.X=h;var g=XI(this);if(this.o=h==200,GI(this.i,this.v,this.B,this.l,this.S,te,h),this.o){if(this.U&&!this.L){t:{if(this.g){var E,O=this.g;if((E=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(E)){var j=E;break t}}j=null}if(a=j)Fs(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ed(this,a);else{this.o=!1,this.m=3,yt(12),os(this),uo(this);break e}}if(this.R){a=!0;let Ke;for(;!this.K&&this.C<g.length;)if(Ke=ZI(this,g),Ke==vd){te==4&&(this.m=4,yt(14),a=!1),Fs(this.i,this.l,null,"[Incomplete Response]");break}else if(Ke==sg){this.m=4,yt(15),Fs(this.i,this.l,g,"[Invalid Chunk]"),a=!1;break}else Fs(this.i,this.l,Ke,null),Ed(this,Ke);if(og(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),te!=4||g.length!=0||this.h.h||(this.m=1,yt(16),a=!1),this.o=this.o&&a,!a)Fs(this.i,this.l,g,"[Invalid Chunked Response]"),os(this),uo(this);else if(g.length>0&&!this.W){this.W=!0;var $=this.j;$.g==this&&$.aa&&!$.P&&($.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),kd($),$.P=!0,yt(11))}}else Fs(this.i,this.l,g,null),Ed(this,g);te==4&&os(this),this.o&&!this.K&&(te==4?Pg(this.j,this):(this.o=!1,ml(this)))}else fT(this.g),h==400&&g.indexOf("Unknown SID")>0?(this.m=3,yt(12)):(this.m=0,yt(13)),os(this),uo(this)}}}catch{}finally{}};function XI(a){if(!og(a))return a.g.la();const h=Sg(a.g);if(h==="")return"";let g="";const E=h.length,O=cr(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return os(a),uo(a),"";a.h.i=new o.TextDecoder}for(let j=0;j<E;j++)a.h.h=!0,g+=a.h.i.decode(h[j],{stream:!(O&&j==E-1)});return h.length=0,a.h.g+=g,a.C=0,a.h.g}function og(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function ZI(a,h){var g=a.C,E=h.indexOf(`
`,g);return E==-1?vd:(g=Number(h.substring(g,E)),isNaN(g)?sg:(E+=1,E+g>h.length?vd:(h=h.slice(E,E+g),a.C=E+g,h)))}or.prototype.cancel=function(){this.K=!0,os(this)};function ml(a){a.T=Date.now()+a.H,ag(a,a.H)}function ag(a,h){if(a.D!=null)throw Error("WatchDog timer not null");a.D=ao(u(a.aa,a),h)}function wd(a){a.D&&(o.clearTimeout(a.D),a.D=null)}or.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(QI(this.i,this.B),this.M!=2&&(oo(),yt(17)),os(this),this.m=2,uo(this)):ag(this,this.T-a)};function uo(a){a.j.I==0||a.K||Pg(a.j,a)}function os(a){wd(a);var h=a.O;h&&typeof h.dispose=="function"&&h.dispose(),a.O=null,Gm(a.V),a.g&&(h=a.g,a.g=null,h.abort(),h.dispose())}function Ed(a,h){try{var g=a.j;if(g.I!=0&&(g.g==a||xd(g.h,a))){if(!a.L&&xd(g.h,a)&&g.I==3){try{var E=g.Ba.g.parse(h)}catch{E=null}if(Array.isArray(E)&&E.length==3){var O=E;if(O[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<a.F)El(g),_l(g);else break e;bd(g),yt(18)}}else g.xa=O[1],0<g.xa-g.K&&O[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=ao(u(g.Va,g),6e3));ug(g.h)<=1&&g.ta&&(g.ta=void 0)}else ls(g,11)}else if((a.L||g.g==a)&&El(g),!N(h))for(O=g.Ba.g.parse(h),h=0;h<O.length;h++){let me=O[h];const Ke=me[0];if(!(Ke<=g.K))if(g.K=Ke,me=me[1],g.I==2)if(me[0]=="c"){g.M=me[1],g.ba=me[2];const gn=me[3];gn!=null&&(g.ka=gn,g.j.info("VER="+g.ka));const cs=me[4];cs!=null&&(g.za=cs,g.j.info("SVER="+g.za));const ur=me[5];ur!=null&&typeof ur=="number"&&ur>0&&(E=1.5*ur,g.O=E,g.j.info("backChannelRequestTimeoutMs_="+E)),E=g;const dr=a.g;if(dr){const Il=dr.g?dr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Il){var j=E.h;j.g||Il.indexOf("spdy")==-1&&Il.indexOf("quic")==-1&&Il.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Id(j,j.h),j.h=null))}if(E.G){const Cd=dr.g?dr.g.getResponseHeader("X-HTTP-Session-Id"):null;Cd&&(E.wa=Cd,we(E.J,E.G,Cd))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-a.F,g.j.info("Handshake RTT: "+g.T+"ms")),E=g;var $=a;if(E.na=Lg(E,E.L?E.ba:null,E.W),$.L){dg(E.h,$);var te=$,Ue=E.O;Ue&&(te.H=Ue),te.D&&(wd(te),ml(te)),E.g=$}else Cg(E);g.i.length>0&&wl(g)}else me[0]!="stop"&&me[0]!="close"||ls(g,7);else g.I==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?ls(g,7):Rd(g):me[0]!="noop"&&g.l&&g.l.qa(me),g.A=0)}}oo(4)}catch{}}var eT=class{constructor(a,h){this.g=a,this.map=h}};function lg(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function cg(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function ug(a){return a.h?1:a.g?a.g.size:0}function xd(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Id(a,h){a.g?a.g.add(h):a.h=h}function dg(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}lg.prototype.cancel=function(){if(this.i=hg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function hg(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const g of a.g.values())h=h.concat(g.G);return h}return I(a.i)}var fg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tT(a,h){if(a){a=a.split("&");for(let g=0;g<a.length;g++){const E=a[g].indexOf("=");let O,j=null;E>=0?(O=a[g].substring(0,E),j=a[g].substring(E+1)):O=a[g],h(O,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function ar(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;a instanceof ar?(this.l=a.l,ho(this,a.j),this.o=a.o,this.g=a.g,fo(this,a.u),this.h=a.h,Td(this,_g(a.i)),this.m=a.m):a&&(h=String(a).match(fg))?(this.l=!1,ho(this,h[1]||"",!0),this.o=po(h[2]||""),this.g=po(h[3]||"",!0),fo(this,h[4]),this.h=po(h[5]||"",!0),Td(this,h[6]||"",!0),this.m=po(h[7]||"")):(this.l=!1,this.i=new go(null,this.l))}ar.prototype.toString=function(){const a=[];var h=this.j;h&&a.push(mo(h,pg,!0),":");var g=this.g;return(g||h=="file")&&(a.push("//"),(h=this.o)&&a.push(mo(h,pg,!0),"@"),a.push(co(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&a.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&a.push("/"),a.push(mo(g,g.charAt(0)=="/"?sT:rT,!0))),(g=this.i.toString())&&a.push("?",g),(g=this.m)&&a.push("#",mo(g,oT)),a.join("")},ar.prototype.resolve=function(a){const h=mn(this);let g=!!a.j;g?ho(h,a.j):g=!!a.o,g?h.o=a.o:g=!!a.g,g?h.g=a.g:g=a.u!=null;var E=a.h;if(g)fo(h,a.u);else if(g=!!a.h){if(E.charAt(0)!="/")if(this.g&&!this.h)E="/"+E;else{var O=h.h.lastIndexOf("/");O!=-1&&(E=h.h.slice(0,O+1)+E)}if(O=E,O==".."||O==".")E="";else if(O.indexOf("./")!=-1||O.indexOf("/.")!=-1){E=O.lastIndexOf("/",0)==0,O=O.split("/");const j=[];for(let $=0;$<O.length;){const te=O[$++];te=="."?E&&$==O.length&&j.push(""):te==".."?((j.length>1||j.length==1&&j[0]!="")&&j.pop(),E&&$==O.length&&j.push("")):(j.push(te),E=!0)}E=j.join("/")}else E=O}return g?h.h=E:g=a.i.toString()!=="",g?Td(h,_g(a.i)):g=!!a.m,g&&(h.m=a.m),h};function mn(a){return new ar(a)}function ho(a,h,g){a.j=g?po(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function fo(a,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);a.u=h}else a.u=null}function Td(a,h,g){h instanceof go?(a.i=h,aT(a.i,a.l)):(g||(h=mo(h,iT)),a.i=new go(h,a.l))}function we(a,h,g){a.i.set(h,g)}function gl(a){return we(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function po(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function mo(a,h,g){return typeof a=="string"?(a=encodeURI(a).replace(h,nT),g&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function nT(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var pg=/[#\/\?@]/g,rT=/[#\?:]/g,sT=/[#\?]/g,iT=/[#\?@]/g,oT=/#/g;function go(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function as(a){a.g||(a.g=new Map,a.h=0,a.i&&tT(a.i,function(h,g){a.add(decodeURIComponent(h.replace(/\+/g," ")),g)}))}t=go.prototype,t.add=function(a,h){as(this),this.i=null,a=Us(this,a);let g=this.g.get(a);return g||this.g.set(a,g=[]),g.push(h),this.h+=1,this};function mg(a,h){as(a),h=Us(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function gg(a,h){return as(a),h=Us(a,h),a.g.has(h)}t.forEach=function(a,h){as(this),this.g.forEach(function(g,E){g.forEach(function(O){a.call(h,O,E,this)},this)},this)};function yg(a,h){as(a);let g=[];if(typeof h=="string")gg(a,h)&&(g=g.concat(a.g.get(Us(a,h))));else for(a=Array.from(a.g.values()),h=0;h<a.length;h++)g=g.concat(a[h]);return g}t.set=function(a,h){return as(this),this.i=null,a=Us(this,a),gg(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=yg(this,a),a.length>0?String(a[0]):h):h};function vg(a,h,g){mg(a,h),g.length>0&&(a.i=null,a.g.set(Us(a,h),I(g)),a.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(let E=0;E<h.length;E++){var g=h[E];const O=co(g);g=yg(this,g);for(let j=0;j<g.length;j++){let $=O;g[j]!==""&&($+="="+co(g[j])),a.push($)}}return this.i=a.join("&")};function _g(a){const h=new go;return h.i=a.i,a.g&&(h.g=new Map(a.g),h.h=a.h),h}function Us(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function aT(a,h){h&&!a.j&&(as(a),a.i=null,a.g.forEach(function(g,E){const O=E.toLowerCase();E!=O&&(mg(this,E),vg(this,O,g))},a)),a.j=h}function lT(a,h){const g=new lo;if(o.Image){const E=new Image;E.onload=f(lr,g,"TestLoadImage: loaded",!0,h,E),E.onerror=f(lr,g,"TestLoadImage: error",!1,h,E),E.onabort=f(lr,g,"TestLoadImage: abort",!1,h,E),E.ontimeout=f(lr,g,"TestLoadImage: timeout",!1,h,E),o.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=a}else h(!1)}function cT(a,h){const g=new lo,E=new AbortController,O=setTimeout(()=>{E.abort(),lr(g,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:E.signal}).then(j=>{clearTimeout(O),j.ok?lr(g,"TestPingServer: ok",!0,h):lr(g,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(O),lr(g,"TestPingServer: error",!1,h)})}function lr(a,h,g,E,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),E(g)}catch{}}function uT(){this.g=new qI}function Sd(a){this.i=a.Sb||null,this.h=a.ab||!1}p(Sd,Qm),Sd.prototype.g=function(){return new yl(this.i,this.h)};function yl(a,h){ot.call(this),this.H=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(yl,ot),t=yl.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=h,this.readyState=1,vo(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(h.body=a),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,yo(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,vo(this)),this.g&&(this.readyState=3,vo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;wg(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function wg(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?yo(this):vo(this),this.readyState==3&&wg(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,yo(this))},t.Na=function(a){this.g&&(this.response=a,yo(this))},t.ga=function(){this.g&&yo(this)};function yo(a){a.readyState=4,a.l=null,a.j=null,a.B=null,vo(a)}t.setRequestHeader=function(a,h){this.A.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var g=h.next();!g.done;)g=g.value,a.push(g[0]+": "+g[1]),g=h.next();return a.join(`\r
`)};function vo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(yl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Eg(a){let h="";return K(a,function(g,E){h+=E,h+=":",h+=g,h+=`\r
`}),h}function Nd(a,h,g){e:{for(E in g){var E=!1;break e}E=!0}E||(g=Eg(g),typeof a=="string"?g!=null&&co(g):we(a,h,g))}function be(a){ot.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(be,ot);var dT=/^https?$/i,hT=["POST","PUT"];t=be.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,h,g,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ng.g(),this.g.onreadystatechange=m(u(this.Ca,this));try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(j){xg(this,j);return}if(a=g||"",g=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var O in E)g.set(O,E[O]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const j of E.keys())g.set(j,E.get(j));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(g.keys()).find(j=>j.toLowerCase()=="content-type"),O=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(hT,h,void 0)>=0)||E||O||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,$]of g)this.g.setRequestHeader(j,$);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(j){xg(this,j)}};function xg(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.o=5,Ig(a),vl(a)}function Ig(a){a.A||(a.A=!0,gt(a,"complete"),gt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,gt(this,"complete"),gt(this,"abort"),vl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vl(this,!0)),be.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Tg(this):this.Xa())},t.Xa=function(){Tg(this)};function Tg(a){if(a.h&&typeof i<"u"){if(a.v&&cr(a)==4)setTimeout(a.Ca.bind(a),0);else if(gt(a,"readystatechange"),cr(a)==4){a.h=!1;try{const j=a.ca();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var g;if(!(g=h)){var E;if(E=j===0){let $=String(a.D).match(fg)[1]||null;!$&&o.self&&o.self.location&&($=o.self.location.protocol.slice(0,-1)),E=!dT.test($?$.toLowerCase():"")}g=E}if(g)gt(a,"complete"),gt(a,"success");else{a.o=6;try{var O=cr(a)>2?a.g.statusText:""}catch{O=""}a.l=O+" ["+a.ca()+"]",Ig(a)}}finally{vl(a)}}}}function vl(a,h){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const g=a.g;a.g=null,h||gt(a,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function cr(a){return a.g?a.g.readyState:0}t.ca=function(){try{return cr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),HI(h)}};function Sg(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function fT(a){const h={};a=(a.g&&cr(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<a.length;E++){if(N(a[E]))continue;var g=JI(a[E]);const O=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const j=h[O]||[];h[O]=j,j.push(g)}Y(h,function(E){return E.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function _o(a,h,g){return g&&g.internalChannelParams&&g.internalChannelParams[a]||h}function Ng(a){this.za=0,this.i=[],this.j=new lo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=_o("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=_o("baseRetryDelayMs",5e3,a),this.Za=_o("retryDelaySeedMs",1e4,a),this.Ta=_o("forwardChannelMaxRetries",2,a),this.va=_o("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new lg(a&&a.concurrentRequestLimit),this.Ba=new uT,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ng.prototype,t.ka=8,t.I=1,t.connect=function(a,h,g,E){yt(0),this.W=a,this.H=h||{},g&&E!==void 0&&(this.H.OSID=g,this.H.OAID=E),this.F=this.X,this.J=Lg(this,null,this.W),wl(this)};function Rd(a){if(Rg(a),a.I==3){var h=a.V++,g=mn(a.J);if(we(g,"SID",a.M),we(g,"RID",h),we(g,"TYPE","terminate"),wo(a,g),h=new or(a,a.j,h),h.M=2,h.A=gl(mn(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=h.A,g=!0),g||(h.g=jg(h.j,null),h.g.ea(h.A)),h.F=Date.now(),ml(h)}Og(a)}function _l(a){a.g&&(kd(a),a.g.cancel(),a.g=null)}function Rg(a){_l(a),a.v&&(o.clearTimeout(a.v),a.v=null),El(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function wl(a){if(!cg(a.h)&&!a.m){a.m=!0;var h=a.Ea;L||y(),D||(L(),D=!0),x.add(h,a),a.D=0}}function pT(a,h){return ug(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=h.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=ao(u(a.Ea,a,h),Dg(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const O=new or(this,this.j,a);let j=this.o;if(this.U&&(j?(j=le(j),It(j,this.U)):j=this.U),this.u!==null||this.R||(O.J=j,j=null),this.S)e:{for(var h=0,g=0;g<this.i.length;g++){t:{var E=this.i[g];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(h+=E,h>4096){h=g;break e}if(h===4096||g===this.i.length-1){h=g+1;break e}}h=1e3}else h=1e3;h=kg(this,O,h),g=mn(this.J),we(g,"RID",a),we(g,"CVER",22),this.G&&we(g,"X-HTTP-Session-Id",this.G),wo(this,g),j&&(this.R?h="headers="+co(Eg(j))+"&"+h:this.u&&Nd(g,this.u,j)),Id(this.h,O),this.Ra&&we(g,"TYPE","init"),this.S?(we(g,"$req",h),we(g,"SID","null"),O.U=!0,_d(O,g,null)):_d(O,g,h),this.I=2}}else this.I==3&&(a?bg(this,a):this.i.length==0||cg(this.h)||bg(this))};function bg(a,h){var g;h?g=h.l:g=a.V++;const E=mn(a.J);we(E,"SID",a.M),we(E,"RID",g),we(E,"AID",a.K),wo(a,E),a.u&&a.o&&Nd(E,a.u,a.o),g=new or(a,a.j,g,a.D+1),a.u===null&&(g.J=a.o),h&&(a.i=h.G.concat(a.i)),h=kg(a,g,1e3),g.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Id(a.h,g),_d(g,E,h)}function wo(a,h){a.H&&K(a.H,function(g,E){we(h,E,g)}),a.l&&K({},function(g,E){we(h,E,g)})}function kg(a,h,g){g=Math.min(a.i.length,g);const E=a.l?u(a.l.Ka,a.l,a):null;e:{var O=a.i;let te=-1;for(;;){const Ue=["count="+g];te==-1?g>0?(te=O[0].g,Ue.push("ofs="+te)):te=0:Ue.push("ofs="+te);let me=!0;for(let Ke=0;Ke<g;Ke++){var j=O[Ke].g;const gn=O[Ke].map;if(j-=te,j<0)te=Math.max(0,O[Ke].g-100),me=!1;else try{j="req"+j+"_"||"";try{var $=gn instanceof Map?gn:Object.entries(gn);for(const[cs,ur]of $){let dr=ur;l(ur)&&(dr=pd(ur)),Ue.push(j+cs+"="+encodeURIComponent(dr))}}catch(cs){throw Ue.push(j+"type="+encodeURIComponent("_badmap")),cs}}catch{E&&E(gn)}}if(me){$=Ue.join("&");break e}}$=void 0}return a=a.i.splice(0,g),h.G=a,$}function Cg(a){if(!a.g&&!a.v){a.Y=1;var h=a.Da;L||y(),D||(L(),D=!0),x.add(h,a),a.A=0}}function bd(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=ao(u(a.Da,a),Dg(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Ag(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=ao(u(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,yt(10),_l(this),Ag(this))};function kd(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Ag(a){a.g=new or(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var h=mn(a.na);we(h,"RID","rpc"),we(h,"SID",a.M),we(h,"AID",a.K),we(h,"CI",a.F?"0":"1"),!a.F&&a.ia&&we(h,"TO",a.ia),we(h,"TYPE","xmlhttp"),wo(a,h),a.u&&a.o&&Nd(h,a.u,a.o),a.O&&(a.g.H=a.O);var g=a.g;a=a.ba,g.M=1,g.A=gl(mn(h)),g.u=null,g.R=!0,ig(g,a)}t.Va=function(){this.C!=null&&(this.C=null,_l(this),bd(this),yt(19))};function El(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Pg(a,h){var g=null;if(a.g==h){El(a),kd(a),a.g=null;var E=2}else if(xd(a.h,h))g=h.G,dg(a.h,h),E=1;else return;if(a.I!=0){if(h.o)if(E==1){g=h.u?h.u.length:0,h=Date.now()-h.F;var O=a.D;E=fl(),gt(E,new eg(E,g)),wl(a)}else Cg(a);else if(O=h.m,O==3||O==0&&h.X>0||!(E==1&&pT(a,h)||E==2&&bd(a)))switch(g&&g.length>0&&(h=a.h,h.i=h.i.concat(g)),O){case 1:ls(a,5);break;case 4:ls(a,10);break;case 3:ls(a,6);break;default:ls(a,2)}}}function Dg(a,h){let g=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(g*=2),g*h}function ls(a,h){if(a.j.info("Error code "+h),h==2){var g=u(a.bb,a),E=a.Ua;const O=!E;E=new ar(E||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ho(E,"https"),gl(E),O?lT(E.toString(),g):cT(E.toString(),g)}else yt(2);a.I=0,a.l&&a.l.pa(h),Og(a),Rg(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function Og(a){if(a.I=0,a.ja=[],a.l){const h=hg(a.h);(h.length!=0||a.i.length!=0)&&(b(a.ja,h),b(a.ja,a.i),a.h.i.length=0,I(a.i),a.i.length=0),a.l.oa()}}function Lg(a,h,g){var E=g instanceof ar?mn(g):new ar(g);if(E.g!="")h&&(E.g=h+"."+E.g),fo(E,E.u);else{var O=o.location;E=O.protocol,h=h?h+"."+O.hostname:O.hostname,O=+O.port;const j=new ar(null);E&&ho(j,E),h&&(j.g=h),O&&fo(j,O),g&&(j.h=g),E=j}return g=a.G,h=a.wa,g&&h&&we(E,g,h),we(E,"VER",a.ka),wo(a,E),E}function jg(a,h,g){if(h&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Aa&&!a.ma?new be(new Sd({ab:g})):new be(a.ma),h.Fa(a.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vg(){}t=Vg.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function xl(){}xl.prototype.g=function(a,h){return new Lt(a,h)};function Lt(a,h){ot.call(this),this.g=new Ng(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(a?a["X-WebChannel-Client-Profile"]=h.sa:a={"X-WebChannel-Client-Profile":h.sa}),this.g.U=a,(a=h&&h.Qb)&&!N(a)&&(this.g.u=a),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!N(h)&&(this.g.G=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new zs(this)}p(Lt,ot),Lt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){Rd(this.g)},Lt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var g={};g.__data__=a,a=g}else this.v&&(g={},g.__data__=pd(a),a=g);h.i.push(new eT(h.Ya++,a)),h.I==3&&wl(h)},Lt.prototype.N=function(){this.g.l=null,delete this.j,Rd(this.g),delete this.g,Lt.Z.N.call(this)};function Mg(a){md.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const g in h){a=g;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}p(Mg,md);function Fg(){gd.call(this),this.status=1}p(Fg,gd);function zs(a){this.g=a}p(zs,Vg),zs.prototype.ra=function(){gt(this.g,"a")},zs.prototype.qa=function(a){gt(this.g,new Mg(a))},zs.prototype.pa=function(a){gt(this.g,new Fg)},zs.prototype.oa=function(){gt(this.g,"b")},xl.prototype.createWebChannel=xl.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,BE=function(){return new xl},$E=function(){return fl()},zE=is,Af={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},pl.NO_ERROR=0,pl.TIMEOUT=8,pl.HTTP_ERROR=6,hc=pl,tg.COMPLETE="complete",UE=tg,Ym.EventType=io,io.OPEN="a",io.CLOSE="b",io.ERROR="c",io.MESSAGE="d",ot.prototype.listen=ot.prototype.J,Mo=Ym,be.prototype.listenOnce=be.prototype.K,be.prototype.getLastError=be.prototype.Ha,be.prototype.getLastErrorCode=be.prototype.ya,be.prototype.getStatus=be.prototype.ca,be.prototype.getResponseJson=be.prototype.La,be.prototype.getResponseText=be.prototype.la,be.prototype.send=be.prototype.ea,be.prototype.setWithCredentials=be.prototype.Fa,FE=be}).apply(typeof $l<"u"?$l:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ut=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ut.UNAUTHENTICATED=new ut(null),ut.GOOGLE_CREDENTIALS=new ut("google-credentials-uid"),ut.FIRST_PARTY=new ut("first-party-uid"),ut.MOCK_USER=new ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qi="12.8.0";function dA(t){Qi=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=new em("@firebase/firestore");function Hs(){return bs.logLevel}function H(t,...e){if(bs.logLevel<=se.DEBUG){const n=e.map(hm);bs.debug(`Firestore (${Qi}): ${t}`,...n)}}function Yn(t,...e){if(bs.logLevel<=se.ERROR){const n=e.map(hm);bs.error(`Firestore (${Qi}): ${t}`,...n)}}function ks(t,...e){if(bs.logLevel<=se.WARN){const n=e.map(hm);bs.warn(`Firestore (${Qi}): ${t}`,...n)}}function hm(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,WE(t,r,n)}function WE(t,e,n){let r=`FIRESTORE (${Qi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Yn(r),new Error(r)}function de(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||WE(e,s,r)}function Z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends An{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ut.UNAUTHENTICATED))}shutdown(){}}class hA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class fA{constructor(e){this.t=e,this.currentUser=ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){de(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Fr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Fr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Fr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(de(typeof r.accessToken=="string",31837,{l:r}),new HE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string",2055,{h:e}),new ut(e)}}class pA{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ut.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class mA{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new pA(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class M0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gA{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ve(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){de(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new M0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(de(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new M0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=yA(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ie(t,e){return t<e?-1:t>e?1:0}function Pf(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return fh(s)===fh(i)?ie(s,i):fh(s)?1:-1}return ie(t.length,e.length)}const vA=55296,_A=57343;function fh(t){const e=t.charCodeAt(0);return e>=vA&&e<=_A}function Ai(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="__name__";class _n{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&J(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return _n.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _n?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=_n.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ie(e.length,n.length)}static compareSegments(e,n){const r=_n.isNumericId(e),s=_n.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?_n.extractNumericId(e).compare(_n.extractNumericId(n)):Pf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Mr.fromString(e.substring(4,e.length-2))}}class ye extends _n{construct(e,n,r){return new ye(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ye(n)}static emptyPath(){return new ye([])}}const wA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Je extends _n{construct(e,n,r){return new Je(e,n,r)}static isValidIdentifier(e){return wA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Je.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===F0}static keyField(){return new Je([F0])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new W(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new W(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new W(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new W(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Je(n)}static emptyPath(){return new Je([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(ye.fromString(e))}static fromName(e){return new G(ye.fromString(e).popFirst(5))}static empty(){return new G(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new ye(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(t,e,n){if(!n)throw new W(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function GE(t,e,n,r){if(e===!0&&r===!0)throw new W(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function U0(t){if(!G.isDocumentKey(t))throw new W(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function z0(t){if(G.isDocumentKey(t))throw new W(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function QE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function qu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J(12329,{type:typeof t})}function Gt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qu(t);throw new W(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ja(t,e){if(!QE(t))throw new W(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new W(M.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0=-62135596800,B0=1e6;class ve{static now(){return ve.fromMillis(Date.now())}static fromDate(e){return ve.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*B0);return new ve(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<$0)throw new W(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/B0}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ve._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ja(e,ve._jsonSchema))return new ve(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-$0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ve._jsonSchemaVersion="firestore/timestamp/1.0",ve._jsonSchema={type:Fe("string",ve._jsonSchemaVersion),seconds:Fe("number"),nanoseconds:Fe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{static fromTimestamp(e){return new X(e)}static min(){return new X(new ve(0,0))}static max(){return new X(new ve(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa=-1;function EA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=X.fromTimestamp(r===1e9?new ve(n+1,0):new ve(n,r));return new Hr(s,G.empty(),e)}function xA(t){return new Hr(t.readTime,t.key,Pa)}class Hr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Hr(X.min(),G.empty(),Pa)}static max(){return new Hr(X.max(),G.empty(),Pa)}}function IA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yi(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==TA)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(f=>{o[u]=f,++l,l===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function NA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ji(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ku.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm=-1;function Gu(t){return t==null}function Yc(t){return t===0&&1/t==-1/0}function RA(t){return typeof t=="number"&&Number.isInteger(t)&&!Yc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="";function bA(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=W0(e)),e=kA(t.get(n),e);return W0(e)}function kA(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case YE:n+="";break;default:n+=i}}return n}function W0(t){return t+YE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ts(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function JE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e,n){this.comparator=e,this.root=n||rt.EMPTY}insert(e,n){return new Re(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rt.BLACK,null,null))}remove(e){return new Re(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bl(this.root,e,this.comparator,!0)}}class Bl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??rt.RED,this.left=s??rt.EMPTY,this.right=i??rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new rt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return rt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw J(43730,{key:this.key,value:this.value});if(this.right.isRed())throw J(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw J(27949);return e+(this.isRed()?0:1)}}rt.EMPTY=null,rt.RED=!0,rt.BLACK=!1;rt.EMPTY=new class{constructor(){this.size=0}get key(){throw J(57766)}get value(){throw J(16141)}get color(){throw J(16727)}get left(){throw J(29726)}get right(){throw J(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.comparator=e,this.data=new Re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new q0(this.data.getIterator())}getIteratorFrom(e){return new q0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Be)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Be(this.comparator);return n.data=e,n}}class q0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.fields=e,e.sort(Je.comparator)}static empty(){return new Ft([])}unionWith(e){let n=new Be(Je.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ft(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ai(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new XE("Invalid base64 string: "+i):i}}(e);return new et(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}et.EMPTY_BYTE_STRING=new et("");const CA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qr(t){if(de(!!t,39018),typeof t=="string"){let e=0;const n=CA.exec(t);if(de(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ce(t.seconds),nanos:Ce(t.nanos)}}function Ce(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Kr(t){return typeof t=="string"?et.fromBase64String(t):et.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="server_timestamp",ex="__type__",tx="__previous_value__",nx="__local_write_time__";function pm(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[ex])==null?void 0:r.stringValue)===ZE}function Qu(t){const e=t.mapValue.fields[tx];return pm(e)?Qu(e):e}function Da(t){const e=qr(t.mapValue.fields[nx].timestampValue);return new ve(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e,n,r,s,i,o,l,c,u,f,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=f,this.apiKey=p}}const Jc="(default)";class Pi{constructor(e,n){this.projectId=e,this.database=n||Jc}static empty(){return new Pi("","")}get isDefaultDatabase(){return this.database===Jc}isEqual(e){return e instanceof Pi&&e.projectId===this.projectId&&e.database===this.database}}function PA(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new W(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pi(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx="__type__",DA="__max__",Wl={mapValue:{}},sx="__vector__",Xc="value";function Gr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?pm(t)?4:LA(t)?9007199254740991:OA(t)?10:11:J(28295,{value:t})}function bn(t,e){if(t===e)return!0;const n=Gr(t);if(n!==Gr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Da(t).isEqual(Da(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=qr(s.timestampValue),l=qr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Kr(s.bytesValue).isEqual(Kr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ce(s.geoPointValue.latitude)===Ce(i.geoPointValue.latitude)&&Ce(s.geoPointValue.longitude)===Ce(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ce(s.integerValue)===Ce(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ce(s.doubleValue),l=Ce(i.doubleValue);return o===l?Yc(o)===Yc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ai(t.arrayValue.values||[],e.arrayValue.values||[],bn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(H0(o)!==H0(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!bn(o[c],l[c])))return!1;return!0}(t,e);default:return J(52216,{left:t})}}function Oa(t,e){return(t.values||[]).find(n=>bn(n,e))!==void 0}function Di(t,e){if(t===e)return 0;const n=Gr(t),r=Gr(e);if(n!==r)return ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ie(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Ce(i.integerValue||i.doubleValue),c=Ce(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return K0(t.timestampValue,e.timestampValue);case 4:return K0(Da(t),Da(e));case 5:return Pf(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Kr(i),c=Kr(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const f=ie(l[u],c[u]);if(f!==0)return f}return ie(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=ie(Ce(i.latitude),Ce(o.latitude));return l!==0?l:ie(Ce(i.longitude),Ce(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return G0(t.arrayValue,e.arrayValue);case 10:return function(i,o){var m,I,b,C;const l=i.fields||{},c=o.fields||{},u=(m=l[Xc])==null?void 0:m.arrayValue,f=(I=c[Xc])==null?void 0:I.arrayValue,p=ie(((b=u==null?void 0:u.values)==null?void 0:b.length)||0,((C=f==null?void 0:f.values)==null?void 0:C.length)||0);return p!==0?p:G0(u,f)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Wl.mapValue&&o===Wl.mapValue)return 0;if(i===Wl.mapValue)return 1;if(o===Wl.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},f=Object.keys(u);c.sort(),f.sort();for(let p=0;p<c.length&&p<f.length;++p){const m=Pf(c[p],f[p]);if(m!==0)return m;const I=Di(l[c[p]],u[f[p]]);if(I!==0)return I}return ie(c.length,f.length)}(t.mapValue,e.mapValue);default:throw J(23264,{he:n})}}function K0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ie(t,e);const n=qr(t),r=qr(e),s=ie(n.seconds,r.seconds);return s!==0?s:ie(n.nanos,r.nanos)}function G0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Di(n[s],r[s]);if(i)return i}return ie(n.length,r.length)}function Oi(t){return Df(t)}function Df(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=qr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Kr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Df(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Df(n.fields[o])}`;return s+"}"}(t.mapValue):J(61005,{value:t})}function fc(t){switch(Gr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Qu(t);return e?16+fc(e):16;case 5:return 2*t.stringValue.length;case 6:return Kr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+fc(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ts(r.fields,(i,o)=>{s+=i.length+fc(o)}),s}(t.mapValue);default:throw J(13486,{value:t})}}function Q0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Of(t){return!!t&&"integerValue"in t}function mm(t){return!!t&&"arrayValue"in t}function Y0(t){return!!t&&"nullValue"in t}function J0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function pc(t){return!!t&&"mapValue"in t}function OA(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[rx])==null?void 0:r.stringValue)===sx}function ta(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ts(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ta(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ta(t.arrayValue.values[n]);return e}return{...t}}function LA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===DA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.value=e}static empty(){return new Rt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!pc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ta(n)}setAll(e){let n=Je.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=ta(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());pc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];pc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ts(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Rt(ta(this.value))}}function ix(t){const e=[];return ts(t.fields,(n,r)=>{const s=new Je([n]);if(pc(r)){const i=ix(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ft(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new ht(e,0,X.min(),X.min(),X.min(),Rt.empty(),0)}static newFoundDocument(e,n,r,s){return new ht(e,1,n,X.min(),r,s,0)}static newNoDocument(e,n){return new ht(e,2,n,X.min(),X.min(),Rt.empty(),0)}static newUnknownDocument(e,n){return new ht(e,3,n,X.min(),X.min(),Rt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n){this.position=e,this.inclusive=n}}function X0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=Di(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Z0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!bn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,n="asc"){this.field=e,this.dir=n}}function jA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{}class Me extends ox{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new MA(e,n,r):n==="array-contains"?new zA(e,r):n==="in"?new $A(e,r):n==="not-in"?new BA(e,r):n==="array-contains-any"?new WA(e,r):new Me(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new FA(e,r):new UA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Di(n,this.value)):n!==null&&Gr(this.value)===Gr(n)&&this.matchesComparison(Di(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fn extends ox{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new fn(e,n)}matches(e){return ax(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ax(t){return t.op==="and"}function lx(t){return VA(t)&&ax(t)}function VA(t){for(const e of t.filters)if(e instanceof fn)return!1;return!0}function Lf(t){if(t instanceof Me)return t.field.canonicalString()+t.op.toString()+Oi(t.value);if(lx(t))return t.filters.map(e=>Lf(e)).join(",");{const e=t.filters.map(n=>Lf(n)).join(",");return`${t.op}(${e})`}}function cx(t,e){return t instanceof Me?function(r,s){return s instanceof Me&&r.op===s.op&&r.field.isEqual(s.field)&&bn(r.value,s.value)}(t,e):t instanceof fn?function(r,s){return s instanceof fn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&cx(o,s.filters[l]),!0):!1}(t,e):void J(19439)}function ux(t){return t instanceof Me?function(n){return`${n.field.canonicalString()} ${n.op} ${Oi(n.value)}`}(t):t instanceof fn?function(n){return n.op.toString()+" {"+n.getFilters().map(ux).join(" ,")+"}"}(t):"Filter"}class MA extends Me{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class FA extends Me{constructor(e,n){super(e,"in",n),this.keys=dx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class UA extends Me{constructor(e,n){super(e,"not-in",n),this.keys=dx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function dx(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class zA extends Me{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return mm(n)&&Oa(n.arrayValue,this.value)}}class $A extends Me{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Oa(this.value.arrayValue,n)}}class BA extends Me{constructor(e,n){super(e,"not-in",n)}matches(e){if(Oa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Oa(this.value.arrayValue,n)}}class WA extends Me{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!mm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Oa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function ev(t,e=null,n=[],r=[],s=null,i=null,o=null){return new HA(t,e,n,r,s,i,o)}function gm(t){const e=Z(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Lf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Gu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Oi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Oi(r)).join(",")),e.Te=n}return e.Te}function ym(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!jA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!cx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Z0(t.startAt,e.startAt)&&Z0(t.endAt,e.endAt)}function jf(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function qA(t,e,n,r,s,i,o,l){return new Xi(t,e,n,r,s,i,o,l)}function vm(t){return new Xi(t)}function tv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function KA(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function hx(t){return t.collectionGroup!==null}function na(t){const e=Z(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Be(Je.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new La(i,r))}),n.has(Je.keyField().canonicalString())||e.Ie.push(new La(Je.keyField(),r))}return e.Ie}function Sn(t){const e=Z(t);return e.Ee||(e.Ee=GA(e,na(t))),e.Ee}function GA(t,e){if(t.limitType==="F")return ev(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new La(s.field,i)});const n=t.endAt?new Zc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Zc(t.startAt.position,t.startAt.inclusive):null;return ev(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Vf(t,e){const n=t.filters.concat([e]);return new Xi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function QA(t,e){const n=t.explicitOrderBy.concat([e]);return new Xi(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function Mf(t,e,n){return new Xi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Yu(t,e){return ym(Sn(t),Sn(e))&&t.limitType===e.limitType}function fx(t){return`${gm(Sn(t))}|lt:${t.limitType}`}function qs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>ux(s)).join(", ")}]`),Gu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Oi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Oi(s)).join(",")),`Target(${r})`}(Sn(t))}; limitType=${t.limitType})`}function Ju(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):G.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of na(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const u=X0(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,na(r),s)||r.endAt&&!function(o,l,c){const u=X0(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,na(r),s))}(t,e)}function YA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function px(t){return(e,n)=>{let r=!1;for(const s of na(t)){const i=JA(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function JA(t,e,n){const r=t.field.isKeyField()?G.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?Di(c,u):J(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ts(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return JE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA=new Re(G.comparator);function Jn(){return XA}const mx=new Re(G.comparator);function Fo(...t){let e=mx;for(const n of t)e=e.insert(n.key,n);return e}function gx(t){let e=mx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function gs(){return ra()}function yx(){return ra()}function ra(){return new Vs(t=>t.toString(),(t,e)=>t.isEqual(e))}const ZA=new Re(G.comparator),eP=new Be(G.comparator);function oe(...t){let e=eP;for(const n of t)e=e.add(n);return e}const tP=new Be(ie);function nP(){return tP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yc(e)?"-0":e}}function vx(t){return{integerValue:""+t}}function rP(t,e){return RA(e)?vx(e):_m(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(){this._=void 0}}function sP(t,e,n){return t instanceof eu?function(s,i){const o={fields:{[ex]:{stringValue:ZE},[nx]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&pm(i)&&(i=Qu(i)),i&&(o.fields[tx]=i),{mapValue:o}}(n,e):t instanceof ja?wx(t,e):t instanceof Va?Ex(t,e):function(s,i){const o=_x(s,i),l=nv(o)+nv(s.Ae);return Of(o)&&Of(s.Ae)?vx(l):_m(s.serializer,l)}(t,e)}function iP(t,e,n){return t instanceof ja?wx(t,e):t instanceof Va?Ex(t,e):n}function _x(t,e){return t instanceof tu?function(r){return Of(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class eu extends Xu{}class ja extends Xu{constructor(e){super(),this.elements=e}}function wx(t,e){const n=xx(e);for(const r of t.elements)n.some(s=>bn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Va extends Xu{constructor(e){super(),this.elements=e}}function Ex(t,e){let n=xx(e);for(const r of t.elements)n=n.filter(s=>!bn(s,r));return{arrayValue:{values:n}}}class tu extends Xu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function nv(t){return Ce(t.integerValue||t.doubleValue)}function xx(t){return mm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function oP(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ja&&s instanceof ja||r instanceof Va&&s instanceof Va?Ai(r.elements,s.elements,bn):r instanceof tu&&s instanceof tu?bn(r.Ae,s.Ae):r instanceof eu&&s instanceof eu}(t.transform,e.transform)}class aP{constructor(e,n){this.version=e,this.transformResults=n}}class Dt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Dt}static exists(e){return new Dt(void 0,e)}static updateTime(e){return new Dt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Zu{}function Ix(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ed(t.key,Dt.none()):new Xa(t.key,t.data,Dt.none());{const n=t.data,r=Rt.empty();let s=new Be(Je.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ns(t.key,r,new Ft(s.toArray()),Dt.none())}}function lP(t,e,n){t instanceof Xa?function(s,i,o){const l=s.value.clone(),c=sv(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof ns?function(s,i,o){if(!mc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=sv(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(Tx(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function sa(t,e,n,r){return t instanceof Xa?function(i,o,l,c){if(!mc(i.precondition,o))return l;const u=i.value.clone(),f=iv(i.fieldTransforms,c,o);return u.setAll(f),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ns?function(i,o,l,c){if(!mc(i.precondition,o))return l;const u=iv(i.fieldTransforms,c,o),f=o.data;return f.setAll(Tx(i)),f.setAll(u),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,l){return mc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function cP(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=_x(r.transform,s||null);i!=null&&(n===null&&(n=Rt.empty()),n.set(r.field,i))}return n||null}function rv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ai(r,s,(i,o)=>oP(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Xa extends Zu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ns extends Zu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Tx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function sv(t,e,n){const r=new Map;de(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,iP(o,l,n[s]))}return r}function iv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,sP(i,o,e))}return r}class ed extends Zu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uP extends Zu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&lP(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=sa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=sa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=yx();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=Ix(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),oe())}isEqual(e){return this.batchId===e.batchId&&Ai(this.mutations,e.mutations,(n,r)=>rv(n,r))&&Ai(this.baseMutations,e.baseMutations,(n,r)=>rv(n,r))}}class wm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){de(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return ZA}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new wm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe,ce;function pP(t){switch(t){case M.OK:return J(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return J(15467,{code:t})}}function Sx(t){if(t===void 0)return Yn("GRPC error has no .code"),M.UNKNOWN;switch(t){case Oe.OK:return M.OK;case Oe.CANCELLED:return M.CANCELLED;case Oe.UNKNOWN:return M.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return M.INTERNAL;case Oe.UNAVAILABLE:return M.UNAVAILABLE;case Oe.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Oe.NOT_FOUND:return M.NOT_FOUND;case Oe.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Oe.ABORTED:return M.ABORTED;case Oe.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Oe.DATA_LOSS:return M.DATA_LOSS;default:return J(39323,{code:t})}}(ce=Oe||(Oe={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP=new Mr([4294967295,4294967295],0);function ov(t){const e=mP().encode(t),n=new ME;return n.update(e),new Uint8Array(n.digest())}function av(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Mr([n,r],0),new Mr([s,i],0)]}class Em{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Uo(`Invalid padding: ${n}`);if(r<0)throw new Uo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Uo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Uo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Mr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Mr.fromNumber(r)));return s.compare(gP)===1&&(s=new Mr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=ov(e),[r,s]=av(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Em(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=ov(e),[r,s]=av(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Uo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Za.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new td(X.min(),s,new Re(ie),Jn(),oe())}}class Za{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Za(r,n,oe(),oe(),oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Nx{constructor(e,n){this.targetId=e,this.Ce=n}}class Rx{constructor(e,n,r=et.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class lv{constructor(){this.ve=0,this.Fe=cv(),this.Me=et.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=oe(),n=oe(),r=oe();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:J(38017,{changeType:i})}}),new Za(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=cv()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,de(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class yP{constructor(e){this.Ge=e,this.ze=new Map,this.je=Jn(),this.He=Hl(),this.Je=Hl(),this.Ze=new Re(ie)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:J(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(jf(i))if(r===0){const o=new G(i.path);this.et(n,o,ht.newNoDocument(o,X.min()))}else de(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Kr(r).toUint8Array()}catch(c){if(c instanceof XE)return ks("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Em(o,s,i)}catch(c){return ks(c instanceof Uo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&jf(l.target)){const c=new G(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,ht.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.Ke())}});let r=oe();this.Je.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new td(e,n,this.Ze,this.je,r);return this.je=Jn(),this.He=Hl(),this.Je=Hl(),this.Ze=new Re(ie),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new lv,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Be(ie),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Be(ie),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new lv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Hl(){return new Re(G.comparator)}function cv(){return new Re(G.comparator)}const vP={asc:"ASCENDING",desc:"DESCENDING"},_P={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wP={and:"AND",or:"OR"};class EP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ff(t,e){return t.useProto3Json||Gu(e)?e:{value:e}}function nu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function xP(t,e){return nu(t,e.toTimestamp())}function Nn(t){return de(!!t,49232),X.fromTimestamp(function(n){const r=qr(n);return new ve(r.seconds,r.nanos)}(t))}function xm(t,e){return Uf(t,e).canonicalString()}function Uf(t,e){const n=function(s){return new ye(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function kx(t){const e=ye.fromString(t);return de(Ox(e),10190,{key:e.toString()}),e}function zf(t,e){return xm(t.databaseId,e.path)}function ph(t,e){const n=kx(e);if(n.get(1)!==t.databaseId.projectId)throw new W(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(Ax(n))}function Cx(t,e){return xm(t.databaseId,e)}function IP(t){const e=kx(t);return e.length===4?ye.emptyPath():Ax(e)}function $f(t){return new ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ax(t){return de(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function uv(t,e,n){return{name:zf(t,e),fields:n.value.mapValue.fields}}function TP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:J(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,f){return u.useProto3Json?(de(f===void 0||typeof f=="string",58123),et.fromBase64String(f||"")):(de(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),et.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const f=u.code===void 0?M.UNKNOWN:Sx(u.code);return new W(f,u.message||"")}(o);n=new Rx(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ph(t,r.document.name),i=Nn(r.document.updateTime),o=r.document.createTime?Nn(r.document.createTime):X.min(),l=new Rt({mapValue:{fields:r.document.fields}}),c=ht.newFoundDocument(s,i,o,l),u=r.targetIds||[],f=r.removedTargetIds||[];n=new gc(u,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ph(t,r.document),i=r.readTime?Nn(r.readTime):X.min(),o=ht.newNoDocument(s,i),l=r.removedTargetIds||[];n=new gc([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ph(t,r.document),i=r.removedTargetIds||[];n=new gc([],i,s,null)}else{if(!("filter"in e))return J(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new fP(s,i),l=r.targetId;n=new Nx(l,o)}}return n}function SP(t,e){let n;if(e instanceof Xa)n={update:uv(t,e.key,e.value)};else if(e instanceof ed)n={delete:zf(t,e.key)};else if(e instanceof ns)n={update:uv(t,e.key,e.data),updateMask:OP(e.fieldMask)};else{if(!(e instanceof uP))return J(16599,{dt:e.type});n={verify:zf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof eu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ja)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Va)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof tu)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw J(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:xP(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:J(27497)}(t,e.precondition)),n}function NP(t,e){return t&&t.length>0?(de(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Nn(s.updateTime):Nn(i);return o.isEqual(X.min())&&(o=Nn(i)),new aP(o,s.transformResults||[])}(n,e))):[]}function RP(t,e){return{documents:[Cx(t,e.path)]}}function bP(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Cx(t,s);const i=function(u){if(u.length!==0)return Dx(fn.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(f=>function(m){return{field:Ks(m.field),direction:AP(m.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Ff(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function kP(t){let e=IP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){de(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(p){const m=Px(p);return m instanceof fn&&lx(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(b){return new La(Gs(b.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,Gu(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(p){const m=!!p.before,I=p.values||[];return new Zc(I,m)}(n.startAt));let u=null;return n.endAt&&(u=function(p){const m=!p.before,I=p.values||[];return new Zc(I,m)}(n.endAt)),qA(e,s,o,i,l,"F",c,u)}function CP(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Px(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Gs(n.unaryFilter.field);return Me.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Gs(n.unaryFilter.field);return Me.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Gs(n.unaryFilter.field);return Me.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Gs(n.unaryFilter.field);return Me.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return J(61313);default:return J(60726)}}(t):t.fieldFilter!==void 0?function(n){return Me.create(Gs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return J(58110);default:return J(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return fn.create(n.compositeFilter.filters.map(r=>Px(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return J(1026)}}(n.compositeFilter.op))}(t):J(30097,{filter:t})}function AP(t){return vP[t]}function PP(t){return _P[t]}function DP(t){return wP[t]}function Ks(t){return{fieldPath:t.canonicalString()}}function Gs(t){return Je.fromServerFormat(t.fieldPath)}function Dx(t){return t instanceof Me?function(n){if(n.op==="=="){if(J0(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NAN"}};if(Y0(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(J0(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NOT_NAN"}};if(Y0(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ks(n.field),op:PP(n.op),value:n.value}}}(t):t instanceof fn?function(n){const r=n.getFilters().map(s=>Dx(s));return r.length===1?r[0]:{compositeFilter:{op:DP(n.op),filters:r}}}(t):J(54877,{filter:t})}function OP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Ox(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function Lx(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,n,r,s,i=X.min(),o=X.min(),l=et.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Sr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e){this.yt=e}}function jP(t){const e=kP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Mf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(){this.Sn=new MP}addToCollectionParentIndex(e,n){return this.Sn.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Hr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Hr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class MP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Be(ye.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Be(ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jx=41943040;class St{static withCacheSize(e){return new St(e,St.DEFAULT_COLLECTION_PERCENTILE,St.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */St.DEFAULT_COLLECTION_PERCENTILE=10,St.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,St.DEFAULT=new St(jx,St.DEFAULT_COLLECTION_PERCENTILE,St.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),St.DISABLED=new St(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Li(0)}static ar(){return new Li(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv="LruGarbageCollector",FP=1048576;function fv([t,e],[n,r]){const s=ie(t,n);return s===0?ie(e,r):s}class UP{constructor(e){this.Pr=e,this.buffer=new Be(fv),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();fv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class zP{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){H(hv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ji(n)?H(hv,"Ignoring IndexedDB error during garbage collection: ",n):await Yi(n)}await this.Ar(3e5)})}}class $P{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return F.resolve(Ku.ce);const r=new UP(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(dv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dv):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,i,o,l,c,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(u=Date.now(),Hs()<=se.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(u-c)+`ms
Total Duration: ${u-f}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function BP(t,e){return new $P(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(){this.changes=new Vs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&sa(r.mutation,s,Ft.empty(),ve.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=oe()){const s=gs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Fo();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=gs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,oe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Jn();const o=ra(),l=function(){return ra()}();return n.forEach((c,u)=>{const f=r.get(u.key);s.has(u.key)&&(f===void 0||f.mutation instanceof ns)?i=i.insert(u.key,u):f!==void 0?(o.set(u.key,f.mutation.getFieldMask()),sa(f.mutation,u,f.mutation.getFieldMask(),ve.now())):o.set(u.key,Ft.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,f)=>o.set(u,f)),n.forEach((u,f)=>l.set(u,new HP(f,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const r=ra();let s=new Re((o,l)=>o-l),i=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let f=r.get(c)||Ft.empty();f=l.applyToLocalView(u,f),r.set(c,f);const p=(s.get(l.batchId)||oe()).add(c);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,f=c.value,p=yx();f.forEach(m=>{if(!i.has(m)){const I=Ix(n.get(m),r.get(m));I!==null&&p.set(m,I),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return KA(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):hx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(gs());let l=Pa,c=i;return o.next(u=>F.forEach(u,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{c=c.insert(f,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,oe())).next(f=>({batchId:l,changes:gx(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let s=Fo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Fo();return this.indexManager.getCollectionParents(e,i).next(l=>F.forEach(l,c=>{const u=function(p,m){return new Xi(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(f=>{f.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,u)=>{const f=u.getKey();o.get(f)===null&&(o=o.insert(f,ht.newInvalidDocument(f)))});let l=Fo();return o.forEach((c,u)=>{const f=i.get(c);f!==void 0&&sa(f.mutation,u,Ft.empty(),ve.now()),Ju(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return F.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Nn(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(s){return{name:s.name,query:jP(s.bundledQuery),readTime:Nn(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(){this.overlays=new Re(G.comparator),this.Lr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=gs();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.bt(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Lr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=gs(),i=n.length+1,o=new G(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Re((u,f)=>u-f);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let f=i.get(u.largestBatchId);f===null&&(f=gs(),i=i.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const l=gs(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,f)=>l.set(u,f)),!(l.size()>=s)););return F.resolve(l)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new hP(n,r));let i=this.Lr.get(n);i===void 0&&(i=oe(),this.Lr.set(n,i)),this.Lr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(){this.sessionToken=et.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(){this.kr=new Be(Ge.Kr),this.qr=new Be(Ge.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Ge(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Ge(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new G(new ye([])),r=new Ge(n,e),s=new Ge(n,e+1),i=[];return this.qr.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new G(new ye([])),r=new Ge(n,e),s=new Ge(n,e+1);let i=oe();return this.qr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ge(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ge{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return G.comparator(e.key,n.key)||ie(e.Hr,n.Hr)}static Ur(e,n){return ie(e.Hr,n.Hr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Be(Ge.Kr)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new dP(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Jr=this.Jr.add(new Ge(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?fm:this.Yn-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ge(n,0),s=new Ge(n,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],o=>{const l=this.Zr(o.Hr);i.push(l)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Be(ie);return n.forEach(s=>{const i=new Ge(s,0),o=new Ge(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,o],l=>{r=r.add(l.Hr)})}),F.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;G.isDocumentKey(i)||(i=i.child(""));const o=new Ge(new G(i),0);let l=new Be(ie);return this.Jr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Hr)),!0)},o),F.resolve(this.Yr(l))}Yr(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){de(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return F.forEach(n.mutations,s=>{const i=new Ge(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new Ge(n,0),s=this.Jr.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e){this.ti=e,this.docs=function(){return new Re(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():ht.newInvalidDocument(n))}getEntries(e,n){let r=Jn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ht.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Jn();const o=n.path,l=new G(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:f}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||IA(xA(f),r)<=0||(s.has(f.key)||Ju(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){J(9500)}ni(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new XP(this)}getSize(e){return F.resolve(this.size)}}class XP extends WP{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e){this.persistence=e,this.ri=new Vs(n=>gm(n),ym),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.ii=0,this.si=new Im,this.targetCount=0,this.oi=Li._r()}forEachTarget(e,n){return this.ri.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),F.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Li(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.lr(n),F.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ri.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ri.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,n){this._i={},this.overlays={},this.ai=new Ku(0),this.ui=!1,this.ui=!0,this.ci=new QP,this.referenceDelegate=e(this),this.li=new ZP(this),this.indexManager=new VP,this.remoteDocumentCache=function(s){return new JP(s)}(r=>this.referenceDelegate.hi(r)),this.serializer=new LP(n),this.Pi=new KP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new GP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new YP(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new e4(this.ai.next());return this.referenceDelegate.Ti(),r(s).next(i=>this.referenceDelegate.Ii(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return F.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class e4 extends SA{constructor(e){super(),this.currentSequenceNumber=e}}class Tm{constructor(e){this.persistence=e,this.Ri=new Im,this.Ai=null}static Vi(e){return new Tm(e)}get di(){if(this.Ai)return this.Ai;throw J(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),F.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.di,r=>{const s=G.fromPath(r);return this.mi(e,s).next(i=>{i||n.removeEntry(s,X.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return F.or([()=>F.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class ru{constructor(e,n){this.persistence=e,this.fi=new Vs(r=>bA(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=BP(this,n)}static Vi(e,n){return new ru(e,n)}Ti(){}Ii(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return F.forEach(this.fi,(r,s)=>this.wr(e,r,s).next(i=>i?F.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,o=>this.wr(e,o,n).next(l=>{l||(r++,i.removeEntry(o,X.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),F.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=fc(e.data.value)),n}wr(e,n,r){return F.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return F.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=oe(),s=oe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Sm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return uR()?8:NA(mt())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.gs(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ps(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new t4;return this.ys(e,n,o).next(l=>{if(i.result=l,this.As)return this.ws(e,n,o,l.size)})}).next(()=>i.result)}ws(e,n,r,s){return r.documentReadCount<this.Vs?(Hs()<=se.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",qs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),F.resolve()):(Hs()<=se.DEBUG&&H("QueryEngine","Query:",qs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Hs()<=se.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",qs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sn(n))):F.resolve())}gs(e,n){if(tv(n))return F.resolve(null);let r=Sn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Mf(n,null,"F"),r=Sn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=oe(...i);return this.fs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.bs(n,l);return this.Ss(n,u,o,c.readTime)?this.gs(e,Mf(n,null,"F")):this.Ds(e,u,n,c)}))})))}ps(e,n,r,s){return tv(n)||s.isEqual(X.min())?F.resolve(null):this.fs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ss(n,o,r,s)?F.resolve(null):(Hs()<=se.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),qs(n)),this.Ds(e,o,n,EA(s,Pa)).next(l=>l))})}bs(e,n){let r=new Be(px(e));return n.forEach((s,i)=>{Ju(e,i)&&(r=r.add(i))}),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,n,r){return Hs()<=se.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",qs(n)),this.fs.getDocumentsMatchingQuery(e,n,Hr.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm="LocalStore",r4=3e8;class s4{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new Re(ie),this.Fs=new Vs(i=>gm(i),ym),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qP(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function i4(t,e,n,r){return new s4(t,e,n,r)}async function Mx(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=oe();for(const u of s){o.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}for(const u of i){l.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ns:u,removedBatchIds:o,addedBatchIds:l}))})})}function o4(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,f){const p=u.batch,m=p.keys();let I=F.resolve();return m.forEach(b=>{I=I.next(()=>f.getEntry(c,b)).next(C=>{const S=u.docVersions.get(b);de(S!==null,48541),C.version.compareTo(S)<0&&(p.applyToRemoteDocument(C,u),C.isValidDocument()&&(C.setReadTime(u.commitVersion),f.addEntry(C)))})}),I.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=oe();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Fx(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function a4(t,e){const n=Z(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const l=[];e.targetChanges.forEach((f,p)=>{const m=s.get(p);if(!m)return;l.push(n.li.removeMatchingKeys(i,f.removedDocuments,p).next(()=>n.li.addMatchingKeys(i,f.addedDocuments,p)));let I=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?I=I.withResumeToken(et.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):f.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(f.resumeToken,r)),s=s.insert(p,I),function(C,S,_){return C.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=r4?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(m,I,f)&&l.push(n.li.updateTargetData(i,I))});let c=Jn(),u=oe();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(l4(i,o,e.documentUpdates).next(f=>{c=f.Bs,u=f.Ls})),!r.isEqual(X.min())){const f=n.li.getLastRemoteSnapshotVersion(i).next(p=>n.li.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return F.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.vs=s,i))}function l4(t,e,n){let r=oe(),s=oe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Jn();return n.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(X.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):H(Nm,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Bs:o,Ls:s}})}function c4(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=fm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function u4(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.li.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.li.allocateTargetId(r).next(o=>(s=new Sr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function Bf(t,e,n){const r=Z(t),s=r.vs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ji(o))throw o;H(Nm,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function pv(t,e,n){const r=Z(t);let s=X.min(),i=oe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,f){const p=Z(c),m=p.Fs.get(f);return m!==void 0?F.resolve(p.vs.get(m)):p.li.getTargetData(u,f)}(r,o,Sn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:X.min(),n?i:oe())).next(l=>(d4(r,YA(e),l),{documents:l,ks:i})))}function d4(t,e,n){let r=t.Ms.get(e)||X.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ms.set(e,r)}class mv{constructor(){this.activeTargetIds=nP()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class h4{constructor(){this.vo=new mv,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new mv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="ConnectivityMonitor";class yv{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){H(gv,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){H(gv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ql=null;function Wf(){return ql===null?ql=function(){return 268435456+Math.round(2147483648*Math.random())}():ql++,"0x"+ql.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh="RestConnection",p4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class m4{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===Jc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=Wf(),l=this.Qo(e,n.toUriEncodedString());H(mh,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,s,i);const{host:u}=new URL(l),f=Os(u);return this.zo(e,l,c,r,f).then(p=>(H(mh,`Received RPC '${e}' ${o}: `,p),p),p=>{throw ks(mh,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",r),p})}jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Qo(e,n){const r=p4[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct="WebChannelConnection",Co=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(s){setTimeout(()=>{throw s},0)}})};class _i extends m4{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!_i.c_){const e=$E();Co(e,zE.STAT_EVENT,n=>{n.stat===Af.PROXY?H(ct,"STAT_EVENT: detected buffering proxy"):n.stat===Af.NOPROXY&&H(ct,"STAT_EVENT: detected no buffering proxy")}),_i.c_=!0}}zo(e,n,r,s,i){const o=Wf();return new Promise((l,c)=>{const u=new FE;u.setWithCredentials(!0),u.listenOnce(UE.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case hc.NO_ERROR:const p=u.getResponseJson();H(ct,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case hc.TIMEOUT:H(ct,`RPC '${e}' ${o} timed out`),c(new W(M.DEADLINE_EXCEEDED,"Request time out"));break;case hc.HTTP_ERROR:const m=u.getStatus();if(H(ct,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let I=u.getResponseJson();Array.isArray(I)&&(I=I[0]);const b=I==null?void 0:I.error;if(b&&b.status&&b.message){const C=function(_){const v=_.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(v)>=0?v:M.UNKNOWN}(b.status);c(new W(C,b.message))}else c(new W(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new W(M.UNAVAILABLE,"Connection failed."));break;default:J(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{H(ct,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);H(ct,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",f,r,15)})}T_(e,n,r){const s=Wf(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=i.join("");H(ct,`Creating RPC '${e}' stream ${s}: ${u}`,l);const f=o.createWebChannel(u,l);this.I_(f);let p=!1,m=!1;const I=new g4({Ho:b=>{m?H(ct,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(p||(H(ct,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),H(ct,`RPC '${e}' stream ${s} sending:`,b),f.send(b))},Jo:()=>f.close()});return Co(f,Mo.EventType.OPEN,()=>{m||(H(ct,`RPC '${e}' stream ${s} transport opened.`),I.i_())}),Co(f,Mo.EventType.CLOSE,()=>{m||(m=!0,H(ct,`RPC '${e}' stream ${s} transport closed`),I.o_(),this.E_(f))}),Co(f,Mo.EventType.ERROR,b=>{m||(m=!0,ks(ct,`RPC '${e}' stream ${s} transport errored. Name:`,b.name,"Message:",b.message),I.o_(new W(M.UNAVAILABLE,"The operation could not be completed")))}),Co(f,Mo.EventType.MESSAGE,b=>{var C;if(!m){const S=b.data[0];de(!!S,16349);const _=S,v=(_==null?void 0:_.error)||((C=_[0])==null?void 0:C.error);if(v){H(ct,`RPC '${e}' stream ${s} received error:`,v);const w=v.status;let A=function(x){const y=Oe[x];if(y!==void 0)return Sx(y)}(w),L=v.message;A===void 0&&(A=M.INTERNAL,L="Unknown error status: "+w+" with message "+v.message),m=!0,I.o_(new W(A,L)),f.close()}else H(ct,`RPC '${e}' stream ${s} received:`,S),I.__(S)}}),_i.u_(),setTimeout(()=>{I.s_()},0),I}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return BE()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(t){return new _i(t)}function gh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(t){return new EP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_i.c_=!1;class Ux{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv="PersistentStream";class zx{constructor(e,n,r,s,i,o,l,c){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ux(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(Yn(n.toString()),Yn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new W(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return H(vv,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(H(vv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class v4 extends zx{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=TP(this.serializer,e),r=function(i){if(!("targetChange"in i))return X.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?X.min():o.readTime?Nn(o.readTime):X.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=$f(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=jf(c)?{documents:RP(i,c)}:{query:bP(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=bx(i,o.resumeToken);const u=Ff(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(X.min())>0){l.readTime=nu(i,o.snapshotVersion.toTimestamp());const u=Ff(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=CP(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=$f(this.serializer),n.removeTarget=e,this.K_(n)}}class _4 extends zx{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return de(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){de(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=NP(e.writeResults,e.commitTime),r=Nn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=$f(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>SP(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{}class E4 extends w4{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new W(M.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,Uf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new W(M.UNKNOWN,i.toString())})}jo(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.jo(e,Uf(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(M.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function x4(t,e,n,r){return new E4(t,e,n,r)}class I4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Yn(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs="RemoteStore";class T4{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{Ms(this)&&(H(Cs,"Restarting streams for network reachability change."),await async function(c){const u=Z(c);u.Ea.add(4),await el(u),u.Va.set("Unknown"),u.Ea.delete(4),await rd(u)}(this))})}),this.Va=new I4(r,s)}}async function rd(t){if(Ms(t))for(const e of t.Ra)await e(!0)}async function el(t){for(const e of t.Ra)await e(!1)}function $x(t,e){const n=Z(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Cm(n)?km(n):Zi(n).O_()&&bm(n,e))}function Rm(t,e){const n=Z(t),r=Zi(n);n.Ia.delete(e),r.O_()&&Bx(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ms(n)&&n.Va.set("Unknown"))}function bm(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Zi(t).Z_(e)}function Bx(t,e){t.da.$e(e),Zi(t).X_(e)}function km(t){t.da=new yP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Zi(t).start(),t.Va.ua()}function Cm(t){return Ms(t)&&!Zi(t).x_()&&t.Ia.size>0}function Ms(t){return Z(t).Ea.size===0}function Wx(t){t.da=void 0}async function S4(t){t.Va.set("Online")}async function N4(t){t.Ia.forEach((e,n)=>{bm(t,e)})}async function R4(t,e){Wx(t),Cm(t)?(t.Va.ha(e),km(t)):t.Va.set("Unknown")}async function b4(t,e,n){if(t.Va.set("Online"),e instanceof Rx&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.da.removeTarget(l))}(t,e)}catch(r){H(Cs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await su(t,r)}else if(e instanceof gc?t.da.Xe(e):e instanceof Nx?t.da.st(e):t.da.tt(e),!n.isEqual(X.min()))try{const r=await Fx(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.da.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.Ia.get(u);f&&i.Ia.set(u,f.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const f=i.Ia.get(c);if(!f)return;i.Ia.set(c,f.withResumeToken(et.EMPTY_BYTE_STRING,f.snapshotVersion)),Bx(i,c);const p=new Sr(f.target,c,u,f.sequenceNumber);bm(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){H(Cs,"Failed to raise snapshot:",r),await su(t,r)}}async function su(t,e,n){if(!Ji(e))throw e;t.Ea.add(1),await el(t),t.Va.set("Offline"),n||(n=()=>Fx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(Cs,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await rd(t)})}function Hx(t,e){return e().catch(n=>su(t,n,e))}async function sd(t){const e=Z(t),n=Qr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:fm;for(;k4(e);)try{const s=await c4(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,C4(e,s)}catch(s){await su(e,s)}qx(e)&&Kx(e)}function k4(t){return Ms(t)&&t.Ta.length<10}function C4(t,e){t.Ta.push(e);const n=Qr(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function qx(t){return Ms(t)&&!Qr(t).x_()&&t.Ta.length>0}function Kx(t){Qr(t).start()}async function A4(t){Qr(t).ra()}async function P4(t){const e=Qr(t);for(const n of t.Ta)e.ea(n.mutations)}async function D4(t,e,n){const r=t.Ta.shift(),s=wm.from(r,e,n);await Hx(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await sd(t)}async function O4(t,e){e&&Qr(t).Y_&&await async function(r,s){if(function(o){return pP(o)&&o!==M.ABORTED}(s.code)){const i=r.Ta.shift();Qr(r).B_(),await Hx(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await sd(r)}}(t,e),qx(t)&&Kx(t)}async function _v(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),H(Cs,"RemoteStore received new credentials");const r=Ms(n);n.Ea.add(3),await el(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await rd(n)}async function L4(t,e){const n=Z(t);e?(n.Ea.delete(2),await rd(n)):e||(n.Ea.add(2),await el(n),n.Va.set("Unknown"))}function Zi(t){return t.ma||(t.ma=function(n,r,s){const i=Z(n);return i.sa(),new v4(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:S4.bind(null,t),Yo:N4.bind(null,t),t_:R4.bind(null,t),J_:b4.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),Cm(t)?km(t):t.Va.set("Unknown")):(await t.ma.stop(),Wx(t))})),t.ma}function Qr(t){return t.fa||(t.fa=function(n,r,s){const i=Z(n);return i.sa(),new _4(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:A4.bind(null,t),t_:O4.bind(null,t),ta:P4.bind(null,t),na:D4.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await sd(t)):(await t.fa.stop(),t.Ta.length>0&&(H(Cs,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Am(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pm(t,e){if(Yn("AsyncQueue",`${e}: ${t}`),Ji(t))return new W(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{static emptySet(e){return new wi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=Fo(),this.sortedSet=new Re(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new wi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(){this.ga=new Re(G.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):J(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class ji{constructor(e,n,r,s,i,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new ji(e,n,wi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class V4{constructor(){this.queries=Ev(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Z(n),i=s.queries;s.queries=Ev(),i.forEach((o,l)=>{for(const c of l.ba)c.onError(r)})})(this,new W(M.ABORTED,"Firestore shutting down"))}}function Ev(){return new Vs(t=>fx(t),Yu)}async function Gx(t,e){const n=Z(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new j4,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Pm(o,`Initialization of query '${qs(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.ba.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Dm(n)}async function Qx(t,e){const n=Z(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.ba.indexOf(e);o>=0&&(i.ba.splice(o,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function M4(t,e){const n=Z(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.ba)l.Fa(s)&&(r=!0);o.wa=s}}r&&Dm(n)}function F4(t,e,n){const r=Z(t),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(n);r.queries.delete(e)}function Dm(t){t.Ca.forEach(e=>{e.next()})}var Hf,xv;(xv=Hf||(Hf={})).Ma="default",xv.Cache="cache";class Yx{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ji(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ji.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Hf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e){this.key=e}}class Xx{constructor(e){this.key=e}}class U4{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=oe(),this.mutatedKeys=oe(),this.eu=px(e),this.tu=new wi(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new wv,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,p)=>{const m=s.get(f),I=Ju(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),C=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let S=!1;m&&I?m.data.isEqual(I.data)?b!==C&&(r.track({type:3,doc:I}),S=!0):this.su(m,I)||(r.track({type:2,doc:I}),S=!0,(c&&this.eu(I,c)>0||u&&this.eu(I,u)<0)&&(l=!0)):!m&&I?(r.track({type:0,doc:I}),S=!0):m&&!I&&(r.track({type:1,doc:m}),S=!0,(c||u)&&(l=!0)),S&&(I?(o=o.add(I),i=C?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{tu:o,iu:r,Ss:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((f,p)=>function(I,b){const C=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J(20277,{Vt:S})}};return C(I)-C(b)}(f.type,p.type)||this.eu(f.doc,p.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Ya.size===0&&this.current&&!s?1:0,u=c!==this.Xa;return this.Xa=c,o.length!==0||u?{snapshot:new ji(this.query,e.tu,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new wv,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=oe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new Xx(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new Jx(r))}),n}cu(e){this.Za=e.ks,this.Ya=oe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ji.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Om="SyncEngine";class z4{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class $4{constructor(e){this.key=e,this.hu=!1}}class B4{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Vs(l=>fx(l),Yu),this.Iu=new Map,this.Eu=new Set,this.Ru=new Re(G.comparator),this.Au=new Map,this.Vu=new Im,this.du={},this.mu=new Map,this.fu=Li.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function W4(t,e,n=!0){const r=sI(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await Zx(r,e,n,!0),s}async function H4(t,e){const n=sI(t);await Zx(n,e,!0,!1)}async function Zx(t,e,n,r){const s=await u4(t.localStore,Sn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await q4(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&$x(t.remoteStore,s),l}async function q4(t,e,n,r,s){t.pu=(p,m,I)=>async function(C,S,_,v){let w=S.view.ru(_);w.Ss&&(w=await pv(C.localStore,S.query,!1).then(({documents:x})=>S.view.ru(x,w)));const A=v&&v.targetChanges.get(S.targetId),L=v&&v.targetMismatches.get(S.targetId)!=null,D=S.view.applyChanges(w,C.isPrimaryClient,A,L);return Tv(C,S.targetId,D.au),D.snapshot}(t,p,m,I);const i=await pv(t.localStore,e,!0),o=new U4(e,i.ks),l=o.ru(i.documents),c=Za.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,c);Tv(t,n,u.au);const f=new z4(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function K4(t,e,n){const r=Z(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Yu(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Bf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Rm(r.remoteStore,s.targetId),qf(r,s.targetId)}).catch(Yi)):(qf(r,s.targetId),await Bf(r.localStore,s.targetId,!0))}async function G4(t,e){const n=Z(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Rm(n.remoteStore,r.targetId))}async function Q4(t,e,n){const r=nD(t);try{const s=await function(o,l){const c=Z(o),u=ve.now(),f=l.reduce((I,b)=>I.add(b.key),oe());let p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",I=>{let b=Jn(),C=oe();return c.xs.getEntries(I,f).next(S=>{b=S,b.forEach((_,v)=>{v.isValidDocument()||(C=C.add(_))})}).next(()=>c.localDocuments.getOverlayedDocuments(I,b)).next(S=>{p=S;const _=[];for(const v of l){const w=cP(v,p.get(v.key).overlayedDocument);w!=null&&_.push(new ns(v.key,w,ix(w.value.mapValue),Dt.exists(!0)))}return c.mutationQueue.addMutationBatch(I,u,_,l)}).next(S=>{m=S;const _=S.applyToLocalDocumentSet(p,C);return c.documentOverlayCache.saveOverlays(I,S.batchId,_)})}).then(()=>({batchId:m.batchId,changes:gx(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let u=o.du[o.currentUser.toKey()];u||(u=new Re(ie)),u=u.insert(l,c),o.du[o.currentUser.toKey()]=u}(r,s.batchId,n),await tl(r,s.changes),await sd(r.remoteStore)}catch(s){const i=Pm(s,"Failed to persist write");n.reject(i)}}async function eI(t,e){const n=Z(t);try{const r=await a4(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(de(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?de(o.hu,14607):s.removedDocuments.size>0&&(de(o.hu,42227),o.hu=!1))}),await tl(n,r,e)}catch(r){await Yi(r)}}function Iv(t,e,n){const r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=Z(o);c.onlineState=l;let u=!1;c.queries.forEach((f,p)=>{for(const m of p.ba)m.va(l)&&(u=!0)}),u&&Dm(c)}(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Y4(t,e,n){const r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Re(G.comparator);o=o.insert(i,ht.newNoDocument(i,X.min()));const l=oe().add(i),c=new td(X.min(),new Map,new Re(ie),o,l);await eI(r,c),r.Ru=r.Ru.remove(i),r.Au.delete(e),Lm(r)}else await Bf(r.localStore,e,!1).then(()=>qf(r,e,n)).catch(Yi)}async function J4(t,e){const n=Z(t),r=e.batch.batchId;try{const s=await o4(n.localStore,e);nI(n,r,null),tI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await tl(n,s)}catch(s){await Yi(s)}}async function X4(t,e,n){const r=Z(t);try{const s=await function(o,l){const c=Z(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let f;return c.mutationQueue.lookupMutationBatch(u,l).next(p=>(de(p!==null,37113),f=p.keys(),c.mutationQueue.removeMutationBatch(u,p))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,f,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f)).next(()=>c.localDocuments.getDocuments(u,f))})}(r.localStore,e);nI(r,e,n),tI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await tl(r,s)}catch(s){await Yi(s)}}function tI(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function nI(t,e,n){const r=Z(t);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function qf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||rI(t,r)})}function rI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(Rm(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),Lm(t))}function Tv(t,e,n){for(const r of n)r instanceof Jx?(t.Vu.addReference(r.key,e),Z4(t,r)):r instanceof Xx?(H(Om,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||rI(t,r.key)):J(19791,{wu:r})}function Z4(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(H(Om,"New document in limbo: "+n),t.Eu.add(r),Lm(t))}function Lm(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new G(ye.fromString(e)),r=t.fu.next();t.Au.set(r,new $4(n)),t.Ru=t.Ru.insert(n,r),$x(t.remoteStore,new Sr(Sn(vm(n.path)),r,"TargetPurposeLimboResolution",Ku.ce))}}async function tl(t,e,n){const r=Z(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{o.push(r.pu(c,e,n).then(u=>{var f;if((u||n)&&r.isPrimaryClient){const p=u?!u.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(u){s.push(u);const p=Sm.Es(c.targetId,u);i.push(p)}}))}),await Promise.all(o),r.Pu.J_(s),await async function(c,u){const f=Z(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(u,m=>F.forEach(m.Ts,I=>f.persistence.referenceDelegate.addReference(p,m.targetId,I)).next(()=>F.forEach(m.Is,I=>f.persistence.referenceDelegate.removeReference(p,m.targetId,I)))))}catch(p){if(!Ji(p))throw p;H(Nm,"Failed to update sequence numbers: "+p)}for(const p of u){const m=p.targetId;if(!p.fromCache){const I=f.vs.get(m),b=I.snapshotVersion,C=I.withLastLimboFreeSnapshotVersion(b);f.vs=f.vs.insert(m,C)}}}(r.localStore,i))}async function eD(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){H(Om,"User change. New user:",e.toKey());const r=await Mx(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new W(M.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await tl(n,r.Ns)}}function tD(t,e){const n=Z(t),r=n.Au.get(e);if(r&&r.hu)return oe().add(r.key);{let s=oe();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function sI(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=eI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Y4.bind(null,e),e.Pu.J_=M4.bind(null,e.eventManager),e.Pu.yu=F4.bind(null,e.eventManager),e}function nD(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=J4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=X4.bind(null,e),e}class iu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return i4(this.persistence,new n4,e.initialUser,this.serializer)}Cu(e){return new Vx(Tm.Vi,this.serializer)}Du(e){return new h4}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}iu.provider={build:()=>new iu};class rD extends iu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){de(this.persistence.referenceDelegate instanceof ru,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new zP(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?St.withCacheSize(this.cacheSizeBytes):St.DEFAULT;return new Vx(r=>ru.Vi(r,n),this.serializer)}}class Kf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Iv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=eD.bind(null,this.syncEngine),await L4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new V4}()}createDatastore(e){const n=nd(e.databaseInfo.databaseId),r=y4(e.databaseInfo);return x4(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new T4(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Iv(this.syncEngine,n,0),function(){return yv.v()?new yv:new f4}())}createSyncEngine(e,n){return function(s,i,o,l,c,u,f){const p=new B4(s,i,o,l,c,u);return f&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Z(s);H(Cs,"RemoteStore shutting down."),i.Ea.add(5),await el(i),i.Aa.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Kf.provider={build:()=>new Kf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Yn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr="FirestoreClient";class sD{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=ut.UNAUTHENTICATED,this.clientId=Hu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H(Yr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H(Yr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Pm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function yh(t,e){t.asyncQueue.verifyOperationInProgress(),H(Yr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Mx(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Sv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await iD(t);H(Yr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>_v(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>_v(e.remoteStore,s)),t._onlineComponents=e}async function iD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(Yr,"Using user provided OfflineComponentProvider");try{await yh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===M.FAILED_PRECONDITION||s.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ks("Error using user provided cache. Falling back to memory cache: "+n),await yh(t,new iu)}}else H(Yr,"Using default OfflineComponentProvider"),await yh(t,new rD(void 0));return t._offlineComponents}async function oI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(Yr,"Using user provided OnlineComponentProvider"),await Sv(t,t._uninitializedComponentsProvider._online)):(H(Yr,"Using default OnlineComponentProvider"),await Sv(t,new Kf))),t._onlineComponents}function oD(t){return oI(t).then(e=>e.syncEngine)}async function Gf(t){const e=await oI(t),n=e.eventManager;return n.onListen=W4.bind(null,e.syncEngine),n.onUnlisten=K4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=H4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=G4.bind(null,e.syncEngine),n}function aD(t,e,n,r){const s=new iI(r),i=new Yx(e,s,n);return t.asyncQueue.enqueueAndForget(async()=>Gx(await Gf(t),i)),()=>{s.Nu(),t.asyncQueue.enqueueAndForget(async()=>Qx(await Gf(t),i))}}function lD(t,e,n={}){const r=new Fr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const f=new iI({next:m=>{f.Nu(),o.enqueueAndForget(()=>Qx(i,p)),m.fromCache&&c.source==="server"?u.reject(new W(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new Yx(l,f,{includeMetadataChanges:!0,Ka:!0});return Gx(i,p)}(await Gf(t),t.asyncQueue,e,n,r)),r.promise}function cD(t,e){const n=new Fr;return t.asyncQueue.enqueueAndForget(async()=>Q4(await oD(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD="ComponentProvider",Nv=new Map;function dD(t,e,n,r,s){return new AA(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,aI(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI="firestore.googleapis.com",Rv=!0;class bv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new W(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lI,this.ssl=Rv}else this.host=e.host,this.ssl=e.ssl??Rv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=jx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FP)throw new W(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aI(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new W(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new W(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new W(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class id{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new qE;switch(r.type){case"firstParty":return new mA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Nv.get(n);r&&(H(uD,"Removing Datastore"),Nv.delete(n),r.terminate())}(this),Promise.resolve()}}function cI(t,e,n,r={}){var u;t=Gt(t,id);const s=Os(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(Xp(`https://${l}`),Zp("Firestore",!0)),i.host!==lI&&i.host!==l&&ks("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!Ss(c,o)&&(t._setSettings(c),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=ut.MOCK_USER;else{f=F1(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new W(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ut(m)}t._authCredentials=new hA(new HE(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new rr(this.firestore,e,this._query)}}class Pe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $n(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pe(this.firestore,e,this._key)}toJSON(){return{type:Pe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ja(n,Pe._jsonSchema))return new Pe(e,r||null,new G(ye.fromString(n.referencePath)))}}Pe._jsonSchemaVersion="firestore/documentReference/1.0",Pe._jsonSchema={type:Fe("string",Pe._jsonSchemaVersion),referencePath:Fe("string")};class $n extends rr{constructor(e,n,r){super(e,n,vm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pe(this.firestore,null,new G(e))}withConverter(e){return new $n(this.firestore,e,this._path)}}function _s(t,e,...n){if(t=ne(t),KE("collection","path",e),t instanceof id){const r=ye.fromString(e,...n);return z0(r),new $n(t,null,r)}{if(!(t instanceof Pe||t instanceof $n))throw new W(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ye.fromString(e,...n));return z0(r),new $n(t.firestore,null,r)}}function Xn(t,e,...n){if(t=ne(t),arguments.length===1&&(e=Hu.newId()),KE("doc","path",e),t instanceof id){const r=ye.fromString(e,...n);return U0(r),new Pe(t,null,new G(r))}{if(!(t instanceof Pe||t instanceof $n))throw new W(M.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ye.fromString(e,...n));return U0(r),new Pe(t.firestore,t instanceof $n?t.converter:null,new G(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv="AsyncQueue";class Cv{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ux(this,"async_queue_retry"),this._c=()=>{const r=gh();r&&H(kv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=gh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=gh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Fr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ji(e))throw e;H(kv,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Yn("INTERNAL UNHANDLED ERROR: ",Av(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Am.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&J(47125,{Pc:Av(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Av(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Zn extends id{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Cv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Cv(e),this._firestoreClient=void 0,await e}}}function uI(t,e){const n=typeof t=="object"?t:nm(),r=typeof t=="string"?t:Jc,s=Du(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=j1("firestore");i&&cI(s,...i)}return s}function nl(t){if(t._terminated)throw new W(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||hD(t),t._firestoreClient}function hD(t){var r,s,i,o;const e=t._freezeSettings(),n=dD(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(s=t._app)==null?void 0:s.options.apiKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new sD(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vt(et.fromBase64String(e))}catch(n){throw new W(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vt(et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ja(e,Vt._jsonSchema))return Vt.fromBase64String(e.bytes)}}Vt._jsonSchemaVersion="firestore/bytes/1.0",Vt._jsonSchema={type:Fe("string",Vt._jsonSchemaVersion),bytes:Fe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Je(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:dn._jsonSchemaVersion}}static fromJSON(e){if(Ja(e,dn._jsonSchema))return new dn(e.latitude,e.longitude)}}dn._jsonSchemaVersion="firestore/geoPoint/1.0",dn._jsonSchema={type:Fe("string",dn._jsonSchemaVersion),latitude:Fe("number"),longitude:Fe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Qt._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ja(e,Qt._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Qt(e.vectorValues);throw new W(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Qt._jsonSchemaVersion="firestore/vectorValue/1.0",Qt._jsonSchema={type:Fe("string",Qt._jsonSchemaVersion),vectorValues:Fe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD=/^__.*__$/;class pD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ns(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xa(e,this.data,n,this.fieldTransforms)}}class dI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ns(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function hI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J(40011,{dataSource:t})}}class jm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new jm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return ou(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(hI(this.dataSource)&&fD.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class mD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||nd(e)}createContext(e,n,r,s=!1){return new jm({dataSource:e,methodName:n,targetDoc:r,path:Je.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ad(t){const e=t._freezeSettings(),n=nd(t._databaseId);return new mD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function fI(t,e,n,r,s,i={}){const o=t.createContext(i.merge||i.mergeFields?2:0,e,n,s);Vm("Data must be an object, but it was:",o,r);const l=gI(r,o);let c,u;if(i.merge)c=new Ft(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const m=As(e,p,n);if(!o.contains(m))throw new W(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);_I(f,m)||f.push(m)}c=new Ft(f),u=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,u=o.fieldTransforms;return new pD(new Rt(l),c,u)}class ld extends od{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ld}}function pI(t,e,n,r){const s=t.createContext(1,e,n);Vm("Data must be an object, but it was:",s,r);const i=[],o=Rt.empty();ts(r,(c,u)=>{const f=vI(e,c,n);u=ne(u);const p=s.childContextForFieldPath(f);if(u instanceof ld)i.push(f);else{const m=sl(u,p);m!=null&&(i.push(f),o.set(f,m))}});const l=new Ft(i);return new dI(o,l,s.fieldTransforms)}function mI(t,e,n,r,s,i){const o=t.createContext(1,e,n),l=[As(e,r,n)],c=[s];if(i.length%2!=0)throw new W(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(As(e,i[m])),c.push(i[m+1]);const u=[],f=Rt.empty();for(let m=l.length-1;m>=0;--m)if(!_I(u,l[m])){const I=l[m];let b=c[m];b=ne(b);const C=o.childContextForFieldPath(I);if(b instanceof ld)u.push(I);else{const S=sl(b,C);S!=null&&(u.push(I),f.set(I,S))}}const p=new Ft(u);return new dI(f,p,o.fieldTransforms)}function gD(t,e,n,r=!1){return sl(n,t.createContext(r?4:3,e))}function sl(t,e){if(yI(t=ne(t)))return Vm("Unsupported field value:",e,t),gI(t,e);if(t instanceof od)return function(r,s){if(!hI(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=sl(l,s.childContextForArray(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=ne(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return rP(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ve.fromDate(r);return{timestampValue:nu(s.serializer,i)}}if(r instanceof ve){const i=new ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nu(s.serializer,i)}}if(r instanceof dn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vt)return{bytesValue:bx(s.serializer,r._byteString)};if(r instanceof Pe){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:xm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Qt)return function(o,l){const c=o instanceof Qt?o.toArray():o;return{mapValue:{fields:{[rx]:{stringValue:sx},[Xc]:{arrayValue:{values:c.map(f=>{if(typeof f!="number")throw l.createError("VectorValues must only contain numeric values.");return _m(l.serializer,f)})}}}}}}(r,s);if(Lx(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${qu(r)}`)}(t,e)}function gI(t,e){const n={};return JE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ts(t,(r,s)=>{const i=sl(s,e.childContextForField(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function yI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ve||t instanceof dn||t instanceof Vt||t instanceof Pe||t instanceof od||t instanceof Qt||Lx(t))}function Vm(t,e,n){if(!yI(n)||!QE(n)){const r=qu(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function As(t,e,n){if((e=ne(e))instanceof rl)return e._internalPath;if(typeof e=="string")return vI(t,e);throw ou("Field path arguments must be of type string or ",t,!1,void 0,n)}const yD=new RegExp("[~\\*/\\[\\]]");function vI(t,e,n){if(e.search(yD)>=0)throw ou(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new rl(...e.split("."))._internalPath}catch{throw ou(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ou(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new W(M.INVALID_ARGUMENT,l+t+c)}function _I(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{convertValue(e,n="none"){switch(Gr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ce(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Kr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw J(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ts(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Xc].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Ce(o.doubleValue));return new Qt(n)}convertGeoPoint(e){return new dn(Ce(e.latitude),Ce(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Qu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Da(e));default:return null}}convertTimestamp(e){const n=qr(e);return new ve(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ye.fromString(e);de(Ox(r),9688,{name:e});const s=new Pi(r.get(1),r.get(3)),i=new G(r.popFirst(5));return s.isEqual(n)||Yn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm extends wI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pe(this.firestore,null,n)}}const Pv="@firebase/firestore",Dv="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Pe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(As("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class vD extends EI{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Fm{}class Um extends Fm{}function ia(t,e,...n){let r=[];e instanceof Fm&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof cd).length,l=i.filter(c=>c instanceof il).length;if(o>1||o>0&&l>0)throw new W(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class il extends Um{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new il(e,n,r)}_apply(e){const n=this._parse(e);return SI(e._query,n),new rr(e.firestore,e.converter,Vf(e._query,n))}_parse(e){const n=ad(e.firestore);return function(i,o,l,c,u,f,p){let m;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new W(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){jv(p,f);const b=[];for(const C of p)b.push(Lv(c,i,C));m={arrayValue:{values:b}}}else m=Lv(c,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||jv(p,f),m=gD(l,o,p,f==="in"||f==="not-in");return Me.create(u,f,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function II(t,e,n){const r=e,s=As("where",t);return il._create(s,r,n)}class cd extends Fm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new cd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:fn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)SI(o,c),o=Vf(o,c)}(e._query,n),new rr(e.firestore,e.converter,Vf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ud extends Um{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ud(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new W(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new W(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new La(i,o)}(e._query,this._field,this._direction);return new rr(e.firestore,e.converter,QA(e._query,n))}}function TI(t,e="asc"){const n=e,r=As("orderBy",t);return ud._create(r,n)}function Lv(t,e,n){if(typeof(n=ne(n))=="string"){if(n==="")throw new W(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hx(e)&&n.indexOf("/")!==-1)throw new W(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ye.fromString(n));if(!G.isDocumentKey(r))throw new W(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Q0(t,new G(r))}if(n instanceof Pe)return Q0(t,n._key);throw new W(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qu(n)}.`)}function jv(t,e){if(!Array.isArray(t)||t.length===0)throw new W(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function SI(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function NI(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ai{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ur extends EI{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new oa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(As("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new W(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ur._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ur._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ur._jsonSchema={type:Fe("string",Ur._jsonSchemaVersion),bundleSource:Fe("string","DocumentSnapshot"),bundleName:Fe("string"),bundle:Fe("string")};class oa extends Ur{data(e={}){return super.data(e)}}class zr{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ai(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new oa(this._firestore,this._userDataWriter,r.key,r,new ai(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new oa(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ai(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new oa(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ai(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,f=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:_D(l.type),doc:c,oldIndex:u,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new W(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=zr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Hu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _D(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zr._jsonSchemaVersion="firestore/querySnapshot/1.0",zr._jsonSchema={type:Fe("string",zr._jsonSchemaVersion),bundleSource:Fe("string","QuerySnapshot"),bundleName:Fe("string"),bundle:Fe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ad(e)}set(e,n,r){this._verifyNotCommitted();const s=vh(e,this._firestore),i=NI(s.converter,n,r),o=fI(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Dt.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=vh(e,this._firestore);let o;return o=typeof(n=ne(n))=="string"||n instanceof rl?mI(this._dataReader,"WriteBatch.update",i._key,n,r,s):pI(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,Dt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=vh(e,this._firestore);return this._mutations=this._mutations.concat(new ed(n._key,Dt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new W(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function vh(t,e){if((t=ne(t)).firestore!==e)throw new W(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function zm(t){t=Gt(t,rr);const e=Gt(t.firestore,Zn),n=nl(e),r=new Mm(e);return xI(t._query),lD(n,t._query).then(s=>new zr(e,r,t,s))}function Vi(t,e,n,...r){t=Gt(t,Pe);const s=Gt(t.firestore,Zn),i=ad(s);let o;return o=typeof(e=ne(e))=="string"||e instanceof rl?mI(i,"updateDoc",t._key,e,n,r):pI(i,"updateDoc",t._key,e),ol(s,[o.toMutation(t._key,Dt.exists(!0))])}function wD(t){return ol(Gt(t.firestore,Zn),[new ed(t._key,Dt.none())])}function ED(t,e){const n=Gt(t.firestore,Zn),r=Xn(t),s=NI(t.converter,e),i=ad(t.firestore);return ol(n,[fI(i,"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Dt.exists(!1))]).then(()=>r)}function yc(t,...e){var u,f,p;t=ne(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Ov(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Ov(e[r])){const m=e[r];e[r]=(u=m.next)==null?void 0:u.bind(m),e[r+1]=(f=m.error)==null?void 0:f.bind(m),e[r+2]=(p=m.complete)==null?void 0:p.bind(m)}let i,o,l;if(t instanceof Pe)o=Gt(t.firestore,Zn),l=vm(t._key.path),i={next:m=>{e[r]&&e[r](xD(o,t,m))},error:e[r+1],complete:e[r+2]};else{const m=Gt(t,rr);o=Gt(m.firestore,Zn),l=m._query;const I=new Mm(o);i={next:b=>{e[r]&&e[r](new zr(o,I,m,b))},error:e[r+1],complete:e[r+2]},xI(t._query)}const c=nl(o);return aD(c,l,s,i)}function ol(t,e){const n=nl(t);return cD(n,e)}function xD(t,e,n){const r=n.docs.get(e._key),s=new Mm(t);return new Ur(t,s,e._key,r,new ai(n.hasPendingWrites,n.fromCache),e.converter)}function Qf(t){return t=Gt(t,Zn),nl(t),new RI(t,e=>ol(t,e))}(function(e,n=!0){dA(Ls),Ns(new Wr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Zn(new fA(r.getProvider("auth-internal")),new gA(o,r.getProvider("app-check-internal")),PA(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Tn(Pv,Dv,e),Tn(Pv,Dv,"esm2020")})();const _h=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:wI,Bytes:Vt,CollectionReference:$n,DocumentReference:Pe,DocumentSnapshot:Ur,FieldPath:rl,FieldValue:od,Firestore:Zn,FirestoreError:W,GeoPoint:dn,Query:rr,QueryCompositeFilterConstraint:cd,QueryConstraint:Um,QueryDocumentSnapshot:oa,QueryFieldFilterConstraint:il,QueryOrderByConstraint:ud,QuerySnapshot:zr,SnapshotMetadata:ai,Timestamp:ve,VectorValue:Qt,WriteBatch:RI,_AutoId:Hu,_ByteString:et,_DatabaseId:Pi,_DocumentKey:G,_EmptyAuthCredentialsProvider:qE,_FieldPath:Je,_cast:Gt,_logWarn:ks,_validateIsNotUsedTogether:GE,addDoc:ED,collection:_s,connectFirestoreEmulator:cI,deleteDoc:wD,doc:Xn,ensureFirestoreConfigured:nl,executeWrite:ol,getDocs:zm,getFirestore:uI,onSnapshot:yc,orderBy:TI,query:ia,updateDoc:Vi,where:II,writeBatch:Qf},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI="firebasestorage.googleapis.com",ID="storageBucket",TD=2*60*1e3,SD=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn extends An{constructor(e,n,r=0){super(wh(e),`Firebase Storage: ${n} (${wh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Pn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return wh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var kn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(kn||(kn={}));function wh(t){return"storage/"+t}function ND(){const t="An unknown error occurred, please check the error payload for server response.";return new Pn(kn.UNKNOWN,t)}function RD(){return new Pn(kn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bD(){return new Pn(kn.CANCELED,"User canceled the upload/download.")}function kD(t){return new Pn(kn.INVALID_URL,"Invalid URL '"+t+"'.")}function CD(t){return new Pn(kn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Vv(t){return new Pn(kn.INVALID_ARGUMENT,t)}function kI(){return new Pn(kn.APP_DELETED,"The Firebase app was deleted.")}function AD(t){return new Pn(kn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ln.makeFromUrl(e,n)}catch{return new ln(e,"")}if(r.path==="")return r;throw CD(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(A){A.path.charAt(A.path.length-1)==="/"&&(A.path_=A.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function u(A){A.path_=decodeURIComponent(A.path)}const f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",I=new RegExp(`^https?://${p}/${f}/b/${s}/o${m}`,"i"),b={bucket:1,path:3},C=n===bI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,S="([^?#]*)",_=new RegExp(`^https?://${C}/${s}/${S}`,"i"),w=[{regex:l,indices:c,postModify:i},{regex:I,indices:b,postModify:u},{regex:_,indices:{bucket:1,path:2},postModify:u}];for(let A=0;A<w.length;A++){const L=w[A],D=L.regex.exec(e);if(D){const x=D[L.indices.bucket];let y=D[L.indices.path];y||(y=""),r=new ln(x,y),L.postModify(r);break}}if(r==null)throw kD(e);return r}}class PD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function c(){return l===2}let u=!1;function f(...S){u||(u=!0,e.apply(null,S))}function p(S){s=setTimeout(()=>{s=null,t(I,c())},S)}function m(){i&&clearTimeout(i)}function I(S,..._){if(u){m();return}if(S){m(),f.call(null,S,..._);return}if(c()||o){m(),f.call(null,S,..._);return}r<64&&(r*=2);let w;l===1?(l=2,w=0):w=(r+Math.random())*1e3,p(w)}let b=!1;function C(S){b||(b=!0,m(),!u&&(s!==null?(S||(l=2),clearTimeout(s),p(0)):S||(l=1)))}return p(0),i=setTimeout(()=>{o=!0,C(!0)},n),C}function OD(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(t){return t!==void 0}function Mv(t,e,n,r){if(r<e)throw Vv(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Vv(`Invalid value for '${t}'. Expected ${n} or less.`)}function jD(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var au;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(au||(au={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,n,r,s,i,o,l,c,u,f,p,m=!0,I=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=f,this.connectionFactory_=p,this.retry=m,this.isUsingEmulator=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,C)=>{this.resolve_=b,this.reject_=C,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Kl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===au.NO_ERROR,c=i.getStatus();if(!l||VD(c,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===au.ABORT;r(!1,new Kl(!1,null,f));return}const u=this.successCodes_.indexOf(c)!==-1;r(!0,new Kl(u,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());LD(c)?i(c):i()}catch(c){o(c)}else if(l!==null){const c=ND();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(s.canceled){const c=this.appDelete_?kI():bD();o(c)}else{const c=RD();o(c)}};this.canceled_?n(!1,new Kl(!1,null,!0)):this.backoffId_=DD(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&OD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Kl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function FD(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function UD(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function zD(t,e){e&&(t["X-Firebase-GMPID"]=e)}function $D(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function BD(t,e,n,r,s,i,o=!0,l=!1){const c=jD(t.urlParams),u=t.url+c,f=Object.assign({},t.headers);return zD(f,e),FD(f,n),UD(f,i),$D(f,r),new MD(u,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function HD(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n){this._service=e,n instanceof ln?this._location=n:this._location=ln.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new lu(e,n)}get root(){const e=new ln(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return HD(this._location.path)}get storage(){return this._service}get parent(){const e=WD(this._location.path);if(e===null)return null;const n=new ln(this._location.bucket,e);return new lu(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw AD(e)}}function Fv(t,e){const n=e==null?void 0:e[ID];return n==null?null:ln.makeFromBucketSpec(n,t)}function qD(t,e,n,r={}){t.host=`${e}:${n}`;const s=Os(e);s&&(Xp(`https://${t.host}/b`),Zp("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:F1(i,t.app.options.projectId))}class KD{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=bI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=TD,this._maxUploadRetryTime=SD,this._requests=new Set,s!=null?this._bucket=ln.makeFromBucketSpec(s,this._host):this._bucket=Fv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ln.makeFromBucketSpec(this._url,e):this._bucket=Fv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Mv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Mv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Ve(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new lu(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new PD(kI());{const o=BD(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Uv="@firebase/storage",zv="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI="storage";function GD(t=nm(),e){t=ne(t);const r=Du(t,CI).getImmediate({identifier:e}),s=j1("storage");return s&&QD(r,...s),r}function QD(t,e,n,r={}){qD(t,e,n,r)}function YD(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new KD(n,r,s,e,Ls)}function JD(){Ns(new Wr(CI,YD,"PUBLIC").setMultipleInstances(!0)),Tn(Uv,zv,""),Tn(Uv,zv,"esm2020")}JD();/*! Capacitor: https://capacitorjs.com/ - MIT License */var Mi;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Mi||(Mi={}));class Eh extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const XD=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},ZD=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>e!==null?e.name:XD(t),i=()=>s()!=="web",o=p=>{const m=u.get(p);return!!(m!=null&&m.platforms.has(s())||l(p))},l=p=>{var m;return(m=n.PluginHeaders)===null||m===void 0?void 0:m.find(I=>I.name===p)},c=p=>t.console.error(p),u=new Map,f=(p,m={})=>{const I=u.get(p);if(I)return console.warn(`Capacitor plugin "${p}" already registered. Cannot register plugins twice.`),I.proxy;const b=s(),C=l(p);let S;const _=async()=>(!S&&b in m?S=typeof m[b]=="function"?S=await m[b]():S=m[b]:e!==null&&!S&&"web"in m&&(S=typeof m.web=="function"?S=await m.web():S=m.web),S),v=(y,T)=>{var R,k;if(C){const P=C==null?void 0:C.methods.find(N=>T===N.name);if(P)return P.rtype==="promise"?N=>n.nativePromise(p,T.toString(),N):(N,he)=>n.nativeCallback(p,T.toString(),N,he);if(y)return(R=y[T])===null||R===void 0?void 0:R.bind(y)}else{if(y)return(k=y[T])===null||k===void 0?void 0:k.bind(y);throw new Eh(`"${p}" plugin is not implemented on ${b}`,Mi.Unimplemented)}},w=y=>{let T;const R=(...k)=>{const P=_().then(N=>{const he=v(N,y);if(he){const pe=he(...k);return T=pe==null?void 0:pe.remove,pe}else throw new Eh(`"${p}.${y}()" is not implemented on ${b}`,Mi.Unimplemented)});return y==="addListener"&&(P.remove=async()=>T()),P};return R.toString=()=>`${y.toString()}() { [capacitor code] }`,Object.defineProperty(R,"name",{value:y,writable:!1,configurable:!1}),R},A=w("addListener"),L=w("removeListener"),D=(y,T)=>{const R=A({eventName:y},T),k=async()=>{const N=await R;L({eventName:y,callbackId:N},T)},P=new Promise(N=>R.then(()=>N({remove:k})));return P.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await k()},P},x=new Proxy({},{get(y,T){switch(T){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return C?D:A;case"removeListener":return L;default:return w(T)}}});return r[p]=x,u.set(p,{name:p,proxy:x,platforms:new Set([...Object.keys(m),...C?[b]:[]])}),x};return n.convertFileSrc||(n.convertFileSrc=p=>p),n.getPlatform=s,n.handleError=c,n.isNativePlatform=i,n.isPluginAvailable=o,n.registerPlugin=f,n.Exception=Eh,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},eO=t=>t.Capacitor=ZD(t),on=eO(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),eo=on.registerPlugin;class $m{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const s=this.listeners[e];if(!s){if(r){let i=this.retainedEventArguments[e];i||(i=[]),i.push(n),this.retainedEventArguments[e]=i}return}s.forEach(i=>i(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new on.Exception(e,Mi.Unimplemented)}unavailable(e="not available"){return new on.Exception(e,Mi.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const s=r.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const $v=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Bv=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class tO extends $m{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=Bv(s).trim(),i=Bv(i).trim(),n[s]=i}),n}async setCookie(e){try{const n=$v(e.key),r=$v(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${i}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}eo("CapacitorCookies",{web:()=>new tO});const nO=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(t)}),rO=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,i,o)=>(s[i]=t[e[o]],s),{})},sO=(t,e=!0)=>t?Object.entries(t).reduce((r,s)=>{const[i,o]=s;let l,c;return Array.isArray(o)?(c="",o.forEach(u=>{l=e?encodeURIComponent(u):u,c+=`${i}=${l}&`}),c.slice(0,-1)):(l=e?encodeURIComponent(o):o,c=`${i}=${l}`),`${r}&${c}`},"").substr(1):null,iO=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=rO(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,l]of Object.entries(t.data||{}))i.set(o,l);n.body=i.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((l,c)=>{i.append(c,l)});else for(const l of Object.keys(t.data))i.append(l,t.data[l]);n.body=i;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class oO extends $m{async request(e){const n=iO(e,e.webFetchExtra),r=sO(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,i=await fetch(s,n),o=i.headers.get("content-type")||"";let{responseType:l="text"}=i.ok?e:{};o.includes("application/json")&&(l="json");let c,u;switch(l){case"arraybuffer":case"blob":u=await i.blob(),c=await nO(u);break;case"json":c=await i.json();break;case"document":case"text":default:c=await i.text()}const f={};return i.headers.forEach((p,m)=>{f[m]=p}),{data:c,headers:f,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}eo("CapacitorHttp",{web:()=>new oO});var Wv;(function(t){t.Dark="DARK",t.Light="LIGHT",t.Default="DEFAULT"})(Wv||(Wv={}));var Hv;(function(t){t.StatusBar="StatusBar",t.NavigationBar="NavigationBar"})(Hv||(Hv={}));class aO extends $m{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}eo("SystemBars",{web:()=>new aO});const lO={apiKey:"AIzaSyCH2Q18CquL9IGi9t6KovkSqQj3DYnXf9g",authDomain:"munirathnam-illam.firebaseapp.com",projectId:"munirathnam-illam",storageBucket:"munirathnam-illam.firebasestorage.app",messagingSenderId:"852272424128",appId:"1:852272424128:web:e5400d3d2f512d7e477925"},cu=$1(lO),jn=on.isNativePlatform()?dE(cu,{persistence:IE}):aA(cu),Ye=uI(cu);GD(cu);const AI=new En,cO="modulepreload",uO=function(t){return"/"+t},qv={},Ei=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=uO(c),c in qv)return;qv[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":cO,u||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),u)return new Promise((m,I)=>{p.addEventListener("load",m),p.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};var Kv;(function(t){t.IndexedDbLocal="INDEXED_DB_LOCAL",t.InMemory="IN_MEMORY",t.BrowserLocal="BROWSER_LOCAL",t.BrowserSession="BROWSER_SESSION"})(Kv||(Kv={}));var Gv;(function(t){t.APPLE="apple.com",t.FACEBOOK="facebook.com",t.GAME_CENTER="gc.apple.com",t.GITHUB="github.com",t.GOOGLE="google.com",t.MICROSOFT="microsoft.com",t.PLAY_GAMES="playgames.google.com",t.TWITTER="twitter.com",t.YAHOO="yahoo.com",t.PASSWORD="password",t.PHONE="phone"})(Gv||(Gv={}));const Qv=eo("FirebaseAuthentication",{web:()=>Ei(()=>import("./web-XQqVqMT2.js"),[]).then(t=>new t.FirebaseAuthenticationWeb)}),dO=eo("App",{web:()=>Ei(()=>import("./web-C_loBsld.js"),[]).then(t=>new t.AppWeb)});var Yv;(function(t){t[t.NONE=0]="NONE",t[t.TOUCH_ID=1]="TOUCH_ID",t[t.FACE_ID=2]="FACE_ID",t[t.FINGERPRINT=3]="FINGERPRINT",t[t.FACE_AUTHENTICATION=4]="FACE_AUTHENTICATION",t[t.IRIS_AUTHENTICATION=5]="IRIS_AUTHENTICATION",t[t.MULTIPLE=6]="MULTIPLE"})(Yv||(Yv={}));var Jv;(function(t){t[t.NONE=0]="NONE",t[t.STRONG=1]="STRONG",t[t.WEAK=2]="WEAK"})(Jv||(Jv={}));var Xv;(function(t){t[t.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",t[t.BIOMETRICS_UNAVAILABLE=1]="BIOMETRICS_UNAVAILABLE",t[t.USER_LOCKOUT=2]="USER_LOCKOUT",t[t.BIOMETRICS_NOT_ENROLLED=3]="BIOMETRICS_NOT_ENROLLED",t[t.USER_TEMPORARY_LOCKOUT=4]="USER_TEMPORARY_LOCKOUT",t[t.AUTHENTICATION_FAILED=10]="AUTHENTICATION_FAILED",t[t.APP_CANCEL=11]="APP_CANCEL",t[t.INVALID_CONTEXT=12]="INVALID_CONTEXT",t[t.NOT_INTERACTIVE=13]="NOT_INTERACTIVE",t[t.PASSCODE_NOT_SET=14]="PASSCODE_NOT_SET",t[t.SYSTEM_CANCEL=15]="SYSTEM_CANCEL",t[t.USER_CANCEL=16]="USER_CANCEL",t[t.USER_FALLBACK=17]="USER_FALLBACK"})(Xv||(Xv={}));const PI=eo("NativeBiometric",{web:()=>Ei(()=>import("./web-1QzvQtUv.js"),[]).then(t=>new t.NativeBiometricWeb)}),DI=V.createContext();function al(){return V.useContext(DI)}function hO({children:t}){const[e,n]=V.useState(null),[r,s]=V.useState(!0),[i,o]=V.useState(on.isNativePlatform()),l=V.useRef(!1),c=()=>o(!0),u=async()=>{if(!on.isNativePlatform()){o(!1);return}try{l.current=!0;const I=await PI.verifyIdentity({reason:"Unlock Rent Manager",title:"Authentication Required",subtitle:"Confirm your identity",description:"Use Face ID to access the app"});o(!1)}catch(I){console.error("Biometric Unlock Failed:",I)}finally{setTimeout(()=>{l.current=!1},500)}};async function f(){if(on.isNativePlatform())try{const I=await Qv.signInWithGoogle(),b=En.credential(I.credential.idToken);return await Uu(jn,b)}catch(I){throw console.error("Native Google Sign-In Error:",I),I}else return PE(jn,AI)}function p(){return on.isNativePlatform()?Qv.signOut().then(()=>kf(jn)):kf(jn)}V.useEffect(()=>{const I=wE(jn,S=>{n(S),s(!1),S||o(!1)});let b;on.isNativePlatform()&&(b=dO.addListener("appStateChange",({isActive:S})=>{if(!S&&jn.currentUser){if(l.current)return;console.log("App backgrounded. Locking..."),o(!0)}}));const C=setTimeout(()=>{s(S=>S&&!1)},5e3);return()=>{I(),b&&b.remove(),clearTimeout(C)}},[]);const m={currentUser:e,loginWithGoogle:f,logout:p,loading:r,isAppLocked:i,lockApp:c,unlockWithBiometrics:u};return d.jsx(DI.Provider,{value:m,children:!r&&t})}const Xe={"01":{roomNo:"01",roomId:"G01",keyNo:"124",ebServNo:"19781",ebAcNo:"5097784"},"02":{roomNo:"02",roomId:"G02",keyNo:"153",ebServNo:"19778",ebAcNo:"5097781"},"04":{roomNo:"04",roomId:"102",keyNo:"76",ebServNo:"19780",ebAcNo:"5097783"},"05":{roomNo:"05",roomId:"201",keyNo:"151",ebServNo:"19779",ebAcNo:"5097782"},"06":{roomNo:"06",roomId:"202",keyNo:"185",ebServNo:"19782",ebAcNo:"5097785"},"07":{roomNo:"07",roomId:"203",keyNo:"101",ebServNo:"19783",ebAcNo:"5097786"},"08":{roomNo:"08",roomId:"301",keyNo:"403",ebServNo:"19784",ebAcNo:"5097787"},"09":{roomNo:"09",roomId:"302",keyNo:"249",ebServNo:"19785",ebAcNo:"5097788"},10:{roomNo:"10",roomId:"303",keyNo:"123",ebServNo:"19789",ebAcNo:"5097792"},11:{roomNo:"11",roomId:"401",keyNo:"35",ebServNo:"19788",ebAcNo:"5097791"},12:{roomNo:"12",roomId:"402",keyNo:"144",ebServNo:"19787",ebAcNo:"5097790"},13:{roomNo:"13",roomId:"403",keyNo:"120",ebServNo:"19786",ebAcNo:"5097789"}},fO=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ma=.25,pO=.2,mO=["11","12","13"],aa=10,Bm=60,sn=fO;function Cn(t,e){return`${t}-${sn[e]}`}function Fi(t,e){return`${sn[e]} ${t}`}function uu(t,e,n=new Date){const r=n.getFullYear(),s=n.getMonth();return t>r||t===r&&e>s}function ft(t,e){return!t||!e?null:(Array.isArray(t)?t:Object.values(t)).find(r=>String(r.roomId||"").trim()===String(e||"").trim()||String(r.roomNo||"").trim()===String(e||"").trim())||null}function Fa(t){return t?String(t.status||"").trim()==="Occupied":!1}function dd(t,e,n){if(!t||!t.isEvictionConfirmed||!t.evictionNoticeDate)return!1;const r=new Date(t.evictionNoticeDate),s=new Date(e,n,1),i=new Date(r.getFullYear(),r.getMonth(),1);return s>=i}function du(t,e,n){if(!t||dd(t,e,n))return 0;let r=Number(t.rent)||0;if(t.lastRevision){const s=new Date(t.lastRevision),i=new Date(e,n,1),o=new Date(s.getFullYear(),s.getMonth(),1);i<o&&(r=Number(t.lastRent)||r)}return r}function gO(t,e,n,r){const s=Cn(n,r);let i=0;return Object.keys(Xe).forEach(o=>{const l=Xe[o],c=ft(t,l.roomId);if(!c||dd(c,n,r))return;const f=(c.paymentHistory||{})[s]||null,p=c.archivedTenant||null,m=(p==null?void 0:p.paymentHistory)||{},I=(m==null?void 0:m[s])||null,b=(!f||f==="None")&&I;if((b?I:f)!=="Paid")return;const _=du(b?p:c,n,r);i+=_}),i}function yO(t,e,n,r){const s=Cn(n,r);let i=0;return Object.keys(Xe).forEach(o=>{const l=Xe[o],c=ft(t,l.roomId);if(!c||dd(c,n,r))return;const f=(c.paymentHistory||{})[s]||null,p=c.archivedTenant||null,m=(p==null?void 0:p.paymentHistory)||{},I=(m==null?void 0:m[s])||null,b=(!f||f==="None")&&I;if((b?I:f)!=="Pending")return;i+=du(b?p:c,n,r)}),i}function vO(t,e,n,r){const s=Cn(n,r);let i={rent:0,water:0,total:0,pending:0};return Object.keys(Xe).forEach(o=>{const l=Xe[o],c=ft(t,l.roomId);if(!c||dd(c,n,r))return;const u=c.paymentHistory||{};c.paymentTotals;const f=u[s]||null,p=c.archivedTenant||null,m=(p==null?void 0:p.paymentHistory)||{};p!=null&&p.paymentTotals;const I=(m==null?void 0:m[s])||null,b=(!f||f==="None")&&I,C=b?I:f,S=b?p:c;if(C==="Pending"){i.pending+=du(S,n,r);return}if(C!=="Paid")return;const _=du(S,n,r),v=b?(p==null?void 0:p.waterRate)||Ma:(c==null?void 0:c.waterRate)||Ma,L=(hd(S,n,r,v).amount||0)+Bm;i.rent+=_,i.water+=L,i.total+=_+L}),i}function _O(t,e,n){const r=Cn(e,n);return!t||!Array.isArray(t)?0:t.filter(s=>String((s==null?void 0:s.monthKey)||"")===String(r)).reduce((s,i)=>s+(Number(i==null?void 0:i.amount)||0),0)}function hu(t){const e=String(t||"").trim();return mO.includes(e)?pO:Ma}function la(t,e){return`${t}-${sn[e]}`}function xi(t,e){return e>0?{year:t,monthIndex:e-1}:{year:t-1,monthIndex:11}}function hd(t,e,n,r){const s=(t==null?void 0:t.waterReadings)||{},i=(t==null?void 0:t.waterMeterReset)||{},o=la(e,n),l=xi(e,n),c=la(l.year,l.monthIndex),u=s==null?void 0:s[o],f=s==null?void 0:s[c],p=u!=null&&u!=="",m=f!=null&&f!=="",I=p?Number(u):NaN,b=m?Number(f):NaN;if(!!(i!=null&&i[o])){if(!Number.isFinite(I))return{currentReading:null,units:null,amount:null,meterReset:!0};const w=I*aa,A=Number.isFinite(r)?r:Ma,L=Math.round(w*A);return{currentReading:I,units:w,amount:L,meterReset:!0}}if(!Number.isFinite(I)||!Number.isFinite(b))return{currentReading:Number.isFinite(I)?I:null,units:null,amount:null,meterReset:!1};const S=(I-b)*aa,_=Number.isFinite(r)?r:Ma,v=Math.round(S*_);return{currentReading:I,units:S,amount:v,meterReset:!1}}const wO=15;function OI(t,e=new Date){if(!t)return{isDue:!1};const n=!!(t!=null&&t.noRevision),r=!!(t!=null&&t.isEvictionConfirmed);if(n||r)return{isDue:!1,reason:r?"Eviction in progress":"Disabled"};const s=t==null?void 0:t.lastRevision,i=t==null?void 0:t.joinDate,o=S=>S?new Date(S):null,l=o(s),c=o(i),u=l||c;if(!u)return{isDue:!1,reason:"No date available"};const f=new Date(u);f.setFullYear(f.getFullYear()+1);const p=new Date(e.getFullYear(),e.getMonth(),e.getDate()),I=new Date(f.getFullYear(),f.getMonth(),f.getDate())-p,b=Math.ceil(I/(1e3*60*60*24));return{isDue:b<=wO,daysRemaining:b,nextDue:f,baseDate:u,isOverdue:b<0}}const LI=V.createContext();function to(){return V.useContext(LI)}function EO({children:t}){const[e,n]=V.useState([]),[r,s]=V.useState([]),[i,o]=V.useState(!0),[l,c]=V.useState(Xe);V.useEffect(()=>{const S=ia(_s(Ye,"properties")),_=yc(S,D=>{const x={};D.forEach(y=>{x[y.id]={id:y.id,...y.data()}}),n(x)},D=>{console.error("Error fetching tenants:",D)}),v=ia(_s(Ye,"expenses"),TI("date","desc")),w=yc(v,D=>{const x=[];D.forEach(y=>{x.push({id:y.id,...y.data()})}),s(x)},D=>{console.error("Error fetching expenses:",D)}),A=ia(_s(Ye,"rooms")),L=yc(A,D=>{if(D.empty)console.warn("Rooms collection empty. Using hardcoded fallback."),c(Xe);else{const x={...Xe};D.forEach(R=>{x[R.id]?x[R.id]={...x[R.id],...R.data()}:x[R.id]=R.data()});const y=Object.keys(x).sort(),T={};y.forEach(R=>T[R]=x[R]),c(T)}o(!1)},D=>{console.error("Error fetching rooms:",D),c(Xe),o(!1)});return()=>{_(),w(),L()}},[]);const u=async(S,_,v,w,A,L)=>{let D="Pending";v==="Pending"?D="Rent Only":v==="Rent Only"?D="Paid":v==="Paid"&&(D="None");const x={};if(D==="Paid"){const y=Number(w==null?void 0:w.rent)||0,T=(w==null?void 0:w.waterRate)!==null&&(w==null?void 0:w.waterRate)!==void 0&&String(w==null?void 0:w.waterRate).trim()!==""?Number(w==null?void 0:w.waterRate):hu(w==null?void 0:w.roomNo),R=hd(w,A,L,T);if(!Number.isFinite(R==null?void 0:R.amount))throw new Error("Please enter water readings for this month AND previous month (Water Bill screen) before marking Paid.");if(Number(R==null?void 0:R.units)<0)throw new Error("Water units cannot be negative. Please check readings.");const k=Math.round((y+Number(R.amount)+Bm)*100)/100;x[`paymentHistory.${_}`]="Paid",x[`paymentTotals.${_}`]=k}else D==="None"?(x[`paymentHistory.${_}`]=null,x[`paymentTotals.${_}`]=null):(x[`paymentHistory.${_}`]=D,x[`paymentTotals.${_}`]=null);if(!(w!=null&&w.id))throw new Error("Tenant ID missing");await Vi(Xn(Ye,"properties",w.id),x)},f=async S=>{const{addDoc:_,collection:v}=await Ei(async()=>{const{addDoc:w,collection:A}=await Promise.resolve().then(()=>_h);return{addDoc:w,collection:A}},void 0);await _(v(Ye,"expenses"),S)},p=async S=>{const{deleteDoc:_,doc:v}=await Ei(async()=>{const{deleteDoc:w,doc:A}=await Promise.resolve().then(()=>_h);return{deleteDoc:w,doc:A}},void 0);await _(v(Ye,"expenses",S))},m=async(S,_)=>{await Vi(Xn(Ye,"properties",S),_)},[I,b]=V.useState(new Date().getFullYear()),C={tenants:e,expenses:r,rooms:l,loading:i,globalYear:I,setGlobalYear:b,updateRentStatus:u,addExpense:f,deleteExpense:p,updateTenant:m,createTenant:async S=>{const{addDoc:_,collection:v}=await Ei(async()=>{const{addDoc:w,collection:A}=await Promise.resolve().then(()=>_h);return{addDoc:w,collection:A}},void 0);await _(v(Ye,"properties"),S)}};return d.jsx(LI.Provider,{value:C,children:t})}/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ee=(t,e)=>{const n=V.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},f)=>V.createElement("svg",{ref:f,...xO,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${IO(t)}`,l].join(" "),...u},[...e.map(([p,m])=>V.createElement(p,m)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=ee("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=ee("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yf=ee("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=ee("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=ee("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=ee("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=ee("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wm=ee("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=ee("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e_=ee("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=ee("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=ee("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=ee("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=ee("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=ee("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=ee("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=ee("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MI=ee("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=ee("Fingerprint",[["path",{d:"M2 12C2 6.5 6.5 2 12 2a10 10 0 0 1 8 4",key:"1jc9o5"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12c0-.7.12-1.37.34-2",key:"1mxgy1"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2c0 .47 0 1.17-.02 2",key:"1fgabc"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=ee("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=ee("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=ee("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=ee("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=ee("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=ee("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=ee("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=ee("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=ee("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xh=ee("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=ee("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=ee("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=ee("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=ee("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jf=ee("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=ee("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xf=ee("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=ee("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=ee("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=ee("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=ee("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=ee("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),$I=V.createContext();function ll(){return V.useContext($I)}function $O({children:t}){const[e,n]=V.useState([]),[r,s]=V.useState({isOpen:!1,title:"",message:"",confirmText:"Confirm",cancelText:"Cancel",type:"confirm",resolve:null}),i=V.useCallback((f,p="info")=>{const m=Date.now();n(I=>[...I,{id:m,message:f,type:p}]),setTimeout(()=>{n(I=>I.filter(b=>b.id!==m))},3e3)},[]),o=f=>{n(p=>p.filter(m=>m.id!==f))},l=V.useCallback(({title:f,message:p,confirmText:m="Confirm",cancelText:I="Cancel",type:b="confirm"})=>new Promise(C=>{s({isOpen:!0,title:f,message:p,confirmText:m,cancelText:I,type:b,resolve:C})}),[]),c=()=>{r.resolve&&r.resolve(!0),s(f=>({...f,isOpen:!1}))},u=()=>{r.resolve&&r.resolve(!1),s(f=>({...f,isOpen:!1}))};return d.jsxs($I.Provider,{value:{showToast:i,confirm:l},children:[t,d.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-[100] flex flex-col items-center gap-2 pointer-events-none",children:e.map(f=>d.jsxs("div",{className:`pointer-events-auto flex items-center gap-3 px-6 py-3 rounded-2xl shadow-xl border animate-in slide-in-from-bottom-5 fade-in duration-300 min-w-[300px] justify-between ${f.type==="error"?"bg-rose-50 border-rose-100 text-rose-700":f.type==="success"?"bg-emerald-50 border-emerald-100 text-emerald-700":f.type==="warning"?"bg-amber-50 border-amber-100 text-amber-700":"bg-slate-50 border-slate-200 text-slate-700"}`,children:[d.jsxs("div",{className:"flex items-center gap-3",children:[f.type==="error"&&d.jsx(Ii,{size:20}),f.type==="success"&&d.jsx(NO,{size:20}),f.type==="warning"&&d.jsx(Ii,{size:20}),f.type==="info"&&d.jsx(OO,{size:20}),d.jsx("span",{className:"font-bold text-sm",children:f.message})]}),d.jsx("button",{onClick:()=>o(f.id),className:"opacity-50 hover:opacity-100",children:d.jsx(pu,{size:16})})]},f.id))}),r.isOpen&&d.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:d.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-[400px] overflow-hidden animate-in zoom-in-95 duration-200",children:[d.jsxs("div",{className:"p-8 text-center space-y-4",children:[d.jsx("div",{className:`mx-auto size-16 rounded-full flex items-center justify-center mb-2 ${r.type==="danger"?"bg-rose-100 text-rose-600":"bg-blue-100 text-blue-600"}`,children:r.type==="danger"?d.jsx(Ii,{size:32}):d.jsx(PO,{size:32})}),d.jsx("h3",{className:"text-xl font-extrabold text-slate-900 leading-tight",children:r.title}),d.jsx("p",{className:"text-slate-500 font-medium",children:r.message})]}),d.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-100 flex gap-3",children:[d.jsx("button",{onClick:u,className:"flex-1 py-3 px-4 rounded-xl font-bold text-slate-600 hover:bg-slate-200 transition-colors",children:r.cancelText}),d.jsx("button",{onClick:c,className:`flex-1 py-3 px-4 rounded-xl font-bold text-white shadow-lg transition-all hover:scale-105 active:scale-95 ${r.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-200":"bg-blue-600 hover:bg-blue-700 shadow-blue-200"}`,children:r.confirmText})]})]})})]})}function Bs({children:t}){const{currentUser:e,logout:n}=al(),r=Hi(),s=o=>r.pathname===o,i=({to:o,icon:l,label:c,mobile:u=!1})=>d.jsxs(A1,{to:o,className:`flex items-center gap-3 px-4 py-3 rounded-2xl transition-all ${s(o)?"bg-emerald-100 text-emerald-900 font-bold shadow-sm ring-1 ring-emerald-200":"text-slate-500 hover:text-slate-900 hover:bg-slate-50"} ${u?"flex-col text-[10px] gap-1 px-1 py-1 rounded-none bg-transparent hover:bg-transparent ring-0 shadow-none":"text-sm"}`,children:[d.jsx("div",{className:`p-2 rounded-xl transition-colors ${s(o)&&!u?"bg-emerald-200/50 text-emerald-800":"bg-transparent"}`,children:d.jsx(l,{size:u?20:18})}),d.jsx("span",{children:c})]});return d.jsxs("div",{className:"min-h-screen bg-white md:bg-stone-50/30 flex flex-col md:flex-row",children:[d.jsxs("aside",{className:"hidden md:flex flex-col w-64 shrink-0 h-screen sticky top-0 bg-white border-r border-stone-100 p-6 z-40",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-10 px-2",children:[d.jsx("span",{className:"inline-flex size-10 items-center justify-center rounded-2xl bg-emerald-100/70 border border-emerald-200/60 text-emerald-800 shadow-sm",children:d.jsx(Yf,{size:20})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-lg font-extrabold tracking-tight text-slate-900 leading-tight",children:"Munirathnam"}),d.jsx("p",{className:"text-xs font-bold text-emerald-600 tracking-wide uppercase",children:"Illam Manager"})]})]}),d.jsxs("nav",{className:"space-y-2 flex-1",children:[d.jsx("div",{className:"px-4 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Menu"}),d.jsx(i,{to:"/",icon:r_,label:"Dashboard"}),d.jsx(i,{to:"/rooms",icon:Ua,label:"Room Details"}),d.jsx(i,{to:"/rent",icon:i_,label:"Rent Status"}),d.jsx(i,{to:"/water",icon:n_,label:"Water Bill"}),d.jsx(i,{to:"/expenses",icon:o_,label:"Expenses"}),d.jsx("div",{className:"h-px bg-stone-100 my-2"}),d.jsx(i,{to:"/admin/migrate",icon:CO,label:"Migration"})]}),d.jsx("div",{className:"pt-6 border-t border-stone-100",children:d.jsx("div",{className:"flex items-center gap-3 px-2 py-2",children:e&&d.jsxs(d.Fragment,{children:[d.jsx("img",{src:e.photoURL,alt:"User",className:"w-9 h-9 rounded-full border border-stone-200 bg-stone-50",onError:o=>{o.target.style.display="none"}}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-sm font-bold text-slate-700 truncate",children:e.displayName}),d.jsx("p",{className:"text-[10px] font-medium text-slate-400 truncate",children:"Admin Access"})]}),d.jsx("button",{onClick:n,className:"p-2 rounded-xl text-slate-400 hover:text-rose-600 hover:bg-rose-50 transition-colors",title:"Sign Out",children:d.jsx(FI,{size:16})})]})})})]}),d.jsxs("div",{className:"flex-1 min-w-0 flex flex-col min-h-screen",children:[d.jsxs("header",{className:"md:hidden bg-white/90 backdrop-blur-md border-b border-stone-100 sticky top-0 z-30 px-4 pb-3 pt-[calc(env(safe-area-inset-top)+16px)] flex items-center justify-between transition-all",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:"inline-flex size-9 items-center justify-center rounded-xl bg-emerald-100 text-emerald-700 shadow-sm ring-1 ring-emerald-50",children:d.jsx(Yf,{size:18})}),d.jsxs("div",{children:[d.jsx("h1",{className:"font-black text-slate-900 text-base leading-tight tracking-tight",children:"Munirathnam"}),d.jsx("p",{className:"text-[10px] font-bold text-emerald-600 uppercase tracking-widest",children:"Rent Manager"})]})]}),d.jsx("div",{className:"flex items-center gap-2",children:e&&d.jsx("img",{src:e.photoURL,className:"w-8 h-8 rounded-full border border-stone-200 shadow-sm"})})]}),d.jsx("main",{className:"p-4 md:p-8 lg:p-10 max-w-7xl w-full mx-auto pb-24 md:pb-10",children:t})]}),d.jsx("div",{className:"fixed bottom-0 inset-x-0 z-50 md:hidden bg-white border-t border-stone-100 pb-safe",children:d.jsxs("div",{className:"grid grid-cols-5 gap-1 p-2",children:[d.jsx(i,{to:"/",icon:r_,label:"Dash",mobile:!0}),d.jsx(i,{to:"/rooms",icon:Ua,label:"Rooms",mobile:!0}),d.jsx(i,{to:"/rent",icon:i_,label:"Rent",mobile:!0}),d.jsx(i,{to:"/water",icon:n_,label:"Water",mobile:!0}),d.jsx(i,{to:"/expenses",icon:o_,label:"Expenses",mobile:!0})]})})]})}function BO(){const{tenants:t,expenses:e,rooms:n,loading:r,globalYear:s,setGlobalYear:i}=to(),o=s;if(r)return d.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading data..."});const l=p=>i(m=>m+p),c=[];for(let p=0;p<12;p++){const m=uu(o,p),I=vO(t,n,o,p);c.push({label:Fi(o,p),rent:m?0:I.rent,water:m?0:I.water,total:m?0:I.total,expenses:_O(e,o,p),pending:m?0:I.pending,locked:m})}const u=c.some(p=>p.pending>0),f=[];return Object.keys(Xe).forEach(p=>{const m=n[p];if(!m)return;const I=ft(t,m.roomId);if(I&&I.status==="Occupied"){const b=OI(I);b.isDue&&f.push({roomNo:m.roomNo,tenantName:I.tenant,days:b.daysRemaining,date:b.nextDue})}}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsx("h2",{className:"text-2xl sm:text-3xl font-extrabold tracking-tight text-slate-900",children:"Dashboard"}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700",children:[d.jsx("span",{className:"font-semibold",children:"Year"}),d.jsxs("div",{className:"inline-flex items-center gap-1 rounded-full bg-stone-50 border border-black/5 shadow-sm px-2 py-1.5",children:[d.jsx("button",{onClick:()=>l(-1),className:"p-1 hover:bg-stone-200 rounded-full",children:d.jsx(RO,{size:16})}),d.jsx("span",{className:"min-w-[4rem] text-center font-extrabold text-emerald-800",children:o}),d.jsx("button",{onClick:()=>l(1),className:"p-1 hover:bg-stone-200 rounded-full",children:d.jsx(e_,{size:16})})]})]})]}),(f.length>0||u)&&d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 animate-in slide-in-from-top-4",children:[f.length>0&&d.jsxs("div",{className:"bg-amber-50 rounded-3xl p-5 border border-amber-100 shadow-sm relative overflow-hidden group",children:[d.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition",children:d.jsx(t_,{size:80,className:"text-amber-600"})}),d.jsxs("div",{className:"relative z-10",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx("div",{className:"p-2 bg-amber-100 rounded-xl text-amber-700",children:d.jsx(t_,{size:20})}),d.jsx("h3",{className:"text-base font-bold text-amber-900",children:"Annual Revision Due"}),d.jsx("span",{className:"bg-amber-200 text-amber-800 text-xs font-bold px-2 py-0.5 rounded-full",children:f.length})]}),d.jsx("div",{className:"space-y-2 mt-3 max-h-32 overflow-y-auto custom-scrollbar",children:f.map((p,m)=>d.jsxs("div",{className:"flex justify-between items-center bg-white/60 p-2 rounded-lg text-sm",children:[d.jsxs("div",{children:[d.jsxs("span",{className:"font-bold text-slate-800",children:["Room ",p.roomNo]}),d.jsxs("span",{className:"text-slate-500 text-xs ml-2",children:["(",p.tenantName,")"]})]}),d.jsx("div",{className:`text-xs font-bold ${p.days<0?"text-rose-600":"text-amber-600"}`,children:p.days<0?`${Math.abs(p.days)} days overdue`:`Due in ${p.days} days`})]},m))})]})]}),u&&d.jsxs("div",{className:"bg-rose-50 rounded-3xl p-5 border border-rose-100 shadow-sm relative overflow-hidden group",children:[d.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition",children:d.jsx(Zv,{size:80,className:"text-rose-600"})}),d.jsxs("div",{className:"relative z-10",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx("div",{className:"p-2 bg-rose-100 rounded-xl text-rose-700",children:d.jsx(Zv,{size:20})}),d.jsx("h3",{className:"text-base font-bold text-rose-900",children:"Pending Payments"}),d.jsxs("span",{className:"bg-rose-200/50 text-rose-800 text-xs font-bold px-2 py-0.5 rounded-full",children:["",c.reduce((p,m)=>p+m.pending,0).toLocaleString("en-IN")]})]}),d.jsx("p",{className:"text-sm text-rose-800/80 mt-1 font-medium",children:"Action required for unpaid rents. Check the Rent Details page for breakdown."}),d.jsxs(A1,{to:"/rent",className:"inline-flex items-center gap-2 mt-3 text-xs font-bold text-rose-700 hover:text-rose-900 transition",children:["View details ",d.jsx(e_,{size:14})]})]})]})]}),d.jsxs("div",{className:"bg-stone-50 rounded-3xl shadow-sm border border-black/5 overflow-hidden",children:[d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-sm text-left",children:[d.jsx("thead",{className:"bg-emerald-100/60 text-slate-700",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-5 py-4 font-semibold",children:"Month"}),d.jsx("th",{className:"px-5 py-4 text-right font-semibold",children:"Rent Collected"}),d.jsx("th",{className:"px-5 py-4 text-right font-semibold",children:"Expenses"}),d.jsx("th",{className:"px-5 py-4 text-right font-semibold",children:"Water Charges"}),d.jsx("th",{className:"px-5 py-4 text-right font-semibold",children:"Pending Rent"})]})}),d.jsx("tbody",{className:"divide-y divide-slate-100",children:c.map((p,m)=>d.jsxs("tr",{className:p.locked?"bg-stone-100/50 text-slate-400":"hover:bg-emerald-50/30 transition",children:[d.jsx("td",{className:"px-5 py-4 font-bold text-slate-800",children:p.label}),d.jsx("td",{className:"px-5 py-4 text-right font-medium text-emerald-700",children:p.locked?"0":`${p.rent.toLocaleString("en-IN")}`}),d.jsx("td",{className:"px-5 py-4 text-right font-medium text-rose-700",children:`${p.expenses.toLocaleString("en-IN")}`}),d.jsx("td",{className:"px-5 py-4 text-right font-medium text-blue-600",children:p.locked?"0":`${p.water.toLocaleString("en-IN")}`}),d.jsx("td",{className:"px-5 py-4 text-right font-medium text-amber-800",children:p.locked?"0":`${p.pending.toLocaleString("en-IN")}`})]},m))})]})}),d.jsx("div",{className:"p-4 bg-emerald-50/50 text-[10px] text-slate-500 text-center border-t border-emerald-100",children:"Rent Collected includes only months marked Paid. Water Charges are computed from meter readings."})]})]})}function Ih({roomNo:t,roomData:e,tenantData:n,rentStatus:r,onClick:s,isPlaceholder:i=!1}){if(i||!e)return d.jsx("div",{className:"h-[200px] rounded-t-xl mx-2 border-b-0 border-2 border-dashed border-slate-200 bg-slate-50/30 flex items-center justify-center",children:d.jsx("span",{className:"text-slate-200 font-bold text-xs uppercase tracking-widest",children:"Empty"})});const o=(n==null?void 0:n.status)==="Occupied",l=!!(n!=null&&n.evictionConfirmed),c=o?(n==null?void 0:n.tenant)||"Unknown":"Vacant",f=OI(n).isDue,p=o?l?"bg-rose-50 border-rose-200":"bg-white border-slate-200":"bg-slate-100 border-slate-200",m=o?l?"border-rose-900 bg-rose-900":"border-slate-800 bg-slate-800":"border-slate-400 bg-slate-400",I=o?"bg-amber-400 shadow-sm":"bg-slate-300",b=()=>{if(!o||!r||r==="None")return null;const C=r==="Adjusted"?"Adjusted":r,S={Paid:"bg-emerald-500 text-white border-emerald-600",Pending:"bg-rose-500 text-white border-rose-600 animate-pulse","Rent Only":"bg-purple-500 text-white border-purple-600",Adjusted:"bg-blue-500 text-white border-blue-600"},_={Paid:"PAID",Pending:"DUE","Rent Only":"PARTIAL",Adjusted:"ADJ (SD)"},v=S[C]||"bg-slate-500 text-white",w=_[C]||C;return d.jsx("div",{className:`mt-2 px-1.5 py-0.5 text-[8px] font-bold rounded shadow-sm border ${v} tracking-wider`,children:w})};return d.jsxs("div",{onClick:s,className:"group relative flex flex-col items-center justify-end h-[220px] cursor-pointer",title:`Room ${t}`,children:[d.jsx("div",{className:`relative w-full h-full rounded-t-2xl border-x-8 border-t-8 ${m} shadow-xl overflow-hidden transition-transform transform group-hover:-translate-y-1`,children:d.jsxs("div",{className:`absolute inset-0 top-0.5 mx-0.5 mb-0 rounded-t-xl ${p} border-x border-t shadow-inner flex flex-col items-center pt-6`,children:[d.jsx("div",{className:"bg-gradient-to-br from-amber-100 to-amber-200 border border-amber-300 px-3 py-1 rounded shadow text-amber-900 font-bold text-lg font-mono",children:t}),o&&d.jsx("div",{className:"text-[9px] text-slate-400 mt-1 font-mono",children:e.roomId}),d.jsx("div",{className:"mt-2",children:l?d.jsx("div",{className:"w-3 h-3 rounded-full bg-rose-500 shadow-lg shadow-rose-500/50 animate-pulse"}):o?d.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 shadow-lg shadow-emerald-500/50"}):d.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-300"})}),b(),o&&f&&d.jsx("div",{className:"absolute top-10 right-2 bg-yellow-300 text-yellow-900 text-[8px] font-bold px-1.5 py-0.5 rounded-sm shadow-sm rotate-[-12deg] border border-yellow-400 z-10",children:"REV DUE"}),d.jsx("div",{className:`absolute right-3 top-1/2 w-3 h-3 rounded-full ${I} border border-black/10`}),d.jsx("div",{className:"mt-auto mb-8 w-3/4 text-center",children:d.jsx("div",{className:`py-1 px-2 rounded border ${o?"bg-white border-slate-200 shadow-sm":"bg-transparent border-transparent"}`,children:d.jsx("div",{className:`text-xs font-bold truncate ${o?"text-slate-700":"text-slate-400 italic"}`,children:c})})})]})}),d.jsx("div",{className:"absolute -bottom-2 w-[90%] h-2 bg-black/10 rounded-full blur-sm"})]})}function WO({room:t,tenant:e,onClose:n}){if(!t)return null;const{updateTenant:r,createTenant:s}=to(),{showToast:i}=ll(),o=(e==null?void 0:e.status)||"Vacant",[l,c]=V.useState(o),u=l==="Occupied";li.useEffect(()=>{c((e==null?void 0:e.status)||"Vacant")},[e]),li.useEffect(()=>{const Q=ae=>{ae.key==="Escape"&&n()};return window.addEventListener("keydown",Q),()=>window.removeEventListener("keydown",Q)},[n]);const[f,p]=V.useState("tenant"),[m,I]=V.useState(!1),[b,C]=V.useState({}),S=Q=>{const ae=Q.target.value;c(ae),ae==="Occupied"&&!e&&(I(!0),C({tenant:"",phone:"",email:"",rent:"",waterRate:"0.25",advance:"",lastRevision:"",joinDate:new Date().toISOString().split("T")[0],status:"Occupied",roomNo:t.roomNo,roomId:t.roomId}),p("tenant"))},_=()=>{C({tenant:(e==null?void 0:e.tenant)??"",phone:(e==null?void 0:e.phone)??"",email:(e==null?void 0:e.email)??"",rent:(e==null?void 0:e.rent)??"",waterRate:(e==null?void 0:e.waterRate)??"0.25",advance:(e==null?void 0:e.advance)??"",lastRevision:(e==null?void 0:e.lastRevision)??"",joinDate:(e==null?void 0:e.joinDate)??""}),I(!0),p("tenant")},[v,w]=V.useState(!1),A=async()=>{w(!0);try{const Q={...b,status:l,isEvictionConfirmed:L,noRevision:x,evictionNoticeDate:L?T:null,evictionDate:L?k:null};if(e!=null&&e.rent&&String(e.rent)!==String(Q.rent)&&(Q.lastRent=e.rent),(Q.waterRate===void 0||Q.waterRate==="")&&(Q.waterRate="0.25"),e!=null&&e.id)await r(e.id,Q),i("Tenant details updated successfully","success");else{if(!t.roomId)throw new Error("Room ID missing");await s({...Q,status:"Occupied",roomId:t.roomId,roomNo:t.roomNo}),i("New tenant created successfully","success")}I(!1),e!=null&&e.id||n()}catch(Q){console.error("Failed to update/create tenant:",Q),i("Failed to save: "+Q.message,"error")}finally{w(!1)}},[L,D]=V.useState(!1),[x,y]=V.useState(!1);li.useEffect(()=>{e?(D(!!e.isEvictionConfirmed),y(!!e.noRevision),R(e.evictionNoticeDate||""),P(e.evictionDate||"")):(D(!1),y(!1),R(""),P(""))},[e]);const[T,R]=V.useState(""),[k,P]=V.useState(""),N=V.useMemo(()=>{if(!u||!T||!k)return null;const Q=new Date(T),ae=new Date(k),z=Number(e.rent||0),K=Number(e.advance||0),Y=[];let le=new Date(Q.getFullYear(),Q.getMonth(),1);const ge=new Date(ae.getFullYear(),ae.getMonth(),1);for(;le<=ge;)Y.push({year:le.getFullYear(),monthIndex:le.getMonth(),label:Fi(le.getFullYear(),le.getMonth())}),le.setMonth(le.getMonth()+1);const It=Y.length,qe=It*z,pn=z,Ot=hu(t.roomNo);let Zt=0;const sr=60;let cl=It*sr;const ul=Y.map(ir=>{const ro=hd(e,ir.year,ir.monthIndex,Ot),rs=ro.amount||0;Zt+=rs;let ss="";return ro.units!==null?ss=`${ro.units} units + ${sr}`:ss=`Water data missing + ${sr}`,{...ir,rent:z,waterCost:rs,totalWater:rs+sr,notes:ss}}),dl=Zt+cl,no=qe+pn+dl-K;return{monthsCount:It,rentDeduction:qe,mandatoryRent:pn,waterAndServiceTotal:dl,deposit:K,balance:no,monthDetails:ul,isWaterComplete:ul.every(ir=>!ir.notes.includes("missing"))}},[u,T,k,e,t.roomNo]),he=Q=>{p(ae=>ae===Q?null:Q)},pe=(Q,ae)=>{if(Q==="phone"){const z=ae.replace(/\D/g,"");if(z.length>10)return;C(K=>({...K,[Q]:z}));return}C(z=>({...z,[Q]:ae}))};return d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-in fade-in duration-200",children:d.jsxs("div",{className:"bg-stone-50 rounded-[2rem] shadow-2xl w-full max-w-lg h-[90vh] md:h-auto md:max-h-[90vh] overflow-y-auto flex flex-col",children:[d.jsxs("div",{className:"flex justify-between items-start p-6 pb-2 bg-stone-50 sticky top-0 z-10",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[d.jsxs("h3",{className:"text-2xl font-extrabold text-slate-900",children:["Room ",t.roomNo]}),u&&d.jsx("span",{className:"bg-emerald-100 text-emerald-700 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase tracking-wide border border-emerald-200/50",children:"Occupied"})]}),d.jsxs("p",{className:"text-xs font-bold text-slate-400",children:["ID: ",t.roomId]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[u&&!m&&d.jsx("button",{onClick:_,className:"p-2 bg-white rounded-full hover:bg-stone-200 transition text-slate-400 border border-stone-100 shadow-sm",title:"Edit Tenant Details",children:d.jsx(VO,{size:18})}),m&&d.jsxs("button",{onClick:A,disabled:v,className:"px-4 py-2 bg-emerald-600 text-white rounded-xl hover:bg-emerald-700 transition shadow-sm flex items-center gap-2 text-xs font-bold disabled:opacity-50",children:[d.jsx(Jf,{size:16})," ",v?"Saving...":"Save"]}),d.jsx("button",{onClick:()=>{I(!1),n()},className:"p-2 bg-white rounded-full hover:bg-stone-200 transition text-slate-400 border border-stone-100 shadow-sm",children:d.jsx(pu,{size:20})})]})]}),d.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto custom-scrollbar",children:[d.jsxs("div",{className:"bg-white p-4 rounded-3xl border border-stone-200 shadow-sm",children:[d.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-2 block ml-1",children:"Room Status"}),d.jsxs("div",{className:"relative",children:[d.jsxs("select",{className:"w-full appearance-none bg-stone-50 border border-stone-200 text-slate-700 text-sm font-bold rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-emerald-500/20",value:l,onChange:S,children:[d.jsx("option",{value:"Occupied",children:"Occupied - Tenant Present"}),d.jsx("option",{value:"Vacant",children:"Vacant - Ready for Tenant"}),d.jsx("option",{value:"Maintenance",children:"Maintenance - Not Available"})]}),d.jsx(Wm,{className:"absolute right-4 top-3.5 text-slate-400 pointer-events-none",size:16})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx(Th,{id:"tenant",title:"Tenant Information",icon:zI,badge:u?"Occupied":null,expandedSection:f,onToggle:he,children:u?d.jsxs("div",{className:"grid grid-cols-2 gap-y-5 gap-x-4",children:[d.jsx(Tt,{label:"Tenant Name",value:e.tenant,fieldKey:"tenant",isEditing:m,editForm:b,onChange:pe}),d.jsx(Tt,{label:"Phone",value:e.phone,fieldKey:"phone",type:"tel",isEditing:m,editForm:b,onChange:pe,maxLength:10}),d.jsx(Tt,{label:"Email",value:e.email,fieldKey:"email",type:"email",isEditing:m,editForm:b,onChange:pe}),d.jsx(Tt,{label:"Move-in Date",value:e.joinDate,fieldKey:"joinDate",type:"date",isEditing:m,editForm:b,onChange:pe}),d.jsx(Tt,{label:"Room ID",value:t.roomId})]}):d.jsx("div",{className:"text-center py-4 text-slate-400 text-sm",children:"No tenant assigned."})}),d.jsx(Th,{id:"financial",title:"Financial Details",icon:kO,badge:(()=>{var Y;if(!u)return null;if(L)return"Adjusted in SD";const Q=new Date,ae=xi(Q.getFullYear(),Q.getMonth()),z=Cn(ae.year,ae.monthIndex);return((Y=e==null?void 0:e.paymentHistory)==null?void 0:Y[z])==="Paid"?"Paid":"Pending"})(),expandedSection:f,onToggle:he,children:u?d.jsxs("div",{className:"grid grid-cols-2 gap-y-5 gap-x-4",children:[d.jsx(Tt,{label:"Monthly Rent",value:`${Number(e.rent||0).toLocaleString("en-IN")}`,fieldKey:"rent",type:"number",isEditing:m,editForm:b,onChange:pe}),d.jsx(Tt,{label:"Water Rate (/Unit)",value:e.waterRate||"0.25",fieldKey:"waterRate",type:"number",step:"0.01",isEditing:m,editForm:b,onChange:pe}),d.jsx(Tt,{label:`Payment Status (${(()=>{const Q=new Date,ae=xi(Q.getFullYear(),Q.getMonth());return Fi(ae.year,ae.monthIndex)})()})`,value:(()=>{var Y;if(L)return"Adjusted in SD";if(!e)return"Pending";const Q=new Date,ae=xi(Q.getFullYear(),Q.getMonth()),z=Cn(ae.year,ae.monthIndex);return((Y=e.paymentHistory)==null?void 0:Y[z])==="Paid"?"Paid":"Pending"})()}),d.jsx(Tt,{label:"Advance Amount",value:`${Number(e.advance||0).toLocaleString("en-IN")}`,fieldKey:"advance",type:"number",isEditing:m,editForm:b,onChange:pe}),d.jsx(Tt,{label:"Advance Balance",value:`${Number(e.advance||0).toLocaleString("en-IN")}`}),d.jsx(Tt,{label:"Last Rent Revision",value:e.lastRevision||"N/A",fieldKey:"lastRevision",type:"date",isEditing:m,editForm:b,onChange:pe}),e.lastRent&&d.jsx(Tt,{label:"Last Recorded Rent",value:`${Number(e.lastRent).toLocaleString("en-IN")}`})]}):d.jsx("div",{className:"text-center py-4 text-slate-400 text-sm",children:"No financial data."})}),d.jsx(qO,{tenant:e,updateTenant:r,showToast:i}),d.jsx(Th,{id:"room",title:"Room Details",icon:Ua,badge:null,expandedSection:f,onToggle:he,children:d.jsxs("div",{className:"grid grid-cols-1 gap-y-4",children:[d.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:L?d.jsx("span",{className:"px-2 py-1 rounded-md bg-rose-50 text-rose-600 text-[10px] font-bold uppercase border border-rose-100",children:"Eviction: Pending"}):d.jsx("span",{className:"px-2 py-1 rounded-md bg-emerald-100 text-emerald-800 text-[10px] font-bold uppercase",children:"Paid"})}),d.jsx(Tt,{label:"Room Number",value:t.roomNo}),d.jsx(Tt,{label:"EB Service No",value:t.ebServNo})]})})]}),d.jsxs("div",{className:"space-y-3 pt-2",children:[d.jsx(HO,{isOccupied:u,isEvictionConfirmed:L,setIsEvictionConfirmed:D,noRevision:x,setNoRevision:y}),L&&u&&d.jsxs("div",{className:"bg-stone-50 rounded-3xl p-6 border border-stone-200 mt-4 animate-in slide-in-from-top-4",children:[d.jsxs("div",{className:"mb-8",children:[d.jsx("h4",{className:"font-bold text-slate-800 text-sm mb-4",children:"Eviction dates"}),d.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-4",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Eviction notice date"}),d.jsx("input",{type:"date",value:T,onChange:Q=>R(Q.target.value),className:"w-full bg-white border border-stone-200 rounded-xl px-3 py-2 text-sm font-bold text-slate-800 focus:outline-none focus:ring-2 focus:ring-emerald-500/20"})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Eviction date"}),d.jsx("input",{type:"date",value:k,onChange:Q=>P(Q.target.value),className:"w-full bg-white border border-stone-200 rounded-xl px-3 py-2 text-sm font-bold text-slate-800 focus:outline-none focus:ring-2 focus:ring-emerald-500/20"})]})]}),d.jsx("p",{className:"text-[10px] text-slate-400 mt-3 font-medium",children:"Step 1: Set Notice  Step 2: Set Eviction. When eviction date is reached, scheduler auto-vacates."})]}),N&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"bg-white rounded-2xl p-5 border border-stone-200 shadow-sm mb-6",children:[d.jsx("h4",{className:"font-bold text-slate-800 text-sm mb-1",children:"Eviction Settlement (from deposit)"}),d.jsx("p",{className:"text-[10px] text-slate-400 font-medium mb-4",children:"Deduct rent + water + 60 service (full months), plus mandatory 1 month rent."}),d.jsxs("div",{className:"grid grid-cols-2 gap-y-6 gap-x-4",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Months (Notice  Vacate)"}),d.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:N.monthsCount})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Mandatory 1 Month Rent"}),d.jsxs("div",{className:"text-xl font-bold text-slate-900",children:["",N.mandatoryRent.toLocaleString("en-IN")]})]}),d.jsxs("div",{children:[d.jsxs("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:["Rent Deduction (",N.monthsCount," months)"]}),d.jsxs("div",{className:"text-xl font-bold text-slate-900",children:["",N.rentDeduction.toLocaleString("en-IN")]})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Water + Service (known)"}),d.jsxs("div",{className:"text-xl font-bold text-slate-900",children:["",N.waterAndServiceTotal.toLocaleString("en-IN")]})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Security Deposit"}),d.jsxs("div",{className:"text-xl font-bold text-slate-900",children:["",N.deposit.toLocaleString("en-IN")]})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Result (known)"}),d.jsxs("div",{className:`text-xl font-extrabold ${N.balance>0?"text-rose-600":"text-emerald-600"}`,children:[N.balance>0?"Tenant owes":"Refund",": ",Math.abs(N.balance).toLocaleString("en-IN")]})]})]}),d.jsxs("div",{className:"mt-6 bg-rose-50/50 rounded-xl overflow-hidden border border-rose-100",children:[d.jsx("div",{className:"px-4 py-2 bg-rose-100/50 border-b border-rose-100",children:d.jsx("h5",{className:"text-xs font-bold text-rose-800",children:"Month-wise deduction"})}),d.jsxs("table",{className:"w-full text-xs text-left",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"text-slate-500 border-b border-rose-100/50",children:[d.jsx("th",{className:"px-4 py-2 font-bold",children:"Month"}),d.jsx("th",{className:"px-4 py-2 text-right font-bold",children:"Rent"}),d.jsx("th",{className:"px-4 py-2 text-right font-bold",children:"Water"}),d.jsx("th",{className:"px-4 py-2 font-bold",children:"Notes"})]})}),d.jsx("tbody",{className:"divide-y divide-rose-100/50",children:N.monthDetails.map((Q,ae)=>d.jsxs("tr",{className:"bg-white",children:[d.jsx("td",{className:"px-4 py-2 font-bold text-slate-800",children:Q.label}),d.jsxs("td",{className:"px-4 py-2 text-right font-medium text-slate-600",children:["",Q.rent.toLocaleString("en-IN")]}),d.jsxs("td",{className:"px-4 py-2 text-right font-medium text-slate-600",children:["",Q.waterCost.toLocaleString("en-IN")]}),d.jsx("td",{className:"px-4 py-2 text-slate-500",children:Q.notes})]},ae))})]})]})]}),d.jsx("p",{className:"text-[11px] text-slate-400 font-medium mb-4",children:N.isWaterComplete?"All required water readings are available for the selected months.":" Some water readings are missing. Please update them in Water Bill section."}),d.jsx("button",{className:"w-full py-3 bg-rose-600 hover:bg-rose-700 text-white font-bold rounded-xl shadow-sm shadow-rose-200 transition",children:"Finalize Settlement & Mark Vacant"})]})]})]}),d.jsxs("div",{className:"mt-8 flex items-center justify-end gap-3 pt-6 border-t border-stone-100",children:[d.jsx("button",{className:"px-5 py-2.5 bg-amber-500 hover:bg-amber-600 text-white text-sm font-bold rounded-xl shadow-sm shadow-amber-200 transition",children:"Mark Rent Revised"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{className:"px-5 py-2.5 bg-rose-600 hover:bg-rose-700 text-white text-sm font-bold rounded-xl shadow-sm shadow-rose-200 transition",children:"Mark Vacant"}),d.jsx("button",{onClick:A,disabled:v,className:"p-2.5 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl shadow-sm shadow-emerald-200 transition disabled:opacity-50",title:"Save Changes",children:d.jsx(Jf,{size:20})})]}),d.jsx("button",{onClick:n,className:"p-2.5 bg-stone-100 hover:bg-stone-200 text-slate-600 rounded-xl transition",children:d.jsx(pu,{size:18})})]})]})]})})}function HO({isOccupied:t,isEvictionConfirmed:e,setIsEvictionConfirmed:n,noRevision:r,setNoRevision:s}){return d.jsxs(d.Fragment,{children:[d.jsxs("label",{className:`flex items-start gap-3 p-1 cursor-pointer group ${t?"":"opacity-50 pointer-events-none"}`,children:[d.jsxs("div",{className:"relative flex items-center",children:[d.jsx("input",{type:"checkbox",checked:e,onChange:i=>n(i.target.checked),className:"peer size-5 appearance-none rounded-md border-2 border-slate-300 checked:bg-emerald-500 checked:border-emerald-500 transition cursor-pointer"}),d.jsx("svg",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-3.5 h-3.5 text-white opacity-0 peer-checked:opacity-100 pointer-events-none transition",viewBox:"0 0 14 14",fill:"none",children:d.jsx("path",{d:"M11.6666 3.5L5.24992 9.91667L2.33325 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm font-bold text-slate-700 group-hover:text-slate-900 transition flex items-center gap-2",children:"Tenant confirmed eviction"}),d.jsx("p",{className:"text-[11px] text-slate-400 font-medium leading-relaxed mt-0.5",children:"Enable eviction notice/date and deposit settlement controls."})]})]}),d.jsxs("label",{className:"flex items-start gap-3 p-1 cursor-pointer group",children:[d.jsxs("div",{className:"relative flex items-center",children:[d.jsx("input",{type:"checkbox",checked:r,onChange:i=>s(i.target.checked),className:"peer size-5 appearance-none rounded-md border-2 border-slate-300 checked:bg-emerald-500 checked:border-emerald-500 transition cursor-pointer"}),d.jsx("svg",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-3.5 h-3.5 text-white opacity-0 peer-checked:opacity-100 pointer-events-none transition",viewBox:"0 0 14 14",fill:"none",children:d.jsx("path",{d:"M11.6666 3.5L5.24992 9.91667L2.33325 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm font-bold text-slate-700 group-hover:text-slate-900 transition",children:"No annual revision"}),d.jsx("p",{className:"text-[11px] text-slate-400 font-medium leading-relaxed mt-0.5",children:"Exclude from Rent Revision Due Soon list."})]})]})]})}const Th=({id:t,title:e,icon:n,badge:r,expandedSection:s,onToggle:i,children:o})=>{const l=s===t;return d.jsxs("div",{className:`bg-white rounded-3xl border transition-all duration-200 overflow-hidden ${l?"border-emerald-500 shadow-md ring-1 ring-emerald-100":"border-stone-200"}`,children:[d.jsxs("button",{onClick:()=>i(t),className:"w-full flex items-center justify-between p-4 bg-white",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:`p-2 rounded-xl ${l?"bg-emerald-100 text-emerald-700":"bg-stone-100 text-slate-500"}`,children:d.jsx(n,{size:18})}),d.jsxs("div",{className:"text-left",children:[d.jsx("h4",{className:"font-bold text-slate-800 text-sm",children:e}),d.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Hover (or tap) to expand"})]})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[r&&d.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-0.5 rounded-md ${r==="Occupied"||r==="Paid"?"bg-emerald-100 text-emerald-700":"bg-stone-100 text-slate-500"}`,children:r}),l?d.jsx(jI,{size:16,className:"text-slate-400"}):d.jsx(Wm,{size:16,className:"text-slate-400"})]})]}),l&&d.jsxs("div",{className:"px-4 pb-5 pt-0 animate-in slide-in-from-top-2 duration-200",children:[d.jsx("div",{className:"h-px bg-stone-100 mb-4 mx-2"}),o]})]})};function qO({tenant:t,updateTenant:e,showToast:n}){const[r,s]=V.useState(!1),i=(t==null?void 0:t.documents)||{},o=async()=>{const f=crypto.randomUUID();try{await e(t.id,{uploadToken:f,uploadTokenCreatedAt:new Date().toISOString()}),n("Secure upload link generated","success")}catch{n("Failed to generate link","error")}},l=()=>{const f=`${window.location.origin}/upload/${t.uploadToken}`;navigator.clipboard.writeText(f),n("Link copied to clipboard","success")},c=()=>{const f=`${window.location.origin}/upload/${t.uploadToken}`,p=`Document Upload Link for Room ${t.roomNo}`,m=`Hi ${t.tenant},

Please use the following secure link to upload your documents (Aadhar, ID Proof, Agreement, Photo) for Room ${t.roomNo}.

${f}

This link is valid for 24 hours.

Regards,
Munirathnam Illam`;window.open(`mailto:${t.email||""}?subject=${encodeURIComponent(p)}&body=${encodeURIComponent(m)}`)},u=async f=>{const p={...i};delete p[f];try{await e(t.id,{documents:p}),n("Document removed","success")}catch{n("Failed to remove document","error")}};return d.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 overflow-hidden",children:[d.jsxs("button",{onClick:()=>s(!r),className:"w-full flex items-center justify-between p-6 bg-slate-50/50 hover:bg-slate-50 transition",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"bg-blue-100 p-3 rounded-2xl text-blue-600",children:d.jsx(LO,{size:24})}),d.jsxs("div",{className:"text-left",children:[d.jsx("h3",{className:"font-bold text-slate-900",children:"Document Vault"}),d.jsx("p",{className:"text-xs text-slate-500",children:"Manage tenant documents"})]})]}),r?d.jsx(jI,{size:20,className:"text-slate-400"}):d.jsx(Wm,{size:20,className:"text-slate-400"})]}),r&&d.jsxs("div",{className:"p-6 border-t border-slate-100 animate-in slide-in-from-top-2",children:[d.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-4 mb-6",children:[d.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Secure Upload Link"}),t!=null&&t.uploadToken?d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("div",{className:"flex-1 bg-white border border-slate-200 rounded-lg px-3 py-2 text-sm text-slate-600 truncate font-mono",children:[window.location.origin,"/upload/",t.uploadToken]}),d.jsx("button",{onClick:l,className:"p-2 bg-slate-200 hover:bg-slate-300 text-slate-700 rounded-lg transition",title:"Copy Link",children:d.jsx(bO,{size:18})}),d.jsx("button",{onClick:c,className:"p-2 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-lg transition",title:"Share via Email",children:d.jsx(VI,{size:18})})]}):d.jsx("button",{onClick:o,className:"w-full py-2 bg-blue-600 text-white rounded-lg font-bold text-sm hover:bg-blue-700 transition",children:"Generate Link"}),d.jsx("p",{className:"text-[10px] text-slate-400 mt-2",children:"Link expires in 24 hours. Tenant needs Google Sign-in to access."})]}),d.jsxs("div",{className:"space-y-3",children:[t.familyMembers&&d.jsxs("div",{className:"bg-amber-50 border border-amber-100 rounded-xl p-4 mb-4",children:[d.jsx("h4",{className:"text-xs font-bold text-amber-800 uppercase mb-1",children:"Family Contacts"}),d.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:t.familyMembers})]}),d.jsx(Gl,{title:"Tenant Photo",docUrl:i.photo,onDelete:()=>u("photo")}),d.jsx(Gl,{title:"Aadhar Card",docUrl:i.aadhar,onDelete:()=>u("aadhar")}),d.jsx(Gl,{title:"ID Proof",docUrl:i.pan,onDelete:()=>u("pan")}),d.jsx(Gl,{title:"Rental Agreement",docUrl:i.agreement,onDelete:()=>u("agreement")})]})]})]})}function Gl({title:t,docUrl:e,onDelete:n}){return d.jsxs("div",{className:"flex items-center justify-between p-3 border border-slate-100 rounded-xl hover:bg-slate-50 transition",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:`p-2 rounded-lg ${e?"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-400"}`,children:e?d.jsx(fu,{size:16}):d.jsx(zI,{size:16})}),d.jsxs("div",{children:[d.jsx("div",{className:"font-bold text-sm text-slate-700",children:t}),d.jsx("div",{className:"text-[10px] text-slate-400",children:e?"Uploaded":"Pending"})]})]}),e&&d.jsxs("div",{className:"flex gap-2",children:[d.jsx("a",{href:e,target:"_blank",rel:"noreferrer",className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition",title:"View Document",children:d.jsx(VI,{size:16})}),d.jsx("button",{onClick:n,className:"p-2 text-rose-500 hover:bg-rose-50 rounded-lg transition",title:"Remove Document",children:d.jsx(UI,{size:16})})]})]})}const Tt=({label:t,value:e,fieldKey:n,type:r="text",step:s,isEditing:i,editForm:o,onChange:l,maxLength:c})=>d.jsxs("div",{children:[d.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1",children:t}),i&&n?d.jsx("input",{type:r,step:s,maxLength:c,value:o[n]||"",onChange:u=>l(n,u.target.value),className:"w-full bg-white border border-stone-200 rounded-lg px-3 py-2 text-sm font-bold text-slate-800 focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none"}):d.jsx("div",{className:"text-sm font-bold text-slate-800 break-words",children:e||"N/A"})]});function KO(){const{rooms:t,tenants:e,loading:n}=to(),[r,s]=li.useState(null);if(n)return d.jsx("div",{className:"p-12 text-center text-slate-400",children:"Loading rooms..."});const i=12,o=[{name:"Ground Floor",rooms:["01","02"]},{name:"1st Floor",rooms:["04"]},{name:"2nd Floor",rooms:["05","06","07"]},{name:"3rd Floor",rooms:["08","09","10"]},{name:"4th Floor",rooms:["11","12","13"]}];let l=0;o.forEach(v=>{v.rooms.forEach(w=>{const A=t[w];if(A){const L=ft(e,A.roomId);Fa(L)&&l++}})});const c=i-l,u=({label:v,mainValue:w,subValue:A,icon:L,bgClass:D,iconClass:x})=>d.jsx("div",{className:`p-6 rounded-3xl ${D} flex flex-col justify-between h-40 relative overflow-hidden`,children:d.jsxs("div",{className:"flex justify-between items-start z-10",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-semibold text-slate-600 mb-1",children:v}),d.jsx("h3",{className:"text-4xl font-extrabold text-slate-900",children:w}),A&&d.jsx("p",{className:"text-xs text-slate-500 mt-2",children:A})]}),d.jsx("div",{className:`p-2 rounded-full ${x}`,children:d.jsx(L,{size:24})})]})}),f=(v,w)=>{s({room:v,tenant:w})},p=new Date().getFullYear(),m=new Date().getMonth(),I=xi(p,m),b=Cn(I.year,I.monthIndex),C=gO(e,t,I.year,I.monthIndex),S=yO(e,t,I.year,I.monthIndex),_=[];return Object.keys(Xe).forEach(v=>{var L;const w=t[v]||Xe[v],A=ft(e,w.roomId);A&&A.status==="Occupied"&&!A.isEvictionConfirmed&&((L=A.paymentHistory)==null?void 0:L[b])==="Pending"&&_.push({roomNo:w.roomNo,amount:A.rent,tenantName:A.tenant})}),d.jsxs("div",{className:"space-y-8 pb-12",children:[d.jsx("h2",{className:"text-3xl font-extrabold text-slate-900",children:"Room Details"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[d.jsx(u,{label:"Occupied Rooms",mainValue:l,subValue:`Out of ${i}`,icon:Ua,bgClass:"bg-stone-50 border border-stone-100",iconClass:"bg-emerald-100 text-emerald-700"}),d.jsx(u,{label:"Vacant Rooms",mainValue:c,subValue:"Available",icon:Ua,bgClass:"bg-stone-50 border border-stone-100",iconClass:"bg-slate-200 text-slate-600"}),d.jsx(u,{label:"Rent Received",mainValue:`${C.toLocaleString("en-IN")}`,subValue:`Month of ${Fi(I.year,I.monthIndex)}`,icon:SO,bgClass:"bg-stone-50 border border-stone-100",iconClass:"bg-emerald-100 text-emerald-700"}),d.jsx(u,{label:"Pending Rent",mainValue:`${S.toLocaleString("en-IN")}`,subValue:`Month of ${Fi(I.year,I.monthIndex)}`,icon:Ii,bgClass:"bg-stone-50 border border-stone-100",iconClass:"bg-amber-100 text-amber-600"})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[d.jsx("div",{className:"lg:col-span-2 space-y-8 bg-stone-50/50 p-6 rounded-3xl border border-stone-100",children:o.map(v=>d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[d.jsx("div",{className:"md:col-span-1 flex items-center",children:d.jsx("span",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:v.name})}),d.jsxs("div",{className:"md:col-span-3 grid grid-cols-1 sm:grid-cols-3 gap-4",children:[v.rooms.map(w=>{var x;const A=t[w],L=ft(e,A==null?void 0:A.roomId);let D=null;return L&&L.status==="Occupied"&&(L.isEvictionConfirmed?D="Adjusted":D=((x=L.paymentHistory)==null?void 0:x[b])||"Pending"),d.jsx(Ih,{roomNo:w,roomData:A,tenantData:L,rentStatus:D,isPlaceholder:!A,onClick:()=>f(A,L)},w)}),v.name==="1st Floor"?d.jsx("div",{className:"sm:col-span-2",children:d.jsx(Ih,{roomNo:"Owner",roomData:{roomId:"Flat"},tenantData:{status:"Occupied",tenant:"Munirathnam",evictionConfirmed:!1},rentStatus:"Paid",onClick:()=>{}})}):Array.from({length:3-v.rooms.length}).map((w,A)=>d.jsx(Ih,{isPlaceholder:!0},`placeholder-${A}`))]})]},v.name))}),d.jsx("div",{className:"lg:col-span-1",children:d.jsxs("div",{className:"bg-stone-50 rounded-3xl border border-stone-100 p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h3",{className:"font-bold text-slate-800",children:"Last Month Pending"}),d.jsx("span",{className:"bg-amber-100 text-amber-800 text-xs font-bold px-2 py-1 rounded-full",children:_.length})]}),d.jsxs("div",{className:"space-y-3",children:[_.length>0?_.map((v,w)=>d.jsxs("div",{className:"bg-white p-4 rounded-xl border border-stone-100 shadow-sm cursor-pointer hover:border-rose-200 transition",onClick:()=>{const A=t[v.roomNo],L=ft(e,A==null?void 0:A.roomId);A&&L&&f(A,L)},children:[d.jsxs("div",{className:"flex justify-between mb-1",children:[d.jsxs("span",{className:"font-bold text-slate-700",children:["Room ",v.roomNo]}),d.jsxs("span",{className:"font-bold text-rose-600",children:["",Number(v.amount).toLocaleString()]})]}),d.jsx("div",{className:"text-xs text-slate-500",children:v.tenantName})]},w)):d.jsx("div",{className:"text-center py-8 text-slate-400 text-sm",children:"No pending payments from last month."}),d.jsx("p",{className:"text-xs text-slate-400 mt-4 text-center",children:"Click a row to open Rent Details."})]})]})})]}),r&&d.jsx(WO,{room:r.room,tenant:ft(e,r.room.roomId),onClose:()=>s(null)})]})}function GO(){const{rooms:t,tenants:e,loading:n,updateRentStatus:r,globalYear:s}=to(),{showToast:i}=ll(),o=s;if(n)return d.jsx("div",{className:"p-12 text-center text-slate-400",children:"Loading rent details..."});const l=Object.keys(Xe).map(u=>t[u]||Xe[u]).sort((u,f)=>String(u.roomNo).localeCompare(String(f.roomNo),void 0,{numeric:!0})),c=async(u,f,p)=>{const m=ft(e,u.roomId);if(!Fa(m))return;const I=Cn(o,f),b=new Date;if(!(uu(o,f)||o===b.getFullYear()&&f===b.getMonth()))try{await r(u.roomId,I,p,m,o,f)}catch(S){i(S.message,"error")}};return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsx("h2",{className:"text-3xl font-extrabold text-slate-900",children:"Rent Status"}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[d.jsxs("span",{className:"font-semibold",children:["Year: ",o]}),d.jsx("span",{className:"text-xs text-slate-400",children:"(Change in Dashboard)"})]})]}),d.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden",children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-base text-left whitespace-nowrap",children:[d.jsx("thead",{className:"bg-slate-50 text-slate-700 font-semibold border-b border-slate-200",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-2 py-4 border-r border-slate-200 sticky left-0 bg-slate-50 z-10 w-20 text-center",children:"Room ID"}),d.jsx("th",{className:"px-2 py-4 border-r border-slate-200 w-20 text-center",children:"Room No"}),d.jsx("th",{className:"px-4 py-4 border-r border-slate-200 w-40",children:"Tenant"}),sn.map(u=>d.jsx("th",{className:"px-1 py-4 text-center w-12",children:u},u))]})}),d.jsx("tbody",{className:"divide-y divide-slate-100",children:l.map(u=>{const f=ft(e,u.roomId),p=Fa(f),m=p?(f==null?void 0:f.tenant)||"Unknown":"Vacant",I=(f==null?void 0:f.paymentHistory)||{};return d.jsxs("tr",{className:p?"hover:bg-slate-50":"bg-slate-50/50",children:[d.jsx("td",{className:"px-2 py-4 border-r border-slate-100 font-bold text-blue-600 sticky left-0 bg-white z-10 text-center",children:u.roomId}),d.jsx("td",{className:"px-2 py-4 border-r border-slate-100 font-medium text-center",children:u.roomNo}),d.jsx("td",{className:`px-4 py-4 border-r border-slate-100 font-medium truncate max-w-[160px] ${p?"text-slate-800":"text-slate-400 italic"}`,title:m,children:m}),sn.map((b,C)=>{const S=Cn(o,C),_=I[S]||"None",v=new Date,w=o===v.getFullYear()&&C===v.getMonth(),A=uu(o,C)||w;let L=d.jsx(xh,{size:14,className:"mx-auto text-slate-300"}),D="cursor-not-allowed bg-slate-100/50";if(p)if(A)L=d.jsx(xh,{size:14,className:"mx-auto text-slate-300"}),D="cursor-not-allowed bg-slate-50";else{let x=!1;if(f.isEvictionConfirmed)if(f.evictionNoticeDate){const y=new Date(f.evictionNoticeDate),T=new Date(y.getFullYear(),y.getMonth(),1);new Date(o,C,1)>=T&&(x=!0)}else x=!0;x?(L=d.jsx("span",{className:"text-[10px] font-black text-cyan-600",children:"SD"}),D="cursor-not-allowed bg-cyan-50"):_==="Paid"?(L=d.jsx(fu,{size:16,className:"mx-auto text-green-600",strokeWidth:3}),D="cursor-pointer bg-green-50 hover:bg-green-100"):_==="Pending"?(L=d.jsx(pu,{size:16,className:"mx-auto text-amber-600",strokeWidth:3}),D="cursor-pointer bg-amber-50 hover:bg-amber-100"):_==="Rent Only"?(L=d.jsx(fu,{size:16,className:"mx-auto text-purple-600",strokeWidth:3}),D="cursor-pointer bg-purple-50 hover:bg-purple-100"):(L=d.jsx(xh,{size:14,className:"mx-auto text-slate-400"}),D="cursor-pointer bg-white hover:bg-slate-50")}return d.jsx("td",{className:`px-1 py-4 border-r border-slate-100 text-center transition-colors ${D}`,onClick:()=>c(u,C,_),title:p?A?"Locked":_:"Vacant",children:L},S)})]},u.roomId)})})]})})}),d.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden mt-8",children:[d.jsxs("div",{className:"p-6 border-b border-slate-100 bg-emerald-50/50",children:[d.jsx("h3",{className:"text-xl font-bold text-emerald-900",children:"Rent and Water"}),d.jsx("p",{className:"text-sm text-emerald-700 mt-1",children:"Rent and Water Details (Water Calculation Disabled Temporarily for Debugging)"})]}),d.jsx("div",{className:"overflow-x-auto text-sm",children:d.jsxs("table",{className:"w-full text-left whitespace-nowrap",children:[d.jsx("thead",{className:"bg-emerald-100 text-emerald-900 font-bold",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-2 py-4 sticky left-0 bg-emerald-100 z-10 w-20 text-center",children:"Room ID"}),d.jsx("th",{className:"px-2 py-4 border-r border-emerald-200/50 w-20 text-center",children:"Room No"}),d.jsx("th",{className:"px-4 py-4 border-r border-emerald-200/50 w-40",children:"Tenant Name"}),Array.from({length:12}).map((u,f)=>d.jsx("th",{className:"px-1 py-4 text-center min-w-[70px]",children:Fi(o,f).split(" ")[0]},f))]})}),d.jsx("tbody",{className:"divide-y divide-emerald-50",children:l.map(u=>{const f=ft(e,u.roomId),p=f&&f.status==="Occupied";return d.jsxs("tr",{className:"hover:bg-slate-50 transition",children:[d.jsx("td",{className:"px-2 py-4 font-bold text-blue-600 sticky left-0 bg-white shadow-[1px_0_5px_-2px_rgba(0,0,0,0.1)] text-center",children:u.roomId}),d.jsx("td",{className:"px-2 py-4 border-r border-slate-100 font-medium text-slate-700 text-center",children:u.roomNo}),d.jsx("td",{className:"px-4 py-4 border-r border-slate-100 font-medium text-slate-900 truncate max-w-[160px]",title:p?f.tenant:"Vacant",children:p?f.tenant:d.jsx("span",{className:"text-slate-400 italic",children:"Vacant"})}),Array.from({length:12}).map((m,I)=>{const b=`${o}-${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][I]}`;let C="-",S="text-slate-300";if(f){const _=f.paymentHistory||{},v=f.paymentTotals||{},w=_[b];let A=Number(f.rent);if(f.lastRevision){const x=new Date(f.lastRevision),y=new Date(o,I,1),T=new Date(x.getFullYear(),x.getMonth(),1);y<T&&(A=Number(f.lastRent)||A)}const L=Bm;let D=!1;if(f.isEvictionConfirmed&&f.evictionNoticeDate){const x=new Date(f.evictionNoticeDate),y=new Date(o,I,1),T=new Date(x.getFullYear(),x.getMonth(),1);y>=T&&(D=!0,A=0)}if(w==="Paid")if(D)C="0",S="text-slate-900 font-bold";else{const x=v[b];Number.isFinite(x)?(C=x.toLocaleString("en-IN"),S="text-slate-900 font-bold"):(C=(A+L).toLocaleString("en-IN"),S="text-slate-900 font-bold")}}return d.jsx("td",{className:`px-1 py-4 text-center ${S} border-r border-slate-50`,children:C},I)})]},u.roomId)})})]})})]})]})}const QO=({size:t=24,className:e=""})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"currentColor",className:e,children:d.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})});function YO(){const{rooms:t,tenants:e,loading:n,globalYear:r}=to(),{showToast:s,confirm:i}=ll(),o=r,[l,c]=V.useState(null),[u,f]=V.useState(""),[p,m]=V.useState(!1);if(n)return d.jsx("div",{className:"p-12 text-center text-slate-400",children:"Loading water details..."});const I=Object.keys(Xe).map(S=>t[S]||Xe[S]).sort((S,_)=>String(S.roomNo).localeCompare(String(_.roomNo),void 0,{numeric:!0})),b=(S,_,v,w,A,L,D)=>{!w&&!Fa(ft(e,S.roomId))||v||(c({room:S,monthIndex:_,currentVal:A,prevVal:D,existingReset:L}),f(A??""),m(!!L))},C=async()=>{if(!l)return;const{room:S,monthIndex:_}=l;try{const v=ft(e,S.roomId);if(!v||!v.id)throw new Error("Tenant record not found");const w=Number(u);if(u!==""&&(!Number.isFinite(w)||w<0)){s("Please enter a valid non-negative reading","warning");return}const A=la(o,_);!p&&u!==""&&Number.isFinite(l.prevVal)&&w<l.prevVal&&await i({title:"Potential Meter Reset?",message:`Reading (${w}) is lower than previous (${l.prevVal}).

Is this a meter reset/replacement?`,confirmText:"Yes, Meter Reset",cancelText:"No, Save Anyway",type:"danger"})&&m(!0);const L={[`waterReadings.${A}`]:u===""?null:w,[`waterMeterReset.${A}`]:!!p};await Vi(Xn(Ye,"properties",v.id),L),c(null),s("Water reading saved successfully","success")}catch(v){console.error(v),s("Error saving reading: "+v.message,"error")}};return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsx("h2",{className:"text-3xl font-extrabold text-slate-900",children:"Water Bill"}),d.jsx("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:d.jsxs("span",{className:"font-semibold",children:["Year: ",o]})})]}),d.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden",children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-sm text-center whitespace-nowrap",children:[d.jsx("thead",{className:"bg-slate-50 text-slate-700 font-semibold border-b border-slate-200",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 border-r border-slate-200 sticky left-0 bg-slate-50 z-10 text-left min-w-[100px]",children:"Room"}),sn.map(S=>d.jsx("th",{className:"px-2 py-3 w-24",children:S},S))]})}),d.jsx("tbody",{className:"divide-y divide-slate-100",children:I.map(S=>{var D;const _=ft(e,S.roomId),v=Fa(_),w=(_==null?void 0:_.waterReadings)&&Object.keys(_.waterReadings).length>0,A=((D=_==null?void 0:_.archivedTenant)==null?void 0:D.tenant)||"",L=v?(_==null?void 0:_.tenant)||"Unknown":A?`${A} (Vacated)`:"Vacant";return d.jsxs("tr",{className:"hover:bg-slate-50/50",children:[d.jsxs("td",{className:"px-4 py-3 border-r border-slate-100 sticky left-0 bg-white z-10 text-left",children:[d.jsx("div",{className:"font-bold text-blue-600",children:S.roomNo}),d.jsx("div",{className:"text-xs text-slate-500 truncate max-w-[120px]",children:L})]}),sn.map((x,y)=>{var ge,It;const T=uu(o,y),R=v||w,k=Number(_==null?void 0:_.waterRate),P=Number.isFinite(k)?k:hu(S.roomNo),N=hd(_,o,y,P),he=la(o,y),pe=(ge=_==null?void 0:_.waterReadings)==null?void 0:ge[he],Q=((_==null?void 0:_.waterMeterReset)||{})[he];let ae=d.jsx("span",{className:"text-slate-300",children:"-"}),z="bg-slate-50 text-slate-400 cursor-not-allowed";if(R)if(T&&v)ae=d.jsx("span",{className:"text-slate-300",children:"-"}),z="bg-slate-100 text-slate-400 cursor-not-allowed";else if(z="cursor-pointer bg-white hover:bg-blue-50 transition-colors",N.units!==null&&N.amount!==null){const qe=N.units<0;ae=d.jsxs("div",{className:"flex flex-col items-center leading-tight",children:[d.jsxs("span",{className:"font-extrabold text-blue-700",children:["",N.amount]}),d.jsxs("span",{className:`text-[10px] ${qe?"text-red-600 font-bold":"text-slate-500"}`,children:["Units: ",N.units]}),Q&&d.jsxs("span",{className:"text-[9px] text-amber-600 font-bold flex items-center gap-0.5",children:[d.jsx(FO,{size:8})," Reset"]})]}),qe&&(z+=" bg-red-50 hover:bg-red-100")}else Number.isFinite(Number(pe))?ae=d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx("span",{className:"font-semibold text-slate-700",children:pe}),d.jsx("span",{className:"text-[9px] text-slate-400",children:"reading"})]}):ae=d.jsx("span",{className:"text-slate-200",children:""});const K=xi(o,y),Y=la(K.year,K.monthIndex),le=Number((It=_==null?void 0:_.waterReadings)==null?void 0:It[Y]);return d.jsx("td",{className:`px-1 py-2 border-r border-slate-100 h-16 align-middle ${z}`,onClick:()=>b(S,y,R&&T&&v,R,pe,Q,le),children:ae},y)})]},S.roomId)})})]})})}),l&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:d.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-[340px] overflow-hidden animate-in zoom-in-95 duration-200",children:[d.jsxs("div",{className:"bg-white px-6 pt-6 pb-2",children:[d.jsx("h3",{className:"text-xl font-extrabold text-slate-800 tracking-tight",children:"Water meter reading"}),d.jsxs("p",{className:"text-sm font-medium text-slate-400 mt-1",children:["Room ",l.room.roomNo,"  ",sn[l.monthIndex]," ",o]})]}),d.jsxs("div",{className:"p-6 space-y-5",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsxs("label",{className:"block text-xs font-bold text-slate-400 uppercase tracking-wider",children:["Previous month reading (",sn[(l.monthIndex-1+12)%12]," ",l.monthIndex===0?o-1:o,")"]}),d.jsx("div",{className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-600 font-mono font-bold text-lg",children:Number.isFinite(l.prevVal)?l.prevVal:"N/A"})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Units multiplier"}),d.jsxs("div",{className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-600 font-bold",children:["",aa]})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Meter reset?"}),d.jsxs("select",{className:"w-full px-3 py-3 bg-white border border-slate-200 rounded-xl text-slate-700 font-bold focus:outline-none focus:ring-2 focus:ring-blue-500/20 appearance-none",value:p?"Yes":"No",onChange:S=>m(S.target.value==="Yes"),children:[d.jsx("option",{value:"No",children:"No"}),d.jsx("option",{value:"Yes",children:"Yes"})]})]})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"block text-sm font-bold text-blue-900",children:"Enter the current meter reading"}),d.jsx("div",{className:"relative",children:d.jsx("input",{type:"number",autoFocus:!0,className:"w-full px-4 py-3 rounded-xl border-2 border-blue-100 bg-blue-50/50 focus:bg-white focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 outline-none text-2xl font-mono font-bold text-blue-900 placeholder:text-blue-200 transition-all",placeholder:"000",value:u,onChange:S=>f(S.target.value),onKeyDown:S=>S.key==="Enter"&&C()})})]})]}),d.jsxs("div",{className:"px-6 pb-6 flex items-center justify-end gap-3",children:[d.jsx("button",{onClick:()=>c(null),className:"size-12 rounded-2xl flex items-center justify-center bg-slate-100 text-slate-400 hover:bg-slate-200 hover:text-slate-600 transition-all",title:"Close",children:d.jsx("span",{className:"text-2xl leading-none",children:""})}),(()=>{const S=ft(e,l.room.roomId),_=S==null?void 0:S.phone,v=Number(u);let w="#",A=!1;if(_){if(u!==""&&Number.isFinite(v)){Number.isFinite(l.prevVal)&&l.prevVal;const L=p;let D=null;if(L?D=v*aa:Number.isFinite(l.prevVal)&&(D=(v-l.prevVal)*aa),D!==null&&D>=0){const x=Number(S==null?void 0:S.waterRate),y=Number.isFinite(x)?x:hu(l.room.roomNo),T=Math.round(D*y),k=`Water Bill - ${`${sn[l.monthIndex]} ${o}`}
No of Ltrs - ${D}
Amnt.        - ${T}`;w=`https://wa.me/91${_}?text=${encodeURIComponent(k)}`,A=!0}}}return!A&&_&&(w=`https://wa.me/91${_}?text=Hi, please send the water meter reading for ${sn[l.monthIndex]} ${o}.`),d.jsx("a",{href:_?w:void 0,onClick:L=>!_&&alert("No phone number for tenant"),target:"_blank",rel:"noreferrer",className:"size-12 rounded-2xl flex items-center justify-center bg-emerald-100 text-emerald-600 hover:bg-emerald-500 hover:text-white transition-all border border-emerald-200",title:A?"Send Bill on WhatsApp":"Request Reading on WhatsApp",children:d.jsx(QO,{})})})(),d.jsx("button",{onClick:C,className:"size-12 rounded-2xl flex items-center justify-center bg-blue-600 text-white hover:bg-blue-700 hover:scale-105 active:scale-95 transition-all shadow-lg shadow-blue-200",title:"Save Recording",children:d.jsx(Jf,{size:24})})]})]})})]})}const Sh=["House Keeping Salary","Electricity Bill","Internet Bill","Painting","Room Maintenance","Other"];function JO(){const{expenses:t,addExpense:e,deleteExpense:n,loading:r,globalYear:s}=to(),{showToast:i,confirm:o}=ll(),l=s,[c,u]=V.useState(new Date().toISOString().split("T")[0]),[f,p]=V.useState(Sh[0]),[m,I]=V.useState(""),[b,C]=V.useState(""),[S,_]=V.useState(!1),v=async D=>{if(D.preventDefault(),!c||!f||!m||Number(m)<=0){i("Please fill in all required fields with valid values.","warning");return}_(!0);try{const x=new Date(c),y=Cn(x.getFullYear(),x.getMonth());await e({date:c,category:f,amount:Number(m),note:b.trim(),monthKey:y,createdAt:new Date().toISOString()}),I(""),C(""),p(Sh[0]),i("Expense added successfully","success")}catch(x){console.error(x),i("Failed to add expense: "+x.message,"error")}finally{_(!1)}},w=async D=>{if(await o({title:"Delete Expense?",message:"Are you sure you want to delete this expense? This action cannot be undone.",type:"danger",confirmText:"Delete"}))try{await n(D),i("Expense deleted successfully","success")}catch(y){i("Failed to delete: "+y.message,"error")}};if(r)return d.jsx("div",{className:"p-12 text-center text-slate-400",children:"Loading expenses..."});const A=t.filter(D=>D.date?new Date(D.date).getFullYear()===l:!1),L=A.reduce((D,x)=>D+(Number(x.amount)||0),0);return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsx("h2",{className:"text-3xl font-extrabold text-slate-900",children:"Expenses"}),d.jsx("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:d.jsxs("span",{className:"font-semibold",children:["Year: ",l]})})]}),d.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-rose-600 rounded-3xl p-6 text-white shadow-lg shadow-rose-200",children:[d.jsxs("div",{className:"text-white/80 font-medium mb-1",children:["Total Expenses (",l,")"]}),d.jsxs("div",{className:"text-4xl font-extrabold tracking-tight",children:["",L.toLocaleString("en-IN")]})]}),d.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 p-6",children:[d.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[d.jsx(MO,{className:"text-blue-600",size:20})," New Expense"]}),d.jsxs("form",{onSubmit:v,className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-end",children:[d.jsxs("div",{className:"md:col-span-2",children:[d.jsx("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"Date"}),d.jsxs("div",{className:"relative",children:[d.jsx(TO,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),d.jsx("input",{type:"date",required:!0,value:c,onChange:D=>u(D.target.value),className:"w-full pl-9 pr-3 py-2.5 rounded-xl border border-slate-200 bg-slate-50 focus:ring-2 focus:ring-blue-500 outline-none font-medium text-slate-700"})]})]}),d.jsxs("div",{className:"md:col-span-3",children:[d.jsx("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"Category"}),d.jsxs("div",{className:"relative",children:[d.jsx(zO,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),d.jsx("select",{required:!0,value:f,onChange:D=>p(D.target.value),className:"w-full pl-9 pr-3 py-2.5 rounded-xl border border-slate-200 bg-slate-50 focus:ring-2 focus:ring-blue-500 outline-none font-medium text-slate-700 appearance-none",children:Sh.map(D=>d.jsx("option",{value:D,children:D},D))})]})]}),d.jsxs("div",{className:"md:col-span-3",children:[d.jsx("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"Note (Optional)"}),d.jsxs("div",{className:"relative",children:[d.jsx(MI,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),d.jsx("input",{type:"text",placeholder:"Details...",value:b,onChange:D=>C(D.target.value),className:"w-full pl-9 pr-3 py-2.5 rounded-xl border border-slate-200 bg-slate-50 focus:ring-2 focus:ring-blue-500 outline-none font-medium text-slate-700"})]})]}),d.jsxs("div",{className:"md:col-span-2",children:[d.jsx("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"Amount"}),d.jsxs("div",{className:"relative",children:[d.jsx(DO,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),d.jsx("input",{type:"number",required:!0,min:"0",step:"any",placeholder:"0.00",value:m,onChange:D=>I(D.target.value),className:"w-full pl-9 pr-3 py-2.5 rounded-xl border border-slate-200 bg-slate-50 focus:ring-2 focus:ring-blue-500 outline-none font-bold text-slate-900"})]})]}),d.jsx("div",{className:"md:col-span-2",children:d.jsx("button",{type:"submit",disabled:S,className:"w-full py-2.5 bg-slate-900 text-white rounded-xl font-bold hover:bg-black transition-colors disabled:opacity-50",children:S?"Adding...":"Add"})})]})]}),d.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden",children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-sm text-left",children:[d.jsx("thead",{className:"bg-slate-50 text-slate-500 font-semibold border-b border-slate-200",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-4 w-32",children:"Date"}),d.jsx("th",{className:"px-6 py-4 w-48",children:"Category"}),d.jsx("th",{className:"px-6 py-4",children:"Note"}),d.jsx("th",{className:"px-6 py-4 w-32 text-right",children:"Amount"}),d.jsx("th",{className:"px-6 py-4 w-16"})]})}),d.jsx("tbody",{className:"divide-y divide-slate-100",children:A.length===0?d.jsx("tr",{children:d.jsxs("td",{colspan:"5",className:"px-6 py-12 text-center text-slate-400 italic",children:["No expenses recorded for ",l,"."]})}):A.map(D=>d.jsxs("tr",{className:"hover:bg-slate-50 group",children:[d.jsx("td",{className:"px-6 py-4 font-medium text-slate-600 whitespace-nowrap",children:D.date}),d.jsx("td",{className:"px-6 py-4 font-medium text-slate-900",children:d.jsx("span",{className:"inline-block px-2 py-1 bg-slate-100 rounded-lg text-xs border border-slate-200",children:D.category})}),d.jsx("td",{className:"px-6 py-4 text-slate-500",children:D.note||d.jsx("span",{className:"text-slate-300",children:"-"})}),d.jsxs("td",{className:"px-6 py-4 text-right font-bold text-slate-900",children:["",Number(D.amount).toLocaleString("en-IN")]}),d.jsx("td",{className:"px-6 py-4 text-right",children:d.jsx("button",{onClick:()=>w(D.id),className:"p-2 text-slate-300 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors opacity-0 group-hover:opacity-100",title:"Delete Expense",children:d.jsx(UI,{size:16})})})]},D.id))})]})})})]})}const XO=[{roomNo:"01",roomId:"G01",tenant:"Remish",rent:5200,advance:15e3,join:"15-Oct-2024",rev:"15-Oct-2024",phone:"8526487895"},{roomNo:"02",roomId:"G02",tenant:"Anil (L)",rent:500,advance:65e4,join:"24-Aug-2022",rev:"24-Aug-2022",phone:"8073256471"},{roomNo:"04",roomId:"102",tenant:"Venkatesh(L)",rent:500,advance:45e4,join:"24-Nov-2021",rev:"24-Nov-2021",phone:"9513072188"},{roomNo:"05",roomId:"201",tenant:"Prem",rent:8800,advance:3e4,join:"1-Feb-2024",rev:"1-Feb-2024",phone:"8639384523"},{roomNo:"06",roomId:"202",tenant:"Aravind",rent:8800,advance:35e3,join:"1-Aug-2025",rev:"",phone:"8147161034"},{roomNo:"07",roomId:"203",tenant:"Panduranga",rent:8800,advance:28e3,join:"23-Nov-2024",rev:"23-Nov-2024",phone:"9742392131"},{roomNo:"08",roomId:"301",tenant:"Nirmal Raj",rent:8800,advance:3e4,join:"1-Nov-2024",rev:"1-Nov-2024",phone:"6382702408"},{roomNo:"09",roomId:"302",tenant:"Logesh",rent:8300,advance:25e3,join:"26-Feb-2023",rev:"26-Feb-2024",phone:"7010250108"},{roomNo:"10",roomId:"303",tenant:"Prasanth Patil",rent:8800,advance:25e3,join:"01-Jan-2023",rev:"1-Jan-2024",phone:"9880662547"},{roomNo:"11",roomId:"401",tenant:"Mastan",rent:8e3,advance:25e3,join:"31-Jul-2023",rev:"31-Jul-2024",phone:"9902217031"},{roomNo:"12",roomId:"402",tenant:"Sudha / Bharath",rent:8e3,advance:25e3,join:"31-Jul-2023",rev:"31-Jul-2024",phone:"9100770982"},{roomNo:"13",roomId:"403",tenant:"Siri/Vamsi",rent:8e3,advance:25e3,join:"31-Jul-2023",rev:"31-Jul-2024",phone:"6303596330"}],ZO={"01":[67,125,191,316,534,584,723,967,1129,1389,1503,1813,1944,2180,2379,2550,2649,2768,2865,3174,3314],"02":[270,1005,1377,1892,2407,2959,3498,3797,4309,4803,5264,6150,7065,7302,7880,8594,9148,10088,10957,11449,11456],"04":[211,572,861,1228,1528,1793,2025,2263,2579,3030,3361,4278,4771,5476,6008,6461,6902,7382,7886,8313,8684],"05":[79,158,502,956,1360,1734,1900,2422,2953,3112,3673,4347,4885,5262,5649,5914,6174,6430,6569,6816,6986],"06":[213,242,640,1078,1306,1643,2095,2572,2842,3207,3710,4182,4404,4637,4811,4855,5113,5465,5678,5991,6299],"07":[609,1375,2635,3621,3621,4378,4624,4738,5068,5441,5865,6428,6781,7162,7411,8186,8983,9800,10339,10972,11814],"08":[0,0,137,578,1007,1007,1007,1007,1007,494,1223,1769,2216,2258,2403,2439,3039,3039,3039,3039,3039],"09":[137,359,500,700,847,1058,1240,1419,1586,1683,1858,2154,2464,2674,2888,3092,3141,3342,3446,3595,3708],10:[101,275,540,673,1227,1412,1527,1642,1807,1951,2278,2472,3084,4500,5511,6628,7066,8161,9391,10388,11723],11:[150,303,524,756,932,1087,1240,1451,1625,1802,1953,2181,2426,2719,2945,3189,3474,3734,3986,4184,4400],12:[88,169,345,471,728,1037,1260,1621,2047,2112,2500,2821,3097,3341,3503,3934,4245,4577,4915,5144,5331],13:[214,488,754,1152,1606,2048,2409,2888,3387,3791,4255,4676,4887,5154,5575,6516,6710,7293,7509,7757,8005]},a_=t=>{if(!t)return"";const e={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"},n=t.split("-");if(n.length!==3)return"";const r=n[0].padStart(2,"0"),s=e[n[1]],i=n[2];return s?`${i}-${s}-${r}`:""};function eL(){const[t,e]=V.useState(""),[n,r]=V.useState(!1),{confirm:s,showToast:i}=ll(),o=async()=>{if(await s({title:"Migrate Rooms?",message:"This will overwrite/create room data in 'rooms' collection. Continue?"})){r(!0),e("Starting migration...");try{const u=Qf(Ye),f=_s(Ye,"rooms");let p=0;Object.entries(Xe).forEach(([I,b])=>{const C=Xn(Ye,"rooms",I);u.set(C,{...b,sortOrder:parseInt(I)}),p++}),await u.commit();const m=`Successfully migrated ${p} rooms to Firestore.`;e(m),i(m,"success")}catch(u){console.error(u);const f="Error: "+u.message;e(f),i(f,"error")}finally{r(!1)}}},l=async()=>{if(await s({title:"Seed Tenant Data?",message:`This will CREATE new tenant records in 'properties'.
Warning: This clears existing data and overwrites it. Continue?`,type:"danger",confirmText:"Yes, Overwrite"})){r(!0),e("Seeding tenants...");try{const u=Qf(Ye),f=_s(Ye,"properties");(await zm(f)).forEach(m=>{u.delete(m.ref)}),XO.forEach(m=>{const I=Xn(Ye,"properties",`tenant_room_${m.roomNo}`),b=a_(m.join),C=a_(m.rev),S={},_={},v=ZO[m.roomNo]||[],w=["Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];let L=0,D=0;w.forEach(x=>{const y=`2024-${x}`,T=v[L];T!=null&&(S[y]=T,L>0&&T<D&&(_[y]=!0,console.log(`Reset detected for Room ${m.roomNo} at ${y}: ${D} -> ${T}`)),D=T),L++}),A.forEach(x=>{const y=`2025-${x}`,T=v[L];T!=null&&(S[y]=T,T<D&&(_[y]=!0,console.log(`Reset detected for Room ${m.roomNo} at ${y}: ${D} -> ${T}`)),D=T),L++}),u.set(I,{tenant:m.tenant,roomNo:m.roomNo,roomId:m.roomId,rent:String(m.rent),advance:String(m.advance),joinDate:b,lastRevision:C,status:"Occupied",phone:m.phone||"",email:"",waterRate:"0.25",waterReadings:S,waterMeterReset:_,paymentHistory:{},paymentTotals:{}})}),await u.commit(),e("Successfully seeded tenants.")}catch(u){console.error(u),e("Error seeding: "+u.message)}finally{r(!1)}}};return d.jsxs("div",{className:"p-8 bg-white rounded-3xl shadow-sm border border-slate-200",children:[d.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Data Migration Admin"}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"font-semibold mb-2",children:"Migrate Rooms"}),d.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Uploads the hardcoded IMMUTABLE_ROOMS_DATA to Firestore 'rooms' collection."}),d.jsx("button",{onClick:o,disabled:n,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:n?"Migrating...":"Start Migration"})]}),d.jsxs("div",{className:"mb-6 border-t pt-6",children:[d.jsx("h3",{className:"font-semibold mb-2",children:"Seed Tenant Data"}),d.jsxs("p",{className:"text-sm text-slate-500 mb-4",children:["Populates 'properties' collection with data from screenshot (Remish, Anil, etc.).",d.jsx("br",{}),d.jsx("span",{className:"text-amber-600 font-bold",children:"Warning:"})," Clears/Overwrites if ID 'tenant_room_XX' exists."]}),d.jsx("button",{onClick:l,disabled:n,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50",children:n?"Seeding...":"Seed Tenants"})]}),t&&d.jsx("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-lg text-sm font-mono whitespace-pre-wrap",children:t})]})}const tL="dhze5ifcf",nL="mi_unsigned_preset",rL=async t=>{var n;const e=new FormData;e.append("file",t),e.append("upload_preset",nL);try{const r=await fetch(`https://api.cloudinary.com/v1_1/${tL}/auto/upload`,{method:"POST",body:e});if(!r.ok){const i=await r.json();throw new Error(((n=i.error)==null?void 0:n.message)||"Cloudinary Upload Failed")}return(await r.json()).secure_url}catch(r){throw console.error("Cloudinary Service Error:",r),r}};function sL(){const{token:t}=wN(),[e,n]=V.useState("verifying"),[r,s]=V.useState(null),[i,o]=V.useState(null),[l,c]=V.useState({}),[u,f]=V.useState({});V.useEffect(()=>{const S=wE(jn,_=>{s(_),_?I():n("login_required")});return()=>S()},[t]);const p=async()=>{try{await PE(jn,AI)}catch(S){console.error("Login failed",S),alert("Login failed. Please try again.")}},m=()=>{kf(jn),o(null),n("login_required")},I=async()=>{n("verifying");try{const S=ia(_s(Ye,"properties"),II("uploadToken","==",t)),_=await zm(S);if(_.empty){n("invalid");return}const v=_.docs[0],w=v.data();o({id:v.id,...w}),f(w.documents||{}),n("valid")}catch(S){console.error("Link validation failed:",S),n("error")}},b=async(S,_)=>{if(!(!S||!i)){if(S.size>10*1024*1024){alert("File is too large. Max 10MB.");return}c(v=>({...v,[_]:!0}));try{const v=await rL(S),w={...u,[_]:v};await Vi(Xn(Ye,"properties",i.id),{documents:w,[`meta_${_}_uploadedBy`]:r.email,[`meta_${_}_uploadedAt`]:new Date().toISOString()}),f(w)}catch(v){console.error("Upload Error Details:",v),alert(`Upload failed: ${v.message}`)}finally{c(v=>({...v,[_]:!1}))}}};if(e==="verifying")return d.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 text-slate-400",children:[d.jsx(s_,{className:"animate-spin mb-2",size:32}),d.jsx("p",{children:"Verifying Access..."})]});if(e==="login_required")return d.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 p-6",children:d.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-slate-200 w-full max-w-md text-center",children:[d.jsx(Xf,{className:"mx-auto text-blue-600 mb-4",size:48}),d.jsx("h1",{className:"text-xl font-bold text-slate-900 mb-2",children:"Secure Upload Portal"}),d.jsx("p",{className:"text-slate-500 mb-8",children:"Please sign in with Google to verify your identity and access the document vault."}),d.jsxs("button",{onClick:p,className:"w-full py-3 bg-black text-white rounded-xl font-bold hover:bg-slate-800 transition flex items-center justify-center gap-2",children:[d.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[d.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),d.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),d.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),d.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign in with Google"]}),d.jsx("p",{className:"text-xs text-slate-400 mt-4",children:"Munirathnam Illam Secure Cloud"})]})});if(e==="invalid")return d.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 p-6 text-center",children:d.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-slate-200 w-full max-w-md",children:[d.jsx(Ii,{className:"mx-auto text-rose-500 mb-4",size:48}),d.jsx("h1",{className:"text-xl font-bold text-slate-900 mb-2",children:"Invalid Link"}),d.jsx("p",{className:"text-slate-500",children:"This link does not exist. Please request a new one."})]})});if(e==="expired")return d.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 p-6 text-center",children:d.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-slate-200 w-full max-w-md",children:[d.jsx("div",{className:"bg-amber-100 p-4 rounded-full inline-block mb-4 text-amber-600",children:d.jsx(Xf,{size:32})}),d.jsx("h1",{className:"text-xl font-bold text-slate-900 mb-2",children:"Link Expired"}),d.jsx("p",{className:"text-slate-500 mb-4",children:"This secure upload link has expired (valid for 24h only)."}),d.jsx("p",{className:"text-sm font-bold text-slate-400",children:"Please request a new link from the Admin."})]})});if(e==="error")return d.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 p-6 text-center",children:d.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-slate-200 w-full max-w-md",children:[d.jsx(Ii,{className:"mx-auto text-rose-500 mb-4",size:48}),d.jsx("h1",{className:"text-xl font-bold text-slate-900 mb-2",children:"An Error Occurred"}),d.jsx("p",{className:"text-slate-500",children:"Please try again later or contact support."})]})});const C=({title:S,type:_,description:v})=>{const w=!!u[_],A=l[_];return d.jsxs("div",{className:`relative overflow-hidden rounded-2xl border transition-all ${w?"bg-emerald-50 border-emerald-200":"bg-white border-slate-200 shadow-sm"}`,children:[d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex items-start justify-between mb-4",children:[d.jsx("div",{className:`p-3 rounded-xl ${w?"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-600"}`,children:w?d.jsx(fu,{size:24,strokeWidth:3}):d.jsx(MI,{size:24})}),w&&d.jsx("span",{className:"text-xs font-bold text-emerald-600 bg-white px-2 py-1 rounded-full shadow-sm",children:"UPLOADED"})]}),d.jsx("h3",{className:"font-bold text-slate-900 mb-1",children:S}),d.jsx("p",{className:"text-sm text-slate-500 mb-6",children:v}),d.jsxs("label",{className:`block w-full text-center py-3 rounded-xl font-bold cursor-pointer transition-colors ${w?"bg-white text-emerald-600 border-2 border-emerald-100 hover:border-emerald-200":"bg-black text-white hover:bg-slate-800"}`,children:[A?"Uploading...":w?"Replace File":"Select File",d.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",disabled:A,onChange:L=>b(L.target.files[0],_)})]})]}),A&&d.jsx("div",{className:"absolute inset-0 bg-white/80 flex items-center justify-center",children:d.jsx(s_,{className:"animate-spin text-black",size:32})})]})};return d.jsx("div",{className:"min-h-screen bg-slate-50 p-6 md:p-12",children:d.jsxs("div",{className:"max-w-xl mx-auto",children:[d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsx("div",{className:"inline-block px-4 py-1.5 bg-blue-100 text-blue-700 rounded-full text-xs font-bold tracking-wide uppercase",children:"Secure Upload Portal"}),d.jsxs("button",{onClick:m,className:"text-slate-400 hover:text-slate-600 flex items-center gap-1 text-sm font-bold",children:[d.jsx(FI,{size:16})," Sign Out"]})]}),d.jsxs("div",{className:"text-center mb-10",children:[d.jsxs("h1",{className:"text-3xl font-extrabold text-slate-900 mb-2",children:["Hello, ",i.tenant,"!"]}),d.jsxs("p",{className:"text-slate-500",children:["Room ",i.roomNo," (",i.roomId,")"]}),d.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["Logged in as ",r.email]})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[d.jsx("label",{className:"block text-sm font-bold text-slate-900 mb-2",children:"Family Member Contact Numbers"}),d.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Please provide contact details for your family members (Name & Phone)."}),d.jsx("textarea",{className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm font-medium focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition",rows:3,placeholder:"e.g. Spouse: 9876543210, Father: 9123456780",defaultValue:i.familyMembers||"",onBlur:S=>{Vi(Xn(Ye,"properties",i.id),{familyMembers:S.target.value})}})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx(C,{title:"Tenant Photo",type:"photo",description:"Recent passport size photo."}),d.jsx(C,{title:"Aadhar Card",type:"aadhar",description:"Front and back photo or PDF."}),d.jsx(C,{title:"ID Proof",type:"pan",description:"Any valid government ID (PAN/Voter)."}),d.jsx(C,{title:"Rental Agreement",type:"agreement",description:"Signed copy of the agreement."})]})]}),d.jsx("div",{className:"mt-12 text-center text-xs text-slate-400",children:d.jsx("p",{children:"Files are securely stored in Munirathnam Illam Cloud."})})]})})}function iL(){const{unlockWithBiometrics:t}=al(),[e,n]=V.useState(null),[r,s]=V.useState(!1);V.useEffect(()=>{i()},[]);async function i(){if(on.isNativePlatform())try{const l=await PI.isAvailable();s(l.isAvailable)}catch(l){console.error("Biometric Check Error:",l),n("Biometrics not available")}}const o=async()=>{n(null);try{await t()}catch{n("Authentication failed.")}};return on.isNativePlatform()?d.jsxs("div",{className:"fixed inset-0 z-[100] flex flex-col items-center justify-center p-8 bg-gradient-to-br from-emerald-900 via-emerald-800 to-slate-900 text-white",children:[d.jsxs("div",{className:"flex flex-col items-center space-y-8 animate-in fade-in zoom-in duration-300",children:[d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 bg-emerald-400 rounded-full blur-3xl opacity-20"}),d.jsx("div",{className:"relative p-6 bg-white/10 backdrop-blur-xl rounded-full ring-1 ring-white/20 shadow-2xl",children:d.jsx(jO,{size:48,className:"text-emerald-100"})})]}),d.jsxs("div",{className:"text-center space-y-2",children:[d.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"App Locked"}),d.jsx("p",{className:"text-emerald-100/70 text-sm",children:"Munirathnam Illam Rental Manager"})]}),d.jsxs("div",{className:"pt-8 flex flex-col items-center gap-4",children:[d.jsxs("button",{onClick:o,className:"flex items-center gap-3 px-8 py-4 bg-emerald-500 hover:bg-emerald-400 text-emerald-950 rounded-2xl font-bold transition-all active:scale-95 shadow-lg shadow-emerald-900/50",children:[d.jsx(AO,{size:24}),d.jsx("span",{children:"Unlock with Face ID"})]}),d.jsx("button",{onClick:()=>window.location.reload(),className:"text-sm text-emerald-200/50 font-medium hover:text-white transition",children:"Reload App"})]}),e&&d.jsx("p",{className:"text-rose-300 text-sm font-medium mt-4 animate-pulse",children:e})]}),d.jsx("div",{className:"absolute bottom-8 text-center",children:d.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-white/30 uppercase tracking-widest font-bold",children:[d.jsx(UO,{size:12}),d.jsx("span",{children:"Secured by Biometrics"})]})})]}):d.jsx("div",{className:"fixed inset-0 z-[100] bg-stone-900 flex items-center justify-center",children:d.jsxs("div",{className:"bg-white p-8 rounded-2xl text-center space-y-4",children:[d.jsx("p",{children:"Biometrics not supported on Web."}),d.jsx("button",{onClick:o,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg",children:"Mock Unlock"})]})})}function oL(){const{loginWithGoogle:t,currentUser:e}=al(),[n,r]=V.useState(!1);if(e)return d.jsx(C1,{to:"/"});const s=async()=>{try{r(!0),await t()}catch(i){console.error("Login failed:",i),alert("Login failed. Please try again."),r(!1)}};return d.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row bg-white",children:[d.jsxs("div",{className:"w-full md:w-1/2 bg-gradient-to-br from-emerald-50 via-emerald-50 to-emerald-100 p-8 md:p-12 lg:p-20 flex flex-col justify-between relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-emerald-100/50 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),d.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-emerald-200/20 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"}),d.jsxs("div",{className:"relative z-10",children:[d.jsxs("div",{className:"flex items-center gap-3 text-emerald-800 mb-12",children:[d.jsx("div",{className:"p-2 bg-white/60 rounded-xl backdrop-blur-sm shadow-sm ring-1 ring-black/5",children:d.jsx(Yf,{size:24})}),d.jsx("span",{className:"font-bold tracking-tight",children:"Munirathnam Illam"})]}),d.jsxs("div",{className:"space-y-6 max-w-lg",children:[d.jsx("h1",{className:"text-4xl md:text-5xl font-black text-slate-900 tracking-tight leading-[1.1]",children:"Property Management System"}),d.jsx("p",{className:"text-lg text-slate-600 font-medium leading-relaxed",children:"Manage tenants, rent, maintenance, and reports from one unified dashboard."})]})]}),d.jsxs("div",{className:"relative z-10 mt-12 text-sm font-medium text-emerald-800/60",children:[" ",new Date().getFullYear()," Munirathnam Illam"]})]}),d.jsxs("div",{className:"w-full md:w-1/2 p-4 flex items-center justify-center bg-white relative",children:[d.jsx("div",{className:"absolute top-0 w-full h-[env(safe-area-inset-top)] bg-transparent md:hidden"}),d.jsxs("div",{className:"w-full max-w-md space-y-8 p-8",children:[d.jsxs("div",{className:"text-center space-y-4",children:[d.jsx("div",{className:"inline-flex p-4 bg-stone-50 rounded-2xl mb-4 ring-1 ring-stone-100 shadow-sm",children:d.jsx(Xf,{className:"w-10 h-10 text-emerald-600"})}),d.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Welcome Back"}),d.jsx("p",{className:"text-slate-500",children:"Sign in to manage your property"})]}),d.jsxs("div",{className:"space-y-4 pt-4",children:[d.jsx("button",{onClick:s,disabled:n,className:"w-full flex items-center justify-center gap-3 px-6 py-4 bg-white border-2 border-stone-200 rounded-2xl text-slate-700 font-bold hover:bg-stone-50 hover:border-stone-300 transition-all active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed group shadow-sm",children:n?d.jsx("span",{className:"w-5 h-5 border-2 border-slate-300 border-t-slate-600 rounded-full animate-spin"}):d.jsxs(d.Fragment,{children:[d.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[d.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),d.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),d.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),d.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),d.jsx("span",{children:"Continue with Google"})]})}),d.jsx("p",{className:"text-center text-xs text-slate-400 font-medium pt-4",children:"Your data is securely encrypted"})]})]})]})]})}function Ws({children:t}){const{currentUser:e,loading:n}=al();return n?d.jsx("div",{children:"Loading..."}):e?t:d.jsx(C1,{to:"/login"})}function aL(){const{isAppLocked:t,unlockApp:e,currentUser:n}=al();return n&&t?d.jsx(iL,{}):null}function lL(){return d.jsx(hO,{children:d.jsx($O,{children:d.jsxs(EO,{children:[d.jsx(aL,{}),d.jsx(BN,{children:d.jsxs(jN,{children:[d.jsx(Dn,{path:"/login",element:d.jsx(oL,{})}),d.jsx(Dn,{path:"/upload/:token",element:d.jsx(sL,{})}),d.jsx(Dn,{path:"/",element:d.jsx(Ws,{children:d.jsx(Bs,{children:d.jsx(BO,{})})})}),d.jsx(Dn,{path:"/rooms",element:d.jsx(Ws,{children:d.jsx(Bs,{children:d.jsx(KO,{})})})}),d.jsx(Dn,{path:"/rent",element:d.jsx(Ws,{children:d.jsx(Bs,{children:d.jsx(GO,{})})})}),d.jsx(Dn,{path:"/water",element:d.jsx(Ws,{children:d.jsx(Bs,{children:d.jsx(YO,{})})})}),d.jsx(Dn,{path:"/expenses",element:d.jsx(Ws,{children:d.jsx(Bs,{children:d.jsx(JO,{})})})}),d.jsx(Dn,{path:"/admin/migrate",element:d.jsx(Ws,{children:d.jsx(Bs,{children:d.jsx(eL,{})})})})]})})]})})})}Nh.createRoot(document.getElementById("root")).render(d.jsx(li.StrictMode,{children:d.jsx(lL,{})}));export{pk as A,xL as B,OL as C,PE as D,js as E,vr as F,_r as G,LL as H,DL as I,jk as J,Qn as K,NL as L,w0 as M,oC as N,cc as O,Gv as P,SE as Q,CL as R,IE as S,wr as T,Yv as U,Jv as V,$m as W,pL as a,fL as b,mL as c,kL as d,jL as e,wL as f,aA as g,En as h,vL as i,bL as j,hL as k,PL as l,yL as m,Kv as n,RL as o,cL as p,dL as q,Bb as r,EL as s,gL as t,_L as u,AL as v,uL as w,TL as x,SL as y,IL as z};
