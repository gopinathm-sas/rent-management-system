function gT(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function yT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var c_={exports:{}},gu={},u_={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var za=Symbol.for("react.element"),vT=Symbol.for("react.portal"),_T=Symbol.for("react.fragment"),wT=Symbol.for("react.strict_mode"),xT=Symbol.for("react.profiler"),ET=Symbol.for("react.provider"),IT=Symbol.for("react.context"),TT=Symbol.for("react.forward_ref"),ST=Symbol.for("react.suspense"),bT=Symbol.for("react.memo"),NT=Symbol.for("react.lazy"),zg=Symbol.iterator;function RT(t){return t===null||typeof t!="object"?null:(t=zg&&t[zg]||t["@@iterator"],typeof t=="function"?t:null)}var d_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h_=Object.assign,f_={};function $i(t,e,n){this.props=t,this.context=e,this.refs=f_,this.updater=n||d_}$i.prototype.isReactComponent={};$i.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};$i.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function p_(){}p_.prototype=$i.prototype;function ep(t,e,n){this.props=t,this.context=e,this.refs=f_,this.updater=n||d_}var tp=ep.prototype=new p_;tp.constructor=ep;h_(tp,$i.prototype);tp.isPureReactComponent=!0;var $g=Array.isArray,m_=Object.prototype.hasOwnProperty,np={current:null},g_={key:!0,ref:!0,__self:!0,__source:!0};function y_(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)m_.call(e,r)&&!g_.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:za,type:t,key:i,ref:o,props:s,_owner:np.current}}function kT(t,e){return{$$typeof:za,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function rp(t){return typeof t=="object"&&t!==null&&t.$$typeof===za}function CT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Bg=/\/+/g;function Pd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?CT(""+t.key):e.toString(36)}function Ql(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case za:case vT:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Pd(o,0):r,$g(s)?(n="",t!=null&&(n=t.replace(Bg,"$&/")+"/"),Ql(s,e,n,"",function(u){return u})):s!=null&&(rp(s)&&(s=kT(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Bg,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",$g(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Pd(i,l);o+=Ql(i,e,n,c,s)}else if(c=RT(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Pd(i,l++),o+=Ql(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Tl(t,e,n){if(t==null)return t;var r=[],s=0;return Ql(t,r,"","",function(i){return e.call(n,i,s++)}),r}function AT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Et={current:null},Yl={transition:null},PT={ReactCurrentDispatcher:Et,ReactCurrentBatchConfig:Yl,ReactCurrentOwner:np};function v_(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:Tl,forEach:function(t,e,n){Tl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Tl(t,function(){e++}),e},toArray:function(t){return Tl(t,function(e){return e})||[]},only:function(t){if(!rp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=$i;se.Fragment=_T;se.Profiler=xT;se.PureComponent=ep;se.StrictMode=wT;se.Suspense=ST;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PT;se.act=v_;se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=h_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=np.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)m_.call(e,c)&&!g_.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:za,type:t.type,key:s,ref:i,props:r,_owner:o}};se.createContext=function(t){return t={$$typeof:IT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ET,_context:t},t.Consumer=t};se.createElement=y_;se.createFactory=function(t){var e=y_.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:TT,render:t}};se.isValidElement=rp;se.lazy=function(t){return{$$typeof:NT,_payload:{_status:-1,_result:t},_init:AT}};se.memo=function(t,e){return{$$typeof:bT,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=Yl.transition;Yl.transition={};try{t()}finally{Yl.transition=e}};se.unstable_act=v_;se.useCallback=function(t,e){return Et.current.useCallback(t,e)};se.useContext=function(t){return Et.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return Et.current.useDeferredValue(t)};se.useEffect=function(t,e){return Et.current.useEffect(t,e)};se.useId=function(){return Et.current.useId()};se.useImperativeHandle=function(t,e,n){return Et.current.useImperativeHandle(t,e,n)};se.useInsertionEffect=function(t,e){return Et.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return Et.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return Et.current.useMemo(t,e)};se.useReducer=function(t,e,n){return Et.current.useReducer(t,e,n)};se.useRef=function(t){return Et.current.useRef(t)};se.useState=function(t){return Et.current.useState(t)};se.useSyncExternalStore=function(t,e,n){return Et.current.useSyncExternalStore(t,e,n)};se.useTransition=function(){return Et.current.useTransition()};se.version="18.3.1";u_.exports=se;var V=u_.exports;const ui=yT(V),DT=gT({__proto__:null,default:ui},[V]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OT=V,jT=Symbol.for("react.element"),LT=Symbol.for("react.fragment"),VT=Object.prototype.hasOwnProperty,MT=OT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FT={key:!0,ref:!0,__self:!0,__source:!0};function __(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)VT.call(e,r)&&!FT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:jT,type:t,key:i,ref:o,props:s,_owner:MT.current}}gu.Fragment=LT;gu.jsx=__;gu.jsxs=__;c_.exports=gu;var d=c_.exports,Nh={},w_={exports:{}},Bt={},x_={exports:{}},E_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,G){var Y=z.length;z.push(G);e:for(;0<Y;){var re=Y-1>>>1,me=z[re];if(0<s(me,G))z[re]=G,z[Y]=me,Y=re;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var G=z[0],Y=z.pop();if(Y!==G){z[0]=Y;e:for(var re=0,me=z.length,Tt=me>>>1;re<Tt;){var tt=2*(re+1)-1,Ht=z[tt],at=tt+1,St=z[at];if(0>s(Ht,Y))at<me&&0>s(St,Ht)?(z[re]=St,z[at]=Y,re=at):(z[re]=Ht,z[tt]=Y,re=tt);else if(at<me&&0>s(St,Y))z[re]=St,z[at]=Y,re=at;else break e}}return G}function s(z,G){var Y=z.sortIndex-G.sortIndex;return Y!==0?Y:z.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,p=null,m=3,x=!1,N=!1,A=!1,k=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(z){for(var G=n(u);G!==null;){if(G.callback===null)r(u);else if(G.startTime<=z)r(u),G.sortIndex=G.expirationTime,e(c,G);else break;G=n(u)}}function R(z){if(A=!1,E(z),!N)if(n(c)!==null)N=!0,Q(P);else{var G=n(u);G!==null&&le(R,G.startTime-z)}}function P(z,G){N=!1,A&&(A=!1,I(y),y=-1),x=!0;var Y=m;try{for(E(G),p=n(c);p!==null&&(!(p.expirationTime>G)||z&&!C());){var re=p.callback;if(typeof re=="function"){p.callback=null,m=p.priorityLevel;var me=re(p.expirationTime<=G);G=t.unstable_now(),typeof me=="function"?p.callback=me:p===n(c)&&r(c),E(G)}else r(c);p=n(c)}if(p!==null)var Tt=!0;else{var tt=n(u);tt!==null&&le(R,tt.startTime-G),Tt=!1}return Tt}finally{p=null,m=Y,x=!1}}var O=!1,_=null,y=-1,T=5,S=-1;function C(){return!(t.unstable_now()-S<T)}function D(){if(_!==null){var z=t.unstable_now();S=z;var G=!0;try{G=_(!0,z)}finally{G?b():(O=!1,_=null)}}else O=!1}var b;if(typeof v=="function")b=function(){v(D)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,he=ce.port2;ce.port1.onmessage=D,b=function(){he.postMessage(null)}}else b=function(){k(D,0)};function Q(z){_=z,O||(O=!0,b())}function le(z,G){y=k(function(){z(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){N||x||(N=!0,Q(P))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(z){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var Y=m;m=G;try{return z()}finally{m=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,G){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Y=m;m=z;try{return G()}finally{m=Y}},t.unstable_scheduleCallback=function(z,G,Y){var re=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?re+Y:re):Y=re,z){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=Y+me,z={id:h++,callback:G,priorityLevel:z,startTime:Y,expirationTime:me,sortIndex:-1},Y>re?(z.sortIndex=Y,e(u,z),n(c)===null&&z===n(u)&&(A?(I(y),y=-1):A=!0,le(R,Y-re))):(z.sortIndex=me,e(c,z),N||x||(N=!0,Q(P))),z},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(z){var G=m;return function(){var Y=m;m=G;try{return z.apply(this,arguments)}finally{m=Y}}}})(E_);x_.exports=E_;var UT=x_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zT=V,$t=UT;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var I_=new Set,ua={};function Os(t,e){bi(t,e),bi(t+"Capture",e)}function bi(t,e){for(ua[t]=e,t=0;t<e.length;t++)I_.add(e[t])}var Wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rh=Object.prototype.hasOwnProperty,$T=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wg={},Hg={};function BT(t){return Rh.call(Hg,t)?!0:Rh.call(Wg,t)?!1:$T.test(t)?Hg[t]=!0:(Wg[t]=!0,!1)}function WT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function HT(t,e,n,r){if(e===null||typeof e>"u"||WT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function It(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ot[t]=new It(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ot[e]=new It(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ot[t]=new It(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ot[t]=new It(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ot[t]=new It(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ot[t]=new It(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ot[t]=new It(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ot[t]=new It(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ot[t]=new It(t,5,!1,t.toLowerCase(),null,!1,!1)});var sp=/[\-:]([a-z])/g;function ip(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(sp,ip);ot[e]=new It(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(sp,ip);ot[e]=new It(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(sp,ip);ot[e]=new It(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ot[t]=new It(t,1,!1,t.toLowerCase(),null,!1,!1)});ot.xlinkHref=new It("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ot[t]=new It(t,1,!1,t.toLowerCase(),null,!0,!0)});function op(t,e,n,r){var s=ot.hasOwnProperty(e)?ot[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(HT(e,n,s,r)&&(n=null),r||s===null?BT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var tr=zT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sl=Symbol.for("react.element"),Js=Symbol.for("react.portal"),Xs=Symbol.for("react.fragment"),ap=Symbol.for("react.strict_mode"),kh=Symbol.for("react.profiler"),T_=Symbol.for("react.provider"),S_=Symbol.for("react.context"),lp=Symbol.for("react.forward_ref"),Ch=Symbol.for("react.suspense"),Ah=Symbol.for("react.suspense_list"),cp=Symbol.for("react.memo"),pr=Symbol.for("react.lazy"),b_=Symbol.for("react.offscreen"),qg=Symbol.iterator;function Io(t){return t===null||typeof t!="object"?null:(t=qg&&t[qg]||t["@@iterator"],typeof t=="function"?t:null)}var be=Object.assign,Dd;function Do(t){if(Dd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Dd=e&&e[1]||""}return`
`+Dd+t}var Od=!1;function jd(t,e){if(!t||Od)return"";Od=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Od=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Do(t):""}function qT(t){switch(t.tag){case 5:return Do(t.type);case 16:return Do("Lazy");case 13:return Do("Suspense");case 19:return Do("SuspenseList");case 0:case 2:case 15:return t=jd(t.type,!1),t;case 11:return t=jd(t.type.render,!1),t;case 1:return t=jd(t.type,!0),t;default:return""}}function Ph(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xs:return"Fragment";case Js:return"Portal";case kh:return"Profiler";case ap:return"StrictMode";case Ch:return"Suspense";case Ah:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case S_:return(t.displayName||"Context")+".Consumer";case T_:return(t._context.displayName||"Context")+".Provider";case lp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case cp:return e=t.displayName||null,e!==null?e:Ph(t.type)||"Memo";case pr:e=t._payload,t=t._init;try{return Ph(t(e))}catch{}}return null}function GT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ph(e);case 8:return e===ap?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $r(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function N_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function KT(t){var e=N_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function bl(t){t._valueTracker||(t._valueTracker=KT(t))}function R_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=N_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function vc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Dh(t,e){var n=e.checked;return be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Gg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=$r(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function k_(t,e){e=e.checked,e!=null&&op(t,"checked",e,!1)}function Oh(t,e){k_(t,e);var n=$r(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?jh(t,e.type,n):e.hasOwnProperty("defaultValue")&&jh(t,e.type,$r(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Kg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function jh(t,e,n){(e!=="number"||vc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Oo=Array.isArray;function di(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+$r(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Lh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Qg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Oo(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:$r(n)}}function C_(t,e){var n=$r(e.value),r=$r(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Yg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function A_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?A_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Nl,P_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Nl=Nl||document.createElement("div"),Nl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Nl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function da(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Bo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},QT=["Webkit","ms","Moz","O"];Object.keys(Bo).forEach(function(t){QT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Bo[e]=Bo[t]})});function D_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Bo.hasOwnProperty(t)&&Bo[t]?(""+e).trim():e+"px"}function O_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=D_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var YT=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mh(t,e){if(e){if(YT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Fh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uh=null;function up(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zh=null,hi=null,fi=null;function Jg(t){if(t=Wa(t)){if(typeof zh!="function")throw Error(U(280));var e=t.stateNode;e&&(e=xu(e),zh(t.stateNode,t.type,e))}}function j_(t){hi?fi?fi.push(t):fi=[t]:hi=t}function L_(){if(hi){var t=hi,e=fi;if(fi=hi=null,Jg(t),e)for(t=0;t<e.length;t++)Jg(e[t])}}function V_(t,e){return t(e)}function M_(){}var Ld=!1;function F_(t,e,n){if(Ld)return t(e,n);Ld=!0;try{return V_(t,e,n)}finally{Ld=!1,(hi!==null||fi!==null)&&(M_(),L_())}}function ha(t,e){var n=t.stateNode;if(n===null)return null;var r=xu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var $h=!1;if(Wn)try{var To={};Object.defineProperty(To,"passive",{get:function(){$h=!0}}),window.addEventListener("test",To,To),window.removeEventListener("test",To,To)}catch{$h=!1}function JT(t,e,n,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Wo=!1,_c=null,wc=!1,Bh=null,XT={onError:function(t){Wo=!0,_c=t}};function ZT(t,e,n,r,s,i,o,l,c){Wo=!1,_c=null,JT.apply(XT,arguments)}function e2(t,e,n,r,s,i,o,l,c){if(ZT.apply(this,arguments),Wo){if(Wo){var u=_c;Wo=!1,_c=null}else throw Error(U(198));wc||(wc=!0,Bh=u)}}function js(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function U_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Xg(t){if(js(t)!==t)throw Error(U(188))}function t2(t){var e=t.alternate;if(!e){if(e=js(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Xg(s),t;if(i===r)return Xg(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function z_(t){return t=t2(t),t!==null?$_(t):null}function $_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=$_(t);if(e!==null)return e;t=t.sibling}return null}var B_=$t.unstable_scheduleCallback,Zg=$t.unstable_cancelCallback,n2=$t.unstable_shouldYield,r2=$t.unstable_requestPaint,Ae=$t.unstable_now,s2=$t.unstable_getCurrentPriorityLevel,dp=$t.unstable_ImmediatePriority,W_=$t.unstable_UserBlockingPriority,xc=$t.unstable_NormalPriority,i2=$t.unstable_LowPriority,H_=$t.unstable_IdlePriority,yu=null,In=null;function o2(t){if(In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(yu,t,void 0,(t.current.flags&128)===128)}catch{}}var dn=Math.clz32?Math.clz32:c2,a2=Math.log,l2=Math.LN2;function c2(t){return t>>>=0,t===0?32:31-(a2(t)/l2|0)|0}var Rl=64,kl=4194304;function jo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ec(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=jo(l):(i&=o,i!==0&&(r=jo(i)))}else o=n&~s,o!==0?r=jo(o):i!==0&&(r=jo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-dn(e),s=1<<n,r|=t[n],e&=~s;return r}function u2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function d2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-dn(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=u2(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Wh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function q_(){var t=Rl;return Rl<<=1,!(Rl&4194240)&&(Rl=64),t}function Vd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function $a(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-dn(e),t[e]=n}function h2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-dn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function hp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-dn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var pe=0;function G_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var K_,fp,Q_,Y_,J_,Hh=!1,Cl=[],br=null,Nr=null,Rr=null,fa=new Map,pa=new Map,gr=[],f2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ey(t,e){switch(t){case"focusin":case"focusout":br=null;break;case"dragenter":case"dragleave":Nr=null;break;case"mouseover":case"mouseout":Rr=null;break;case"pointerover":case"pointerout":fa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":pa.delete(e.pointerId)}}function So(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Wa(e),e!==null&&fp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function p2(t,e,n,r,s){switch(e){case"focusin":return br=So(br,t,e,n,r,s),!0;case"dragenter":return Nr=So(Nr,t,e,n,r,s),!0;case"mouseover":return Rr=So(Rr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return fa.set(i,So(fa.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,pa.set(i,So(pa.get(i)||null,t,e,n,r,s)),!0}return!1}function X_(t){var e=ps(t.target);if(e!==null){var n=js(e);if(n!==null){if(e=n.tag,e===13){if(e=U_(n),e!==null){t.blockedOn=e,J_(t.priority,function(){Q_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Jl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=qh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Uh=r,n.target.dispatchEvent(r),Uh=null}else return e=Wa(n),e!==null&&fp(e),t.blockedOn=n,!1;e.shift()}return!0}function ty(t,e,n){Jl(t)&&n.delete(e)}function m2(){Hh=!1,br!==null&&Jl(br)&&(br=null),Nr!==null&&Jl(Nr)&&(Nr=null),Rr!==null&&Jl(Rr)&&(Rr=null),fa.forEach(ty),pa.forEach(ty)}function bo(t,e){t.blockedOn===e&&(t.blockedOn=null,Hh||(Hh=!0,$t.unstable_scheduleCallback($t.unstable_NormalPriority,m2)))}function ma(t){function e(s){return bo(s,t)}if(0<Cl.length){bo(Cl[0],t);for(var n=1;n<Cl.length;n++){var r=Cl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(br!==null&&bo(br,t),Nr!==null&&bo(Nr,t),Rr!==null&&bo(Rr,t),fa.forEach(e),pa.forEach(e),n=0;n<gr.length;n++)r=gr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<gr.length&&(n=gr[0],n.blockedOn===null);)X_(n),n.blockedOn===null&&gr.shift()}var pi=tr.ReactCurrentBatchConfig,Ic=!0;function g2(t,e,n,r){var s=pe,i=pi.transition;pi.transition=null;try{pe=1,pp(t,e,n,r)}finally{pe=s,pi.transition=i}}function y2(t,e,n,r){var s=pe,i=pi.transition;pi.transition=null;try{pe=4,pp(t,e,n,r)}finally{pe=s,pi.transition=i}}function pp(t,e,n,r){if(Ic){var s=qh(t,e,n,r);if(s===null)Gd(t,e,r,Tc,n),ey(t,r);else if(p2(s,t,e,n,r))r.stopPropagation();else if(ey(t,r),e&4&&-1<f2.indexOf(t)){for(;s!==null;){var i=Wa(s);if(i!==null&&K_(i),i=qh(t,e,n,r),i===null&&Gd(t,e,r,Tc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Gd(t,e,r,null,n)}}var Tc=null;function qh(t,e,n,r){if(Tc=null,t=up(r),t=ps(t),t!==null)if(e=js(t),e===null)t=null;else if(n=e.tag,n===13){if(t=U_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Tc=t,null}function Z_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(s2()){case dp:return 1;case W_:return 4;case xc:case i2:return 16;case H_:return 536870912;default:return 16}default:return 16}}var xr=null,mp=null,Xl=null;function ew(){if(Xl)return Xl;var t,e=mp,n=e.length,r,s="value"in xr?xr.value:xr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Xl=s.slice(t,1<r?1-r:void 0)}function Zl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Al(){return!0}function ny(){return!1}function Wt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Al:ny,this.isPropagationStopped=ny,this}return be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Al)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Al)},persist:function(){},isPersistent:Al}),e}var Bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gp=Wt(Bi),Ba=be({},Bi,{view:0,detail:0}),v2=Wt(Ba),Md,Fd,No,vu=be({},Ba,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==No&&(No&&t.type==="mousemove"?(Md=t.screenX-No.screenX,Fd=t.screenY-No.screenY):Fd=Md=0,No=t),Md)},movementY:function(t){return"movementY"in t?t.movementY:Fd}}),ry=Wt(vu),_2=be({},vu,{dataTransfer:0}),w2=Wt(_2),x2=be({},Ba,{relatedTarget:0}),Ud=Wt(x2),E2=be({},Bi,{animationName:0,elapsedTime:0,pseudoElement:0}),I2=Wt(E2),T2=be({},Bi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),S2=Wt(T2),b2=be({},Bi,{data:0}),sy=Wt(b2),N2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},R2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},k2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function C2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=k2[t])?!!e[t]:!1}function yp(){return C2}var A2=be({},Ba,{key:function(t){if(t.key){var e=N2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Zl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?R2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yp,charCode:function(t){return t.type==="keypress"?Zl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),P2=Wt(A2),D2=be({},vu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),iy=Wt(D2),O2=be({},Ba,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yp}),j2=Wt(O2),L2=be({},Bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),V2=Wt(L2),M2=be({},vu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),F2=Wt(M2),U2=[9,13,27,32],vp=Wn&&"CompositionEvent"in window,Ho=null;Wn&&"documentMode"in document&&(Ho=document.documentMode);var z2=Wn&&"TextEvent"in window&&!Ho,tw=Wn&&(!vp||Ho&&8<Ho&&11>=Ho),oy=" ",ay=!1;function nw(t,e){switch(t){case"keyup":return U2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zs=!1;function $2(t,e){switch(t){case"compositionend":return rw(e);case"keypress":return e.which!==32?null:(ay=!0,oy);case"textInput":return t=e.data,t===oy&&ay?null:t;default:return null}}function B2(t,e){if(Zs)return t==="compositionend"||!vp&&nw(t,e)?(t=ew(),Xl=mp=xr=null,Zs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tw&&e.locale!=="ko"?null:e.data;default:return null}}var W2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ly(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!W2[t.type]:e==="textarea"}function sw(t,e,n,r){j_(r),e=Sc(e,"onChange"),0<e.length&&(n=new gp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var qo=null,ga=null;function H2(t){mw(t,0)}function _u(t){var e=ni(t);if(R_(e))return t}function q2(t,e){if(t==="change")return e}var iw=!1;if(Wn){var zd;if(Wn){var $d="oninput"in document;if(!$d){var cy=document.createElement("div");cy.setAttribute("oninput","return;"),$d=typeof cy.oninput=="function"}zd=$d}else zd=!1;iw=zd&&(!document.documentMode||9<document.documentMode)}function uy(){qo&&(qo.detachEvent("onpropertychange",ow),ga=qo=null)}function ow(t){if(t.propertyName==="value"&&_u(ga)){var e=[];sw(e,ga,t,up(t)),F_(H2,e)}}function G2(t,e,n){t==="focusin"?(uy(),qo=e,ga=n,qo.attachEvent("onpropertychange",ow)):t==="focusout"&&uy()}function K2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _u(ga)}function Q2(t,e){if(t==="click")return _u(e)}function Y2(t,e){if(t==="input"||t==="change")return _u(e)}function J2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var pn=typeof Object.is=="function"?Object.is:J2;function ya(t,e){if(pn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Rh.call(e,s)||!pn(t[s],e[s]))return!1}return!0}function dy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hy(t,e){var n=dy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=dy(n)}}function aw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?aw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function lw(){for(var t=window,e=vc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=vc(t.document)}return e}function _p(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function X2(t){var e=lw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&aw(n.ownerDocument.documentElement,n)){if(r!==null&&_p(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=hy(n,i);var o=hy(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Z2=Wn&&"documentMode"in document&&11>=document.documentMode,ei=null,Gh=null,Go=null,Kh=!1;function fy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kh||ei==null||ei!==vc(r)||(r=ei,"selectionStart"in r&&_p(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Go&&ya(Go,r)||(Go=r,r=Sc(Gh,"onSelect"),0<r.length&&(e=new gp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ei)))}function Pl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ti={animationend:Pl("Animation","AnimationEnd"),animationiteration:Pl("Animation","AnimationIteration"),animationstart:Pl("Animation","AnimationStart"),transitionend:Pl("Transition","TransitionEnd")},Bd={},cw={};Wn&&(cw=document.createElement("div").style,"AnimationEvent"in window||(delete ti.animationend.animation,delete ti.animationiteration.animation,delete ti.animationstart.animation),"TransitionEvent"in window||delete ti.transitionend.transition);function wu(t){if(Bd[t])return Bd[t];if(!ti[t])return t;var e=ti[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in cw)return Bd[t]=e[n];return t}var uw=wu("animationend"),dw=wu("animationiteration"),hw=wu("animationstart"),fw=wu("transitionend"),pw=new Map,py="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jr(t,e){pw.set(t,e),Os(e,[t])}for(var Wd=0;Wd<py.length;Wd++){var Hd=py[Wd],eS=Hd.toLowerCase(),tS=Hd[0].toUpperCase()+Hd.slice(1);Jr(eS,"on"+tS)}Jr(uw,"onAnimationEnd");Jr(dw,"onAnimationIteration");Jr(hw,"onAnimationStart");Jr("dblclick","onDoubleClick");Jr("focusin","onFocus");Jr("focusout","onBlur");Jr(fw,"onTransitionEnd");bi("onMouseEnter",["mouseout","mouseover"]);bi("onMouseLeave",["mouseout","mouseover"]);bi("onPointerEnter",["pointerout","pointerover"]);bi("onPointerLeave",["pointerout","pointerover"]);Os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Os("onBeforeInput",["compositionend","keypress","textInput","paste"]);Os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lo));function my(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,e2(r,e,void 0,t),t.currentTarget=null}function mw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;my(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;my(s,l,u),i=c}}}if(wc)throw t=Bh,wc=!1,Bh=null,t}function xe(t,e){var n=e[Zh];n===void 0&&(n=e[Zh]=new Set);var r=t+"__bubble";n.has(r)||(gw(e,t,2,!1),n.add(r))}function qd(t,e,n){var r=0;e&&(r|=4),gw(n,t,r,e)}var Dl="_reactListening"+Math.random().toString(36).slice(2);function va(t){if(!t[Dl]){t[Dl]=!0,I_.forEach(function(n){n!=="selectionchange"&&(nS.has(n)||qd(n,!1,t),qd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Dl]||(e[Dl]=!0,qd("selectionchange",!1,e))}}function gw(t,e,n,r){switch(Z_(e)){case 1:var s=g2;break;case 4:s=y2;break;default:s=pp}n=s.bind(null,e,n,t),s=void 0,!$h||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Gd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ps(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}F_(function(){var u=i,h=up(n),p=[];e:{var m=pw.get(t);if(m!==void 0){var x=gp,N=t;switch(t){case"keypress":if(Zl(n)===0)break e;case"keydown":case"keyup":x=P2;break;case"focusin":N="focus",x=Ud;break;case"focusout":N="blur",x=Ud;break;case"beforeblur":case"afterblur":x=Ud;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=ry;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=w2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=j2;break;case uw:case dw:case hw:x=I2;break;case fw:x=V2;break;case"scroll":x=v2;break;case"wheel":x=F2;break;case"copy":case"cut":case"paste":x=S2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=iy}var A=(e&4)!==0,k=!A&&t==="scroll",I=A?m!==null?m+"Capture":null:m;A=[];for(var v=u,E;v!==null;){E=v;var R=E.stateNode;if(E.tag===5&&R!==null&&(E=R,I!==null&&(R=ha(v,I),R!=null&&A.push(_a(v,R,E)))),k)break;v=v.return}0<A.length&&(m=new x(m,N,null,n,h),p.push({event:m,listeners:A}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",m&&n!==Uh&&(N=n.relatedTarget||n.fromElement)&&(ps(N)||N[Hn]))break e;if((x||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,x?(N=n.relatedTarget||n.toElement,x=u,N=N?ps(N):null,N!==null&&(k=js(N),N!==k||N.tag!==5&&N.tag!==6)&&(N=null)):(x=null,N=u),x!==N)){if(A=ry,R="onMouseLeave",I="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(A=iy,R="onPointerLeave",I="onPointerEnter",v="pointer"),k=x==null?m:ni(x),E=N==null?m:ni(N),m=new A(R,v+"leave",x,n,h),m.target=k,m.relatedTarget=E,R=null,ps(h)===u&&(A=new A(I,v+"enter",N,n,h),A.target=E,A.relatedTarget=k,R=A),k=R,x&&N)t:{for(A=x,I=N,v=0,E=A;E;E=Ws(E))v++;for(E=0,R=I;R;R=Ws(R))E++;for(;0<v-E;)A=Ws(A),v--;for(;0<E-v;)I=Ws(I),E--;for(;v--;){if(A===I||I!==null&&A===I.alternate)break t;A=Ws(A),I=Ws(I)}A=null}else A=null;x!==null&&gy(p,m,x,A,!1),N!==null&&k!==null&&gy(p,k,N,A,!0)}}e:{if(m=u?ni(u):window,x=m.nodeName&&m.nodeName.toLowerCase(),x==="select"||x==="input"&&m.type==="file")var P=q2;else if(ly(m))if(iw)P=Y2;else{P=K2;var O=G2}else(x=m.nodeName)&&x.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(P=Q2);if(P&&(P=P(t,u))){sw(p,P,n,h);break e}O&&O(t,m,u),t==="focusout"&&(O=m._wrapperState)&&O.controlled&&m.type==="number"&&jh(m,"number",m.value)}switch(O=u?ni(u):window,t){case"focusin":(ly(O)||O.contentEditable==="true")&&(ei=O,Gh=u,Go=null);break;case"focusout":Go=Gh=ei=null;break;case"mousedown":Kh=!0;break;case"contextmenu":case"mouseup":case"dragend":Kh=!1,fy(p,n,h);break;case"selectionchange":if(Z2)break;case"keydown":case"keyup":fy(p,n,h)}var _;if(vp)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Zs?nw(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(tw&&n.locale!=="ko"&&(Zs||y!=="onCompositionStart"?y==="onCompositionEnd"&&Zs&&(_=ew()):(xr=h,mp="value"in xr?xr.value:xr.textContent,Zs=!0)),O=Sc(u,y),0<O.length&&(y=new sy(y,t,null,n,h),p.push({event:y,listeners:O}),_?y.data=_:(_=rw(n),_!==null&&(y.data=_)))),(_=z2?$2(t,n):B2(t,n))&&(u=Sc(u,"onBeforeInput"),0<u.length&&(h=new sy("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:u}),h.data=_))}mw(p,e)})}function _a(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ha(t,n),i!=null&&r.unshift(_a(t,i,s)),i=ha(t,e),i!=null&&r.push(_a(t,i,s))),t=t.return}return r}function Ws(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function gy(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=ha(n,i),c!=null&&o.unshift(_a(n,c,l))):s||(c=ha(n,i),c!=null&&o.push(_a(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var rS=/\r\n?/g,sS=/\u0000|\uFFFD/g;function yy(t){return(typeof t=="string"?t:""+t).replace(rS,`
`).replace(sS,"")}function Ol(t,e,n){if(e=yy(e),yy(t)!==e&&n)throw Error(U(425))}function bc(){}var Qh=null,Yh=null;function Jh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xh=typeof setTimeout=="function"?setTimeout:void 0,iS=typeof clearTimeout=="function"?clearTimeout:void 0,vy=typeof Promise=="function"?Promise:void 0,oS=typeof queueMicrotask=="function"?queueMicrotask:typeof vy<"u"?function(t){return vy.resolve(null).then(t).catch(aS)}:Xh;function aS(t){setTimeout(function(){throw t})}function Kd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ma(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ma(e)}function kr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function _y(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Wi=Math.random().toString(36).slice(2),xn="__reactFiber$"+Wi,wa="__reactProps$"+Wi,Hn="__reactContainer$"+Wi,Zh="__reactEvents$"+Wi,lS="__reactListeners$"+Wi,cS="__reactHandles$"+Wi;function ps(t){var e=t[xn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Hn]||n[xn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=_y(t);t!==null;){if(n=t[xn])return n;t=_y(t)}return e}t=n,n=t.parentNode}return null}function Wa(t){return t=t[xn]||t[Hn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ni(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function xu(t){return t[wa]||null}var ef=[],ri=-1;function Xr(t){return{current:t}}function Ee(t){0>ri||(t.current=ef[ri],ef[ri]=null,ri--)}function _e(t,e){ri++,ef[ri]=t.current,t.current=e}var Br={},mt=Xr(Br),At=Xr(!1),Es=Br;function Ni(t,e){var n=t.type.contextTypes;if(!n)return Br;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Pt(t){return t=t.childContextTypes,t!=null}function Nc(){Ee(At),Ee(mt)}function wy(t,e,n){if(mt.current!==Br)throw Error(U(168));_e(mt,e),_e(At,n)}function yw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,GT(t)||"Unknown",s));return be({},n,r)}function Rc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Br,Es=mt.current,_e(mt,t),_e(At,At.current),!0}function xy(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=yw(t,e,Es),r.__reactInternalMemoizedMergedChildContext=t,Ee(At),Ee(mt),_e(mt,t)):Ee(At),_e(At,n)}var Ln=null,Eu=!1,Qd=!1;function vw(t){Ln===null?Ln=[t]:Ln.push(t)}function uS(t){Eu=!0,vw(t)}function Zr(){if(!Qd&&Ln!==null){Qd=!0;var t=0,e=pe;try{var n=Ln;for(pe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ln=null,Eu=!1}catch(s){throw Ln!==null&&(Ln=Ln.slice(t+1)),B_(dp,Zr),s}finally{pe=e,Qd=!1}}return null}var si=[],ii=0,kc=null,Cc=0,qt=[],Gt=0,Is=null,Mn=1,Fn="";function us(t,e){si[ii++]=Cc,si[ii++]=kc,kc=t,Cc=e}function _w(t,e,n){qt[Gt++]=Mn,qt[Gt++]=Fn,qt[Gt++]=Is,Is=t;var r=Mn;t=Fn;var s=32-dn(r)-1;r&=~(1<<s),n+=1;var i=32-dn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Mn=1<<32-dn(e)+s|n<<s|r,Fn=i+t}else Mn=1<<i|n<<s|r,Fn=t}function wp(t){t.return!==null&&(us(t,1),_w(t,1,0))}function xp(t){for(;t===kc;)kc=si[--ii],si[ii]=null,Cc=si[--ii],si[ii]=null;for(;t===Is;)Is=qt[--Gt],qt[Gt]=null,Fn=qt[--Gt],qt[Gt]=null,Mn=qt[--Gt],qt[Gt]=null}var zt=null,Ft=null,Ie=!1,on=null;function ww(t,e){var n=Kt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ey(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zt=t,Ft=kr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zt=t,Ft=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Is!==null?{id:Mn,overflow:Fn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Kt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,zt=t,Ft=null,!0):!1;default:return!1}}function tf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function nf(t){if(Ie){var e=Ft;if(e){var n=e;if(!Ey(t,e)){if(tf(t))throw Error(U(418));e=kr(n.nextSibling);var r=zt;e&&Ey(t,e)?ww(r,n):(t.flags=t.flags&-4097|2,Ie=!1,zt=t)}}else{if(tf(t))throw Error(U(418));t.flags=t.flags&-4097|2,Ie=!1,zt=t}}}function Iy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zt=t}function jl(t){if(t!==zt)return!1;if(!Ie)return Iy(t),Ie=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Jh(t.type,t.memoizedProps)),e&&(e=Ft)){if(tf(t))throw xw(),Error(U(418));for(;e;)ww(t,e),e=kr(e.nextSibling)}if(Iy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ft=kr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ft=null}}else Ft=zt?kr(t.stateNode.nextSibling):null;return!0}function xw(){for(var t=Ft;t;)t=kr(t.nextSibling)}function Ri(){Ft=zt=null,Ie=!1}function Ep(t){on===null?on=[t]:on.push(t)}var dS=tr.ReactCurrentBatchConfig;function Ro(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Ll(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ty(t){var e=t._init;return e(t._payload)}function Ew(t){function e(I,v){if(t){var E=I.deletions;E===null?(I.deletions=[v],I.flags|=16):E.push(v)}}function n(I,v){if(!t)return null;for(;v!==null;)e(I,v),v=v.sibling;return null}function r(I,v){for(I=new Map;v!==null;)v.key!==null?I.set(v.key,v):I.set(v.index,v),v=v.sibling;return I}function s(I,v){return I=Dr(I,v),I.index=0,I.sibling=null,I}function i(I,v,E){return I.index=E,t?(E=I.alternate,E!==null?(E=E.index,E<v?(I.flags|=2,v):E):(I.flags|=2,v)):(I.flags|=1048576,v)}function o(I){return t&&I.alternate===null&&(I.flags|=2),I}function l(I,v,E,R){return v===null||v.tag!==6?(v=nh(E,I.mode,R),v.return=I,v):(v=s(v,E),v.return=I,v)}function c(I,v,E,R){var P=E.type;return P===Xs?h(I,v,E.props.children,R,E.key):v!==null&&(v.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===pr&&Ty(P)===v.type)?(R=s(v,E.props),R.ref=Ro(I,v,E),R.return=I,R):(R=oc(E.type,E.key,E.props,null,I.mode,R),R.ref=Ro(I,v,E),R.return=I,R)}function u(I,v,E,R){return v===null||v.tag!==4||v.stateNode.containerInfo!==E.containerInfo||v.stateNode.implementation!==E.implementation?(v=rh(E,I.mode,R),v.return=I,v):(v=s(v,E.children||[]),v.return=I,v)}function h(I,v,E,R,P){return v===null||v.tag!==7?(v=_s(E,I.mode,R,P),v.return=I,v):(v=s(v,E),v.return=I,v)}function p(I,v,E){if(typeof v=="string"&&v!==""||typeof v=="number")return v=nh(""+v,I.mode,E),v.return=I,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Sl:return E=oc(v.type,v.key,v.props,null,I.mode,E),E.ref=Ro(I,null,v),E.return=I,E;case Js:return v=rh(v,I.mode,E),v.return=I,v;case pr:var R=v._init;return p(I,R(v._payload),E)}if(Oo(v)||Io(v))return v=_s(v,I.mode,E,null),v.return=I,v;Ll(I,v)}return null}function m(I,v,E,R){var P=v!==null?v.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return P!==null?null:l(I,v,""+E,R);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Sl:return E.key===P?c(I,v,E,R):null;case Js:return E.key===P?u(I,v,E,R):null;case pr:return P=E._init,m(I,v,P(E._payload),R)}if(Oo(E)||Io(E))return P!==null?null:h(I,v,E,R,null);Ll(I,E)}return null}function x(I,v,E,R,P){if(typeof R=="string"&&R!==""||typeof R=="number")return I=I.get(E)||null,l(v,I,""+R,P);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Sl:return I=I.get(R.key===null?E:R.key)||null,c(v,I,R,P);case Js:return I=I.get(R.key===null?E:R.key)||null,u(v,I,R,P);case pr:var O=R._init;return x(I,v,E,O(R._payload),P)}if(Oo(R)||Io(R))return I=I.get(E)||null,h(v,I,R,P,null);Ll(v,R)}return null}function N(I,v,E,R){for(var P=null,O=null,_=v,y=v=0,T=null;_!==null&&y<E.length;y++){_.index>y?(T=_,_=null):T=_.sibling;var S=m(I,_,E[y],R);if(S===null){_===null&&(_=T);break}t&&_&&S.alternate===null&&e(I,_),v=i(S,v,y),O===null?P=S:O.sibling=S,O=S,_=T}if(y===E.length)return n(I,_),Ie&&us(I,y),P;if(_===null){for(;y<E.length;y++)_=p(I,E[y],R),_!==null&&(v=i(_,v,y),O===null?P=_:O.sibling=_,O=_);return Ie&&us(I,y),P}for(_=r(I,_);y<E.length;y++)T=x(_,I,y,E[y],R),T!==null&&(t&&T.alternate!==null&&_.delete(T.key===null?y:T.key),v=i(T,v,y),O===null?P=T:O.sibling=T,O=T);return t&&_.forEach(function(C){return e(I,C)}),Ie&&us(I,y),P}function A(I,v,E,R){var P=Io(E);if(typeof P!="function")throw Error(U(150));if(E=P.call(E),E==null)throw Error(U(151));for(var O=P=null,_=v,y=v=0,T=null,S=E.next();_!==null&&!S.done;y++,S=E.next()){_.index>y?(T=_,_=null):T=_.sibling;var C=m(I,_,S.value,R);if(C===null){_===null&&(_=T);break}t&&_&&C.alternate===null&&e(I,_),v=i(C,v,y),O===null?P=C:O.sibling=C,O=C,_=T}if(S.done)return n(I,_),Ie&&us(I,y),P;if(_===null){for(;!S.done;y++,S=E.next())S=p(I,S.value,R),S!==null&&(v=i(S,v,y),O===null?P=S:O.sibling=S,O=S);return Ie&&us(I,y),P}for(_=r(I,_);!S.done;y++,S=E.next())S=x(_,I,y,S.value,R),S!==null&&(t&&S.alternate!==null&&_.delete(S.key===null?y:S.key),v=i(S,v,y),O===null?P=S:O.sibling=S,O=S);return t&&_.forEach(function(D){return e(I,D)}),Ie&&us(I,y),P}function k(I,v,E,R){if(typeof E=="object"&&E!==null&&E.type===Xs&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Sl:e:{for(var P=E.key,O=v;O!==null;){if(O.key===P){if(P=E.type,P===Xs){if(O.tag===7){n(I,O.sibling),v=s(O,E.props.children),v.return=I,I=v;break e}}else if(O.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===pr&&Ty(P)===O.type){n(I,O.sibling),v=s(O,E.props),v.ref=Ro(I,O,E),v.return=I,I=v;break e}n(I,O);break}else e(I,O);O=O.sibling}E.type===Xs?(v=_s(E.props.children,I.mode,R,E.key),v.return=I,I=v):(R=oc(E.type,E.key,E.props,null,I.mode,R),R.ref=Ro(I,v,E),R.return=I,I=R)}return o(I);case Js:e:{for(O=E.key;v!==null;){if(v.key===O)if(v.tag===4&&v.stateNode.containerInfo===E.containerInfo&&v.stateNode.implementation===E.implementation){n(I,v.sibling),v=s(v,E.children||[]),v.return=I,I=v;break e}else{n(I,v);break}else e(I,v);v=v.sibling}v=rh(E,I.mode,R),v.return=I,I=v}return o(I);case pr:return O=E._init,k(I,v,O(E._payload),R)}if(Oo(E))return N(I,v,E,R);if(Io(E))return A(I,v,E,R);Ll(I,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,v!==null&&v.tag===6?(n(I,v.sibling),v=s(v,E),v.return=I,I=v):(n(I,v),v=nh(E,I.mode,R),v.return=I,I=v),o(I)):n(I,v)}return k}var ki=Ew(!0),Iw=Ew(!1),Ac=Xr(null),Pc=null,oi=null,Ip=null;function Tp(){Ip=oi=Pc=null}function Sp(t){var e=Ac.current;Ee(Ac),t._currentValue=e}function rf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function mi(t,e){Pc=t,Ip=oi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ct=!0),t.firstContext=null)}function Xt(t){var e=t._currentValue;if(Ip!==t)if(t={context:t,memoizedValue:e,next:null},oi===null){if(Pc===null)throw Error(U(308));oi=t,Pc.dependencies={lanes:0,firstContext:t}}else oi=oi.next=t;return e}var ms=null;function bp(t){ms===null?ms=[t]:ms.push(t)}function Tw(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,bp(e)):(n.next=s.next,s.next=n),e.interleaved=n,qn(t,r)}function qn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var mr=!1;function Np(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $n(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Cr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,de&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,qn(t,n)}return s=r.interleaved,s===null?(e.next=e,bp(r)):(e.next=s.next,s.next=e),r.interleaved=e,qn(t,n)}function ec(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hp(t,n)}}function Sy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Dc(t,e,n,r){var s=t.updateQueue;mr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var p=s.baseState;o=0,h=u=c=null,l=i;do{var m=l.lane,x=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=t,A=l;switch(m=e,x=n,A.tag){case 1:if(N=A.payload,typeof N=="function"){p=N.call(x,p,m);break e}p=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=A.payload,m=typeof N=="function"?N.call(x,p,m):N,m==null)break e;p=be({},p,m);break e;case 2:mr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else x={eventTime:x,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=x,c=p):h=h.next=x,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=p),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ss|=o,t.lanes=o,t.memoizedState=p}}function by(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var Ha={},Tn=Xr(Ha),xa=Xr(Ha),Ea=Xr(Ha);function gs(t){if(t===Ha)throw Error(U(174));return t}function Rp(t,e){switch(_e(Ea,e),_e(xa,t),_e(Tn,Ha),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vh(e,t)}Ee(Tn),_e(Tn,e)}function Ci(){Ee(Tn),Ee(xa),Ee(Ea)}function bw(t){gs(Ea.current);var e=gs(Tn.current),n=Vh(e,t.type);e!==n&&(_e(xa,t),_e(Tn,n))}function kp(t){xa.current===t&&(Ee(Tn),Ee(xa))}var Te=Xr(0);function Oc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Yd=[];function Cp(){for(var t=0;t<Yd.length;t++)Yd[t]._workInProgressVersionPrimary=null;Yd.length=0}var tc=tr.ReactCurrentDispatcher,Jd=tr.ReactCurrentBatchConfig,Ts=0,Se=null,ze=null,Ke=null,jc=!1,Ko=!1,Ia=0,hS=0;function ct(){throw Error(U(321))}function Ap(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!pn(t[n],e[n]))return!1;return!0}function Pp(t,e,n,r,s,i){if(Ts=i,Se=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tc.current=t===null||t.memoizedState===null?gS:yS,t=n(r,s),Ko){i=0;do{if(Ko=!1,Ia=0,25<=i)throw Error(U(301));i+=1,Ke=ze=null,e.updateQueue=null,tc.current=vS,t=n(r,s)}while(Ko)}if(tc.current=Lc,e=ze!==null&&ze.next!==null,Ts=0,Ke=ze=Se=null,jc=!1,e)throw Error(U(300));return t}function Dp(){var t=Ia!==0;return Ia=0,t}function _n(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?Se.memoizedState=Ke=t:Ke=Ke.next=t,Ke}function Zt(){if(ze===null){var t=Se.alternate;t=t!==null?t.memoizedState:null}else t=ze.next;var e=Ke===null?Se.memoizedState:Ke.next;if(e!==null)Ke=e,ze=t;else{if(t===null)throw Error(U(310));ze=t,t={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},Ke===null?Se.memoizedState=Ke=t:Ke=Ke.next=t}return Ke}function Ta(t,e){return typeof e=="function"?e(t):e}function Xd(t){var e=Zt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=ze,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var h=u.lane;if((Ts&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var p={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=p,o=r):c=c.next=p,Se.lanes|=h,Ss|=h}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,pn(r,e.memoizedState)||(Ct=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Se.lanes|=i,Ss|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Zd(t){var e=Zt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);pn(i,e.memoizedState)||(Ct=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Nw(){}function Rw(t,e){var n=Se,r=Zt(),s=e(),i=!pn(r.memoizedState,s);if(i&&(r.memoizedState=s,Ct=!0),r=r.queue,Op(Aw.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ke!==null&&Ke.memoizedState.tag&1){if(n.flags|=2048,Sa(9,Cw.bind(null,n,r,s,e),void 0,null),Xe===null)throw Error(U(349));Ts&30||kw(n,e,s)}return s}function kw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Cw(t,e,n,r){e.value=n,e.getSnapshot=r,Pw(e)&&Dw(t)}function Aw(t,e,n){return n(function(){Pw(e)&&Dw(t)})}function Pw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!pn(t,n)}catch{return!0}}function Dw(t){var e=qn(t,1);e!==null&&hn(e,t,1,-1)}function Ny(t){var e=_n();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:t},e.queue=t,t=t.dispatch=mS.bind(null,Se,t),[e.memoizedState,t]}function Sa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ow(){return Zt().memoizedState}function nc(t,e,n,r){var s=_n();Se.flags|=t,s.memoizedState=Sa(1|e,n,void 0,r===void 0?null:r)}function Iu(t,e,n,r){var s=Zt();r=r===void 0?null:r;var i=void 0;if(ze!==null){var o=ze.memoizedState;if(i=o.destroy,r!==null&&Ap(r,o.deps)){s.memoizedState=Sa(e,n,i,r);return}}Se.flags|=t,s.memoizedState=Sa(1|e,n,i,r)}function Ry(t,e){return nc(8390656,8,t,e)}function Op(t,e){return Iu(2048,8,t,e)}function jw(t,e){return Iu(4,2,t,e)}function Lw(t,e){return Iu(4,4,t,e)}function Vw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Mw(t,e,n){return n=n!=null?n.concat([t]):null,Iu(4,4,Vw.bind(null,e,t),n)}function jp(){}function Fw(t,e){var n=Zt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ap(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Uw(t,e){var n=Zt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ap(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function zw(t,e,n){return Ts&21?(pn(n,e)||(n=q_(),Se.lanes|=n,Ss|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ct=!0),t.memoizedState=n)}function fS(t,e){var n=pe;pe=n!==0&&4>n?n:4,t(!0);var r=Jd.transition;Jd.transition={};try{t(!1),e()}finally{pe=n,Jd.transition=r}}function $w(){return Zt().memoizedState}function pS(t,e,n){var r=Pr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Bw(t))Ww(e,n);else if(n=Tw(t,e,n,r),n!==null){var s=wt();hn(n,t,r,s),Hw(n,e,r)}}function mS(t,e,n){var r=Pr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Bw(t))Ww(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,pn(l,o)){var c=e.interleaved;c===null?(s.next=s,bp(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=Tw(t,e,s,r),n!==null&&(s=wt(),hn(n,t,r,s),Hw(n,e,r))}}function Bw(t){var e=t.alternate;return t===Se||e!==null&&e===Se}function Ww(t,e){Ko=jc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Hw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hp(t,n)}}var Lc={readContext:Xt,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},gS={readContext:Xt,useCallback:function(t,e){return _n().memoizedState=[t,e===void 0?null:e],t},useContext:Xt,useEffect:Ry,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,nc(4194308,4,Vw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return nc(4194308,4,t,e)},useInsertionEffect:function(t,e){return nc(4,2,t,e)},useMemo:function(t,e){var n=_n();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=_n();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=pS.bind(null,Se,t),[r.memoizedState,t]},useRef:function(t){var e=_n();return t={current:t},e.memoizedState=t},useState:Ny,useDebugValue:jp,useDeferredValue:function(t){return _n().memoizedState=t},useTransition:function(){var t=Ny(!1),e=t[0];return t=fS.bind(null,t[1]),_n().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Se,s=_n();if(Ie){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Xe===null)throw Error(U(349));Ts&30||kw(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Ry(Aw.bind(null,r,i,t),[t]),r.flags|=2048,Sa(9,Cw.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=_n(),e=Xe.identifierPrefix;if(Ie){var n=Fn,r=Mn;n=(r&~(1<<32-dn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ia++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=hS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},yS={readContext:Xt,useCallback:Fw,useContext:Xt,useEffect:Op,useImperativeHandle:Mw,useInsertionEffect:jw,useLayoutEffect:Lw,useMemo:Uw,useReducer:Xd,useRef:Ow,useState:function(){return Xd(Ta)},useDebugValue:jp,useDeferredValue:function(t){var e=Zt();return zw(e,ze.memoizedState,t)},useTransition:function(){var t=Xd(Ta)[0],e=Zt().memoizedState;return[t,e]},useMutableSource:Nw,useSyncExternalStore:Rw,useId:$w,unstable_isNewReconciler:!1},vS={readContext:Xt,useCallback:Fw,useContext:Xt,useEffect:Op,useImperativeHandle:Mw,useInsertionEffect:jw,useLayoutEffect:Lw,useMemo:Uw,useReducer:Zd,useRef:Ow,useState:function(){return Zd(Ta)},useDebugValue:jp,useDeferredValue:function(t){var e=Zt();return ze===null?e.memoizedState=t:zw(e,ze.memoizedState,t)},useTransition:function(){var t=Zd(Ta)[0],e=Zt().memoizedState;return[t,e]},useMutableSource:Nw,useSyncExternalStore:Rw,useId:$w,unstable_isNewReconciler:!1};function rn(t,e){if(t&&t.defaultProps){e=be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function sf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Tu={isMounted:function(t){return(t=t._reactInternals)?js(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=wt(),s=Pr(t),i=$n(r,s);i.payload=e,n!=null&&(i.callback=n),e=Cr(t,i,s),e!==null&&(hn(e,t,s,r),ec(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=wt(),s=Pr(t),i=$n(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Cr(t,i,s),e!==null&&(hn(e,t,s,r),ec(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=wt(),r=Pr(t),s=$n(n,r);s.tag=2,e!=null&&(s.callback=e),e=Cr(t,s,r),e!==null&&(hn(e,t,r,n),ec(e,t,r))}};function ky(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ya(n,r)||!ya(s,i):!0}function qw(t,e,n){var r=!1,s=Br,i=e.contextType;return typeof i=="object"&&i!==null?i=Xt(i):(s=Pt(e)?Es:mt.current,r=e.contextTypes,i=(r=r!=null)?Ni(t,s):Br),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Tu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Cy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Tu.enqueueReplaceState(e,e.state,null)}function of(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Np(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Xt(i):(i=Pt(e)?Es:mt.current,s.context=Ni(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(sf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Tu.enqueueReplaceState(s,s.state,null),Dc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ai(t,e){try{var n="",r=e;do n+=qT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function eh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function af(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var _S=typeof WeakMap=="function"?WeakMap:Map;function Gw(t,e,n){n=$n(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Mc||(Mc=!0,yf=r),af(t,e)},n}function Kw(t,e,n){n=$n(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){af(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){af(t,e),typeof r!="function"&&(Ar===null?Ar=new Set([this]):Ar.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Ay(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new _S;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=DS.bind(null,t,e,n),e.then(t,t))}function Py(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Dy(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$n(-1,1),e.tag=2,Cr(n,e,1))),n.lanes|=1),t)}var wS=tr.ReactCurrentOwner,Ct=!1;function _t(t,e,n,r){e.child=t===null?Iw(e,null,n,r):ki(e,t.child,n,r)}function Oy(t,e,n,r,s){n=n.render;var i=e.ref;return mi(e,s),r=Pp(t,e,n,r,i,s),n=Dp(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Gn(t,e,s)):(Ie&&n&&wp(e),e.flags|=1,_t(t,e,r,s),e.child)}function jy(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Bp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Qw(t,e,i,r,s)):(t=oc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ya,n(o,r)&&t.ref===e.ref)return Gn(t,e,s)}return e.flags|=1,t=Dr(i,r),t.ref=e.ref,t.return=e,e.child=t}function Qw(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ya(i,r)&&t.ref===e.ref)if(Ct=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ct=!0);else return e.lanes=t.lanes,Gn(t,e,s)}return lf(t,e,n,r,s)}function Yw(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(li,Vt),Vt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_e(li,Vt),Vt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,_e(li,Vt),Vt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,_e(li,Vt),Vt|=r;return _t(t,e,s,n),e.child}function Jw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function lf(t,e,n,r,s){var i=Pt(n)?Es:mt.current;return i=Ni(e,i),mi(e,s),n=Pp(t,e,n,r,i,s),r=Dp(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Gn(t,e,s)):(Ie&&r&&wp(e),e.flags|=1,_t(t,e,n,s),e.child)}function Ly(t,e,n,r,s){if(Pt(n)){var i=!0;Rc(e)}else i=!1;if(mi(e,s),e.stateNode===null)rc(t,e),qw(e,n,r),of(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Xt(u):(u=Pt(n)?Es:mt.current,u=Ni(e,u));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Cy(e,o,r,u),mr=!1;var m=e.memoizedState;o.state=m,Dc(e,r,o,s),c=e.memoizedState,l!==r||m!==c||At.current||mr?(typeof h=="function"&&(sf(e,n,h,r),c=e.memoizedState),(l=mr||ky(e,n,l,r,m,c,u))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Sw(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:rn(e.type,l),o.props=u,p=e.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Xt(c):(c=Pt(n)?Es:mt.current,c=Ni(e,c));var x=n.getDerivedStateFromProps;(h=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||m!==c)&&Cy(e,o,r,c),mr=!1,m=e.memoizedState,o.state=m,Dc(e,r,o,s);var N=e.memoizedState;l!==p||m!==N||At.current||mr?(typeof x=="function"&&(sf(e,n,x,r),N=e.memoizedState),(u=mr||ky(e,n,u,r,m,N,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return cf(t,e,n,r,i,s)}function cf(t,e,n,r,s,i){Jw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&xy(e,n,!1),Gn(t,e,i);r=e.stateNode,wS.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ki(e,t.child,null,i),e.child=ki(e,null,l,i)):_t(t,e,l,i),e.memoizedState=r.state,s&&xy(e,n,!0),e.child}function Xw(t){var e=t.stateNode;e.pendingContext?wy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&wy(t,e.context,!1),Rp(t,e.containerInfo)}function Vy(t,e,n,r,s){return Ri(),Ep(s),e.flags|=256,_t(t,e,n,r),e.child}var uf={dehydrated:null,treeContext:null,retryLane:0};function df(t){return{baseLanes:t,cachePool:null,transitions:null}}function Zw(t,e,n){var r=e.pendingProps,s=Te.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),_e(Te,s&1),t===null)return nf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Nu(o,r,0,null),t=_s(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=df(n),e.memoizedState=uf,t):Lp(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return xS(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Dr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Dr(l,i):(i=_s(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?df(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=uf,r}return i=t.child,t=i.sibling,r=Dr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Lp(t,e){return e=Nu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vl(t,e,n,r){return r!==null&&Ep(r),ki(e,t.child,null,n),t=Lp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xS(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=eh(Error(U(422))),Vl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Nu({mode:"visible",children:r.children},s,0,null),i=_s(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ki(e,t.child,null,o),e.child.memoizedState=df(o),e.memoizedState=uf,i);if(!(e.mode&1))return Vl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(U(419)),r=eh(i,r,void 0),Vl(t,e,o,r)}if(l=(o&t.childLanes)!==0,Ct||l){if(r=Xe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,qn(t,s),hn(r,t,s,-1))}return $p(),r=eh(Error(U(421))),Vl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=OS.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ft=kr(s.nextSibling),zt=e,Ie=!0,on=null,t!==null&&(qt[Gt++]=Mn,qt[Gt++]=Fn,qt[Gt++]=Is,Mn=t.id,Fn=t.overflow,Is=e),e=Lp(e,r.children),e.flags|=4096,e)}function My(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),rf(t.return,e,n)}function th(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function e1(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(_t(t,e,r.children,n),r=Te.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&My(t,n,e);else if(t.tag===19)My(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(_e(Te,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Oc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),th(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Oc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}th(e,!0,n,null,i);break;case"together":th(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function rc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Gn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ss|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Dr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Dr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ES(t,e,n){switch(e.tag){case 3:Xw(e),Ri();break;case 5:bw(e);break;case 1:Pt(e.type)&&Rc(e);break;case 4:Rp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;_e(Ac,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(_e(Te,Te.current&1),e.flags|=128,null):n&e.child.childLanes?Zw(t,e,n):(_e(Te,Te.current&1),t=Gn(t,e,n),t!==null?t.sibling:null);_e(Te,Te.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return e1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),_e(Te,Te.current),r)break;return null;case 22:case 23:return e.lanes=0,Yw(t,e,n)}return Gn(t,e,n)}var t1,hf,n1,r1;t1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};hf=function(){};n1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,gs(Tn.current);var i=null;switch(n){case"input":s=Dh(t,s),r=Dh(t,r),i=[];break;case"select":s=be({},s,{value:void 0}),r=be({},r,{value:void 0}),i=[];break;case"textarea":s=Lh(t,s),r=Lh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=bc)}Mh(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ua.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ua.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&xe("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};r1=function(t,e,n,r){n!==r&&(e.flags|=4)};function ko(t,e){if(!Ie)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function IS(t,e,n){var r=e.pendingProps;switch(xp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(e),null;case 1:return Pt(e.type)&&Nc(),ut(e),null;case 3:return r=e.stateNode,Ci(),Ee(At),Ee(mt),Cp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(jl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,on!==null&&(wf(on),on=null))),hf(t,e),ut(e),null;case 5:kp(e);var s=gs(Ea.current);if(n=e.type,t!==null&&e.stateNode!=null)n1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return ut(e),null}if(t=gs(Tn.current),jl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[xn]=e,r[wa]=i,t=(e.mode&1)!==0,n){case"dialog":xe("cancel",r),xe("close",r);break;case"iframe":case"object":case"embed":xe("load",r);break;case"video":case"audio":for(s=0;s<Lo.length;s++)xe(Lo[s],r);break;case"source":xe("error",r);break;case"img":case"image":case"link":xe("error",r),xe("load",r);break;case"details":xe("toggle",r);break;case"input":Gg(r,i),xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},xe("invalid",r);break;case"textarea":Qg(r,i),xe("invalid",r)}Mh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ol(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ol(r.textContent,l,t),s=["children",""+l]):ua.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&xe("scroll",r)}switch(n){case"input":bl(r),Kg(r,i,!0);break;case"textarea":bl(r),Yg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=bc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=A_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[xn]=e,t[wa]=r,t1(t,e,!1,!1),e.stateNode=t;e:{switch(o=Fh(n,r),n){case"dialog":xe("cancel",t),xe("close",t),s=r;break;case"iframe":case"object":case"embed":xe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Lo.length;s++)xe(Lo[s],t);s=r;break;case"source":xe("error",t),s=r;break;case"img":case"image":case"link":xe("error",t),xe("load",t),s=r;break;case"details":xe("toggle",t),s=r;break;case"input":Gg(t,r),s=Dh(t,r),xe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=be({},r,{value:void 0}),xe("invalid",t);break;case"textarea":Qg(t,r),s=Lh(t,r),xe("invalid",t);break;default:s=r}Mh(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?O_(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&P_(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&da(t,c):typeof c=="number"&&da(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ua.hasOwnProperty(i)?c!=null&&i==="onScroll"&&xe("scroll",t):c!=null&&op(t,i,c,o))}switch(n){case"input":bl(t),Kg(t,r,!1);break;case"textarea":bl(t),Yg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+$r(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?di(t,!!r.multiple,i,!1):r.defaultValue!=null&&di(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=bc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ut(e),null;case 6:if(t&&e.stateNode!=null)r1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=gs(Ea.current),gs(Tn.current),jl(e)){if(r=e.stateNode,n=e.memoizedProps,r[xn]=e,(i=r.nodeValue!==n)&&(t=zt,t!==null))switch(t.tag){case 3:Ol(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ol(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xn]=e,e.stateNode=r}return ut(e),null;case 13:if(Ee(Te),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ie&&Ft!==null&&e.mode&1&&!(e.flags&128))xw(),Ri(),e.flags|=98560,i=!1;else if(i=jl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[xn]=e}else Ri(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ut(e),i=!1}else on!==null&&(wf(on),on=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Te.current&1?$e===0&&($e=3):$p())),e.updateQueue!==null&&(e.flags|=4),ut(e),null);case 4:return Ci(),hf(t,e),t===null&&va(e.stateNode.containerInfo),ut(e),null;case 10:return Sp(e.type._context),ut(e),null;case 17:return Pt(e.type)&&Nc(),ut(e),null;case 19:if(Ee(Te),i=e.memoizedState,i===null)return ut(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ko(i,!1);else{if($e!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Oc(t),o!==null){for(e.flags|=128,ko(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _e(Te,Te.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ae()>Pi&&(e.flags|=128,r=!0,ko(i,!1),e.lanes=4194304)}else{if(!r)if(t=Oc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ko(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ie)return ut(e),null}else 2*Ae()-i.renderingStartTime>Pi&&n!==1073741824&&(e.flags|=128,r=!0,ko(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ae(),e.sibling=null,n=Te.current,_e(Te,r?n&1|2:n&1),e):(ut(e),null);case 22:case 23:return zp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Vt&1073741824&&(ut(e),e.subtreeFlags&6&&(e.flags|=8192)):ut(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function TS(t,e){switch(xp(e),e.tag){case 1:return Pt(e.type)&&Nc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ci(),Ee(At),Ee(mt),Cp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return kp(e),null;case 13:if(Ee(Te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Ri()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ee(Te),null;case 4:return Ci(),null;case 10:return Sp(e.type._context),null;case 22:case 23:return zp(),null;case 24:return null;default:return null}}var Ml=!1,ft=!1,SS=typeof WeakSet=="function"?WeakSet:Set,q=null;function ai(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ke(t,e,r)}else n.current=null}function ff(t,e,n){try{n()}catch(r){ke(t,e,r)}}var Fy=!1;function bS(t,e){if(Qh=Ic,t=lw(),_p(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,p=t,m=null;t:for(;;){for(var x;p!==n||s!==0&&p.nodeType!==3||(l=o+s),p!==i||r!==0&&p.nodeType!==3||(c=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(x=p.firstChild)!==null;)m=p,p=x;for(;;){if(p===t)break t;if(m===n&&++u===s&&(l=o),m===i&&++h===r&&(c=o),(x=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=x}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yh={focusedElem:t,selectionRange:n},Ic=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var A=N.memoizedProps,k=N.memoizedState,I=e.stateNode,v=I.getSnapshotBeforeUpdate(e.elementType===e.type?A:rn(e.type,A),k);I.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(R){ke(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return N=Fy,Fy=!1,N}function Qo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&ff(e,n,i)}s=s.next}while(s!==r)}}function Su(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function pf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function s1(t){var e=t.alternate;e!==null&&(t.alternate=null,s1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xn],delete e[wa],delete e[Zh],delete e[lS],delete e[cS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function i1(t){return t.tag===5||t.tag===3||t.tag===4}function Uy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||i1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=bc));else if(r!==4&&(t=t.child,t!==null))for(mf(t,e,n),t=t.sibling;t!==null;)mf(t,e,n),t=t.sibling}function gf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(gf(t,e,n),t=t.sibling;t!==null;)gf(t,e,n),t=t.sibling}var nt=null,sn=!1;function hr(t,e,n){for(n=n.child;n!==null;)o1(t,e,n),n=n.sibling}function o1(t,e,n){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(yu,n)}catch{}switch(n.tag){case 5:ft||ai(n,e);case 6:var r=nt,s=sn;nt=null,hr(t,e,n),nt=r,sn=s,nt!==null&&(sn?(t=nt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):nt.removeChild(n.stateNode));break;case 18:nt!==null&&(sn?(t=nt,n=n.stateNode,t.nodeType===8?Kd(t.parentNode,n):t.nodeType===1&&Kd(t,n),ma(t)):Kd(nt,n.stateNode));break;case 4:r=nt,s=sn,nt=n.stateNode.containerInfo,sn=!0,hr(t,e,n),nt=r,sn=s;break;case 0:case 11:case 14:case 15:if(!ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ff(n,e,o),s=s.next}while(s!==r)}hr(t,e,n);break;case 1:if(!ft&&(ai(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ke(n,e,l)}hr(t,e,n);break;case 21:hr(t,e,n);break;case 22:n.mode&1?(ft=(r=ft)||n.memoizedState!==null,hr(t,e,n),ft=r):hr(t,e,n);break;default:hr(t,e,n)}}function zy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new SS),e.forEach(function(r){var s=jS.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function nn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:nt=l.stateNode,sn=!1;break e;case 3:nt=l.stateNode.containerInfo,sn=!0;break e;case 4:nt=l.stateNode.containerInfo,sn=!0;break e}l=l.return}if(nt===null)throw Error(U(160));o1(i,o,s),nt=null,sn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ke(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)a1(e,t),e=e.sibling}function a1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(nn(e,t),vn(t),r&4){try{Qo(3,t,t.return),Su(3,t)}catch(A){ke(t,t.return,A)}try{Qo(5,t,t.return)}catch(A){ke(t,t.return,A)}}break;case 1:nn(e,t),vn(t),r&512&&n!==null&&ai(n,n.return);break;case 5:if(nn(e,t),vn(t),r&512&&n!==null&&ai(n,n.return),t.flags&32){var s=t.stateNode;try{da(s,"")}catch(A){ke(t,t.return,A)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&k_(s,i),Fh(l,o);var u=Fh(l,i);for(o=0;o<c.length;o+=2){var h=c[o],p=c[o+1];h==="style"?O_(s,p):h==="dangerouslySetInnerHTML"?P_(s,p):h==="children"?da(s,p):op(s,h,p,u)}switch(l){case"input":Oh(s,i);break;case"textarea":C_(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?di(s,!!i.multiple,x,!1):m!==!!i.multiple&&(i.defaultValue!=null?di(s,!!i.multiple,i.defaultValue,!0):di(s,!!i.multiple,i.multiple?[]:"",!1))}s[wa]=i}catch(A){ke(t,t.return,A)}}break;case 6:if(nn(e,t),vn(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(A){ke(t,t.return,A)}}break;case 3:if(nn(e,t),vn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ma(e.containerInfo)}catch(A){ke(t,t.return,A)}break;case 4:nn(e,t),vn(t);break;case 13:nn(e,t),vn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Fp=Ae())),r&4&&zy(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(ft=(u=ft)||h,nn(e,t),ft=u):nn(e,t),vn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(q=t,h=t.child;h!==null;){for(p=q=h;q!==null;){switch(m=q,x=m.child,m.tag){case 0:case 11:case 14:case 15:Qo(4,m,m.return);break;case 1:ai(m,m.return);var N=m.stateNode;if(typeof N.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(A){ke(r,n,A)}}break;case 5:ai(m,m.return);break;case 22:if(m.memoizedState!==null){By(p);continue}}x!==null?(x.return=m,q=x):By(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{s=p.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=D_("display",o))}catch(A){ke(t,t.return,A)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(A){ke(t,t.return,A)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:nn(e,t),vn(t),r&4&&zy(t);break;case 21:break;default:nn(e,t),vn(t)}}function vn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(i1(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(da(s,""),r.flags&=-33);var i=Uy(t);gf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Uy(t);mf(t,l,o);break;default:throw Error(U(161))}}catch(c){ke(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function NS(t,e,n){q=t,l1(t)}function l1(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var s=q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ml;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||ft;l=Ml;var u=ft;if(Ml=o,(ft=c)&&!u)for(q=s;q!==null;)o=q,c=o.child,o.tag===22&&o.memoizedState!==null?Wy(s):c!==null?(c.return=o,q=c):Wy(s);for(;i!==null;)q=i,l1(i),i=i.sibling;q=s,Ml=l,ft=u}$y(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,q=i):$y(t)}}function $y(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ft||Su(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ft)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:rn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&by(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}by(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&ma(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}ft||e.flags&512&&pf(e)}catch(m){ke(e,e.return,m)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function By(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function Wy(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Su(4,e)}catch(c){ke(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){ke(e,s,c)}}var i=e.return;try{pf(e)}catch(c){ke(e,i,c)}break;case 5:var o=e.return;try{pf(e)}catch(c){ke(e,o,c)}}}catch(c){ke(e,e.return,c)}if(e===t){q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,q=l;break}q=e.return}}var RS=Math.ceil,Vc=tr.ReactCurrentDispatcher,Vp=tr.ReactCurrentOwner,Qt=tr.ReactCurrentBatchConfig,de=0,Xe=null,Le=null,it=0,Vt=0,li=Xr(0),$e=0,ba=null,Ss=0,bu=0,Mp=0,Yo=null,Rt=null,Fp=0,Pi=1/0,jn=null,Mc=!1,yf=null,Ar=null,Fl=!1,Er=null,Fc=0,Jo=0,vf=null,sc=-1,ic=0;function wt(){return de&6?Ae():sc!==-1?sc:sc=Ae()}function Pr(t){return t.mode&1?de&2&&it!==0?it&-it:dS.transition!==null?(ic===0&&(ic=q_()),ic):(t=pe,t!==0||(t=window.event,t=t===void 0?16:Z_(t.type)),t):1}function hn(t,e,n,r){if(50<Jo)throw Jo=0,vf=null,Error(U(185));$a(t,n,r),(!(de&2)||t!==Xe)&&(t===Xe&&(!(de&2)&&(bu|=n),$e===4&&yr(t,it)),Dt(t,r),n===1&&de===0&&!(e.mode&1)&&(Pi=Ae()+500,Eu&&Zr()))}function Dt(t,e){var n=t.callbackNode;d2(t,e);var r=Ec(t,t===Xe?it:0);if(r===0)n!==null&&Zg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Zg(n),e===1)t.tag===0?uS(Hy.bind(null,t)):vw(Hy.bind(null,t)),oS(function(){!(de&6)&&Zr()}),n=null;else{switch(G_(r)){case 1:n=dp;break;case 4:n=W_;break;case 16:n=xc;break;case 536870912:n=H_;break;default:n=xc}n=g1(n,c1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function c1(t,e){if(sc=-1,ic=0,de&6)throw Error(U(327));var n=t.callbackNode;if(gi()&&t.callbackNode!==n)return null;var r=Ec(t,t===Xe?it:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Uc(t,r);else{e=r;var s=de;de|=2;var i=d1();(Xe!==t||it!==e)&&(jn=null,Pi=Ae()+500,vs(t,e));do try{AS();break}catch(l){u1(t,l)}while(!0);Tp(),Vc.current=i,de=s,Le!==null?e=0:(Xe=null,it=0,e=$e)}if(e!==0){if(e===2&&(s=Wh(t),s!==0&&(r=s,e=_f(t,s))),e===1)throw n=ba,vs(t,0),yr(t,r),Dt(t,Ae()),n;if(e===6)yr(t,r);else{if(s=t.current.alternate,!(r&30)&&!kS(s)&&(e=Uc(t,r),e===2&&(i=Wh(t),i!==0&&(r=i,e=_f(t,i))),e===1))throw n=ba,vs(t,0),yr(t,r),Dt(t,Ae()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:ds(t,Rt,jn);break;case 3:if(yr(t,r),(r&130023424)===r&&(e=Fp+500-Ae(),10<e)){if(Ec(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){wt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Xh(ds.bind(null,t,Rt,jn),e);break}ds(t,Rt,jn);break;case 4:if(yr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-dn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ae()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*RS(r/1960))-r,10<r){t.timeoutHandle=Xh(ds.bind(null,t,Rt,jn),r);break}ds(t,Rt,jn);break;case 5:ds(t,Rt,jn);break;default:throw Error(U(329))}}}return Dt(t,Ae()),t.callbackNode===n?c1.bind(null,t):null}function _f(t,e){var n=Yo;return t.current.memoizedState.isDehydrated&&(vs(t,e).flags|=256),t=Uc(t,e),t!==2&&(e=Rt,Rt=n,e!==null&&wf(e)),t}function wf(t){Rt===null?Rt=t:Rt.push.apply(Rt,t)}function kS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!pn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function yr(t,e){for(e&=~Mp,e&=~bu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-dn(e),r=1<<n;t[n]=-1,e&=~r}}function Hy(t){if(de&6)throw Error(U(327));gi();var e=Ec(t,0);if(!(e&1))return Dt(t,Ae()),null;var n=Uc(t,e);if(t.tag!==0&&n===2){var r=Wh(t);r!==0&&(e=r,n=_f(t,r))}if(n===1)throw n=ba,vs(t,0),yr(t,e),Dt(t,Ae()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ds(t,Rt,jn),Dt(t,Ae()),null}function Up(t,e){var n=de;de|=1;try{return t(e)}finally{de=n,de===0&&(Pi=Ae()+500,Eu&&Zr())}}function bs(t){Er!==null&&Er.tag===0&&!(de&6)&&gi();var e=de;de|=1;var n=Qt.transition,r=pe;try{if(Qt.transition=null,pe=1,t)return t()}finally{pe=r,Qt.transition=n,de=e,!(de&6)&&Zr()}}function zp(){Vt=li.current,Ee(li)}function vs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,iS(n)),Le!==null)for(n=Le.return;n!==null;){var r=n;switch(xp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Nc();break;case 3:Ci(),Ee(At),Ee(mt),Cp();break;case 5:kp(r);break;case 4:Ci();break;case 13:Ee(Te);break;case 19:Ee(Te);break;case 10:Sp(r.type._context);break;case 22:case 23:zp()}n=n.return}if(Xe=t,Le=t=Dr(t.current,null),it=Vt=e,$e=0,ba=null,Mp=bu=Ss=0,Rt=Yo=null,ms!==null){for(e=0;e<ms.length;e++)if(n=ms[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ms=null}return t}function u1(t,e){do{var n=Le;try{if(Tp(),tc.current=Lc,jc){for(var r=Se.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}jc=!1}if(Ts=0,Ke=ze=Se=null,Ko=!1,Ia=0,Vp.current=null,n===null||n.return===null){$e=1,ba=e,Le=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=it,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var x=Py(o);if(x!==null){x.flags&=-257,Dy(x,o,l,i,e),x.mode&1&&Ay(i,u,e),e=x,c=u;var N=e.updateQueue;if(N===null){var A=new Set;A.add(c),e.updateQueue=A}else N.add(c);break e}else{if(!(e&1)){Ay(i,u,e),$p();break e}c=Error(U(426))}}else if(Ie&&l.mode&1){var k=Py(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Dy(k,o,l,i,e),Ep(Ai(c,l));break e}}i=c=Ai(c,l),$e!==4&&($e=2),Yo===null?Yo=[i]:Yo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var I=Gw(i,c,e);Sy(i,I);break e;case 1:l=c;var v=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Ar===null||!Ar.has(E)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=Kw(i,l,e);Sy(i,R);break e}}i=i.return}while(i!==null)}f1(n)}catch(P){e=P,Le===n&&n!==null&&(Le=n=n.return);continue}break}while(!0)}function d1(){var t=Vc.current;return Vc.current=Lc,t===null?Lc:t}function $p(){($e===0||$e===3||$e===2)&&($e=4),Xe===null||!(Ss&268435455)&&!(bu&268435455)||yr(Xe,it)}function Uc(t,e){var n=de;de|=2;var r=d1();(Xe!==t||it!==e)&&(jn=null,vs(t,e));do try{CS();break}catch(s){u1(t,s)}while(!0);if(Tp(),de=n,Vc.current=r,Le!==null)throw Error(U(261));return Xe=null,it=0,$e}function CS(){for(;Le!==null;)h1(Le)}function AS(){for(;Le!==null&&!n2();)h1(Le)}function h1(t){var e=m1(t.alternate,t,Vt);t.memoizedProps=t.pendingProps,e===null?f1(t):Le=e,Vp.current=null}function f1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=TS(n,e),n!==null){n.flags&=32767,Le=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{$e=6,Le=null;return}}else if(n=IS(n,e,Vt),n!==null){Le=n;return}if(e=e.sibling,e!==null){Le=e;return}Le=e=t}while(e!==null);$e===0&&($e=5)}function ds(t,e,n){var r=pe,s=Qt.transition;try{Qt.transition=null,pe=1,PS(t,e,n,r)}finally{Qt.transition=s,pe=r}return null}function PS(t,e,n,r){do gi();while(Er!==null);if(de&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(h2(t,i),t===Xe&&(Le=Xe=null,it=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fl||(Fl=!0,g1(xc,function(){return gi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Qt.transition,Qt.transition=null;var o=pe;pe=1;var l=de;de|=4,Vp.current=null,bS(t,n),a1(n,t),X2(Yh),Ic=!!Qh,Yh=Qh=null,t.current=n,NS(n),r2(),de=l,pe=o,Qt.transition=i}else t.current=n;if(Fl&&(Fl=!1,Er=t,Fc=s),i=t.pendingLanes,i===0&&(Ar=null),o2(n.stateNode),Dt(t,Ae()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Mc)throw Mc=!1,t=yf,yf=null,t;return Fc&1&&t.tag!==0&&gi(),i=t.pendingLanes,i&1?t===vf?Jo++:(Jo=0,vf=t):Jo=0,Zr(),null}function gi(){if(Er!==null){var t=G_(Fc),e=Qt.transition,n=pe;try{if(Qt.transition=null,pe=16>t?16:t,Er===null)var r=!1;else{if(t=Er,Er=null,Fc=0,de&6)throw Error(U(331));var s=de;for(de|=4,q=t.current;q!==null;){var i=q,o=i.child;if(q.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(q=u;q!==null;){var h=q;switch(h.tag){case 0:case 11:case 15:Qo(8,h,i)}var p=h.child;if(p!==null)p.return=h,q=p;else for(;q!==null;){h=q;var m=h.sibling,x=h.return;if(s1(h),h===u){q=null;break}if(m!==null){m.return=x,q=m;break}q=x}}}var N=i.alternate;if(N!==null){var A=N.child;if(A!==null){N.child=null;do{var k=A.sibling;A.sibling=null,A=k}while(A!==null)}}q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,q=o;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Qo(9,i,i.return)}var I=i.sibling;if(I!==null){I.return=i.return,q=I;break e}q=i.return}}var v=t.current;for(q=v;q!==null;){o=q;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,q=E;else e:for(o=v;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Su(9,l)}}catch(P){ke(l,l.return,P)}if(l===o){q=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,q=R;break e}q=l.return}}if(de=s,Zr(),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(yu,t)}catch{}r=!0}return r}finally{pe=n,Qt.transition=e}}return!1}function qy(t,e,n){e=Ai(n,e),e=Gw(t,e,1),t=Cr(t,e,1),e=wt(),t!==null&&($a(t,1,e),Dt(t,e))}function ke(t,e,n){if(t.tag===3)qy(t,t,n);else for(;e!==null;){if(e.tag===3){qy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ar===null||!Ar.has(r))){t=Ai(n,t),t=Kw(e,t,1),e=Cr(e,t,1),t=wt(),e!==null&&($a(e,1,t),Dt(e,t));break}}e=e.return}}function DS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=wt(),t.pingedLanes|=t.suspendedLanes&n,Xe===t&&(it&n)===n&&($e===4||$e===3&&(it&130023424)===it&&500>Ae()-Fp?vs(t,0):Mp|=n),Dt(t,e)}function p1(t,e){e===0&&(t.mode&1?(e=kl,kl<<=1,!(kl&130023424)&&(kl=4194304)):e=1);var n=wt();t=qn(t,e),t!==null&&($a(t,e,n),Dt(t,n))}function OS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),p1(t,n)}function jS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),p1(t,n)}var m1;m1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||At.current)Ct=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ct=!1,ES(t,e,n);Ct=!!(t.flags&131072)}else Ct=!1,Ie&&e.flags&1048576&&_w(e,Cc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;rc(t,e),t=e.pendingProps;var s=Ni(e,mt.current);mi(e,n),s=Pp(null,e,r,t,s,n);var i=Dp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pt(r)?(i=!0,Rc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Np(e),s.updater=Tu,e.stateNode=s,s._reactInternals=e,of(e,r,t,n),e=cf(null,e,r,!0,i,n)):(e.tag=0,Ie&&i&&wp(e),_t(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(rc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=VS(r),t=rn(r,t),s){case 0:e=lf(null,e,r,t,n);break e;case 1:e=Ly(null,e,r,t,n);break e;case 11:e=Oy(null,e,r,t,n);break e;case 14:e=jy(null,e,r,rn(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rn(r,s),lf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rn(r,s),Ly(t,e,r,s,n);case 3:e:{if(Xw(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Sw(t,e),Dc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ai(Error(U(423)),e),e=Vy(t,e,r,n,s);break e}else if(r!==s){s=Ai(Error(U(424)),e),e=Vy(t,e,r,n,s);break e}else for(Ft=kr(e.stateNode.containerInfo.firstChild),zt=e,Ie=!0,on=null,n=Iw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ri(),r===s){e=Gn(t,e,n);break e}_t(t,e,r,n)}e=e.child}return e;case 5:return bw(e),t===null&&nf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Jh(r,s)?o=null:i!==null&&Jh(r,i)&&(e.flags|=32),Jw(t,e),_t(t,e,o,n),e.child;case 6:return t===null&&nf(e),null;case 13:return Zw(t,e,n);case 4:return Rp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ki(e,null,r,n):_t(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rn(r,s),Oy(t,e,r,s,n);case 7:return _t(t,e,e.pendingProps,n),e.child;case 8:return _t(t,e,e.pendingProps.children,n),e.child;case 12:return _t(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,_e(Ac,r._currentValue),r._currentValue=o,i!==null)if(pn(i.value,o)){if(i.children===s.children&&!At.current){e=Gn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=$n(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),rf(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),rf(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}_t(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,mi(e,n),s=Xt(s),r=r(s),e.flags|=1,_t(t,e,r,n),e.child;case 14:return r=e.type,s=rn(r,e.pendingProps),s=rn(r.type,s),jy(t,e,r,s,n);case 15:return Qw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rn(r,s),rc(t,e),e.tag=1,Pt(r)?(t=!0,Rc(e)):t=!1,mi(e,n),qw(e,r,s),of(e,r,s,n),cf(null,e,r,!0,t,n);case 19:return e1(t,e,n);case 22:return Yw(t,e,n)}throw Error(U(156,e.tag))};function g1(t,e){return B_(t,e)}function LS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(t,e,n,r){return new LS(t,e,n,r)}function Bp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function VS(t){if(typeof t=="function")return Bp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===lp)return 11;if(t===cp)return 14}return 2}function Dr(t,e){var n=t.alternate;return n===null?(n=Kt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function oc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Bp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Xs:return _s(n.children,s,i,e);case ap:o=8,s|=8;break;case kh:return t=Kt(12,n,e,s|2),t.elementType=kh,t.lanes=i,t;case Ch:return t=Kt(13,n,e,s),t.elementType=Ch,t.lanes=i,t;case Ah:return t=Kt(19,n,e,s),t.elementType=Ah,t.lanes=i,t;case b_:return Nu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case T_:o=10;break e;case S_:o=9;break e;case lp:o=11;break e;case cp:o=14;break e;case pr:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Kt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function _s(t,e,n,r){return t=Kt(7,t,r,e),t.lanes=n,t}function Nu(t,e,n,r){return t=Kt(22,t,r,e),t.elementType=b_,t.lanes=n,t.stateNode={isHidden:!1},t}function nh(t,e,n){return t=Kt(6,t,null,e),t.lanes=n,t}function rh(t,e,n){return e=Kt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function MS(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vd(0),this.expirationTimes=Vd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Wp(t,e,n,r,s,i,o,l,c){return t=new MS(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Kt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Np(i),t}function FS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Js,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function y1(t){if(!t)return Br;t=t._reactInternals;e:{if(js(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Pt(n))return yw(t,n,e)}return e}function v1(t,e,n,r,s,i,o,l,c){return t=Wp(n,r,!0,t,s,i,o,l,c),t.context=y1(null),n=t.current,r=wt(),s=Pr(n),i=$n(r,s),i.callback=e??null,Cr(n,i,s),t.current.lanes=s,$a(t,s,r),Dt(t,r),t}function Ru(t,e,n,r){var s=e.current,i=wt(),o=Pr(s);return n=y1(n),e.context===null?e.context=n:e.pendingContext=n,e=$n(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Cr(s,e,o),t!==null&&(hn(t,s,o,i),ec(t,s,o)),o}function zc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Gy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Hp(t,e){Gy(t,e),(t=t.alternate)&&Gy(t,e)}function US(){return null}var _1=typeof reportError=="function"?reportError:function(t){console.error(t)};function qp(t){this._internalRoot=t}ku.prototype.render=qp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Ru(t,e,null,null)};ku.prototype.unmount=qp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;bs(function(){Ru(null,t,null,null)}),e[Hn]=null}};function ku(t){this._internalRoot=t}ku.prototype.unstable_scheduleHydration=function(t){if(t){var e=Y_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<gr.length&&e!==0&&e<gr[n].priority;n++);gr.splice(n,0,t),n===0&&X_(t)}};function Gp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Cu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ky(){}function zS(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=zc(o);i.call(u)}}var o=v1(e,r,t,0,null,!1,!1,"",Ky);return t._reactRootContainer=o,t[Hn]=o.current,va(t.nodeType===8?t.parentNode:t),bs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=zc(c);l.call(u)}}var c=Wp(t,0,!1,null,null,!1,!1,"",Ky);return t._reactRootContainer=c,t[Hn]=c.current,va(t.nodeType===8?t.parentNode:t),bs(function(){Ru(e,c,n,r)}),c}function Au(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=zc(o);l.call(c)}}Ru(e,o,t,s)}else o=zS(n,e,t,s,r);return zc(o)}K_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=jo(e.pendingLanes);n!==0&&(hp(e,n|1),Dt(e,Ae()),!(de&6)&&(Pi=Ae()+500,Zr()))}break;case 13:bs(function(){var r=qn(t,1);if(r!==null){var s=wt();hn(r,t,1,s)}}),Hp(t,1)}};fp=function(t){if(t.tag===13){var e=qn(t,134217728);if(e!==null){var n=wt();hn(e,t,134217728,n)}Hp(t,134217728)}};Q_=function(t){if(t.tag===13){var e=Pr(t),n=qn(t,e);if(n!==null){var r=wt();hn(n,t,e,r)}Hp(t,e)}};Y_=function(){return pe};J_=function(t,e){var n=pe;try{return pe=t,e()}finally{pe=n}};zh=function(t,e,n){switch(e){case"input":if(Oh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=xu(r);if(!s)throw Error(U(90));R_(r),Oh(r,s)}}}break;case"textarea":C_(t,n);break;case"select":e=n.value,e!=null&&di(t,!!n.multiple,e,!1)}};V_=Up;M_=bs;var $S={usingClientEntryPoint:!1,Events:[Wa,ni,xu,j_,L_,Up]},Co={findFiberByHostInstance:ps,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},BS={bundleType:Co.bundleType,version:Co.version,rendererPackageName:Co.rendererPackageName,rendererConfig:Co.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=z_(t),t===null?null:t.stateNode},findFiberByHostInstance:Co.findFiberByHostInstance||US,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ul.isDisabled&&Ul.supportsFiber)try{yu=Ul.inject(BS),In=Ul}catch{}}Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$S;Bt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gp(e))throw Error(U(200));return FS(t,e,null,n)};Bt.createRoot=function(t,e){if(!Gp(t))throw Error(U(299));var n=!1,r="",s=_1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Wp(t,1,!1,null,null,n,!1,r,s),t[Hn]=e.current,va(t.nodeType===8?t.parentNode:t),new qp(e)};Bt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=z_(e),t=t===null?null:t.stateNode,t};Bt.flushSync=function(t){return bs(t)};Bt.hydrate=function(t,e,n){if(!Cu(e))throw Error(U(200));return Au(null,t,e,!0,n)};Bt.hydrateRoot=function(t,e,n){if(!Gp(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=_1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=v1(e,null,t,1,n??null,s,!1,i,o),t[Hn]=e.current,va(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ku(e)};Bt.render=function(t,e,n){if(!Cu(e))throw Error(U(200));return Au(null,t,e,!1,n)};Bt.unmountComponentAtNode=function(t){if(!Cu(t))throw Error(U(40));return t._reactRootContainer?(bs(function(){Au(null,null,t,!1,function(){t._reactRootContainer=null,t[Hn]=null})}),!0):!1};Bt.unstable_batchedUpdates=Up;Bt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Cu(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Au(t,e,n,!1,r)};Bt.version="18.3.1-next-f1338f8080-20240426";function w1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(w1)}catch(t){console.error(t)}}w1(),w_.exports=Bt;var WS=w_.exports,Qy=WS;Nh.createRoot=Qy.createRoot,Nh.hydrateRoot=Qy.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Na(){return Na=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Na.apply(this,arguments)}var Ir;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ir||(Ir={}));const Yy="popstate";function HS(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return xf("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:$c(s)}return GS(e,n,null,t)}function De(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Kp(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qS(){return Math.random().toString(36).substr(2,8)}function Jy(t,e){return{usr:t.state,key:t.key,idx:e}}function xf(t,e,n,r){return n===void 0&&(n=null),Na({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Hi(e):e,{state:n,key:e&&e.key||r||qS()})}function $c(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Hi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function GS(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=Ir.Pop,c=null,u=h();u==null&&(u=0,o.replaceState(Na({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function p(){l=Ir.Pop;let k=h(),I=k==null?null:k-u;u=k,c&&c({action:l,location:A.location,delta:I})}function m(k,I){l=Ir.Push;let v=xf(A.location,k,I);u=h()+1;let E=Jy(v,u),R=A.createHref(v);try{o.pushState(E,"",R)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;s.location.assign(R)}i&&c&&c({action:l,location:A.location,delta:1})}function x(k,I){l=Ir.Replace;let v=xf(A.location,k,I);u=h();let E=Jy(v,u),R=A.createHref(v);o.replaceState(E,"",R),i&&c&&c({action:l,location:A.location,delta:0})}function N(k){let I=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof k=="string"?k:$c(k);return v=v.replace(/ $/,"%20"),De(I,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,I)}let A={get action(){return l},get location(){return t(s,o)},listen(k){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Yy,p),c=k,()=>{s.removeEventListener(Yy,p),c=null}},createHref(k){return e(s,k)},createURL:N,encodeLocation(k){let I=N(k);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:m,replace:x,go(k){return o.go(k)}};return A}var Xy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Xy||(Xy={}));function KS(t,e,n){return n===void 0&&(n="/"),QS(t,e,n)}function QS(t,e,n,r){let s=typeof e=="string"?Hi(e):e,i=Qp(s.pathname||"/",n);if(i==null)return null;let o=x1(t);YS(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=lb(i);l=ib(o[c],u)}return l}function x1(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(De(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Or([r,c.relativePath]),h=n.concat(c);i.children&&i.children.length>0&&(De(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),x1(i.children,e,h,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:rb(u,i.index),routesMeta:h})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of E1(i.path))s(i,o,c)}),e}function E1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=E1(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function YS(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:sb(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const JS=/^:[\w-]+$/,XS=3,ZS=2,eb=1,tb=10,nb=-2,Zy=t=>t==="*";function rb(t,e){let n=t.split("/"),r=n.length;return n.some(Zy)&&(r+=nb),e&&(r+=ZS),n.filter(s=>!Zy(s)).reduce((s,i)=>s+(JS.test(i)?XS:i===""?eb:tb),r)}function sb(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function ib(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",p=ob({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),m=c.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:Or([i,p.pathname]),pathnameBase:fb(Or([i,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(i=Or([i,p.pathnameBase]))}return o}function ob(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=ab(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,h,p)=>{let{paramName:m,isOptional:x}=h;if(m==="*"){let A=l[p]||"";o=i.slice(0,i.length-A.length).replace(/(.)\/+$/,"$1")}const N=l[p];return x&&!N?u[m]=void 0:u[m]=(N||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function ab(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Kp(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function lb(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Kp(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Qp(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const cb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ub=t=>cb.test(t);function db(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Hi(t):t,i;if(n)if(ub(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Kp(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=e0(n.substring(1),"/"):i=e0(n,e)}else i=e;return{pathname:i,search:pb(r),hash:mb(s)}}function e0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function sh(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function hb(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Yp(t,e){let n=hb(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Jp(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Hi(t):(s=Na({},t),De(!s.pathname||!s.pathname.includes("?"),sh("?","pathname","search",s)),De(!s.pathname||!s.pathname.includes("#"),sh("#","pathname","hash",s)),De(!s.search||!s.search.includes("#"),sh("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;s.pathname=m.join("/")}l=p>=0?e[p]:"/"}let c=db(s,l),u=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const Or=t=>t.join("/").replace(/\/\/+/g,"/"),fb=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),pb=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,mb=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function gb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const I1=["post","put","patch","delete"];new Set(I1);const yb=["get",...I1];new Set(yb);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ra(){return Ra=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ra.apply(this,arguments)}const Xp=V.createContext(null),vb=V.createContext(null),es=V.createContext(null),Pu=V.createContext(null),nr=V.createContext({outlet:null,matches:[],isDataRoute:!1}),T1=V.createContext(null);function _b(t,e){let{relative:n}=e===void 0?{}:e;qi()||De(!1);let{basename:r,navigator:s}=V.useContext(es),{hash:i,pathname:o,search:l}=N1(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Or([r,o])),s.createHref({pathname:c,search:l,hash:i})}function qi(){return V.useContext(Pu)!=null}function Gi(){return qi()||De(!1),V.useContext(Pu).location}function S1(t){V.useContext(es).static||V.useLayoutEffect(t)}function b1(){let{isDataRoute:t}=V.useContext(nr);return t?Db():wb()}function wb(){qi()||De(!1);let t=V.useContext(Xp),{basename:e,future:n,navigator:r}=V.useContext(es),{matches:s}=V.useContext(nr),{pathname:i}=Gi(),o=JSON.stringify(Yp(s,n.v7_relativeSplatPath)),l=V.useRef(!1);return S1(()=>{l.current=!0}),V.useCallback(function(u,h){if(h===void 0&&(h={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let p=Jp(u,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Or([e,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[e,r,o,i,t])}function xb(){let{matches:t}=V.useContext(nr),e=t[t.length-1];return e?e.params:{}}function N1(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=V.useContext(es),{matches:s}=V.useContext(nr),{pathname:i}=Gi(),o=JSON.stringify(Yp(s,r.v7_relativeSplatPath));return V.useMemo(()=>Jp(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function Eb(t,e){return Ib(t,e)}function Ib(t,e,n,r){qi()||De(!1);let{navigator:s}=V.useContext(es),{matches:i}=V.useContext(nr),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Gi(),h;if(e){var p;let k=typeof e=="string"?Hi(e):e;c==="/"||(p=k.pathname)!=null&&p.startsWith(c)||De(!1),h=k}else h=u;let m=h.pathname||"/",x=m;if(c!=="/"){let k=c.replace(/^\//,"").split("/");x="/"+m.replace(/^\//,"").split("/").slice(k.length).join("/")}let N=KS(t,{pathname:x}),A=Rb(N&&N.map(k=>Object.assign({},k,{params:Object.assign({},l,k.params),pathname:Or([c,s.encodeLocation?s.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?c:Or([c,s.encodeLocation?s.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),i,n,r);return e&&A?V.createElement(Pu.Provider,{value:{location:Ra({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ir.Pop}},A):A}function Tb(){let t=Pb(),e=gb(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),n?V.createElement("pre",{style:s},n):null,null)}const Sb=V.createElement(Tb,null);class bb extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?V.createElement(nr.Provider,{value:this.props.routeContext},V.createElement(T1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Nb(t){let{routeContext:e,match:n,children:r}=t,s=V.useContext(Xp);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),V.createElement(nr.Provider,{value:e},r)}function Rb(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let h=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);h>=0||De(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=h),p.route.id){let{loaderData:m,errors:x}=n,N=p.route.loader&&m[p.route.id]===void 0&&(!x||x[p.route.id]===void 0);if(p.route.lazy||N){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,p,m)=>{let x,N=!1,A=null,k=null;n&&(x=l&&p.route.id?l[p.route.id]:void 0,A=p.route.errorElement||Sb,c&&(u<0&&m===0?(Ob("route-fallback"),N=!0,k=null):u===m&&(N=!0,k=p.route.hydrateFallbackElement||null)));let I=e.concat(o.slice(0,m+1)),v=()=>{let E;return x?E=A:N?E=k:p.route.Component?E=V.createElement(p.route.Component,null):p.route.element?E=p.route.element:E=h,V.createElement(Nb,{match:p,routeContext:{outlet:h,matches:I,isDataRoute:n!=null},children:E})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?V.createElement(bb,{location:n.location,revalidation:n.revalidation,component:A,error:x,children:v(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):v()},null)}var R1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(R1||{}),k1=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(k1||{});function kb(t){let e=V.useContext(Xp);return e||De(!1),e}function Cb(t){let e=V.useContext(vb);return e||De(!1),e}function Ab(t){let e=V.useContext(nr);return e||De(!1),e}function C1(t){let e=Ab(),n=e.matches[e.matches.length-1];return n.route.id||De(!1),n.route.id}function Pb(){var t;let e=V.useContext(T1),n=Cb(),r=C1();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Db(){let{router:t}=kb(R1.UseNavigateStable),e=C1(k1.UseNavigateStable),n=V.useRef(!1);return S1(()=>{n.current=!0}),V.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ra({fromRouteId:e},i)))},[t,e])}const t0={};function Ob(t,e,n){t0[t]||(t0[t]=!0)}function jb(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function A1(t){let{to:e,replace:n,state:r,relative:s}=t;qi()||De(!1);let{future:i,static:o}=V.useContext(es),{matches:l}=V.useContext(nr),{pathname:c}=Gi(),u=b1(),h=Jp(e,Yp(l,i.v7_relativeSplatPath),c,s==="path"),p=JSON.stringify(h);return V.useEffect(()=>u(JSON.parse(p),{replace:n,state:r,relative:s}),[u,p,s,n,r]),null}function On(t){De(!1)}function Lb(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Ir.Pop,navigator:i,static:o=!1,future:l}=t;qi()&&De(!1);let c=e.replace(/^\/*/,"/"),u=V.useMemo(()=>({basename:c,navigator:i,static:o,future:Ra({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=Hi(r));let{pathname:h="/",search:p="",hash:m="",state:x=null,key:N="default"}=r,A=V.useMemo(()=>{let k=Qp(h,c);return k==null?null:{location:{pathname:k,search:p,hash:m,state:x,key:N},navigationType:s}},[c,h,p,m,x,N,s]);return A==null?null:V.createElement(es.Provider,{value:u},V.createElement(Pu.Provider,{children:n,value:A}))}function Vb(t){let{children:e,location:n}=t;return Eb(Ef(e),n)}new Promise(()=>{});function Ef(t,e){e===void 0&&(e=[]);let n=[];return V.Children.forEach(t,(r,s)=>{if(!V.isValidElement(r))return;let i=[...e,s];if(r.type===V.Fragment){n.push.apply(n,Ef(r.props.children,i));return}r.type!==On&&De(!1),!r.props.index||!r.props.children||De(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ef(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function If(){return If=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},If.apply(this,arguments)}function Mb(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Fb(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Ub(t,e){return t.button===0&&(!e||e==="_self")&&!Fb(t)}const zb=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],$b="6";try{window.__reactRouterVersion=$b}catch{}const Bb="startTransition",n0=DT[Bb];function Wb(t){let{basename:e,children:n,future:r,window:s}=t,i=V.useRef();i.current==null&&(i.current=HS({window:s,v5Compat:!0}));let o=i.current,[l,c]=V.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},h=V.useCallback(p=>{u&&n0?n0(()=>c(p)):c(p)},[c,u]);return V.useLayoutEffect(()=>o.listen(h),[o,h]),V.useEffect(()=>jb(r),[r]),V.createElement(Lb,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const Hb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,P1=V.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:h,viewTransition:p}=e,m=Mb(e,zb),{basename:x}=V.useContext(es),N,A=!1;if(typeof u=="string"&&qb.test(u)&&(N=u,Hb))try{let E=new URL(window.location.href),R=u.startsWith("//")?new URL(E.protocol+u):new URL(u),P=Qp(R.pathname,x);R.origin===E.origin&&P!=null?u=P+R.search+R.hash:A=!0}catch{}let k=_b(u,{relative:s}),I=Gb(u,{replace:o,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:p});function v(E){r&&r(E),E.defaultPrevented||I(E)}return V.createElement("a",If({},m,{href:N||k,onClick:A||i?r:v,ref:n,target:c}))});var r0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(r0||(r0={}));var s0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(s0||(s0={}));function Gb(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,c=b1(),u=Gi(),h=N1(t,{relative:o});return V.useCallback(p=>{if(Ub(p,n)){p.preventDefault();let m=r!==void 0?r:$c(u)===$c(h);c(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,h,r,s,n,t,i,o,l])}const Kb=()=>{};var i0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Qb=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},O1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,p=(i&3)<<4|l>>4;let m=(l&15)<<2|u>>6,x=u&63;c||(x=64,o||(m=64)),r.push(n[h],n[p],n[m],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(D1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Qb(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||p==null)throw new Yb;const m=i<<2|l>>4;if(r.push(m),u!==64){const x=l<<4&240|u>>2;if(r.push(x),p!==64){const N=u<<6&192|p;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Yb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Jb=function(t){const e=D1(t);return O1.encodeByteArray(e,!0)},Bc=function(t){return Jb(t).replace(/\./g,"")},j1=function(t){try{return O1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=()=>Xb().__FIREBASE_DEFAULTS__,eN=()=>{if(typeof process>"u"||typeof i0>"u")return;const t=i0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},tN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&j1(t[1]);return e&&JSON.parse(e)},Du=()=>{try{return Kb()||Zb()||eN()||tN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},L1=t=>{var e,n;return(n=(e=Du())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},V1=t=>{const e=L1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},M1=()=>{var t;return(t=Du())==null?void 0:t.config},F1=t=>{var e;return(e=Du())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Zp(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Bc(JSON.stringify(n)),Bc(JSON.stringify(o)),""].join(".")}const Xo={};function rN(){const t={prod:[],emulator:[]};for(const e of Object.keys(Xo))Xo[e]?t.emulator.push(e):t.prod.push(e);return t}function sN(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let o0=!1;function em(t,e){if(typeof window>"u"||typeof document>"u"||!Ls(window.location.host)||Xo[t]===e||Xo[t]||o0)return;Xo[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=rN().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,x){m.setAttribute("width","24"),m.setAttribute("id",x),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{o0=!0,o()},m}function h(m,x){m.setAttribute("id",x),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=sN(r),x=n("text"),N=document.getElementById(x)||document.createElement("span"),A=n("learnmore"),k=document.getElementById(A)||document.createElement("a"),I=n("preprendIcon"),v=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const E=m.element;l(E),h(k,A);const R=u();c(v,I),E.append(v,N,k,R),document.body.appendChild(E)}i?(N.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gt())}function oN(){var e;const t=(e=Du())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function cN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uN(){const t=gt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function dN(){return!oN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hN(){try{return typeof indexedDB=="object"}catch{return!1}}function fN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN="FirebaseError";class Pn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=pN,Object.setPrototypeOf(this,Pn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qa.prototype.create)}}class qa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?mN(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Pn(s,l,r)}}function mN(t,e){return t.replace(gN,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const gN=/\{\$([^}]+)}/g;function yN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ns(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(a0(i)&&a0(o)){if(!Ns(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function a0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Vo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Mo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function vN(t,e){const n=new _N(t,e);return n.subscribe.bind(n)}class _N{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");wN(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=ih),s.error===void 0&&(s.error=ih),s.complete===void 0&&(s.complete=ih);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ih(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t){return t&&t._delegate?t._delegate:t}class Wr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new nN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IN(e))try{this.getOrInitializeService({instanceIdentifier:hs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hs){return this.instances.has(e)}getOptions(e=hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:EN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=hs){return this.component?this.component.multipleInstances?e:hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function EN(t){return t===hs?void 0:t}function IN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new xN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const SN={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},bN=ie.INFO,NN={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},RN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=NN[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tm{constructor(e){this.name=e,this._logLevel=bN,this._logHandler=RN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}const kN=(t,e)=>e.some(n=>t instanceof n);let l0,c0;function CN(){return l0||(l0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AN(){return c0||(c0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const z1=new WeakMap,Tf=new WeakMap,$1=new WeakMap,oh=new WeakMap,nm=new WeakMap;function PN(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(jr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&z1.set(n,t)}).catch(()=>{}),nm.set(e,t),e}function DN(t){if(Tf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Tf.set(t,e)}let Sf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Tf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||$1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return jr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ON(t){Sf=t(Sf)}function jN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ah(this),e,...n);return $1.set(r,e.sort?e.sort():[e]),jr(r)}:AN().includes(t)?function(...e){return t.apply(ah(this),e),jr(z1.get(this))}:function(...e){return jr(t.apply(ah(this),e))}}function LN(t){return typeof t=="function"?jN(t):(t instanceof IDBTransaction&&DN(t),kN(t,CN())?new Proxy(t,Sf):t)}function jr(t){if(t instanceof IDBRequest)return PN(t);if(oh.has(t))return oh.get(t);const e=LN(t);return e!==t&&(oh.set(t,e),nm.set(e,t)),e}const ah=t=>nm.get(t);function VN(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=jr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(jr(o.result),c.oldVersion,c.newVersion,jr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const MN=["get","getKey","getAll","getAllKeys","count"],FN=["put","add","delete","clear"],lh=new Map;function u0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(lh.get(e))return lh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=FN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||MN.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return lh.set(e,i),i}ON(t=>({...t,get:(e,n,r)=>u0(e,n)||t.get(e,n,r),has:(e,n)=>!!u0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(zN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function zN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bf="@firebase/app",d0="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn=new tm("@firebase/app"),$N="@firebase/app-compat",BN="@firebase/analytics-compat",WN="@firebase/analytics",HN="@firebase/app-check-compat",qN="@firebase/app-check",GN="@firebase/auth",KN="@firebase/auth-compat",QN="@firebase/database",YN="@firebase/data-connect",JN="@firebase/database-compat",XN="@firebase/functions",ZN="@firebase/functions-compat",eR="@firebase/installations",tR="@firebase/installations-compat",nR="@firebase/messaging",rR="@firebase/messaging-compat",sR="@firebase/performance",iR="@firebase/performance-compat",oR="@firebase/remote-config",aR="@firebase/remote-config-compat",lR="@firebase/storage",cR="@firebase/storage-compat",uR="@firebase/firestore",dR="@firebase/ai",hR="@firebase/firestore-compat",fR="firebase",pR="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf="[DEFAULT]",mR={[bf]:"fire-core",[$N]:"fire-core-compat",[WN]:"fire-analytics",[BN]:"fire-analytics-compat",[qN]:"fire-app-check",[HN]:"fire-app-check-compat",[GN]:"fire-auth",[KN]:"fire-auth-compat",[QN]:"fire-rtdb",[YN]:"fire-data-connect",[JN]:"fire-rtdb-compat",[XN]:"fire-fn",[ZN]:"fire-fn-compat",[eR]:"fire-iid",[tR]:"fire-iid-compat",[nR]:"fire-fcm",[rR]:"fire-fcm-compat",[sR]:"fire-perf",[iR]:"fire-perf-compat",[oR]:"fire-rc",[aR]:"fire-rc-compat",[lR]:"fire-gcs",[cR]:"fire-gcs-compat",[uR]:"fire-fst",[hR]:"fire-fst-compat",[dR]:"fire-vertex","fire-js":"fire-js",[fR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc=new Map,gR=new Map,Rf=new Map;function h0(t,e){try{t.container.addComponent(e)}catch(n){Kn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Rs(t){const e=t.name;if(Rf.has(e))return Kn.debug(`There were multiple attempts to register component ${e}.`),!1;Rf.set(e,t);for(const n of Wc.values())h0(n,t);for(const n of gR.values())h0(n,t);return!0}function Ou(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ve(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Lr=new qa("app","Firebase",yR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Lr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs=pR;function B1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Nf,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Lr.create("bad-app-name",{appName:String(s)});if(n||(n=M1()),!n)throw Lr.create("no-options");const i=Wc.get(s);if(i){if(Ns(n,i.options)&&Ns(r,i.config))return i;throw Lr.create("duplicate-app",{appName:s})}const o=new TN(s);for(const c of Rf.values())o.addComponent(c);const l=new vR(n,r,o);return Wc.set(s,l),l}function rm(t=Nf){const e=Wc.get(t);if(!e&&t===Nf&&M1())return B1();if(!e)throw Lr.create("no-app",{appName:t});return e}function Sn(t,e,n){let r=mR[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kn.warn(o.join(" "));return}Rs(new Wr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R="firebase-heartbeat-database",wR=1,ka="firebase-heartbeat-store";let ch=null;function W1(){return ch||(ch=VN(_R,wR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ka)}catch(n){console.warn(n)}}}}).catch(t=>{throw Lr.create("idb-open",{originalErrorMessage:t.message})})),ch}async function xR(t){try{const n=(await W1()).transaction(ka),r=await n.objectStore(ka).get(H1(t));return await n.done,r}catch(e){if(e instanceof Pn)Kn.warn(e.message);else{const n=Lr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Kn.warn(n.message)}}}async function f0(t,e){try{const r=(await W1()).transaction(ka,"readwrite");await r.objectStore(ka).put(e,H1(t)),await r.done}catch(n){if(n instanceof Pn)Kn.warn(n.message);else{const r=Lr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Kn.warn(r.message)}}}function H1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=1024,IR=30;class TR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new bR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=p0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>IR){const o=NR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Kn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=p0(),{heartbeatsToSend:r,unsentEntries:s}=SR(this._heartbeatsCache.heartbeats),i=Bc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Kn.warn(n),""}}}function p0(){return new Date().toISOString().substring(0,10)}function SR(t,e=ER){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),m0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),m0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class bR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hN()?fN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await xR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return f0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return f0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function m0(t){return Bc(JSON.stringify({version:2,heartbeats:t})).length}function NR(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(t){Rs(new Wr("platform-logger",e=>new UN(e),"PRIVATE")),Rs(new Wr("heartbeat",e=>new TR(e),"PRIVATE")),Sn(bf,d0,t),Sn(bf,d0,"esm2020"),Sn("fire-js","")}RR("");function q1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kR=q1,G1=new qa("auth","Firebase",q1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=new tm("@firebase/auth");function CR(t,...e){Hc.logLevel<=ie.WARN&&Hc.warn(`Auth (${Vs}): ${t}`,...e)}function ac(t,...e){Hc.logLevel<=ie.ERROR&&Hc.error(`Auth (${Vs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(t,...e){throw im(t,...e)}function Ot(t,...e){return im(t,...e)}function sm(t,e,n){const r={...kR(),[e]:n};return new qa("auth","Firebase",r).create(e,{appName:t.name})}function xt(t){return sm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ju(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&en(t,"argument-error"),sm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function im(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return G1.create(t,...e)}function B(t,e,...n){if(!t)throw im(e,...n)}function Un(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ac(e),new Error(e)}function Qn(t,e){t||Un(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function om(){return g0()==="http:"||g0()==="https:"}function g0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(om()||lN()||"connection"in navigator)?navigator.onLine:!0}function PR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qn(n>e,"Short delay should be less than long delay!"),this.isMobile=iN()||cN()}get(){return AR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(t,e){Qn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Un("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Un("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Un("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],jR=new Ga(3e4,6e4);function We(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function He(t,e,n,r,s={}){return Q1(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Ki({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return aN()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Ls(t.emulatorConfig.host)&&(u.credentials="include"),K1.fetch()(await Y1(t,t.config.apiHost,n,l),u)})}async function Q1(t,e,n){t._canInitEmulator=!1;const r={...DR,...e};try{const s=new VR(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Fo(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fo(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Fo(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Fo(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw sm(t,h,u);en(t,h)}}catch(s){if(s instanceof Pn)throw s;en(t,"network-request-failed",{message:String(s)})}}async function rr(t,e,n,r,s={}){const i=await He(t,e,n,r,s);return"mfaPendingCredential"in i&&en(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Y1(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?am(t.config,s):`${t.config.apiScheme}://${s}`;return OR.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function LR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class VR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ot(this.auth,"network-request-failed")),jR.get())})}}function Fo(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Ot(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(t){return t!==void 0&&t.getResponse!==void 0}function v0(t){return t!==void 0&&t.enterprise!==void 0}class J1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return LR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MR(t){return(await He(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function X1(t,e){return He(t,"GET","/v2/recaptchaConfig",We(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FR(t,e){return He(t,"POST","/v1/accounts:delete",e)}async function UR(t,e){return He(t,"POST","/v1/accounts:update",e)}async function qc(t,e){return He(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function zR(t,e=!1){const n=ne(t),r=await n.getIdToken(e),s=Lu(r);B(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Zo(uh(s.auth_time)),issuedAtTime:Zo(uh(s.iat)),expirationTime:Zo(uh(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function uh(t){return Number(t)*1e3}function Lu(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ac("JWT malformed, contained fewer than 3 sections"),null;try{const s=j1(n);return s?JSON.parse(s):(ac("Failed to decode base64 JWT payload"),null)}catch(s){return ac("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function _0(t){const e=Lu(t);return B(e,"internal-error"),B(typeof e.exp<"u","internal-error"),B(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ks(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Pn&&$R(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function $R({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zo(this.lastLoginAt),this.creationTime=Zo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aa(t){var p;const e=t.auth,n=await t.getIdToken(),r=await ks(t,qc(e,{idToken:n}));B(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(p=s.providerUserInfo)!=null&&p.length?Z1(s.providerUserInfo):[],o=HR(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new kf(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function WR(t){const e=ne(t);await Aa(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function HR(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Z1(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qR(t,e){const n=await Q1(t,{},async()=>{const r=Ki({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await Y1(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&Ls(t.emulatorConfig.host)&&(c.credentials="include"),K1.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function GR(t,e){return He(t,"POST","/v2/accounts:revokeToken",We(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){B(e.idToken,"internal-error"),B(typeof e.idToken<"u","internal-error"),B(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){B(e.length!==0,"internal-error");const n=_0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(B(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await qR(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new yi;return r&&(B(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(B(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(B(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yi,this.toJSON())}_performRefresh(){return Un("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(t,e){B(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class cn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new BR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new kf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ks(this,this.stsTokenManager.getToken(this.auth,e));return B(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return zR(this,e)}reload(){return WR(this)}_assign(e){this!==e&&(B(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new cn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Aa(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ve(this.auth.app))return Promise.reject(xt(this.auth));const e=await this.getIdToken();return await ks(this,FR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:x,providerData:N,stsTokenManager:A}=n;B(p&&A,e,"internal-error");const k=yi.fromJSON(this.name,A);B(typeof p=="string",e,"internal-error"),fr(r,e.name),fr(s,e.name),B(typeof m=="boolean",e,"internal-error"),B(typeof x=="boolean",e,"internal-error"),fr(i,e.name),fr(o,e.name),fr(l,e.name),fr(c,e.name),fr(u,e.name),fr(h,e.name);const I=new cn({uid:p,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:x,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:k,createdAt:u,lastLoginAt:h});return N&&Array.isArray(N)&&(I.providerData=N.map(v=>({...v}))),c&&(I._redirectEventId=c),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new yi;s.updateFromServerResponse(n);const i=new cn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Aa(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];B(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Z1(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new yi;l.updateFromIdToken(r);const c=new cn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new kf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0=new Map;function zn(t){Qn(t instanceof Function,"Expected a class definition");let e=w0.get(t);return e?(Qn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,w0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ex.type="NONE";const x0=ex;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(t,e,n){return`firebase:${t}:${e}:${n}`}class vi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=lc(this.userKey,s.apiKey,i),this.fullPersistenceKey=lc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await qc(this.auth,{idToken:e}).catch(()=>{});return n?cn._fromGetAccountInfoResponse(this.auth,n,e):null}return cn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new vi(zn(x0),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||zn(x0);const o=lc(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const h=await u._get(o);if(h){let p;if(typeof h=="string"){const m=await qc(e,{idToken:h}).catch(()=>{});if(!m)break;p=await cn._fromGetAccountInfoResponse(e,m,h)}else p=cn._fromJSON(e,h);u!==i&&(l=p),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new vi(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new vi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ox(e))return"Blackberry";if(ax(e))return"Webos";if(nx(e))return"Safari";if((e.includes("chrome/")||rx(e))&&!e.includes("edge/"))return"Chrome";if(ix(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function tx(t=gt()){return/firefox\//i.test(t)}function nx(t=gt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rx(t=gt()){return/crios\//i.test(t)}function sx(t=gt()){return/iemobile/i.test(t)}function ix(t=gt()){return/android/i.test(t)}function ox(t=gt()){return/blackberry/i.test(t)}function ax(t=gt()){return/webos/i.test(t)}function lm(t=gt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function KR(t=gt()){var e;return lm(t)&&!!((e=window.navigator)!=null&&e.standalone)}function QR(){return uN()&&document.documentMode===10}function lx(t=gt()){return lm(t)||ix(t)||ax(t)||ox(t)||/windows phone/i.test(t)||sx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(t,e=[]){let n;switch(t){case"Browser":n=E0(gt());break;case"Worker":n=`${E0(gt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Vs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JR(t,e={}){return He(t,"GET","/v2/passwordPolicy",We(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=6;class ZR{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??XR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new I0(this),this.idTokenSubscription=new I0(this),this.beforeStateQueue=new YR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=G1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=zn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await vi.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await qc(this,{idToken:e}),r=await cn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Ve(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return B(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Aa(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=PR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ve(this.app))return Promise.reject(xt(this));const n=e?ne(e):null;return n&&B(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&B(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ve(this.app)?Promise.reject(xt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ve(this.app)?Promise.reject(xt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JR(this),n=new ZR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new qa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await GR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&zn(e)||this._popupRedirectResolver;B(n,this,"argument-error"),this.redirectPersistenceManager=await vi.create(this,[zn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(B(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Ve(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&CR(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function et(t){return ne(t)}class I0{constructor(e){this.auth=e,this.observer=null,this.addObserver=vN(n=>this.observer=n)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ka={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tk(t){Ka=t}function cm(t){return Ka.loadJS(t)}function nk(){return Ka.recaptchaV2Script}function rk(){return Ka.recaptchaEnterpriseScript}function sk(){return Ka.gapiScript}function ux(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik=500,ok=6e4,zl=1e12;class ak{constructor(e){this.auth=e,this.counter=zl,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new uk(e,this.auth.name,n||{})),this.counter++,r}reset(e){var r;const n=e||zl;(r=this._widgets.get(n))==null||r.delete(),this._widgets.delete(n)}getResponse(e){var r;const n=e||zl;return((r=this._widgets.get(n))==null?void 0:r.getResponse())||""}async execute(e){var r;const n=e||zl;return(r=this._widgets.get(n))==null||r.execute(),""}}class lk{constructor(){this.enterprise=new ck}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class ck{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class uk{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;B(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=dk(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},ok)},ik))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function dk(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const hk="recaptcha-enterprise",ea="NO_RECAPTCHA";class dx{constructor(e){this.type=hk,this.auth=et(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{X1(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new J1(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function s(i,o,l){const c=window.grecaptcha;v0(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(ea)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new lk().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&v0(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=rk();c.length!==0&&(c+=l),cm(c).then(()=>{s(l,i,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function Ao(t,e,n,r=!1,s=!1){const i=new dx(t);let o;if(s)o=ea;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Vr(t,e,n,r,s){var i,o;if(s==="EMAIL_PASSWORD_PROVIDER")if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Ao(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Ao(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(l)});else if(s==="PHONE_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const l=await Ao(t,e,n);return r(t,l).catch(async c=>{var u;if(((u=t._getRecaptchaConfig())==null?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const h=await Ao(t,e,n,!1,!0);return r(t,h)}return Promise.reject(c)})}else{const l=await Ao(t,e,n,!1,!0);return r(t,l)}else return Promise.reject(s+" provider is not supported.")}async function fk(t){const e=et(t),n=await X1(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new J1(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new dx(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(t,e){const n=Ou(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ns(i,e??{}))return s;en(s,"already-initialized")}return n.initialize({options:e})}function pk(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(zn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function mk(t,e,n){const r=et(t);B(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=fx(e),{host:o,port:l}=gk(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){B(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),B(Ns(u,r.config.emulator)&&Ns(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Ls(o)?(Zp(`${i}//${o}${c}`),em("Auth",!0)):yk()}function fx(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function gk(t){const e=fx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:T0(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:T0(o)}}}function T0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function yk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Un("not implemented")}_getIdTokenResponse(e){return Un("not implemented")}_linkToIdToken(e,n){return Un("not implemented")}_getReauthenticationResolver(e){return Un("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vk(t,e){return He(t,"POST","/v1/accounts:resetPassword",We(t,e))}async function _k(t,e){return He(t,"POST","/v1/accounts:update",e)}async function wk(t,e){return He(t,"POST","/v1/accounts:signUp",e)}async function xk(t,e){return He(t,"POST","/v1/accounts:update",We(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ek(t,e){return rr(t,"POST","/v1/accounts:signInWithPassword",We(t,e))}async function Mu(t,e){return He(t,"POST","/v1/accounts:sendOobCode",We(t,e))}async function Ik(t,e){return Mu(t,e)}async function Tk(t,e){return Mu(t,e)}async function Sk(t,e){return Mu(t,e)}async function bk(t,e){return Mu(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nk(t,e){return rr(t,"POST","/v1/accounts:signInWithEmailLink",We(t,e))}async function Rk(t,e){return rr(t,"POST","/v1/accounts:signInWithEmailLink",We(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa extends Vu{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Pa(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Pa(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vr(e,n,"signInWithPassword",Ek,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Nk(e,{email:this._email,oobCode:this._password});default:en(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vr(e,r,"signUpPassword",wk,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Rk(e,{idToken:n,email:this._email,oobCode:this._password});default:en(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _i(t,e){return rr(t,"POST","/v1/accounts:signInWithIdp",We(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk="http://localhost";class Yn extends Vu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Yn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):en("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new Yn(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return _i(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,_i(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,_i(e,n)}buildRequest(){const e={requestUri:kk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ki(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S0(t,e){return He(t,"POST","/v1/accounts:sendVerificationCode",We(t,e))}async function Ck(t,e){return rr(t,"POST","/v1/accounts:signInWithPhoneNumber",We(t,e))}async function Ak(t,e){const n=await rr(t,"POST","/v1/accounts:signInWithPhoneNumber",We(t,e));if(n.temporaryProof)throw Fo(t,"account-exists-with-different-credential",n);return n}const Pk={USER_NOT_FOUND:"user-not-found"};async function Dk(t,e){const n={...e,operation:"REAUTH"};return rr(t,"POST","/v1/accounts:signInWithPhoneNumber",We(t,n),Pk)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta extends Vu{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new ta({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new ta({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return Ck(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return Ak(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return Dk(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i}=e;return!r&&!n&&!s&&!i?null:new ta({verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function jk(t){const e=Vo(Mo(t)).link,n=e?Vo(Mo(e)).deep_link_id:null,r=Vo(Mo(t)).deep_link_id;return(r?Vo(Mo(r)).link:null)||r||n||e||t}class Fu{constructor(e){const n=Vo(Mo(e)),r=n.apiKey??null,s=n.oobCode??null,i=Ok(n.mode??null);B(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=jk(e);try{return new Fu(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(){this.providerId=Ms.PROVIDER_ID}static credential(e,n){return Pa._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Fu.parseLink(n);return B(r,"argument-error"),Pa._fromEmailAndCode(e,r.code,r.tenantId)}}Ms.PROVIDER_ID="password";Ms.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ms.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends Qi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class cc extends Yi{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return B("providerId"in n&&"signInMethod"in n,"argument-error"),Yn._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return B(e.idToken||e.accessToken,"argument-error"),Yn._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return cc.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return cc.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:s,pendingToken:i,nonce:o,providerId:l}=e;if(!r&&!s&&!n&&!i||!l)return null;try{return new cc(l)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:i})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends Yi{constructor(){super("facebook.com")}static credential(e){return Yn._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vr.credential(e.oauthAccessToken)}catch{return null}}}vr.FACEBOOK_SIGN_IN_METHOD="facebook.com";vr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En extends Yi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Yn._fromParams({providerId:En.PROVIDER_ID,signInMethod:En.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return En.credentialFromTaggedObject(e)}static credentialFromError(e){return En.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return En.credential(n,r)}catch{return null}}}En.GOOGLE_SIGN_IN_METHOD="google.com";En.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends Yi{constructor(){super("github.com")}static credential(e){return Yn._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _r.credential(e.oauthAccessToken)}catch{return null}}}_r.GITHUB_SIGN_IN_METHOD="github.com";_r.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends Yi{constructor(){super("twitter.com")}static credential(e,n){return Yn._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return wr.credential(n,r)}catch{return null}}}wr.TWITTER_SIGN_IN_METHOD="twitter.com";wr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function px(t,e){return rr(t,"POST","/v1/accounts:signUp",We(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await cn._fromIdTokenResponse(e,r,s),o=b0(r);return new Rn({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=b0(r);return new Rn({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function b0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fj(t){var s;if(Ve(t.app))return Promise.reject(xt(t));const e=et(t);if(await e._initializationPromise,(s=e.currentUser)!=null&&s.isAnonymous)return new Rn({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await px(e,{returnSecureToken:!0}),r=await Rn._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc extends Pn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Gc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Gc(e,n,r,s)}}function mx(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Gc._fromErrorAndOperation(t,i,e,r):i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gx(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pj(t,e){const n=ne(t);await Uu(!0,n,e);const{providerUserInfo:r}=await UR(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),s=gx(r||[]);return n.providerData=n.providerData.filter(i=>s.has(i.providerId)),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function yx(t,e,n=!1){const r=await ks(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Rn._forOperation(t,"link",r)}async function Uu(t,e,n){await Aa(e);const r=gx(e.providerData),s=t===!1?"provider-already-linked":"no-such-provider";B(r.has(n)===t,e.auth,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lk(t,e,n=!1){const{auth:r}=t;if(Ve(r.app))return Promise.reject(xt(r));const s="reauthenticate";try{const i=await ks(t,mx(r,s,e,t),n);B(i.idToken,r,"internal-error");const o=Lu(i.idToken);B(o,r,"internal-error");const{sub:l}=o;return B(t.uid===l,r,"user-mismatch"),Rn._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&en(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vx(t,e,n=!1){if(Ve(t.app))return Promise.reject(xt(t));const r="signIn",s=await mx(t,r,e),i=await Rn._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function zu(t,e){return vx(et(t),e)}async function Vk(t,e){const n=ne(t);return await Uu(!1,n,e.providerId),yx(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mk(t,e){return rr(t,"POST","/v1/accounts:signInWithCustomToken",We(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mj(t,e){if(Ve(t.app))return Promise.reject(xt(t));const n=et(t),r=await Mk(n,{token:e,returnSecureToken:!0}),s=await Rn._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(t,e,n){var r;B(((r=n.url)==null?void 0:r.length)>0,t,"invalid-continue-uri"),B(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),B(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(B(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(B(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function um(t){const e=et(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function gj(t,e,n){const r=et(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&$u(r,s,n),await Vr(r,s,"getOobCode",Tk,"EMAIL_PASSWORD_PROVIDER")}async function yj(t,e,n){await vk(ne(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&um(t),r})}async function vj(t,e){await xk(ne(t),{oobCode:e})}async function _j(t,e,n){if(Ve(t.app))return Promise.reject(xt(t));const r=et(t),o=await Vr(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",px,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&um(t),c}),l=await Rn._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function wj(t,e,n){return Ve(t.app)?Promise.reject(xt(t)):zu(ne(t),Ms.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&um(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xj(t,e,n){const r=et(t),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function i(o,l){B(l.handleCodeInApp,r,"argument-error"),l&&$u(r,o,l)}i(s,n),await Vr(r,s,"getOobCode",Sk,"EMAIL_PASSWORD_PROVIDER")}function Ej(t,e){const n=Fu.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function Ij(t,e,n){if(Ve(t.app))return Promise.reject(xt(t));const r=ne(t),s=Ms.credentialWithLink(e,n||Ca());return B(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),zu(r,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fk(t,e){return He(t,"POST","/v1/accounts:createAuthUri",We(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tj(t,e){const n=om()?Ca():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await Fk(ne(t),r);return s||[]}async function Sj(t,e){const n=ne(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&$u(n.auth,s,e);const{email:i}=await Ik(n.auth,s);i!==t.email&&await t.reload()}async function bj(t,e,n){const r=ne(t),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&$u(r.auth,i,n);const{email:o}=await bk(r.auth,i);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uk(t,e){return He(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nj(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ne(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await ks(r,Uk(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function Rj(t,e){const n=ne(t);return Ve(n.auth.app)?Promise.reject(xt(n.auth)):_x(n,e,null)}function kj(t,e){return _x(ne(t),null,e)}async function _x(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(i.email=e),n&&(i.password=n);const o=await ks(t,_k(r,i));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zk(t){var s,i;if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},r=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(t!=null&&t.idToken)){const o=(i=(s=Lu(t.idToken))==null?void 0:s.firebase)==null?void 0:i.sign_in_provider;if(o){const l=o!=="anonymous"&&o!=="custom"?o:null;return new wi(r,l)}}if(!e)return null;switch(e){case"facebook.com":return new $k(r,n);case"github.com":return new Bk(r,n);case"google.com":return new Wk(r,n);case"twitter.com":return new Hk(r,n,t.screenName||null);case"custom":case"anonymous":return new wi(r,null);default:return new wi(r,e,n)}}class wi{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class wx extends wi{constructor(e,n,r,s){super(e,n,r),this.username=s}}class $k extends wi{constructor(e,n){super(e,"facebook.com",n)}}class Bk extends wx{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class Wk extends wi{constructor(e,n){super(e,"google.com",n)}}class Hk extends wx{constructor(e,n,r){super(e,"twitter.com",n,r)}}function Cj(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:zk(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aj(t,e){return ne(t).setPersistence(e)}function qk(t,e,n,r){return ne(t).onIdTokenChanged(e,n,r)}function Gk(t,e,n){return ne(t).beforeAuthStateChanged(e,n)}function xx(t,e,n,r){return ne(t).onAuthStateChanged(e,n,r)}function Cf(t){return ne(t).signOut()}function Pj(t,e){return et(t).revokeAccessToken(e)}async function Dj(t){return ne(t).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(t,e){return He(t,"POST","/v2/accounts/mfaEnrollment:start",We(t,e))}const Kc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Kc,"1"),this.storage.removeItem(Kc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=1e3,Qk=10;class Ix extends Ex{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);QR()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Qk):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Kk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ix.type="LOCAL";const Tx=Ix;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx extends Ex{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Sx.type="SESSION";const bx=Sx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Bu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,i)),c=await Yk(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=Wu("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const m=p;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(){return window}function Xk(t){je().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(){return typeof je().WorkerGlobalScope<"u"&&typeof je().importScripts=="function"}async function Zk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function tC(){return dm()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx="firebaseLocalStorageDb",nC=1,Qc="firebaseLocalStorage",Rx="fbase_key";class Qa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Hu(t,e){return t.transaction([Qc],e?"readwrite":"readonly").objectStore(Qc)}function rC(){const t=indexedDB.deleteDatabase(Nx);return new Qa(t).toPromise()}function Af(){const t=indexedDB.open(Nx,nC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Qc,{keyPath:Rx})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Qc)?e(r):(r.close(),await rC(),e(await Af()))})})}async function R0(t,e,n){const r=Hu(t,!0).put({[Rx]:e,value:n});return new Qa(r).toPromise()}async function sC(t,e){const n=Hu(t,!1).get(e),r=await new Qa(n).toPromise();return r===void 0?null:r.value}function k0(t,e){const n=Hu(t,!0).delete(e);return new Qa(n).toPromise()}const iC=800,oC=3;class kx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Af(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>oC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dm()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bu._getInstance(tC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Zk(),!this.activeServiceWorker)return;this.sender=new Jk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Af();return await R0(e,Kc,"1"),await k0(e,Kc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>R0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>sC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>k0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Hu(s,!1).getAll();return new Qa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}kx.type="LOCAL";const aC=kx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(t,e){return He(t,"POST","/v2/accounts/mfaSignIn:start",We(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh=ux("rcb"),lC=new Ga(3e4,6e4);class cC{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=je().grecaptcha)!=null&&e.render)}load(e,n=""){return B(uC(n),e,"argument-error"),this.shouldResolveImmediately(n)&&y0(je().grecaptcha)?Promise.resolve(je().grecaptcha):new Promise((r,s)=>{const i=je().setTimeout(()=>{s(Ot(e,"network-request-failed"))},lC.get());je()[dh]=()=>{je().clearTimeout(i),delete je()[dh];const l=je().grecaptcha;if(!l||!y0(l)){s(Ot(e,"internal-error"));return}const c=l.render;l.render=(u,h)=>{const p=c(u,h);return this.counter++,p},this.hostLanguage=n,r(l)};const o=`${nk()}?${Ki({onload:dh,render:"explicit",hl:n})}`;cm(o).catch(()=>{clearTimeout(i),s(Ot(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=je().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function uC(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class dC{async load(e){return new ak(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="recaptcha",hC={theme:"light",type:"image"};class Oj{constructor(e,n,r={...hC}){this.parameters=r,this.type=na,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=et(e),this.isInvisible=this.parameters.size==="invisible",B(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof n=="string"?document.getElementById(n):n;B(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new dC:new cC,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(s=>{const i=o=>{o&&(this.tokenChangeListeners.delete(i),s(o))};this.tokenChangeListeners.add(i),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){B(!this.parameters.sitekey,this.auth,"argument-error"),B(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),B(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=je()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){B(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){B(om()&&!dm(),this.auth,"internal-error"),await fC(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await MR(this.auth);B(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return B(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function fC(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=ta._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function jj(t,e,n){if(Ve(t.app))return Promise.reject(xt(t));const r=et(t),s=await Ax(r,e,ne(n));return new Cx(s,i=>zu(r,i))}async function Lj(t,e,n){const r=ne(t);await Uu(!1,r,"phone");const s=await Ax(r.auth,e,ne(n));return new Cx(s,i=>Vk(r,i))}async function Ax(t,e,n){var r;if(!t._getRecaptchaConfig())try{await fk(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const i=s.session;if("phoneNumber"in s){B(i.type==="enroll",t,"internal-error");const o={idToken:i.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Vr(t,o,"mfaSmsEnrollment",async(h,p)=>{if(p.phoneEnrollmentInfo.captchaResponse===ea){B((n==null?void 0:n.type)===na,h,"argument-error");const m=await hh(h,p,n);return N0(h,m)}return N0(h,p)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneSessionInfo.sessionInfo}else{B(i.type==="signin",t,"internal-error");const o=((r=s.multiFactorHint)==null?void 0:r.uid)||s.multiFactorUid;B(o,t,"missing-multi-factor-info");const l={mfaPendingCredential:i.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Vr(t,l,"mfaSmsSignIn",async(p,m)=>{if(m.phoneSignInInfo.captchaResponse===ea){B((n==null?void 0:n.type)===na,p,"argument-error");const x=await hh(p,m,n);return C0(p,x)}return C0(p,m)},"PHONE_PROVIDER").catch(p=>Promise.reject(p))).phoneResponseInfo.sessionInfo}}else{const i={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Vr(t,i,"sendVerificationCode",async(u,h)=>{if(h.captchaResponse===ea){B((n==null?void 0:n.type)===na,u,"argument-error");const p=await hh(u,h,n);return S0(u,p)}return S0(u,h)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).sessionInfo}}finally{n==null||n._reset()}}async function hh(t,e,n){B(n.type===na,t,"argument-error");const r=await n.verify();B(typeof r=="string",t,"argument-error");const s={...e};if("phoneEnrollmentInfo"in s){const i=s.phoneEnrollmentInfo.phoneNumber,o=s.phoneEnrollmentInfo.captchaResponse,l=s.phoneEnrollmentInfo.clientType,c=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:i,recaptchaToken:r,captchaResponse:o,clientType:l,recaptchaVersion:c}}),s}else if("phoneSignInInfo"in s){const i=s.phoneSignInInfo.captchaResponse,o=s.phoneSignInInfo.clientType,l=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:i,clientType:o,recaptchaVersion:l}}),s}else return Object.assign(s,{recaptchaToken:r}),s}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(t,e){return e?zn(e):(B(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm extends Vu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _i(e,this._buildIdpRequest())}_linkToIdToken(e,n){return _i(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return _i(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function pC(t){return vx(t.auth,new hm(t),t.bypassAuthState)}function mC(t){const{auth:e,user:n}=t;return B(n,e,"internal-error"),Lk(n,new hm(t),t.bypassAuthState)}async function gC(t){const{auth:e,user:n}=t;return B(n,e,"internal-error"),yx(n,new hm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pC;case"linkViaPopup":case"linkViaRedirect":return gC;case"reauthViaPopup":case"reauthViaRedirect":return mC;default:en(this.auth,"internal-error")}}resolve(e){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=new Ga(2e3,1e4);async function Dx(t,e,n){if(Ve(t.app))return Promise.reject(Ot(t,"operation-not-supported-in-this-environment"));const r=et(t);ju(t,e,Qi);const s=Ya(r,n);return new Tr(r,"signInViaPopup",e,s).executeNotNull()}async function Vj(t,e,n){const r=ne(t);ju(r.auth,e,Qi);const s=Ya(r.auth,n);return new Tr(r.auth,"linkViaPopup",e,s,r).executeNotNull()}class Tr extends Px{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Tr.currentPopupAction&&Tr.currentPopupAction.cancel(),Tr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return B(e,this.auth,"internal-error"),e}async onExecution(){Qn(this.filter.length===1,"Popup operations only handle one event");const e=Wu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ot(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ot(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Tr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ot(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yC.get())};e()}}Tr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC="pendingRedirect",uc=new Map;class _C extends Px{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=uc.get(this.auth._key());if(!e){try{const r=await wC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}uc.set(this.auth._key(),e)}return this.bypassAuthState||uc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wC(t,e){const n=Lx(e),r=jx(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function Ox(t,e){return jx(t)._set(Lx(e),"true")}function xC(t,e){uc.set(t._key(),e)}function jx(t){return zn(t._redirectPersistence)}function Lx(t){return lc(vC,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mj(t,e,n){return EC(t,e,n)}async function EC(t,e,n){if(Ve(t.app))return Promise.reject(xt(t));const r=et(t);ju(t,e,Qi),await r._initializationPromise;const s=Ya(r,n);return await Ox(s,r),s._openRedirect(r,e,"signInViaRedirect")}function Fj(t,e,n){return IC(t,e,n)}async function IC(t,e,n){const r=ne(t);ju(r.auth,e,Qi),await r.auth._initializationPromise;const s=Ya(r.auth,n);await Uu(!1,r,e.providerId),await Ox(s,r.auth);const i=await TC(r);return s._openRedirect(r.auth,e,"linkViaRedirect",i)}async function Uj(t,e){return await et(t)._initializationPromise,Vx(t,e,!1)}async function Vx(t,e,n=!1){if(Ve(t.app))return Promise.reject(xt(t));const r=et(t),s=Ya(r,e),o=await new _C(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function TC(t){const e=Wu(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=10*60*1e3;class bC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!NC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Mx(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ot(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=SC&&this.cachedEventUids.clear(),this.cachedEventUids.has(A0(e))}saveEventToCache(e){this.cachedEventUids.add(A0(e)),this.lastProcessedEventTime=Date.now()}}function A0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Mx({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function NC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Mx(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RC(t,e={}){return He(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CC=/^https?/;async function AC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await RC(t);for(const n of e)try{if(PC(n))return}catch{}en(t,"unauthorized-domain")}function PC(t){const e=Ca(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!CC.test(n))return!1;if(kC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=new Ga(3e4,6e4);function P0(){const t=je().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function OC(t){return new Promise((e,n)=>{var s,i,o;function r(){P0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{P0(),n(Ot(t,"network-request-failed"))},timeout:DC.get()})}if((i=(s=je().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=je().gapi)!=null&&o.load)r();else{const l=ux("iframefcb");return je()[l]=()=>{gapi.load?r():n(Ot(t,"network-request-failed"))},cm(`${sk()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw dc=null,e})}let dc=null;function jC(t){return dc=dc||OC(t),dc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=new Ga(5e3,15e3),VC="__/auth/iframe",MC="emulator/auth/iframe",FC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zC(t){const e=t.config;B(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?am(e,MC):`https://${t.config.authDomain}/${VC}`,r={apiKey:e.apiKey,appName:t.name,v:Vs},s=UC.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ki(r).slice(1)}`}async function $C(t){const e=await jC(t),n=je().gapi;return B(n,t,"internal-error"),e.open({where:document.body,url:zC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:FC,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Ot(t,"network-request-failed"),l=je().setTimeout(()=>{i(o)},LC.get());function c(){je().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WC=500,HC=600,qC="_blank",GC="http://localhost";class D0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function KC(t,e,n,r=WC,s=HC){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...BC,width:r.toString(),height:s.toString(),top:i,left:o},u=gt().toLowerCase();n&&(l=rx(u)?qC:n),tx(u)&&(e=e||GC,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[x,N])=>`${m}${x}=${N},`,"");if(KR(u)&&l!=="_self")return QC(e||"",l),new D0(null);const p=window.open(e||"",l,h);B(p,t,"popup-blocked");try{p.focus()}catch{}return new D0(p)}function QC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC="__/auth/handler",JC="emulator/auth/handler",XC=encodeURIComponent("fac");async function O0(t,e,n,r,s,i){B(t.config.authDomain,t,"auth-domain-config-required"),B(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Vs,eventId:s};if(e instanceof Qi){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",yN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))o[h]=p}if(e instanceof Yi){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${XC}=${encodeURIComponent(c)}`:"";return`${ZC(t)}?${Ki(l).slice(1)}${u}`}function ZC({config:t}){return t.emulator?am(t,JC):`https://${t.authDomain}/${YC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh="webStorageSupport";class eA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bx,this._completeRedirectFn=Vx,this._overrideRedirectResult=xC}async _openPopup(e,n,r,s){var o;Qn((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await O0(e,n,r,Ca(),s);return KC(e,i,Wu())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await O0(e,n,r,Ca(),s);return Xk(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Qn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await $C(e),r=new bC(e);return n.register("authEvent",s=>(B(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(fh,{type:fh},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[fh];i!==void 0&&n(!!i),en(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=AC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return lx()||nx()||lm()}}const tA=eA;var j0="@firebase/auth",L0="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sA(t){Rs(new Wr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;B(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cx(t)},u=new ek(r,s,i,c);return pk(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Rs(new Wr("auth-internal",e=>{const n=et(e.getProvider("auth").getImmediate());return(r=>new nA(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Sn(j0,L0,rA(t)),Sn(j0,L0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=5*60,oA=F1("authIdTokenMaxAge")||iA;let V0=null;const aA=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>oA)return;const s=n==null?void 0:n.token;V0!==s&&(V0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function lA(t=rm()){const e=Ou(t,"auth");if(e.isInitialized())return e.getImmediate();const n=hx(t,{popupRedirectResolver:tA,persistence:[aC,Tx,bx]}),r=F1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=aA(i.toString());Gk(n,o,()=>o(n.currentUser)),qk(n,l=>o(l))}}const s=L1("auth");return s&&mk(n,`http://${s}`),n}function cA(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}tk({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Ot("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",cA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sA("Browser");var uA="firebase",dA="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sn(uA,dA,"app");var M0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mr,Fx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,y){function T(){}T.prototype=y.prototype,_.F=y.prototype,_.prototype=new T,_.prototype.constructor=_,_.D=function(S,C,D){for(var b=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)b[ce-2]=arguments[ce];return y.prototype[C].apply(S,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(_,y,T){T||(T=0);const S=Array(16);if(typeof y=="string")for(var C=0;C<16;++C)S[C]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(C=0;C<16;++C)S[C]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=_.g[0],T=_.g[1],C=_.g[2];let D=_.g[3],b;b=y+(D^T&(C^D))+S[0]+3614090360&4294967295,y=T+(b<<7&4294967295|b>>>25),b=D+(C^y&(T^C))+S[1]+3905402710&4294967295,D=y+(b<<12&4294967295|b>>>20),b=C+(T^D&(y^T))+S[2]+606105819&4294967295,C=D+(b<<17&4294967295|b>>>15),b=T+(y^C&(D^y))+S[3]+3250441966&4294967295,T=C+(b<<22&4294967295|b>>>10),b=y+(D^T&(C^D))+S[4]+4118548399&4294967295,y=T+(b<<7&4294967295|b>>>25),b=D+(C^y&(T^C))+S[5]+1200080426&4294967295,D=y+(b<<12&4294967295|b>>>20),b=C+(T^D&(y^T))+S[6]+2821735955&4294967295,C=D+(b<<17&4294967295|b>>>15),b=T+(y^C&(D^y))+S[7]+4249261313&4294967295,T=C+(b<<22&4294967295|b>>>10),b=y+(D^T&(C^D))+S[8]+1770035416&4294967295,y=T+(b<<7&4294967295|b>>>25),b=D+(C^y&(T^C))+S[9]+2336552879&4294967295,D=y+(b<<12&4294967295|b>>>20),b=C+(T^D&(y^T))+S[10]+4294925233&4294967295,C=D+(b<<17&4294967295|b>>>15),b=T+(y^C&(D^y))+S[11]+2304563134&4294967295,T=C+(b<<22&4294967295|b>>>10),b=y+(D^T&(C^D))+S[12]+1804603682&4294967295,y=T+(b<<7&4294967295|b>>>25),b=D+(C^y&(T^C))+S[13]+4254626195&4294967295,D=y+(b<<12&4294967295|b>>>20),b=C+(T^D&(y^T))+S[14]+2792965006&4294967295,C=D+(b<<17&4294967295|b>>>15),b=T+(y^C&(D^y))+S[15]+1236535329&4294967295,T=C+(b<<22&4294967295|b>>>10),b=y+(C^D&(T^C))+S[1]+4129170786&4294967295,y=T+(b<<5&4294967295|b>>>27),b=D+(T^C&(y^T))+S[6]+3225465664&4294967295,D=y+(b<<9&4294967295|b>>>23),b=C+(y^T&(D^y))+S[11]+643717713&4294967295,C=D+(b<<14&4294967295|b>>>18),b=T+(D^y&(C^D))+S[0]+3921069994&4294967295,T=C+(b<<20&4294967295|b>>>12),b=y+(C^D&(T^C))+S[5]+3593408605&4294967295,y=T+(b<<5&4294967295|b>>>27),b=D+(T^C&(y^T))+S[10]+38016083&4294967295,D=y+(b<<9&4294967295|b>>>23),b=C+(y^T&(D^y))+S[15]+3634488961&4294967295,C=D+(b<<14&4294967295|b>>>18),b=T+(D^y&(C^D))+S[4]+3889429448&4294967295,T=C+(b<<20&4294967295|b>>>12),b=y+(C^D&(T^C))+S[9]+568446438&4294967295,y=T+(b<<5&4294967295|b>>>27),b=D+(T^C&(y^T))+S[14]+3275163606&4294967295,D=y+(b<<9&4294967295|b>>>23),b=C+(y^T&(D^y))+S[3]+4107603335&4294967295,C=D+(b<<14&4294967295|b>>>18),b=T+(D^y&(C^D))+S[8]+1163531501&4294967295,T=C+(b<<20&4294967295|b>>>12),b=y+(C^D&(T^C))+S[13]+2850285829&4294967295,y=T+(b<<5&4294967295|b>>>27),b=D+(T^C&(y^T))+S[2]+4243563512&4294967295,D=y+(b<<9&4294967295|b>>>23),b=C+(y^T&(D^y))+S[7]+1735328473&4294967295,C=D+(b<<14&4294967295|b>>>18),b=T+(D^y&(C^D))+S[12]+2368359562&4294967295,T=C+(b<<20&4294967295|b>>>12),b=y+(T^C^D)+S[5]+4294588738&4294967295,y=T+(b<<4&4294967295|b>>>28),b=D+(y^T^C)+S[8]+2272392833&4294967295,D=y+(b<<11&4294967295|b>>>21),b=C+(D^y^T)+S[11]+1839030562&4294967295,C=D+(b<<16&4294967295|b>>>16),b=T+(C^D^y)+S[14]+4259657740&4294967295,T=C+(b<<23&4294967295|b>>>9),b=y+(T^C^D)+S[1]+2763975236&4294967295,y=T+(b<<4&4294967295|b>>>28),b=D+(y^T^C)+S[4]+1272893353&4294967295,D=y+(b<<11&4294967295|b>>>21),b=C+(D^y^T)+S[7]+4139469664&4294967295,C=D+(b<<16&4294967295|b>>>16),b=T+(C^D^y)+S[10]+3200236656&4294967295,T=C+(b<<23&4294967295|b>>>9),b=y+(T^C^D)+S[13]+681279174&4294967295,y=T+(b<<4&4294967295|b>>>28),b=D+(y^T^C)+S[0]+3936430074&4294967295,D=y+(b<<11&4294967295|b>>>21),b=C+(D^y^T)+S[3]+3572445317&4294967295,C=D+(b<<16&4294967295|b>>>16),b=T+(C^D^y)+S[6]+76029189&4294967295,T=C+(b<<23&4294967295|b>>>9),b=y+(T^C^D)+S[9]+3654602809&4294967295,y=T+(b<<4&4294967295|b>>>28),b=D+(y^T^C)+S[12]+3873151461&4294967295,D=y+(b<<11&4294967295|b>>>21),b=C+(D^y^T)+S[15]+530742520&4294967295,C=D+(b<<16&4294967295|b>>>16),b=T+(C^D^y)+S[2]+3299628645&4294967295,T=C+(b<<23&4294967295|b>>>9),b=y+(C^(T|~D))+S[0]+4096336452&4294967295,y=T+(b<<6&4294967295|b>>>26),b=D+(T^(y|~C))+S[7]+1126891415&4294967295,D=y+(b<<10&4294967295|b>>>22),b=C+(y^(D|~T))+S[14]+2878612391&4294967295,C=D+(b<<15&4294967295|b>>>17),b=T+(D^(C|~y))+S[5]+4237533241&4294967295,T=C+(b<<21&4294967295|b>>>11),b=y+(C^(T|~D))+S[12]+1700485571&4294967295,y=T+(b<<6&4294967295|b>>>26),b=D+(T^(y|~C))+S[3]+2399980690&4294967295,D=y+(b<<10&4294967295|b>>>22),b=C+(y^(D|~T))+S[10]+4293915773&4294967295,C=D+(b<<15&4294967295|b>>>17),b=T+(D^(C|~y))+S[1]+2240044497&4294967295,T=C+(b<<21&4294967295|b>>>11),b=y+(C^(T|~D))+S[8]+1873313359&4294967295,y=T+(b<<6&4294967295|b>>>26),b=D+(T^(y|~C))+S[15]+4264355552&4294967295,D=y+(b<<10&4294967295|b>>>22),b=C+(y^(D|~T))+S[6]+2734768916&4294967295,C=D+(b<<15&4294967295|b>>>17),b=T+(D^(C|~y))+S[13]+1309151649&4294967295,T=C+(b<<21&4294967295|b>>>11),b=y+(C^(T|~D))+S[4]+4149444226&4294967295,y=T+(b<<6&4294967295|b>>>26),b=D+(T^(y|~C))+S[11]+3174756917&4294967295,D=y+(b<<10&4294967295|b>>>22),b=C+(y^(D|~T))+S[2]+718787259&4294967295,C=D+(b<<15&4294967295|b>>>17),b=T+(D^(C|~y))+S[9]+3951481745&4294967295,_.g[0]=_.g[0]+y&4294967295,_.g[1]=_.g[1]+(C+(b<<21&4294967295|b>>>11))&4294967295,_.g[2]=_.g[2]+C&4294967295,_.g[3]=_.g[3]+D&4294967295}r.prototype.v=function(_,y){y===void 0&&(y=_.length);const T=y-this.blockSize,S=this.C;let C=this.h,D=0;for(;D<y;){if(C==0)for(;D<=T;)s(this,_,D),D+=this.blockSize;if(typeof _=="string"){for(;D<y;)if(S[C++]=_.charCodeAt(D++),C==this.blockSize){s(this,S),C=0;break}}else for(;D<y;)if(S[C++]=_[D++],C==this.blockSize){s(this,S),C=0;break}}this.h=C,this.o+=y},r.prototype.A=function(){var _=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);_[0]=128;for(var y=1;y<_.length-8;++y)_[y]=0;y=this.o*8;for(var T=_.length-8;T<_.length;++T)_[T]=y&255,y/=256;for(this.v(_),_=Array(16),y=0,T=0;T<4;++T)for(let S=0;S<32;S+=8)_[y++]=this.g[T]>>>S&255;return _};function i(_,y){var T=l;return Object.prototype.hasOwnProperty.call(T,_)?T[_]:T[_]=y(_)}function o(_,y){this.h=y;const T=[];let S=!0;for(let C=_.length-1;C>=0;C--){const D=_[C]|0;S&&D==y||(T[C]=D,S=!1)}this.g=T}var l={};function c(_){return-128<=_&&_<128?i(_,function(y){return new o([y|0],y<0?-1:0)}):new o([_|0],_<0?-1:0)}function u(_){if(isNaN(_)||!isFinite(_))return p;if(_<0)return k(u(-_));const y=[];let T=1;for(let S=0;_>=T;S++)y[S]=_/T|0,T*=4294967296;return new o(y,0)}function h(_,y){if(_.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(_.charAt(0)=="-")return k(h(_.substring(1),y));if(_.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=u(Math.pow(y,8));let S=p;for(let D=0;D<_.length;D+=8){var C=Math.min(8,_.length-D);const b=parseInt(_.substring(D,D+C),y);C<8?(C=u(Math.pow(y,C)),S=S.j(C).add(u(b))):(S=S.j(T),S=S.add(u(b)))}return S}var p=c(0),m=c(1),x=c(16777216);t=o.prototype,t.m=function(){if(A(this))return-k(this).m();let _=0,y=1;for(let T=0;T<this.g.length;T++){const S=this.i(T);_+=(S>=0?S:4294967296+S)*y,y*=4294967296}return _},t.toString=function(_){if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(N(this))return"0";if(A(this))return"-"+k(this).toString(_);const y=u(Math.pow(_,6));var T=this;let S="";for(;;){const C=R(T,y).g;T=I(T,C.j(y));let D=((T.g.length>0?T.g[0]:T.h)>>>0).toString(_);if(T=C,N(T))return D+S;for(;D.length<6;)D="0"+D;S=D+S}},t.i=function(_){return _<0?0:_<this.g.length?this.g[_]:this.h};function N(_){if(_.h!=0)return!1;for(let y=0;y<_.g.length;y++)if(_.g[y]!=0)return!1;return!0}function A(_){return _.h==-1}t.l=function(_){return _=I(this,_),A(_)?-1:N(_)?0:1};function k(_){const y=_.g.length,T=[];for(let S=0;S<y;S++)T[S]=~_.g[S];return new o(T,~_.h).add(m)}t.abs=function(){return A(this)?k(this):this},t.add=function(_){const y=Math.max(this.g.length,_.g.length),T=[];let S=0;for(let C=0;C<=y;C++){let D=S+(this.i(C)&65535)+(_.i(C)&65535),b=(D>>>16)+(this.i(C)>>>16)+(_.i(C)>>>16);S=b>>>16,D&=65535,b&=65535,T[C]=b<<16|D}return new o(T,T[T.length-1]&-2147483648?-1:0)};function I(_,y){return _.add(k(y))}t.j=function(_){if(N(this)||N(_))return p;if(A(this))return A(_)?k(this).j(k(_)):k(k(this).j(_));if(A(_))return k(this.j(k(_)));if(this.l(x)<0&&_.l(x)<0)return u(this.m()*_.m());const y=this.g.length+_.g.length,T=[];for(var S=0;S<2*y;S++)T[S]=0;for(S=0;S<this.g.length;S++)for(let C=0;C<_.g.length;C++){const D=this.i(S)>>>16,b=this.i(S)&65535,ce=_.i(C)>>>16,he=_.i(C)&65535;T[2*S+2*C]+=b*he,v(T,2*S+2*C),T[2*S+2*C+1]+=D*he,v(T,2*S+2*C+1),T[2*S+2*C+1]+=b*ce,v(T,2*S+2*C+1),T[2*S+2*C+2]+=D*ce,v(T,2*S+2*C+2)}for(_=0;_<y;_++)T[_]=T[2*_+1]<<16|T[2*_];for(_=y;_<2*y;_++)T[_]=0;return new o(T,0)};function v(_,y){for(;(_[y]&65535)!=_[y];)_[y+1]+=_[y]>>>16,_[y]&=65535,y++}function E(_,y){this.g=_,this.h=y}function R(_,y){if(N(y))throw Error("division by zero");if(N(_))return new E(p,p);if(A(_))return y=R(k(_),y),new E(k(y.g),k(y.h));if(A(y))return y=R(_,k(y)),new E(k(y.g),y.h);if(_.g.length>30){if(A(_)||A(y))throw Error("slowDivide_ only works with positive integers.");for(var T=m,S=y;S.l(_)<=0;)T=P(T),S=P(S);var C=O(T,1),D=O(S,1);for(S=O(S,2),T=O(T,2);!N(S);){var b=D.add(S);b.l(_)<=0&&(C=C.add(T),D=b),S=O(S,1),T=O(T,1)}return y=I(_,C.j(y)),new E(C,y)}for(C=p;_.l(y)>=0;){for(T=Math.max(1,Math.floor(_.m()/y.m())),S=Math.ceil(Math.log(T)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),D=u(T),b=D.j(y);A(b)||b.l(_)>0;)T-=S,D=u(T),b=D.j(y);N(D)&&(D=m),C=C.add(D),_=I(_,b)}return new E(C,_)}t.B=function(_){return R(this,_).h},t.and=function(_){const y=Math.max(this.g.length,_.g.length),T=[];for(let S=0;S<y;S++)T[S]=this.i(S)&_.i(S);return new o(T,this.h&_.h)},t.or=function(_){const y=Math.max(this.g.length,_.g.length),T=[];for(let S=0;S<y;S++)T[S]=this.i(S)|_.i(S);return new o(T,this.h|_.h)},t.xor=function(_){const y=Math.max(this.g.length,_.g.length),T=[];for(let S=0;S<y;S++)T[S]=this.i(S)^_.i(S);return new o(T,this.h^_.h)};function P(_){const y=_.g.length+1,T=[];for(let S=0;S<y;S++)T[S]=_.i(S)<<1|_.i(S-1)>>>31;return new o(T,_.h)}function O(_,y){const T=y>>5;y%=32;const S=_.g.length-T,C=[];for(let D=0;D<S;D++)C[D]=y>0?_.i(D+T)>>>y|_.i(D+T+1)<<32-y:_.i(D+T);return new o(C,_.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Fx=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Mr=o}).apply(typeof M0<"u"?M0:typeof self<"u"?self:typeof window<"u"?window:{});var $l=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ux,Uo,zx,hc,Pf,$x,Bx,Wx;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof $l=="object"&&$l];for(var f=0;f<a.length;++f){var g=a[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(a,f){if(f)e:{var g=r;a=a.split(".");for(var w=0;w<a.length-1;w++){var j=a[w];if(!(j in g))break e;g=g[j]}a=a[a.length-1],w=g[a],f=f(w),f!=w&&f!=null&&e(g,a,{configurable:!0,writable:!0,value:f})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(f){var g=[],w;for(w in f)Object.prototype.hasOwnProperty.call(f,w)&&g.push([w,f[w]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(a){var f=typeof a;return f=="object"&&a!=null||f=="function"}function c(a,f,g){return a.call.apply(a.bind,arguments)}function u(a,f,g){return u=c,u.apply(null,arguments)}function h(a,f){var g=Array.prototype.slice.call(arguments,1);return function(){var w=g.slice();return w.push.apply(w,arguments),a.apply(this,w)}}function p(a,f){function g(){}g.prototype=f.prototype,a.Z=f.prototype,a.prototype=new g,a.prototype.constructor=a,a.Ob=function(w,j,L){for(var $=Array(arguments.length-2),te=2;te<arguments.length;te++)$[te-2]=arguments[te];return f.prototype[j].apply(w,$)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function x(a){const f=a.length;if(f>0){const g=Array(f);for(let w=0;w<f;w++)g[w]=a[w];return g}return[]}function N(a,f){for(let w=1;w<arguments.length;w++){const j=arguments[w];var g=typeof j;if(g=g!="object"?g:j?Array.isArray(j)?"array":g:"null",g=="array"||g=="object"&&typeof j.length=="number"){g=a.length||0;const L=j.length||0;a.length=g+L;for(let $=0;$<L;$++)a[g+$]=j[$]}else a.push(j)}}class A{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function k(a){o.setTimeout(()=>{throw a},0)}function I(){var a=_;let f=null;return a.g&&(f=a.g,a.g=a.g.next,a.g||(a.h=null),f.next=null),f}class v{constructor(){this.h=this.g=null}add(f,g){const w=E.get();w.set(f,g),this.h?this.h.next=w:this.g=w,this.h=w}}var E=new A(()=>new R,a=>a.reset());class R{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let P,O=!1,_=new v,y=()=>{const a=Promise.resolve(void 0);P=()=>{a.then(T)}};function T(){for(var a;a=I();){try{a.h.call(a.g)}catch(g){k(g)}var f=E;f.j(a),f.h<100&&(f.h++,a.next=f.g,f.g=a)}O=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(a,f){this.type=a,this.g=this.target=f,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,f=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const g=()=>{};o.addEventListener("test",g,f),o.removeEventListener("test",g,f)}catch{}return a}();function b(a){return/^[\s\xa0]*$/.test(a)}function ce(a,f){C.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,f)}p(ce,C),ce.prototype.init=function(a,f){const g=this.type=a.type,w=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=f,f=a.relatedTarget,f||(g=="mouseover"?f=a.fromElement:g=="mouseout"&&(f=a.toElement)),this.relatedTarget=f,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&ce.Z.h.call(this)},ce.prototype.h=function(){ce.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var he="closure_listenable_"+(Math.random()*1e6|0),Q=0;function le(a,f,g,w,j){this.listener=a,this.proxy=null,this.src=f,this.type=g,this.capture=!!w,this.ha=j,this.key=++Q,this.da=this.fa=!1}function z(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function G(a,f,g){for(const w in a)f.call(g,a[w],w,a)}function Y(a,f){for(const g in a)f.call(void 0,a[g],g,a)}function re(a){const f={};for(const g in a)f[g]=a[g];return f}const me="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Tt(a,f){let g,w;for(let j=1;j<arguments.length;j++){w=arguments[j];for(g in w)a[g]=w[g];for(let L=0;L<me.length;L++)g=me[L],Object.prototype.hasOwnProperty.call(w,g)&&(a[g]=w[g])}}function tt(a){this.src=a,this.g={},this.h=0}tt.prototype.add=function(a,f,g,w,j){const L=a.toString();a=this.g[L],a||(a=this.g[L]=[],this.h++);const $=at(a,f,w,j);return $>-1?(f=a[$],g||(f.fa=!1)):(f=new le(f,this.src,L,!!w,j),f.fa=g,a.push(f)),f};function Ht(a,f){const g=f.type;if(g in a.g){var w=a.g[g],j=Array.prototype.indexOf.call(w,f,void 0),L;(L=j>=0)&&Array.prototype.splice.call(w,j,1),L&&(z(f),a.g[g].length==0&&(delete a.g[g],a.h--))}}function at(a,f,g,w){for(let j=0;j<a.length;++j){const L=a[j];if(!L.da&&L.listener==f&&L.capture==!!g&&L.ha==w)return j}return-1}var St="closure_lm_"+(Math.random()*1e6|0),tn={};function cl(a,f,g,w,j){if(Array.isArray(f)){for(let L=0;L<f.length;L++)cl(a,f[L],g,w,j);return null}return g=qm(g),a&&a[he]?a.J(f,g,l(w)?!!w.capture:!1,j):ul(a,f,g,!1,w,j)}function ul(a,f,g,w,j,L){if(!f)throw Error("Invalid event type");const $=l(j)?!!j.capture:!!j;let te=rs(a);if(te||(a[St]=te=new tt(a)),g=te.add(f,g,w,$,L),g.proxy)return g;if(w=dl(),g.proxy=w,w.src=a,w.listener=g,a.addEventListener)D||(j=$),j===void 0&&(j=!1),a.addEventListener(f.toString(),w,j);else if(a.attachEvent)a.attachEvent(ir(f.toString()),w);else if(a.addListener&&a.removeListener)a.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return g}function dl(){function a(g){return f.call(a.src,a.listener,g)}const f=io;return a}function pd(a,f,g,w,j){if(Array.isArray(f))for(var L=0;L<f.length;L++)pd(a,f[L],g,w,j);else w=l(w)?!!w.capture:!!w,g=qm(g),a&&a[he]?(a=a.i,L=String(f).toString(),L in a.g&&(f=a.g[L],g=at(f,g,w,j),g>-1&&(z(f[g]),Array.prototype.splice.call(f,g,1),f.length==0&&(delete a.g[L],a.h--)))):a&&(a=rs(a))&&(f=a.g[f.toString()],a=-1,f&&(a=at(f,g,w,j)),(g=a>-1?f[a]:null)&&so(g))}function so(a){if(typeof a!="number"&&a&&!a.da){var f=a.src;if(f&&f[he])Ht(f.i,a);else{var g=a.type,w=a.proxy;f.removeEventListener?f.removeEventListener(g,w,a.capture):f.detachEvent?f.detachEvent(ir(g),w):f.addListener&&f.removeListener&&f.removeListener(w),(g=rs(f))?(Ht(g,a),g.h==0&&(g.src=null,f[St]=null)):z(a)}}}function ir(a){return a in tn?tn[a]:tn[a]="on"+a}function io(a,f){if(a.da)a=!0;else{f=new ce(f,this);const g=a.listener,w=a.ha||a.src;a.fa&&so(a),a=g.call(w,f)}return a}function rs(a){return a=a[St],a instanceof tt?a:null}var ss="__closure_events_fn_"+(Math.random()*1e9>>>0);function qm(a){return typeof a=="function"?a:(a[ss]||(a[ss]=function(f){return a.handleEvent(f)}),a[ss])}function lt(){S.call(this),this.i=new tt(this),this.M=this,this.G=null}p(lt,S),lt.prototype[he]=!0,lt.prototype.removeEventListener=function(a,f,g,w){pd(this,a,f,g,w)};function yt(a,f){var g,w=a.G;if(w)for(g=[];w;w=w.G)g.push(w);if(a=a.M,w=f.type||f,typeof f=="string")f=new C(f,a);else if(f instanceof C)f.target=f.target||a;else{var j=f;f=new C(w,a),Tt(f,j)}j=!0;let L,$;if(g)for($=g.length-1;$>=0;$--)L=f.g=g[$],j=hl(L,w,!0,f)&&j;if(L=f.g=a,j=hl(L,w,!0,f)&&j,j=hl(L,w,!1,f)&&j,g)for($=0;$<g.length;$++)L=f.g=g[$],j=hl(L,w,!1,f)&&j}lt.prototype.N=function(){if(lt.Z.N.call(this),this.i){var a=this.i;for(const f in a.g){const g=a.g[f];for(let w=0;w<g.length;w++)z(g[w]);delete a.g[f],a.h--}}this.G=null},lt.prototype.J=function(a,f,g,w){return this.i.add(String(a),f,!1,g,w)},lt.prototype.K=function(a,f,g,w){return this.i.add(String(a),f,!0,g,w)};function hl(a,f,g,w){if(f=a.i.g[String(f)],!f)return!0;f=f.concat();let j=!0;for(let L=0;L<f.length;++L){const $=f[L];if($&&!$.da&&$.capture==g){const te=$.listener,Ue=$.ha||$.src;$.fa&&Ht(a.i,$),j=te.call(Ue,w)!==!1&&j}}return j&&!w.defaultPrevented}function WI(a,f){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=u(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:o.setTimeout(a,f||0)}function Gm(a){a.g=WI(()=>{a.g=null,a.i&&(a.i=!1,Gm(a))},a.l);const f=a.h;a.h=null,a.m.apply(null,f)}class HI extends S{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Gm(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oo(a){S.call(this),this.h=a,this.g={}}p(oo,S);var Km=[];function Qm(a){G(a.g,function(f,g){this.g.hasOwnProperty(g)&&so(f)},a),a.g={}}oo.prototype.N=function(){oo.Z.N.call(this),Qm(this)},oo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var md=o.JSON.stringify,qI=o.JSON.parse,GI=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Ym(){}function Jm(){}var ao={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function gd(){C.call(this,"d")}p(gd,C);function yd(){C.call(this,"c")}p(yd,C);var is={},Xm=null;function fl(){return Xm=Xm||new lt}is.Ia="serverreachability";function Zm(a){C.call(this,is.Ia,a)}p(Zm,C);function lo(a){const f=fl();yt(f,new Zm(f))}is.STAT_EVENT="statevent";function eg(a,f){C.call(this,is.STAT_EVENT,a),this.stat=f}p(eg,C);function vt(a){const f=fl();yt(f,new eg(f,a))}is.Ja="timingevent";function tg(a,f){C.call(this,is.Ja,a),this.size=f}p(tg,C);function co(a,f){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},f)}function uo(){this.g=!0}uo.prototype.ua=function(){this.g=!1};function KI(a,f,g,w,j,L){a.info(function(){if(a.g)if(L){var $="",te=L.split("&");for(let ge=0;ge<te.length;ge++){var Ue=te[ge].split("=");if(Ue.length>1){const qe=Ue[0];Ue=Ue[1];const yn=qe.split("_");$=yn.length>=2&&yn[1]=="type"?$+(qe+"="+Ue+"&"):$+(qe+"=redacted&")}}}else $=null;else $=L;return"XMLHTTP REQ ("+w+") [attempt "+j+"]: "+f+`
`+g+`
`+$})}function QI(a,f,g,w,j,L,$){a.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+j+"]: "+f+`
`+g+`
`+L+" "+$})}function zs(a,f,g,w){a.info(function(){return"XMLHTTP TEXT ("+f+"): "+JI(a,g)+(w?" "+w:"")})}function YI(a,f){a.info(function(){return"TIMEOUT: "+f})}uo.prototype.info=function(){};function JI(a,f){if(!a.g)return f;if(!f)return null;try{const L=JSON.parse(f);if(L){for(a=0;a<L.length;a++)if(Array.isArray(L[a])){var g=L[a];if(!(g.length<2)){var w=g[1];if(Array.isArray(w)&&!(w.length<1)){var j=w[0];if(j!="noop"&&j!="stop"&&j!="close")for(let $=1;$<w.length;$++)w[$]=""}}}}return md(L)}catch{return f}}var pl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ng={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},rg;function vd(){}p(vd,Ym),vd.prototype.g=function(){return new XMLHttpRequest},rg=new vd;function ho(a){return encodeURIComponent(String(a))}function XI(a){var f=1;a=a.split(":");const g=[];for(;f>0&&a.length;)g.push(a.shift()),f--;return a.length&&g.push(a.join(":")),g}function or(a,f,g,w){this.j=a,this.i=f,this.l=g,this.S=w||1,this.V=new oo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new sg}function sg(){this.i=null,this.g="",this.h=!1}var ig={},_d={};function wd(a,f,g){a.M=1,a.A=gl(gn(f)),a.u=g,a.R=!0,og(a,null)}function og(a,f){a.F=Date.now(),ml(a),a.B=gn(a.A);var g=a.B,w=a.S;Array.isArray(w)||(w=[String(w)]),_g(g.i,"t",w),a.C=0,g=a.j.L,a.h=new sg,a.g=Vg(a.j,g?f:null,!a.u),a.P>0&&(a.O=new HI(u(a.Y,a,a.g),a.P)),f=a.V,g=a.g,w=a.ba;var j="readystatechange";Array.isArray(j)||(j&&(Km[0]=j.toString()),j=Km);for(let L=0;L<j.length;L++){const $=cl(g,j[L],w||f.handleEvent,!1,f.h||f);if(!$)break;f.g[$.key]=$}f=a.J?re(a.J):{},a.u?(a.v||(a.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,f)):(a.v="GET",a.g.ea(a.B,a.v,null,f)),lo(),KI(a.i,a.v,a.B,a.l,a.S,a.u)}or.prototype.ba=function(a){a=a.target;const f=this.O;f&&cr(a)==3?f.j():this.Y(a)},or.prototype.Y=function(a){try{if(a==this.g)e:{const te=cr(this.g),Ue=this.g.ya(),ge=this.g.ca();if(!(te<3)&&(te!=3||this.g&&(this.h.h||this.g.la()||bg(this.g)))){this.K||te!=4||Ue==7||(Ue==8||ge<=0?lo(3):lo(2)),xd(this);var f=this.g.ca();this.X=f;var g=ZI(this);if(this.o=f==200,QI(this.i,this.v,this.B,this.l,this.S,te,f),this.o){if(this.U&&!this.L){t:{if(this.g){var w,j=this.g;if((w=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(w)){var L=w;break t}}L=null}if(a=L)zs(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ed(this,a);else{this.o=!1,this.m=3,vt(12),os(this),fo(this);break e}}if(this.R){a=!0;let qe;for(;!this.K&&this.C<g.length;)if(qe=eT(this,g),qe==_d){te==4&&(this.m=4,vt(14),a=!1),zs(this.i,this.l,null,"[Incomplete Response]");break}else if(qe==ig){this.m=4,vt(15),zs(this.i,this.l,g,"[Invalid Chunk]"),a=!1;break}else zs(this.i,this.l,qe,null),Ed(this,qe);if(ag(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),te!=4||g.length!=0||this.h.h||(this.m=1,vt(16),a=!1),this.o=this.o&&a,!a)zs(this.i,this.l,g,"[Invalid Chunked Response]"),os(this),fo(this);else if(g.length>0&&!this.W){this.W=!0;var $=this.j;$.g==this&&$.aa&&!$.P&&($.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),Cd($),$.P=!0,vt(11))}}else zs(this.i,this.l,g,null),Ed(this,g);te==4&&os(this),this.o&&!this.K&&(te==4?Dg(this.j,this):(this.o=!1,ml(this)))}else pT(this.g),f==400&&g.indexOf("Unknown SID")>0?(this.m=3,vt(12)):(this.m=0,vt(13)),os(this),fo(this)}}}catch{}finally{}};function ZI(a){if(!ag(a))return a.g.la();const f=bg(a.g);if(f==="")return"";let g="";const w=f.length,j=cr(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return os(a),fo(a),"";a.h.i=new o.TextDecoder}for(let L=0;L<w;L++)a.h.h=!0,g+=a.h.i.decode(f[L],{stream:!(j&&L==w-1)});return f.length=0,a.h.g+=g,a.C=0,a.h.g}function ag(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function eT(a,f){var g=a.C,w=f.indexOf(`
`,g);return w==-1?_d:(g=Number(f.substring(g,w)),isNaN(g)?ig:(w+=1,w+g>f.length?_d:(f=f.slice(w,w+g),a.C=w+g,f)))}or.prototype.cancel=function(){this.K=!0,os(this)};function ml(a){a.T=Date.now()+a.H,lg(a,a.H)}function lg(a,f){if(a.D!=null)throw Error("WatchDog timer not null");a.D=co(u(a.aa,a),f)}function xd(a){a.D&&(o.clearTimeout(a.D),a.D=null)}or.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(YI(this.i,this.B),this.M!=2&&(lo(),vt(17)),os(this),this.m=2,fo(this)):lg(this,this.T-a)};function fo(a){a.j.I==0||a.K||Dg(a.j,a)}function os(a){xd(a);var f=a.O;f&&typeof f.dispose=="function"&&f.dispose(),a.O=null,Qm(a.V),a.g&&(f=a.g,a.g=null,f.abort(),f.dispose())}function Ed(a,f){try{var g=a.j;if(g.I!=0&&(g.g==a||Id(g.h,a))){if(!a.L&&Id(g.h,a)&&g.I==3){try{var w=g.Ba.g.parse(f)}catch{w=null}if(Array.isArray(w)&&w.length==3){var j=w;if(j[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<a.F)xl(g),_l(g);else break e;kd(g),vt(18)}}else g.xa=j[1],0<g.xa-g.K&&j[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=co(u(g.Va,g),6e3));dg(g.h)<=1&&g.ta&&(g.ta=void 0)}else ls(g,11)}else if((a.L||g.g==a)&&xl(g),!b(f))for(j=g.Ba.g.parse(f),f=0;f<j.length;f++){let ge=j[f];const qe=ge[0];if(!(qe<=g.K))if(g.K=qe,ge=ge[1],g.I==2)if(ge[0]=="c"){g.M=ge[1],g.ba=ge[2];const yn=ge[3];yn!=null&&(g.ka=yn,g.j.info("VER="+g.ka));const cs=ge[4];cs!=null&&(g.za=cs,g.j.info("SVER="+g.za));const ur=ge[5];ur!=null&&typeof ur=="number"&&ur>0&&(w=1.5*ur,g.O=w,g.j.info("backChannelRequestTimeoutMs_="+w)),w=g;const dr=a.g;if(dr){const Il=dr.g?dr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Il){var L=w.h;L.g||Il.indexOf("spdy")==-1&&Il.indexOf("quic")==-1&&Il.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Td(L,L.h),L.h=null))}if(w.G){const Ad=dr.g?dr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ad&&(w.wa=Ad,we(w.J,w.G,Ad))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-a.F,g.j.info("Handshake RTT: "+g.T+"ms")),w=g;var $=a;if(w.na=Lg(w,w.L?w.ba:null,w.W),$.L){hg(w.h,$);var te=$,Ue=w.O;Ue&&(te.H=Ue),te.D&&(xd(te),ml(te)),w.g=$}else Ag(w);g.i.length>0&&wl(g)}else ge[0]!="stop"&&ge[0]!="close"||ls(g,7);else g.I==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?ls(g,7):Rd(g):ge[0]!="noop"&&g.l&&g.l.qa(ge),g.A=0)}}lo(4)}catch{}}var tT=class{constructor(a,f){this.g=a,this.map=f}};function cg(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ug(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function dg(a){return a.h?1:a.g?a.g.size:0}function Id(a,f){return a.h?a.h==f:a.g?a.g.has(f):!1}function Td(a,f){a.g?a.g.add(f):a.h=f}function hg(a,f){a.h&&a.h==f?a.h=null:a.g&&a.g.has(f)&&a.g.delete(f)}cg.prototype.cancel=function(){if(this.i=fg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function fg(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let f=a.i;for(const g of a.g.values())f=f.concat(g.G);return f}return x(a.i)}var pg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nT(a,f){if(a){a=a.split("&");for(let g=0;g<a.length;g++){const w=a[g].indexOf("=");let j,L=null;w>=0?(j=a[g].substring(0,w),L=a[g].substring(w+1)):j=a[g],f(j,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function ar(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;a instanceof ar?(this.l=a.l,po(this,a.j),this.o=a.o,this.g=a.g,mo(this,a.u),this.h=a.h,Sd(this,wg(a.i)),this.m=a.m):a&&(f=String(a).match(pg))?(this.l=!1,po(this,f[1]||"",!0),this.o=go(f[2]||""),this.g=go(f[3]||"",!0),mo(this,f[4]),this.h=go(f[5]||"",!0),Sd(this,f[6]||"",!0),this.m=go(f[7]||"")):(this.l=!1,this.i=new vo(null,this.l))}ar.prototype.toString=function(){const a=[];var f=this.j;f&&a.push(yo(f,mg,!0),":");var g=this.g;return(g||f=="file")&&(a.push("//"),(f=this.o)&&a.push(yo(f,mg,!0),"@"),a.push(ho(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&a.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&a.push("/"),a.push(yo(g,g.charAt(0)=="/"?iT:sT,!0))),(g=this.i.toString())&&a.push("?",g),(g=this.m)&&a.push("#",yo(g,aT)),a.join("")},ar.prototype.resolve=function(a){const f=gn(this);let g=!!a.j;g?po(f,a.j):g=!!a.o,g?f.o=a.o:g=!!a.g,g?f.g=a.g:g=a.u!=null;var w=a.h;if(g)mo(f,a.u);else if(g=!!a.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var j=f.h.lastIndexOf("/");j!=-1&&(w=f.h.slice(0,j+1)+w)}if(j=w,j==".."||j==".")w="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){w=j.lastIndexOf("/",0)==0,j=j.split("/");const L=[];for(let $=0;$<j.length;){const te=j[$++];te=="."?w&&$==j.length&&L.push(""):te==".."?((L.length>1||L.length==1&&L[0]!="")&&L.pop(),w&&$==j.length&&L.push("")):(L.push(te),w=!0)}w=L.join("/")}else w=j}return g?f.h=w:g=a.i.toString()!=="",g?Sd(f,wg(a.i)):g=!!a.m,g&&(f.m=a.m),f};function gn(a){return new ar(a)}function po(a,f,g){a.j=g?go(f,!0):f,a.j&&(a.j=a.j.replace(/:$/,""))}function mo(a,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);a.u=f}else a.u=null}function Sd(a,f,g){f instanceof vo?(a.i=f,lT(a.i,a.l)):(g||(f=yo(f,oT)),a.i=new vo(f,a.l))}function we(a,f,g){a.i.set(f,g)}function gl(a){return we(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function go(a,f){return a?f?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function yo(a,f,g){return typeof a=="string"?(a=encodeURI(a).replace(f,rT),g&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function rT(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var mg=/[#\/\?@]/g,sT=/[#\?:]/g,iT=/[#\?]/g,oT=/[#\?@]/g,aT=/#/g;function vo(a,f){this.h=this.g=null,this.i=a||null,this.j=!!f}function as(a){a.g||(a.g=new Map,a.h=0,a.i&&nT(a.i,function(f,g){a.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=vo.prototype,t.add=function(a,f){as(this),this.i=null,a=$s(this,a);let g=this.g.get(a);return g||this.g.set(a,g=[]),g.push(f),this.h+=1,this};function gg(a,f){as(a),f=$s(a,f),a.g.has(f)&&(a.i=null,a.h-=a.g.get(f).length,a.g.delete(f))}function yg(a,f){return as(a),f=$s(a,f),a.g.has(f)}t.forEach=function(a,f){as(this),this.g.forEach(function(g,w){g.forEach(function(j){a.call(f,j,w,this)},this)},this)};function vg(a,f){as(a);let g=[];if(typeof f=="string")yg(a,f)&&(g=g.concat(a.g.get($s(a,f))));else for(a=Array.from(a.g.values()),f=0;f<a.length;f++)g=g.concat(a[f]);return g}t.set=function(a,f){return as(this),this.i=null,a=$s(this,a),yg(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[f]),this.h+=1,this},t.get=function(a,f){return a?(a=vg(this,a),a.length>0?String(a[0]):f):f};function _g(a,f,g){gg(a,f),g.length>0&&(a.i=null,a.g.set($s(a,f),x(g)),a.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],f=Array.from(this.g.keys());for(let w=0;w<f.length;w++){var g=f[w];const j=ho(g);g=vg(this,g);for(let L=0;L<g.length;L++){let $=j;g[L]!==""&&($+="="+ho(g[L])),a.push($)}}return this.i=a.join("&")};function wg(a){const f=new vo;return f.i=a.i,a.g&&(f.g=new Map(a.g),f.h=a.h),f}function $s(a,f){return f=String(f),a.j&&(f=f.toLowerCase()),f}function lT(a,f){f&&!a.j&&(as(a),a.i=null,a.g.forEach(function(g,w){const j=w.toLowerCase();w!=j&&(gg(this,w),_g(this,j,g))},a)),a.j=f}function cT(a,f){const g=new uo;if(o.Image){const w=new Image;w.onload=h(lr,g,"TestLoadImage: loaded",!0,f,w),w.onerror=h(lr,g,"TestLoadImage: error",!1,f,w),w.onabort=h(lr,g,"TestLoadImage: abort",!1,f,w),w.ontimeout=h(lr,g,"TestLoadImage: timeout",!1,f,w),o.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=a}else f(!1)}function uT(a,f){const g=new uo,w=new AbortController,j=setTimeout(()=>{w.abort(),lr(g,"TestPingServer: timeout",!1,f)},1e4);fetch(a,{signal:w.signal}).then(L=>{clearTimeout(j),L.ok?lr(g,"TestPingServer: ok",!0,f):lr(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(j),lr(g,"TestPingServer: error",!1,f)})}function lr(a,f,g,w,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),w(g)}catch{}}function dT(){this.g=new GI}function bd(a){this.i=a.Sb||null,this.h=a.ab||!1}p(bd,Ym),bd.prototype.g=function(){return new yl(this.i,this.h)};function yl(a,f){lt.call(this),this.H=a,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(yl,lt),t=yl.prototype,t.open=function(a,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=f,this.readyState=1,wo(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(f.body=a),(this.H||o).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,_o(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,wo(this)),this.g&&(this.readyState=3,wo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;xg(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function xg(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var f=a.value?a.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!a.done}))&&(this.response=this.responseText+=f)}a.done?_o(this):wo(this),this.readyState==3&&xg(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,_o(this))},t.Na=function(a){this.g&&(this.response=a,_o(this))},t.ga=function(){this.g&&_o(this)};function _o(a){a.readyState=4,a.l=null,a.j=null,a.B=null,wo(a)}t.setRequestHeader=function(a,f){this.A.append(a,f)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,a.push(g[0]+": "+g[1]),g=f.next();return a.join(`\r
`)};function wo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(yl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Eg(a){let f="";return G(a,function(g,w){f+=w,f+=":",f+=g,f+=`\r
`}),f}function Nd(a,f,g){e:{for(w in g){var w=!1;break e}w=!0}w||(g=Eg(g),typeof a=="string"?g!=null&&ho(g):we(a,f,g))}function Re(a){lt.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Re,lt);var hT=/^https?$/i,fT=["POST","PUT"];t=Re.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,f,g,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);f=f?f.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():rg.g(),this.g.onreadystatechange=m(u(this.Ca,this));try{this.B=!0,this.g.open(f,String(a),!0),this.B=!1}catch(L){Ig(this,L);return}if(a=g||"",g=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var j in w)g.set(j,w[j]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const L of w.keys())g.set(L,w.get(L));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(g.keys()).find(L=>L.toLowerCase()=="content-type"),j=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(fT,f,void 0)>=0)||w||j||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,$]of g)this.g.setRequestHeader(L,$);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(L){Ig(this,L)}};function Ig(a,f){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=f,a.o=5,Tg(a),vl(a)}function Tg(a){a.A||(a.A=!0,yt(a,"complete"),yt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,yt(this,"complete"),yt(this,"abort"),vl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vl(this,!0)),Re.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Sg(this):this.Xa())},t.Xa=function(){Sg(this)};function Sg(a){if(a.h&&typeof i<"u"){if(a.v&&cr(a)==4)setTimeout(a.Ca.bind(a),0);else if(yt(a,"readystatechange"),cr(a)==4){a.h=!1;try{const L=a.ca();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var w;if(w=L===0){let $=String(a.D).match(pg)[1]||null;!$&&o.self&&o.self.location&&($=o.self.location.protocol.slice(0,-1)),w=!hT.test($?$.toLowerCase():"")}g=w}if(g)yt(a,"complete"),yt(a,"success");else{a.o=6;try{var j=cr(a)>2?a.g.statusText:""}catch{j=""}a.l=j+" ["+a.ca()+"]",Tg(a)}}finally{vl(a)}}}}function vl(a,f){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const g=a.g;a.g=null,f||yt(a,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function cr(a){return a.g?a.g.readyState:0}t.ca=function(){try{return cr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var f=this.g.responseText;return a&&f.indexOf(a)==0&&(f=f.substring(a.length)),qI(f)}};function bg(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function pT(a){const f={};a=(a.g&&cr(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<a.length;w++){if(b(a[w]))continue;var g=XI(a[w]);const j=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const L=f[j]||[];f[j]=L,L.push(g)}Y(f,function(w){return w.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xo(a,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[a]||f}function Ng(a){this.za=0,this.i=[],this.j=new uo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xo("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xo("baseRetryDelayMs",5e3,a),this.Za=xo("retryDelaySeedMs",1e4,a),this.Ta=xo("forwardChannelMaxRetries",2,a),this.va=xo("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new cg(a&&a.concurrentRequestLimit),this.Ba=new dT,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ng.prototype,t.ka=8,t.I=1,t.connect=function(a,f,g,w){vt(0),this.W=a,this.H=f||{},g&&w!==void 0&&(this.H.OSID=g,this.H.OAID=w),this.F=this.X,this.J=Lg(this,null,this.W),wl(this)};function Rd(a){if(Rg(a),a.I==3){var f=a.V++,g=gn(a.J);if(we(g,"SID",a.M),we(g,"RID",f),we(g,"TYPE","terminate"),Eo(a,g),f=new or(a,a.j,f),f.M=2,f.A=gl(gn(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(f.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=f.A,g=!0),g||(f.g=Vg(f.j,null),f.g.ea(f.A)),f.F=Date.now(),ml(f)}jg(a)}function _l(a){a.g&&(Cd(a),a.g.cancel(),a.g=null)}function Rg(a){_l(a),a.v&&(o.clearTimeout(a.v),a.v=null),xl(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function wl(a){if(!ug(a.h)&&!a.m){a.m=!0;var f=a.Ea;P||y(),O||(P(),O=!0),_.add(f,a),a.D=0}}function mT(a,f){return dg(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=f.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=co(u(a.Ea,a,f),Og(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const j=new or(this,this.j,a);let L=this.o;if(this.U&&(L?(L=re(L),Tt(L,this.U)):L=this.U),this.u!==null||this.R||(j.J=L,L=null),this.S)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var w=this.i[g];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(f+=w,f>4096){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Cg(this,j,f),g=gn(this.J),we(g,"RID",a),we(g,"CVER",22),this.G&&we(g,"X-HTTP-Session-Id",this.G),Eo(this,g),L&&(this.R?f="headers="+ho(Eg(L))+"&"+f:this.u&&Nd(g,this.u,L)),Td(this.h,j),this.Ra&&we(g,"TYPE","init"),this.S?(we(g,"$req",f),we(g,"SID","null"),j.U=!0,wd(j,g,null)):wd(j,g,f),this.I=2}}else this.I==3&&(a?kg(this,a):this.i.length==0||ug(this.h)||kg(this))};function kg(a,f){var g;f?g=f.l:g=a.V++;const w=gn(a.J);we(w,"SID",a.M),we(w,"RID",g),we(w,"AID",a.K),Eo(a,w),a.u&&a.o&&Nd(w,a.u,a.o),g=new or(a,a.j,g,a.D+1),a.u===null&&(g.J=a.o),f&&(a.i=f.G.concat(a.i)),f=Cg(a,g,1e3),g.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Td(a.h,g),wd(g,w,f)}function Eo(a,f){a.H&&G(a.H,function(g,w){we(f,w,g)}),a.l&&G({},function(g,w){we(f,w,g)})}function Cg(a,f,g){g=Math.min(a.i.length,g);const w=a.l?u(a.l.Ka,a.l,a):null;e:{var j=a.i;let te=-1;for(;;){const Ue=["count="+g];te==-1?g>0?(te=j[0].g,Ue.push("ofs="+te)):te=0:Ue.push("ofs="+te);let ge=!0;for(let qe=0;qe<g;qe++){var L=j[qe].g;const yn=j[qe].map;if(L-=te,L<0)te=Math.max(0,j[qe].g-100),ge=!1;else try{L="req"+L+"_"||"";try{var $=yn instanceof Map?yn:Object.entries(yn);for(const[cs,ur]of $){let dr=ur;l(ur)&&(dr=md(ur)),Ue.push(L+cs+"="+encodeURIComponent(dr))}}catch(cs){throw Ue.push(L+"type="+encodeURIComponent("_badmap")),cs}}catch{w&&w(yn)}}if(ge){$=Ue.join("&");break e}}$=void 0}return a=a.i.splice(0,g),f.G=a,$}function Ag(a){if(!a.g&&!a.v){a.Y=1;var f=a.Da;P||y(),O||(P(),O=!0),_.add(f,a),a.A=0}}function kd(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=co(u(a.Da,a),Og(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Pg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=co(u(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,vt(10),_l(this),Pg(this))};function Cd(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Pg(a){a.g=new or(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var f=gn(a.na);we(f,"RID","rpc"),we(f,"SID",a.M),we(f,"AID",a.K),we(f,"CI",a.F?"0":"1"),!a.F&&a.ia&&we(f,"TO",a.ia),we(f,"TYPE","xmlhttp"),Eo(a,f),a.u&&a.o&&Nd(f,a.u,a.o),a.O&&(a.g.H=a.O);var g=a.g;a=a.ba,g.M=1,g.A=gl(gn(f)),g.u=null,g.R=!0,og(g,a)}t.Va=function(){this.C!=null&&(this.C=null,_l(this),kd(this),vt(19))};function xl(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Dg(a,f){var g=null;if(a.g==f){xl(a),Cd(a),a.g=null;var w=2}else if(Id(a.h,f))g=f.G,hg(a.h,f),w=1;else return;if(a.I!=0){if(f.o)if(w==1){g=f.u?f.u.length:0,f=Date.now()-f.F;var j=a.D;w=fl(),yt(w,new tg(w,g)),wl(a)}else Ag(a);else if(j=f.m,j==3||j==0&&f.X>0||!(w==1&&mT(a,f)||w==2&&kd(a)))switch(g&&g.length>0&&(f=a.h,f.i=f.i.concat(g)),j){case 1:ls(a,5);break;case 4:ls(a,10);break;case 3:ls(a,6);break;default:ls(a,2)}}}function Og(a,f){let g=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(g*=2),g*f}function ls(a,f){if(a.j.info("Error code "+f),f==2){var g=u(a.bb,a),w=a.Ua;const j=!w;w=new ar(w||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||po(w,"https"),gl(w),j?cT(w.toString(),g):uT(w.toString(),g)}else vt(2);a.I=0,a.l&&a.l.pa(f),jg(a),Rg(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function jg(a){if(a.I=0,a.ja=[],a.l){const f=fg(a.h);(f.length!=0||a.i.length!=0)&&(N(a.ja,f),N(a.ja,a.i),a.h.i.length=0,x(a.i),a.i.length=0),a.l.oa()}}function Lg(a,f,g){var w=g instanceof ar?gn(g):new ar(g);if(w.g!="")f&&(w.g=f+"."+w.g),mo(w,w.u);else{var j=o.location;w=j.protocol,f=f?f+"."+j.hostname:j.hostname,j=+j.port;const L=new ar(null);w&&po(L,w),f&&(L.g=f),j&&mo(L,j),g&&(L.h=g),w=L}return g=a.G,f=a.wa,g&&f&&we(w,g,f),we(w,"VER",a.ka),Eo(a,w),w}function Vg(a,f,g){if(f&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=a.Aa&&!a.ma?new Re(new bd({ab:g})):new Re(a.ma),f.Fa(a.L),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mg(){}t=Mg.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function El(){}El.prototype.g=function(a,f){return new Lt(a,f)};function Lt(a,f){lt.call(this),this.g=new Ng(f),this.l=a,this.h=f&&f.messageUrlParams||null,a=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(a?a["X-WebChannel-Content-Type"]=f.messageContentType:a={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(a?a["X-WebChannel-Client-Profile"]=f.sa:a={"X-WebChannel-Client-Profile":f.sa}),this.g.U=a,(a=f&&f.Qb)&&!b(a)&&(this.g.u=a),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!b(f)&&(this.g.G=f,a=this.h,a!==null&&f in a&&(a=this.h,f in a&&delete a[f])),this.j=new Bs(this)}p(Lt,lt),Lt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){Rd(this.g)},Lt.prototype.o=function(a){var f=this.g;if(typeof a=="string"){var g={};g.__data__=a,a=g}else this.v&&(g={},g.__data__=md(a),a=g);f.i.push(new tT(f.Ya++,a)),f.I==3&&wl(f)},Lt.prototype.N=function(){this.g.l=null,delete this.j,Rd(this.g),delete this.g,Lt.Z.N.call(this)};function Fg(a){gd.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var f=a.__sm__;if(f){e:{for(const g in f){a=g;break e}a=void 0}(this.i=a)&&(a=this.i,f=f!==null&&a in f?f[a]:void 0),this.data=f}else this.data=a}p(Fg,gd);function Ug(){yd.call(this),this.status=1}p(Ug,yd);function Bs(a){this.g=a}p(Bs,Mg),Bs.prototype.ra=function(){yt(this.g,"a")},Bs.prototype.qa=function(a){yt(this.g,new Fg(a))},Bs.prototype.pa=function(a){yt(this.g,new Ug)},Bs.prototype.oa=function(){yt(this.g,"b")},El.prototype.createWebChannel=El.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,Wx=function(){return new El},Bx=function(){return fl()},$x=is,Pf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},pl.NO_ERROR=0,pl.TIMEOUT=8,pl.HTTP_ERROR=6,hc=pl,ng.COMPLETE="complete",zx=ng,Jm.EventType=ao,ao.OPEN="a",ao.CLOSE="b",ao.ERROR="c",ao.MESSAGE="d",lt.prototype.listen=lt.prototype.J,Uo=Jm,Re.prototype.listenOnce=Re.prototype.K,Re.prototype.getLastError=Re.prototype.Ha,Re.prototype.getLastErrorCode=Re.prototype.ya,Re.prototype.getStatus=Re.prototype.ca,Re.prototype.getResponseJson=Re.prototype.La,Re.prototype.getResponseText=Re.prototype.la,Re.prototype.send=Re.prototype.ea,Re.prototype.setWithCredentials=Re.prototype.Fa,Ux=Re}).apply(typeof $l<"u"?$l:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ht=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ht.UNAUTHENTICATED=new ht(null),ht.GOOGLE_CREDENTIALS=new ht("google-credentials-uid"),ht.FIRST_PARTY=new ht("first-party-uid"),ht.MOCK_USER=new ht("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ji="12.8.0";function hA(t){Ji=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs=new tm("@firebase/firestore");function Gs(){return Cs.logLevel}function H(t,...e){if(Cs.logLevel<=ie.DEBUG){const n=e.map(fm);Cs.debug(`Firestore (${Ji}): ${t}`,...n)}}function Jn(t,...e){if(Cs.logLevel<=ie.ERROR){const n=e.map(fm);Cs.error(`Firestore (${Ji}): ${t}`,...n)}}function As(t,...e){if(Cs.logLevel<=ie.WARN){const n=e.map(fm);Cs.warn(`Firestore (${Ji}): ${t}`,...n)}}function fm(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Hx(t,r,n)}function Hx(t,e,n){let r=`FIRESTORE (${Ji}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Jn(r),new Error(r)}function fe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Hx(e,s,r)}function Z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends Pn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Gx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ht.UNAUTHENTICATED))}shutdown(){}}class fA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class pA{constructor(e){this.t=e,this.currentUser=ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){fe(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Fr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Fr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Fr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(fe(typeof r.accessToken=="string",31837,{l:r}),new qx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string",2055,{h:e}),new ht(e)}}class mA{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ht.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class gA{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new mA(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class F0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yA{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ve(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){fe(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new F0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(fe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new F0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=vA(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function oe(t,e){return t<e?-1:t>e?1:0}function Df(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return ph(s)===ph(i)?oe(s,i):ph(s)?1:-1}return oe(t.length,e.length)}const _A=55296,wA=57343;function ph(t){const e=t.charCodeAt(0);return e>=_A&&e<=wA}function Di(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0="__name__";class wn{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&J(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return wn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof wn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=wn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return oe(e.length,n.length)}static compareSegments(e,n){const r=wn.isNumericId(e),s=wn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?wn.extractNumericId(e).compare(wn.extractNumericId(n)):Df(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Mr.fromString(e.substring(4,e.length-2))}}class ye extends wn{construct(e,n,r){return new ye(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ye(n)}static emptyPath(){return new ye([])}}const xA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ye extends wn{construct(e,n,r){return new Ye(e,n,r)}static isValidIdentifier(e){return xA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ye.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===U0}static keyField(){return new Ye([U0])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new W(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new W(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new W(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new W(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ye(n)}static emptyPath(){return new Ye([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(ye.fromString(e))}static fromName(e){return new K(ye.fromString(e).popFirst(5))}static empty(){return new K(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new ye(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(t,e,n){if(!n)throw new W(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Qx(t,e,n,r){if(e===!0&&r===!0)throw new W(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function z0(t){if(!K.isDocumentKey(t))throw new W(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $0(t){if(K.isDocumentKey(t))throw new W(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Yx(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Gu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J(12329,{type:typeof t})}function Yt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gu(t);throw new W(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ja(t,e){if(!Yx(t))throw new W(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new W(M.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0=-62135596800,W0=1e6;class ve{static now(){return ve.fromMillis(Date.now())}static fromDate(e){return ve.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*W0);return new ve(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<B0)throw new W(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/W0}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ve._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ja(e,ve._jsonSchema))return new ve(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-B0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ve._jsonSchemaVersion="firestore/timestamp/1.0",ve._jsonSchema={type:Fe("string",ve._jsonSchemaVersion),seconds:Fe("number"),nanoseconds:Fe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{static fromTimestamp(e){return new X(e)}static min(){return new X(new ve(0,0))}static max(){return new X(new ve(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da=-1;function EA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=X.fromTimestamp(r===1e9?new ve(n+1,0):new ve(n,r));return new Hr(s,K.empty(),e)}function IA(t){return new Hr(t.readTime,t.key,Da)}class Hr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Hr(X.min(),K.empty(),Da)}static max(){return new Hr(X.max(),K.empty(),Da)}}function TA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xi(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==SA)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(h=>{o[u]=h,++l,l===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function NA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Zi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ku.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm=-1;function Qu(t){return t==null}function Yc(t){return t===0&&1/t==-1/0}function RA(t){return typeof t=="number"&&Number.isInteger(t)&&!Yc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="";function kA(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=H0(e)),e=CA(t.get(n),e);return H0(e)}function CA(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Jx:n+="";break;default:n+=i}}return n}function H0(t){return t+Jx+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ts(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Xx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,n){this.comparator=e,this.root=n||rt.EMPTY}insert(e,n){return new Ne(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rt.BLACK,null,null))}remove(e){return new Ne(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bl(this.root,e,this.comparator,!0)}}class Bl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??rt.RED,this.left=s??rt.EMPTY,this.right=i??rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new rt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return rt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw J(43730,{key:this.key,value:this.value});if(this.right.isRed())throw J(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw J(27949);return e+(this.isRed()?0:1)}}rt.EMPTY=null,rt.RED=!0,rt.BLACK=!1;rt.EMPTY=new class{constructor(){this.size=0}get key(){throw J(57766)}get value(){throw J(16141)}get color(){throw J(16727)}get left(){throw J(29726)}get right(){throw J(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new G0(this.data.getIterator())}getIteratorFrom(e){return new G0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Be)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Be(this.comparator);return n.data=e,n}}class G0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.fields=e,e.sort(Ye.comparator)}static empty(){return new Ut([])}unionWith(e){let n=new Be(Ye.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ut(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Di(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Zx("Invalid base64 string: "+i):i}}(e);return new Ze(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ze(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ze.EMPTY_BYTE_STRING=new Ze("");const AA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qr(t){if(fe(!!t,39018),typeof t=="string"){let e=0;const n=AA.exec(t);if(fe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ce(t.seconds),nanos:Ce(t.nanos)}}function Ce(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Gr(t){return typeof t=="string"?Ze.fromBase64String(t):Ze.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="server_timestamp",tE="__type__",nE="__previous_value__",rE="__local_write_time__";function mm(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[tE])==null?void 0:r.stringValue)===eE}function Yu(t){const e=t.mapValue.fields[nE];return mm(e)?Yu(e):e}function Oa(t){const e=qr(t.mapValue.fields[rE].timestampValue);return new ve(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,n,r,s,i,o,l,c,u,h,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h,this.apiKey=p}}const Jc="(default)";class Oi{constructor(e,n){this.projectId=e,this.database=n||Jc}static empty(){return new Oi("","")}get isDefaultDatabase(){return this.database===Jc}isEqual(e){return e instanceof Oi&&e.projectId===this.projectId&&e.database===this.database}}function DA(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new W(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oi(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="__type__",OA="__max__",Wl={mapValue:{}},iE="__vector__",Xc="value";function Kr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?mm(t)?4:LA(t)?9007199254740991:jA(t)?10:11:J(28295,{value:t})}function kn(t,e){if(t===e)return!0;const n=Kr(t);if(n!==Kr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Oa(t).isEqual(Oa(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=qr(s.timestampValue),l=qr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Gr(s.bytesValue).isEqual(Gr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ce(s.geoPointValue.latitude)===Ce(i.geoPointValue.latitude)&&Ce(s.geoPointValue.longitude)===Ce(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ce(s.integerValue)===Ce(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ce(s.doubleValue),l=Ce(i.doubleValue);return o===l?Yc(o)===Yc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Di(t.arrayValue.values||[],e.arrayValue.values||[],kn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(q0(o)!==q0(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!kn(o[c],l[c])))return!1;return!0}(t,e);default:return J(52216,{left:t})}}function ja(t,e){return(t.values||[]).find(n=>kn(n,e))!==void 0}function ji(t,e){if(t===e)return 0;const n=Kr(t),r=Kr(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Ce(i.integerValue||i.doubleValue),c=Ce(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return K0(t.timestampValue,e.timestampValue);case 4:return K0(Oa(t),Oa(e));case 5:return Df(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Gr(i),c=Gr(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=oe(l[u],c[u]);if(h!==0)return h}return oe(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=oe(Ce(i.latitude),Ce(o.latitude));return l!==0?l:oe(Ce(i.longitude),Ce(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Q0(t.arrayValue,e.arrayValue);case 10:return function(i,o){var m,x,N,A;const l=i.fields||{},c=o.fields||{},u=(m=l[Xc])==null?void 0:m.arrayValue,h=(x=c[Xc])==null?void 0:x.arrayValue,p=oe(((N=u==null?void 0:u.values)==null?void 0:N.length)||0,((A=h==null?void 0:h.values)==null?void 0:A.length)||0);return p!==0?p:Q0(u,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Wl.mapValue&&o===Wl.mapValue)return 0;if(i===Wl.mapValue)return 1;if(o===Wl.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){const m=Df(c[p],h[p]);if(m!==0)return m;const x=ji(l[c[p]],u[h[p]]);if(x!==0)return x}return oe(c.length,h.length)}(t.mapValue,e.mapValue);default:throw J(23264,{he:n})}}function K0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);const n=qr(t),r=qr(e),s=oe(n.seconds,r.seconds);return s!==0?s:oe(n.nanos,r.nanos)}function Q0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ji(n[s],r[s]);if(i)return i}return oe(n.length,r.length)}function Li(t){return Of(t)}function Of(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=qr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Gr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Of(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Of(n.fields[o])}`;return s+"}"}(t.mapValue):J(61005,{value:t})}function fc(t){switch(Kr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Yu(t);return e?16+fc(e):16;case 5:return 2*t.stringValue.length;case 6:return Gr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+fc(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ts(r.fields,(i,o)=>{s+=i.length+fc(o)}),s}(t.mapValue);default:throw J(13486,{value:t})}}function Y0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function jf(t){return!!t&&"integerValue"in t}function gm(t){return!!t&&"arrayValue"in t}function J0(t){return!!t&&"nullValue"in t}function X0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function pc(t){return!!t&&"mapValue"in t}function jA(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[sE])==null?void 0:r.stringValue)===iE}function ra(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ts(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ra(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ra(t.arrayValue.values[n]);return e}return{...t}}function LA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===OA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.value=e}static empty(){return new kt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!pc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ra(n)}setAll(e){let n=Ye.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=ra(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());pc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return kn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];pc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ts(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new kt(ra(this.value))}}function oE(t){const e=[];return ts(t.fields,(n,r)=>{const s=new Ye([n]);if(pc(r)){const i=oE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ut(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new pt(e,0,X.min(),X.min(),X.min(),kt.empty(),0)}static newFoundDocument(e,n,r,s){return new pt(e,1,n,X.min(),r,s,0)}static newNoDocument(e,n){return new pt(e,2,n,X.min(),X.min(),kt.empty(),0)}static newUnknownDocument(e,n){return new pt(e,3,n,X.min(),X.min(),kt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n){this.position=e,this.inclusive=n}}function Z0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=K.comparator(K.fromName(o.referenceValue),n.key):r=ji(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function ev(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!kn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,n="asc"){this.field=e,this.dir=n}}function VA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{}class Me extends aE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new FA(e,n,r):n==="array-contains"?new $A(e,r):n==="in"?new BA(e,r):n==="not-in"?new WA(e,r):n==="array-contains-any"?new HA(e,r):new Me(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new UA(e,r):new zA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ji(n,this.value)):n!==null&&Kr(this.value)===Kr(n)&&this.matchesComparison(ji(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mn extends aE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new mn(e,n)}matches(e){return lE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function lE(t){return t.op==="and"}function cE(t){return MA(t)&&lE(t)}function MA(t){for(const e of t.filters)if(e instanceof mn)return!1;return!0}function Lf(t){if(t instanceof Me)return t.field.canonicalString()+t.op.toString()+Li(t.value);if(cE(t))return t.filters.map(e=>Lf(e)).join(",");{const e=t.filters.map(n=>Lf(n)).join(",");return`${t.op}(${e})`}}function uE(t,e){return t instanceof Me?function(r,s){return s instanceof Me&&r.op===s.op&&r.field.isEqual(s.field)&&kn(r.value,s.value)}(t,e):t instanceof mn?function(r,s){return s instanceof mn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&uE(o,s.filters[l]),!0):!1}(t,e):void J(19439)}function dE(t){return t instanceof Me?function(n){return`${n.field.canonicalString()} ${n.op} ${Li(n.value)}`}(t):t instanceof mn?function(n){return n.op.toString()+" {"+n.getFilters().map(dE).join(" ,")+"}"}(t):"Filter"}class FA extends Me{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class UA extends Me{constructor(e,n){super(e,"in",n),this.keys=hE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class zA extends Me{constructor(e,n){super(e,"not-in",n),this.keys=hE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function hE(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class $A extends Me{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return gm(n)&&ja(n.arrayValue,this.value)}}class BA extends Me{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ja(this.value.arrayValue,n)}}class WA extends Me{constructor(e,n){super(e,"not-in",n)}matches(e){if(ja(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ja(this.value.arrayValue,n)}}class HA extends Me{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!gm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ja(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function tv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new qA(t,e,n,r,s,i,o)}function ym(t){const e=Z(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Lf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Qu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Li(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Li(r)).join(",")),e.Te=n}return e.Te}function vm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!VA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!uE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ev(t.startAt,e.startAt)&&ev(t.endAt,e.endAt)}function Vf(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function GA(t,e,n,r,s,i,o,l){return new eo(t,e,n,r,s,i,o,l)}function _m(t){return new eo(t)}function nv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function KA(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function fE(t){return t.collectionGroup!==null}function sa(t){const e=Z(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Be(Ye.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new La(i,r))}),n.has(Ye.keyField().canonicalString())||e.Ie.push(new La(Ye.keyField(),r))}return e.Ie}function bn(t){const e=Z(t);return e.Ee||(e.Ee=QA(e,sa(t))),e.Ee}function QA(t,e){if(t.limitType==="F")return tv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new La(s.field,i)});const n=t.endAt?new Zc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Zc(t.startAt.position,t.startAt.inclusive):null;return tv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Mf(t,e){const n=t.filters.concat([e]);return new eo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function YA(t,e){const n=t.explicitOrderBy.concat([e]);return new eo(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function Ff(t,e,n){return new eo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ju(t,e){return vm(bn(t),bn(e))&&t.limitType===e.limitType}function pE(t){return`${ym(bn(t))}|lt:${t.limitType}`}function Ks(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>dE(s)).join(", ")}]`),Qu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Li(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Li(s)).join(",")),`Target(${r})`}(bn(t))}; limitType=${t.limitType})`}function Xu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):K.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of sa(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const u=Z0(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,sa(r),s)||r.endAt&&!function(o,l,c){const u=Z0(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,sa(r),s))}(t,e)}function JA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function mE(t){return(e,n)=>{let r=!1;for(const s of sa(t)){const i=XA(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function XA(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?ji(c,u):J(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ts(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Xx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=new Ne(K.comparator);function Xn(){return ZA}const gE=new Ne(K.comparator);function zo(...t){let e=gE;for(const n of t)e=e.insert(n.key,n);return e}function yE(t){let e=gE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ys(){return ia()}function vE(){return ia()}function ia(){return new Fs(t=>t.toString(),(t,e)=>t.isEqual(e))}const eP=new Ne(K.comparator),tP=new Be(K.comparator);function ae(...t){let e=tP;for(const n of t)e=e.add(n);return e}const nP=new Be(oe);function rP(){return nP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yc(e)?"-0":e}}function _E(t){return{integerValue:""+t}}function sP(t,e){return RA(e)?_E(e):wm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(){this._=void 0}}function iP(t,e,n){return t instanceof eu?function(s,i){const o={fields:{[tE]:{stringValue:eE},[rE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&mm(i)&&(i=Yu(i)),i&&(o.fields[nE]=i),{mapValue:o}}(n,e):t instanceof Va?xE(t,e):t instanceof Ma?EE(t,e):function(s,i){const o=wE(s,i),l=rv(o)+rv(s.Ae);return jf(o)&&jf(s.Ae)?_E(l):wm(s.serializer,l)}(t,e)}function oP(t,e,n){return t instanceof Va?xE(t,e):t instanceof Ma?EE(t,e):n}function wE(t,e){return t instanceof tu?function(r){return jf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class eu extends Zu{}class Va extends Zu{constructor(e){super(),this.elements=e}}function xE(t,e){const n=IE(e);for(const r of t.elements)n.some(s=>kn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ma extends Zu{constructor(e){super(),this.elements=e}}function EE(t,e){let n=IE(e);for(const r of t.elements)n=n.filter(s=>!kn(s,r));return{arrayValue:{values:n}}}class tu extends Zu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function rv(t){return Ce(t.integerValue||t.doubleValue)}function IE(t){return gm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function aP(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Va&&s instanceof Va||r instanceof Ma&&s instanceof Ma?Di(r.elements,s.elements,kn):r instanceof tu&&s instanceof tu?kn(r.Ae,s.Ae):r instanceof eu&&s instanceof eu}(t.transform,e.transform)}class lP{constructor(e,n){this.version=e,this.transformResults=n}}class jt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new jt}static exists(e){return new jt(void 0,e)}static updateTime(e){return new jt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ed{}function TE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new td(t.key,jt.none()):new Xa(t.key,t.data,jt.none());{const n=t.data,r=kt.empty();let s=new Be(Ye.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ns(t.key,r,new Ut(s.toArray()),jt.none())}}function cP(t,e,n){t instanceof Xa?function(s,i,o){const l=s.value.clone(),c=iv(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof ns?function(s,i,o){if(!mc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=iv(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(SE(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function oa(t,e,n,r){return t instanceof Xa?function(i,o,l,c){if(!mc(i.precondition,o))return l;const u=i.value.clone(),h=ov(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ns?function(i,o,l,c){if(!mc(i.precondition,o))return l;const u=ov(i.fieldTransforms,c,o),h=o.data;return h.setAll(SE(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,l){return mc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function uP(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=wE(r.transform,s||null);i!=null&&(n===null&&(n=kt.empty()),n.set(r.field,i))}return n||null}function sv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Di(r,s,(i,o)=>aP(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Xa extends ed{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ns extends ed{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function SE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function iv(t,e,n){const r=new Map;fe(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,oP(o,l,n[s]))}return r}function ov(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,iP(i,o,e))}return r}class td extends ed{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dP extends ed{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&cP(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=oa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=oa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=vE();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=TE(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&Di(this.mutations,e.mutations,(n,r)=>sv(n,r))&&Di(this.baseMutations,e.baseMutations,(n,r)=>sv(n,r))}}class xm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){fe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return eP}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new xm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe,ue;function mP(t){switch(t){case M.OK:return J(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return J(15467,{code:t})}}function bE(t){if(t===void 0)return Jn("GRPC error has no .code"),M.UNKNOWN;switch(t){case Oe.OK:return M.OK;case Oe.CANCELLED:return M.CANCELLED;case Oe.UNKNOWN:return M.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return M.INTERNAL;case Oe.UNAVAILABLE:return M.UNAVAILABLE;case Oe.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Oe.NOT_FOUND:return M.NOT_FOUND;case Oe.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Oe.ABORTED:return M.ABORTED;case Oe.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Oe.DATA_LOSS:return M.DATA_LOSS;default:return J(39323,{code:t})}}(ue=Oe||(Oe={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP=new Mr([4294967295,4294967295],0);function av(t){const e=gP().encode(t),n=new Fx;return n.update(e),new Uint8Array(n.digest())}function lv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Mr([n,r],0),new Mr([s,i],0)]}class Em{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new $o(`Invalid padding: ${n}`);if(r<0)throw new $o(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $o(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new $o(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Mr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Mr.fromNumber(r)));return s.compare(yP)===1&&(s=new Mr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=av(e),[r,s]=lv(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Em(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=av(e),[r,s]=lv(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class $o extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Za.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new nd(X.min(),s,new Ne(oe),Xn(),ae())}}class Za{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Za(r,n,ae(),ae(),ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class NE{constructor(e,n){this.targetId=e,this.Ce=n}}class RE{constructor(e,n,r=Ze.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class cv{constructor(){this.ve=0,this.Fe=uv(),this.Me=Ze.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ae(),n=ae(),r=ae();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:J(38017,{changeType:i})}}),new Za(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=uv()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,fe(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class vP{constructor(e){this.Ge=e,this.ze=new Map,this.je=Xn(),this.He=Hl(),this.Je=Hl(),this.Ze=new Ne(oe)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:J(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Vf(i))if(r===0){const o=new K(i.path);this.et(n,o,pt.newNoDocument(o,X.min()))}else fe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Gr(r).toUint8Array()}catch(c){if(c instanceof Zx)return As("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Em(o,s,i)}catch(c){return As(c instanceof $o?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&Vf(l.target)){const c=new K(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,pt.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.Ke())}});let r=ae();this.Je.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new nd(e,n,this.Ze,this.je,r);return this.je=Xn(),this.He=Hl(),this.Je=Hl(),this.Ze=new Ne(oe),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new cv,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Be(oe),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Be(oe),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new cv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Hl(){return new Ne(K.comparator)}function uv(){return new Ne(K.comparator)}const _P={asc:"ASCENDING",desc:"DESCENDING"},wP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xP={and:"AND",or:"OR"};class EP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Uf(t,e){return t.useProto3Json||Qu(e)?e:{value:e}}function nu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function IP(t,e){return nu(t,e.toTimestamp())}function Nn(t){return fe(!!t,49232),X.fromTimestamp(function(n){const r=qr(n);return new ve(r.seconds,r.nanos)}(t))}function Im(t,e){return zf(t,e).canonicalString()}function zf(t,e){const n=function(s){return new ye(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function CE(t){const e=ye.fromString(t);return fe(jE(e),10190,{key:e.toString()}),e}function $f(t,e){return Im(t.databaseId,e.path)}function mh(t,e){const n=CE(e);if(n.get(1)!==t.databaseId.projectId)throw new W(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(PE(n))}function AE(t,e){return Im(t.databaseId,e)}function TP(t){const e=CE(t);return e.length===4?ye.emptyPath():PE(e)}function Bf(t){return new ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function PE(t){return fe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function dv(t,e,n){return{name:$f(t,e),fields:n.value.mapValue.fields}}function SP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:J(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(fe(h===void 0||typeof h=="string",58123),Ze.fromBase64String(h||"")):(fe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Ze.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const h=u.code===void 0?M.UNKNOWN:bE(u.code);return new W(h,u.message||"")}(o);n=new RE(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=mh(t,r.document.name),i=Nn(r.document.updateTime),o=r.document.createTime?Nn(r.document.createTime):X.min(),l=new kt({mapValue:{fields:r.document.fields}}),c=pt.newFoundDocument(s,i,o,l),u=r.targetIds||[],h=r.removedTargetIds||[];n=new gc(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=mh(t,r.document),i=r.readTime?Nn(r.readTime):X.min(),o=pt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new gc([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=mh(t,r.document),i=r.removedTargetIds||[];n=new gc([],i,s,null)}else{if(!("filter"in e))return J(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new pP(s,i),l=r.targetId;n=new NE(l,o)}}return n}function bP(t,e){let n;if(e instanceof Xa)n={update:dv(t,e.key,e.value)};else if(e instanceof td)n={delete:$f(t,e.key)};else if(e instanceof ns)n={update:dv(t,e.key,e.data),updateMask:jP(e.fieldMask)};else{if(!(e instanceof dP))return J(16599,{dt:e.type});n={verify:$f(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof eu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Va)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ma)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof tu)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw J(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:IP(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:J(27497)}(t,e.precondition)),n}function NP(t,e){return t&&t.length>0?(fe(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Nn(s.updateTime):Nn(i);return o.isEqual(X.min())&&(o=Nn(i)),new lP(o,s.transformResults||[])}(n,e))):[]}function RP(t,e){return{documents:[AE(t,e.path)]}}function kP(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=AE(t,s);const i=function(u){if(u.length!==0)return OE(mn.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:Qs(m.field),direction:PP(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Uf(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function CP(t){let e=TP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){fe(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(p){const m=DE(p);return m instanceof mn&&cE(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(N){return new La(Ys(N.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,Qu(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(p){const m=!!p.before,x=p.values||[];return new Zc(x,m)}(n.startAt));let u=null;return n.endAt&&(u=function(p){const m=!p.before,x=p.values||[];return new Zc(x,m)}(n.endAt)),GA(e,s,o,i,l,"F",c,u)}function AP(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function DE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ys(n.unaryFilter.field);return Me.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ys(n.unaryFilter.field);return Me.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ys(n.unaryFilter.field);return Me.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ys(n.unaryFilter.field);return Me.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return J(61313);default:return J(60726)}}(t):t.fieldFilter!==void 0?function(n){return Me.create(Ys(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return J(58110);default:return J(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return mn.create(n.compositeFilter.filters.map(r=>DE(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return J(1026)}}(n.compositeFilter.op))}(t):J(30097,{filter:t})}function PP(t){return _P[t]}function DP(t){return wP[t]}function OP(t){return xP[t]}function Qs(t){return{fieldPath:t.canonicalString()}}function Ys(t){return Ye.fromServerFormat(t.fieldPath)}function OE(t){return t instanceof Me?function(n){if(n.op==="=="){if(X0(n.value))return{unaryFilter:{field:Qs(n.field),op:"IS_NAN"}};if(J0(n.value))return{unaryFilter:{field:Qs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(X0(n.value))return{unaryFilter:{field:Qs(n.field),op:"IS_NOT_NAN"}};if(J0(n.value))return{unaryFilter:{field:Qs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qs(n.field),op:DP(n.op),value:n.value}}}(t):t instanceof mn?function(n){const r=n.getFilters().map(s=>OE(s));return r.length===1?r[0]:{compositeFilter:{op:OP(n.op),filters:r}}}(t):J(54877,{filter:t})}function jP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function jE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function LE(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,n,r,s,i=X.min(),o=X.min(),l=Ze.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Sr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e){this.yt=e}}function VP(t){const e=CP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ff(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(){this.Sn=new FP}addToCollectionParentIndex(e,n){return this.Sn.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Hr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Hr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class FP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Be(ye.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Be(ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},VE=41943040;class Nt{static withCacheSize(e){return new Nt(e,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nt.DEFAULT_COLLECTION_PERCENTILE=10,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nt.DEFAULT=new Nt(VE,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nt.DISABLED=new Nt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Vi(0)}static ar(){return new Vi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv="LruGarbageCollector",UP=1048576;function pv([t,e],[n,r]){const s=oe(t,n);return s===0?oe(e,r):s}class zP{constructor(e){this.Pr=e,this.buffer=new Be(pv),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();pv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class $P{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){H(fv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Zi(n)?H(fv,"Ignoring IndexedDB error during garbage collection: ",n):await Xi(n)}await this.Ar(3e5)})}}class BP{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return F.resolve(Ku.ce);const r=new zP(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(hv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hv):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,i,o,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(u=Date.now(),Gs()<=ie.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function WP(t,e){return new BP(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(){this.changes=new Fs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&oa(r.mutation,s,Ut.empty(),ve.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ae()){const s=ys();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=zo();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ys();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ae()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Xn();const o=ia(),l=function(){return ia()}();return n.forEach((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof ns)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),oa(h.mutation,u,h.mutation.getFieldMask(),ve.now())):o.set(u.key,Ut.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>l.set(u,new qP(h,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const r=ia();let s=new Ne((o,l)=>o-l),i=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||Ut.empty();h=l.applyToLocalView(u,h),r.set(c,h);const p=(s.get(l.batchId)||ae()).add(c);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,p=vE();h.forEach(m=>{if(!i.has(m)){const x=TE(n.get(m),r.get(m));x!==null&&p.set(m,x),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return KA(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):fE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(ys());let l=Da,c=i;return o.next(u=>F.forEach(u,(h,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,ae())).next(h=>({batchId:l,changes:yE(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let s=zo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=zo();return this.indexManager.getCollectionParents(e,i).next(l=>F.forEach(l,c=>{const u=function(p,m){return new eo(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,pt.newInvalidDocument(h)))});let l=zo();return o.forEach((c,u)=>{const h=i.get(c);h!==void 0&&oa(h.mutation,u,Ut.empty(),ve.now()),Xu(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return F.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Nn(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(s){return{name:s.name,query:VP(s.bundledQuery),readTime:Nn(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(){this.overlays=new Ne(K.comparator),this.Lr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ys();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.bt(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Lr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=ys(),i=n.length+1,o=new K(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ne((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=ys(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=ys(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=s)););return F.resolve(l)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new fP(n,r));let i=this.Lr.get(n);i===void 0&&(i=ae(),this.Lr.set(n,i)),this.Lr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(){this.sessionToken=Ze.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(){this.kr=new Be(Ge.Kr),this.qr=new Be(Ge.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Ge(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Ge(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new K(new ye([])),r=new Ge(n,e),s=new Ge(n,e+1),i=[];return this.qr.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new K(new ye([])),r=new Ge(n,e),s=new Ge(n,e+1);let i=ae();return this.qr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ge(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ge{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return K.comparator(e.key,n.key)||oe(e.Hr,n.Hr)}static Ur(e,n){return oe(e.Hr,n.Hr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Be(Ge.Kr)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new hP(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Jr=this.Jr.add(new Ge(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?pm:this.Yn-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ge(n,0),s=new Ge(n,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],o=>{const l=this.Zr(o.Hr);i.push(l)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Be(oe);return n.forEach(s=>{const i=new Ge(s,0),o=new Ge(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,o],l=>{r=r.add(l.Hr)})}),F.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;K.isDocumentKey(i)||(i=i.child(""));const o=new Ge(new K(i),0);let l=new Be(oe);return this.Jr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Hr)),!0)},o),F.resolve(this.Yr(l))}Yr(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){fe(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return F.forEach(n.mutations,s=>{const i=new Ge(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new Ge(n,0),s=this.Jr.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e){this.ti=e,this.docs=function(){return new Ne(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():pt.newInvalidDocument(n))}getEntries(e,n){let r=Xn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():pt.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Xn();const o=n.path,l=new K(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||TA(IA(h),r)<=0||(s.has(h.key)||Xu(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){J(9500)}ni(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ZP(this)}getSize(e){return F.resolve(this.size)}}class ZP extends HP{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e){this.persistence=e,this.ri=new Fs(n=>ym(n),vm),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.ii=0,this.si=new Tm,this.targetCount=0,this.oi=Vi._r()}forEachTarget(e,n){return this.ri.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),F.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Vi(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.lr(n),F.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ri.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ri.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,n){this._i={},this.overlays={},this.ai=new Ku(0),this.ui=!1,this.ui=!0,this.ci=new YP,this.referenceDelegate=e(this),this.li=new e4(this),this.indexManager=new MP,this.remoteDocumentCache=function(s){return new XP(s)}(r=>this.referenceDelegate.hi(r)),this.serializer=new LP(n),this.Pi=new KP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new QP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new JP(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new t4(this.ai.next());return this.referenceDelegate.Ti(),r(s).next(i=>this.referenceDelegate.Ii(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return F.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class t4 extends bA{constructor(e){super(),this.currentSequenceNumber=e}}class Sm{constructor(e){this.persistence=e,this.Ri=new Tm,this.Ai=null}static Vi(e){return new Sm(e)}get di(){if(this.Ai)return this.Ai;throw J(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),F.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.di,r=>{const s=K.fromPath(r);return this.mi(e,s).next(i=>{i||n.removeEntry(s,X.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return F.or([()=>F.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class ru{constructor(e,n){this.persistence=e,this.fi=new Fs(r=>kA(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=WP(this,n)}static Vi(e,n){return new ru(e,n)}Ti(){}Ii(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return F.forEach(this.fi,(r,s)=>this.wr(e,r,s).next(i=>i?F.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,o=>this.wr(e,o,n).next(l=>{l||(r++,i.removeEntry(o,X.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),F.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=fc(e.data.value)),n}wr(e,n,r){return F.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return F.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=ae(),s=ae();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new bm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return dN()?8:NA(gt())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.gs(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ps(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new n4;return this.ys(e,n,o).next(l=>{if(i.result=l,this.As)return this.ws(e,n,o,l.size)})}).next(()=>i.result)}ws(e,n,r,s){return r.documentReadCount<this.Vs?(Gs()<=ie.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Ks(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),F.resolve()):(Gs()<=ie.DEBUG&&H("QueryEngine","Query:",Ks(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Gs()<=ie.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Ks(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bn(n))):F.resolve())}gs(e,n){if(nv(n))return F.resolve(null);let r=bn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ff(n,null,"F"),r=bn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ae(...i);return this.fs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.bs(n,l);return this.Ss(n,u,o,c.readTime)?this.gs(e,Ff(n,null,"F")):this.Ds(e,u,n,c)}))})))}ps(e,n,r,s){return nv(n)||s.isEqual(X.min())?F.resolve(null):this.fs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ss(n,o,r,s)?F.resolve(null):(Gs()<=ie.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ks(n)),this.Ds(e,o,n,EA(s,Da)).next(l=>l))})}bs(e,n){let r=new Be(mE(e));return n.forEach((s,i)=>{Xu(e,i)&&(r=r.add(i))}),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,n,r){return Gs()<=ie.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Ks(n)),this.fs.getDocumentsMatchingQuery(e,n,Hr.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm="LocalStore",s4=3e8;class i4{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new Ne(oe),this.Fs=new Fs(i=>ym(i),vm),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GP(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function o4(t,e,n,r){return new i4(t,e,n,r)}async function FE(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=ae();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ns:u,removedBatchIds:o,addedBatchIds:l}))})})}function a4(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const p=u.batch,m=p.keys();let x=F.resolve();return m.forEach(N=>{x=x.next(()=>h.getEntry(c,N)).next(A=>{const k=u.docVersions.get(N);fe(k!==null,48541),A.version.compareTo(k)<0&&(p.applyToRemoteDocument(A,u),A.isValidDocument()&&(A.setReadTime(u.commitVersion),h.addEntry(A)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=ae();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function UE(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function l4(t,e){const n=Z(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const l=[];e.targetChanges.forEach((h,p)=>{const m=s.get(p);if(!m)return;l.push(n.li.removeMatchingKeys(i,h.removedDocuments,p).next(()=>n.li.addMatchingKeys(i,h.addedDocuments,p)));let x=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?x=x.withResumeToken(Ze.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):h.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(h.resumeToken,r)),s=s.insert(p,x),function(A,k,I){return A.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=s4?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(m,x,h)&&l.push(n.li.updateTargetData(i,x))});let c=Xn(),u=ae();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(c4(i,o,e.documentUpdates).next(h=>{c=h.Bs,u=h.Ls})),!r.isEqual(X.min())){const h=n.li.getLastRemoteSnapshotVersion(i).next(p=>n.li.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return F.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.vs=s,i))}function c4(t,e,n){let r=ae(),s=ae();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Xn();return n.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(X.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):H(Nm,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Bs:o,Ls:s}})}function u4(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=pm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function d4(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.li.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.li.allocateTargetId(r).next(o=>(s=new Sr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function Wf(t,e,n){const r=Z(t),s=r.vs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Zi(o))throw o;H(Nm,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function mv(t,e,n){const r=Z(t);let s=X.min(),i=ae();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const p=Z(c),m=p.Fs.get(h);return m!==void 0?F.resolve(p.vs.get(m)):p.li.getTargetData(u,h)}(r,o,bn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:X.min(),n?i:ae())).next(l=>(h4(r,JA(e),l),{documents:l,ks:i})))}function h4(t,e,n){let r=t.Ms.get(e)||X.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ms.set(e,r)}class gv{constructor(){this.activeTargetIds=rP()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class f4{constructor(){this.vo=new gv,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new gv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv="ConnectivityMonitor";class vv{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){H(yv,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){H(yv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ql=null;function Hf(){return ql===null?ql=function(){return 268435456+Math.round(2147483648*Math.random())}():ql++,"0x"+ql.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh="RestConnection",m4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class g4{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===Jc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=Hf(),l=this.Qo(e,n.toUriEncodedString());H(gh,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,s,i);const{host:u}=new URL(l),h=Ls(u);return this.zo(e,l,c,r,h).then(p=>(H(gh,`Received RPC '${e}' ${o}: `,p),p),p=>{throw As(gh,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",r),p})}jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ji}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Qo(e,n){const r=m4[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt="WebChannelConnection",Po=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(s){setTimeout(()=>{throw s},0)}})};class xi extends g4{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!xi.c_){const e=Bx();Po(e,$x.STAT_EVENT,n=>{n.stat===Pf.PROXY?H(dt,"STAT_EVENT: detected buffering proxy"):n.stat===Pf.NOPROXY&&H(dt,"STAT_EVENT: detected no buffering proxy")}),xi.c_=!0}}zo(e,n,r,s,i){const o=Hf();return new Promise((l,c)=>{const u=new Ux;u.setWithCredentials(!0),u.listenOnce(zx.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case hc.NO_ERROR:const p=u.getResponseJson();H(dt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case hc.TIMEOUT:H(dt,`RPC '${e}' ${o} timed out`),c(new W(M.DEADLINE_EXCEEDED,"Request time out"));break;case hc.HTTP_ERROR:const m=u.getStatus();if(H(dt,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let x=u.getResponseJson();Array.isArray(x)&&(x=x[0]);const N=x==null?void 0:x.error;if(N&&N.status&&N.message){const A=function(I){const v=I.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(v)>=0?v:M.UNKNOWN}(N.status);c(new W(A,N.message))}else c(new W(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new W(M.UNAVAILABLE,"Connection failed."));break;default:J(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{H(dt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);H(dt,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,r,15)})}T_(e,n,r){const s=Hf(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=i.join("");H(dt,`Creating RPC '${e}' stream ${s}: ${u}`,l);const h=o.createWebChannel(u,l);this.I_(h);let p=!1,m=!1;const x=new y4({Ho:N=>{m?H(dt,`Not sending because RPC '${e}' stream ${s} is closed:`,N):(p||(H(dt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),p=!0),H(dt,`RPC '${e}' stream ${s} sending:`,N),h.send(N))},Jo:()=>h.close()});return Po(h,Uo.EventType.OPEN,()=>{m||(H(dt,`RPC '${e}' stream ${s} transport opened.`),x.i_())}),Po(h,Uo.EventType.CLOSE,()=>{m||(m=!0,H(dt,`RPC '${e}' stream ${s} transport closed`),x.o_(),this.E_(h))}),Po(h,Uo.EventType.ERROR,N=>{m||(m=!0,As(dt,`RPC '${e}' stream ${s} transport errored. Name:`,N.name,"Message:",N.message),x.o_(new W(M.UNAVAILABLE,"The operation could not be completed")))}),Po(h,Uo.EventType.MESSAGE,N=>{var A;if(!m){const k=N.data[0];fe(!!k,16349);const I=k,v=(I==null?void 0:I.error)||((A=I[0])==null?void 0:A.error);if(v){H(dt,`RPC '${e}' stream ${s} received error:`,v);const E=v.status;let R=function(_){const y=Oe[_];if(y!==void 0)return bE(y)}(E),P=v.message;R===void 0&&(R=M.INTERNAL,P="Unknown error status: "+E+" with message "+v.message),m=!0,x.o_(new W(R,P)),h.close()}else H(dt,`RPC '${e}' stream ${s} received:`,k),x.__(k)}}),xi.u_(),setTimeout(()=>{x.s_()},0),x}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Wx()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v4(t){return new xi(t)}function yh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(t){return new EP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xi.c_=!1;class zE{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v="PersistentStream";class $E{constructor(e,n,r,s,i,o,l,c){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new zE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(Jn(n.toString()),Jn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new W(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return H(_v,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(H(_v,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _4 extends $E{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=SP(this.serializer,e),r=function(i){if(!("targetChange"in i))return X.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?X.min():o.readTime?Nn(o.readTime):X.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=Bf(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=Vf(c)?{documents:RP(i,c)}:{query:kP(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=kE(i,o.resumeToken);const u=Uf(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(X.min())>0){l.readTime=nu(i,o.snapshotVersion.toTimestamp());const u=Uf(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=AP(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=Bf(this.serializer),n.removeTarget=e,this.K_(n)}}class w4 extends $E{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=NP(e.writeResults,e.commitTime),r=Nn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Bf(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>bP(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{}class E4 extends x4{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new W(M.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,zf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new W(M.UNKNOWN,i.toString())})}jo(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.jo(e,zf(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(M.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function I4(t,e,n,r){return new E4(t,e,n,r)}class T4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Jn(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="RemoteStore";class S4{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{Us(this)&&(H(Ps,"Restarting streams for network reachability change."),await async function(c){const u=Z(c);u.Ea.add(4),await el(u),u.Va.set("Unknown"),u.Ea.delete(4),await sd(u)}(this))})}),this.Va=new T4(r,s)}}async function sd(t){if(Us(t))for(const e of t.Ra)await e(!0)}async function el(t){for(const e of t.Ra)await e(!1)}function BE(t,e){const n=Z(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Am(n)?Cm(n):to(n).O_()&&km(n,e))}function Rm(t,e){const n=Z(t),r=to(n);n.Ia.delete(e),r.O_()&&WE(n,e),n.Ia.size===0&&(r.O_()?r.L_():Us(n)&&n.Va.set("Unknown"))}function km(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}to(t).Z_(e)}function WE(t,e){t.da.$e(e),to(t).X_(e)}function Cm(t){t.da=new vP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),to(t).start(),t.Va.ua()}function Am(t){return Us(t)&&!to(t).x_()&&t.Ia.size>0}function Us(t){return Z(t).Ea.size===0}function HE(t){t.da=void 0}async function b4(t){t.Va.set("Online")}async function N4(t){t.Ia.forEach((e,n)=>{km(t,e)})}async function R4(t,e){HE(t),Am(t)?(t.Va.ha(e),Cm(t)):t.Va.set("Unknown")}async function k4(t,e,n){if(t.Va.set("Online"),e instanceof RE&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.da.removeTarget(l))}(t,e)}catch(r){H(Ps,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await su(t,r)}else if(e instanceof gc?t.da.Xe(e):e instanceof NE?t.da.st(e):t.da.tt(e),!n.isEqual(X.min()))try{const r=await UE(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.da.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(Ze.EMPTY_BYTE_STRING,h.snapshotVersion)),WE(i,c);const p=new Sr(h.target,c,u,h.sequenceNumber);km(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){H(Ps,"Failed to raise snapshot:",r),await su(t,r)}}async function su(t,e,n){if(!Zi(e))throw e;t.Ea.add(1),await el(t),t.Va.set("Offline"),n||(n=()=>UE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(Ps,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await sd(t)})}function qE(t,e){return e().catch(n=>su(t,n,e))}async function id(t){const e=Z(t),n=Qr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:pm;for(;C4(e);)try{const s=await u4(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,A4(e,s)}catch(s){await su(e,s)}GE(e)&&KE(e)}function C4(t){return Us(t)&&t.Ta.length<10}function A4(t,e){t.Ta.push(e);const n=Qr(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function GE(t){return Us(t)&&!Qr(t).x_()&&t.Ta.length>0}function KE(t){Qr(t).start()}async function P4(t){Qr(t).ra()}async function D4(t){const e=Qr(t);for(const n of t.Ta)e.ea(n.mutations)}async function O4(t,e,n){const r=t.Ta.shift(),s=xm.from(r,e,n);await qE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await id(t)}async function j4(t,e){e&&Qr(t).Y_&&await async function(r,s){if(function(o){return mP(o)&&o!==M.ABORTED}(s.code)){const i=r.Ta.shift();Qr(r).B_(),await qE(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await id(r)}}(t,e),GE(t)&&KE(t)}async function wv(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),H(Ps,"RemoteStore received new credentials");const r=Us(n);n.Ea.add(3),await el(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await sd(n)}async function L4(t,e){const n=Z(t);e?(n.Ea.delete(2),await sd(n)):e||(n.Ea.add(2),await el(n),n.Va.set("Unknown"))}function to(t){return t.ma||(t.ma=function(n,r,s){const i=Z(n);return i.sa(),new _4(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:b4.bind(null,t),Yo:N4.bind(null,t),t_:R4.bind(null,t),J_:k4.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),Am(t)?Cm(t):t.Va.set("Unknown")):(await t.ma.stop(),HE(t))})),t.ma}function Qr(t){return t.fa||(t.fa=function(n,r,s){const i=Z(n);return i.sa(),new w4(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:P4.bind(null,t),t_:j4.bind(null,t),ta:D4.bind(null,t),na:O4.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await id(t)):(await t.fa.stop(),t.Ta.length>0&&(H(Ps,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Pm(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dm(t,e){if(Jn("AsyncQueue",`${e}: ${t}`),Zi(t))return new W(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{static emptySet(e){return new Ei(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=zo(),this.sortedSet=new Ne(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ei)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ei;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(){this.ga=new Ne(K.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):J(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Mi{constructor(e,n,r,s,i,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Mi(e,n,Ei.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ju(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class M4{constructor(){this.queries=Ev(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Z(n),i=s.queries;s.queries=Ev(),i.forEach((o,l)=>{for(const c of l.ba)c.onError(r)})})(this,new W(M.ABORTED,"Firestore shutting down"))}}function Ev(){return new Fs(t=>pE(t),Ju)}async function QE(t,e){const n=Z(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new V4,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Dm(o,`Initialization of query '${Ks(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.ba.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Om(n)}async function YE(t,e){const n=Z(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.ba.indexOf(e);o>=0&&(i.ba.splice(o,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function F4(t,e){const n=Z(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.ba)l.Fa(s)&&(r=!0);o.wa=s}}r&&Om(n)}function U4(t,e,n){const r=Z(t),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(n);r.queries.delete(e)}function Om(t){t.Ca.forEach(e=>{e.next()})}var qf,Iv;(Iv=qf||(qf={})).Ma="default",Iv.Cache="cache";class JE{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Mi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Mi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==qf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e){this.key=e}}class ZE{constructor(e){this.key=e}}class z4{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ae(),this.mutatedKeys=ae(),this.eu=mE(e),this.tu=new Ei(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new xv,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,p)=>{const m=s.get(h),x=Xu(this.query,p)?p:null,N=!!m&&this.mutatedKeys.has(m.key),A=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let k=!1;m&&x?m.data.isEqual(x.data)?N!==A&&(r.track({type:3,doc:x}),k=!0):this.su(m,x)||(r.track({type:2,doc:x}),k=!0,(c&&this.eu(x,c)>0||u&&this.eu(x,u)<0)&&(l=!0)):!m&&x?(r.track({type:0,doc:x}),k=!0):m&&!x&&(r.track({type:1,doc:m}),k=!0,(c||u)&&(l=!0)),k&&(x?(o=o.add(x),i=A?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Ss:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,p)=>function(x,N){const A=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J(20277,{Vt:k})}};return A(x)-A(N)}(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Ya.size===0&&this.current&&!s?1:0,u=c!==this.Xa;return this.Xa=c,o.length!==0||u?{snapshot:new Mi(this.query,e.tu,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new xv,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ae(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new ZE(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new XE(r))}),n}cu(e){this.Za=e.ks,this.Ya=ae();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Mi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const jm="SyncEngine";class $4{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class B4{constructor(e){this.key=e,this.hu=!1}}class W4{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Fs(l=>pE(l),Ju),this.Iu=new Map,this.Eu=new Set,this.Ru=new Ne(K.comparator),this.Au=new Map,this.Vu=new Tm,this.du={},this.mu=new Map,this.fu=Vi.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function H4(t,e,n=!0){const r=iI(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await eI(r,e,n,!0),s}async function q4(t,e){const n=iI(t);await eI(n,e,!0,!1)}async function eI(t,e,n,r){const s=await d4(t.localStore,bn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await G4(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&BE(t.remoteStore,s),l}async function G4(t,e,n,r,s){t.pu=(p,m,x)=>async function(A,k,I,v){let E=k.view.ru(I);E.Ss&&(E=await mv(A.localStore,k.query,!1).then(({documents:_})=>k.view.ru(_,E)));const R=v&&v.targetChanges.get(k.targetId),P=v&&v.targetMismatches.get(k.targetId)!=null,O=k.view.applyChanges(E,A.isPrimaryClient,R,P);return Sv(A,k.targetId,O.au),O.snapshot}(t,p,m,x);const i=await mv(t.localStore,e,!0),o=new z4(e,i.ks),l=o.ru(i.documents),c=Za.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,c);Sv(t,n,u.au);const h=new $4(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function K4(t,e,n){const r=Z(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Ju(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Wf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Rm(r.remoteStore,s.targetId),Gf(r,s.targetId)}).catch(Xi)):(Gf(r,s.targetId),await Wf(r.localStore,s.targetId,!0))}async function Q4(t,e){const n=Z(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Rm(n.remoteStore,r.targetId))}async function Y4(t,e,n){const r=rD(t);try{const s=await function(o,l){const c=Z(o),u=ve.now(),h=l.reduce((x,N)=>x.add(N.key),ae());let p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",x=>{let N=Xn(),A=ae();return c.xs.getEntries(x,h).next(k=>{N=k,N.forEach((I,v)=>{v.isValidDocument()||(A=A.add(I))})}).next(()=>c.localDocuments.getOverlayedDocuments(x,N)).next(k=>{p=k;const I=[];for(const v of l){const E=uP(v,p.get(v.key).overlayedDocument);E!=null&&I.push(new ns(v.key,E,oE(E.value.mapValue),jt.exists(!0)))}return c.mutationQueue.addMutationBatch(x,u,I,l)}).next(k=>{m=k;const I=k.applyToLocalDocumentSet(p,A);return c.documentOverlayCache.saveOverlays(x,k.batchId,I)})}).then(()=>({batchId:m.batchId,changes:yE(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let u=o.du[o.currentUser.toKey()];u||(u=new Ne(oe)),u=u.insert(l,c),o.du[o.currentUser.toKey()]=u}(r,s.batchId,n),await tl(r,s.changes),await id(r.remoteStore)}catch(s){const i=Dm(s,"Failed to persist write");n.reject(i)}}async function tI(t,e){const n=Z(t);try{const r=await l4(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(fe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?fe(o.hu,14607):s.removedDocuments.size>0&&(fe(o.hu,42227),o.hu=!1))}),await tl(n,r,e)}catch(r){await Xi(r)}}function Tv(t,e,n){const r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=Z(o);c.onlineState=l;let u=!1;c.queries.forEach((h,p)=>{for(const m of p.ba)m.va(l)&&(u=!0)}),u&&Om(c)}(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function J4(t,e,n){const r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ne(K.comparator);o=o.insert(i,pt.newNoDocument(i,X.min()));const l=ae().add(i),c=new nd(X.min(),new Map,new Ne(oe),o,l);await tI(r,c),r.Ru=r.Ru.remove(i),r.Au.delete(e),Lm(r)}else await Wf(r.localStore,e,!1).then(()=>Gf(r,e,n)).catch(Xi)}async function X4(t,e){const n=Z(t),r=e.batch.batchId;try{const s=await a4(n.localStore,e);rI(n,r,null),nI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await tl(n,s)}catch(s){await Xi(s)}}async function Z4(t,e,n){const r=Z(t);try{const s=await function(o,l){const c=Z(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(p=>(fe(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(u,p))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);rI(r,e,n),nI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await tl(r,s)}catch(s){await Xi(s)}}function nI(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function rI(t,e,n){const r=Z(t);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function Gf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||sI(t,r)})}function sI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(Rm(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),Lm(t))}function Sv(t,e,n){for(const r of n)r instanceof XE?(t.Vu.addReference(r.key,e),eD(t,r)):r instanceof ZE?(H(jm,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||sI(t,r.key)):J(19791,{wu:r})}function eD(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(H(jm,"New document in limbo: "+n),t.Eu.add(r),Lm(t))}function Lm(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new K(ye.fromString(e)),r=t.fu.next();t.Au.set(r,new B4(n)),t.Ru=t.Ru.insert(n,r),BE(t.remoteStore,new Sr(bn(_m(n.path)),r,"TargetPurposeLimboResolution",Ku.ce))}}async function tl(t,e,n){const r=Z(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{o.push(r.pu(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const p=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(u){s.push(u);const p=bm.Es(c.targetId,u);i.push(p)}}))}),await Promise.all(o),r.Pu.J_(s),await async function(c,u){const h=Z(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(u,m=>F.forEach(m.Ts,x=>h.persistence.referenceDelegate.addReference(p,m.targetId,x)).next(()=>F.forEach(m.Is,x=>h.persistence.referenceDelegate.removeReference(p,m.targetId,x)))))}catch(p){if(!Zi(p))throw p;H(Nm,"Failed to update sequence numbers: "+p)}for(const p of u){const m=p.targetId;if(!p.fromCache){const x=h.vs.get(m),N=x.snapshotVersion,A=x.withLastLimboFreeSnapshotVersion(N);h.vs=h.vs.insert(m,A)}}}(r.localStore,i))}async function tD(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){H(jm,"User change. New user:",e.toKey());const r=await FE(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new W(M.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await tl(n,r.Ns)}}function nD(t,e){const n=Z(t),r=n.Au.get(e);if(r&&r.hu)return ae().add(r.key);{let s=ae();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function iI(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=tI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=J4.bind(null,e),e.Pu.J_=F4.bind(null,e.eventManager),e.Pu.yu=U4.bind(null,e.eventManager),e}function rD(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=X4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Z4.bind(null,e),e}class iu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return o4(this.persistence,new r4,e.initialUser,this.serializer)}Cu(e){return new ME(Sm.Vi,this.serializer)}Du(e){return new f4}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}iu.provider={build:()=>new iu};class sD extends iu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){fe(this.persistence.referenceDelegate instanceof ru,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new $P(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Nt.withCacheSize(this.cacheSizeBytes):Nt.DEFAULT;return new ME(r=>ru.Vi(r,n),this.serializer)}}class Kf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Tv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=tD.bind(null,this.syncEngine),await L4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new M4}()}createDatastore(e){const n=rd(e.databaseInfo.databaseId),r=v4(e.databaseInfo);return I4(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new S4(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Tv(this.syncEngine,n,0),function(){return vv.v()?new vv:new p4}())}createSyncEngine(e,n){return function(s,i,o,l,c,u,h){const p=new W4(s,i,o,l,c,u);return h&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Z(s);H(Ps,"RemoteStore shutting down."),i.Ea.add(5),await el(i),i.Aa.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Kf.provider={build:()=>new Kf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Jn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr="FirestoreClient";class iD{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=ht.UNAUTHENTICATED,this.clientId=qu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H(Yr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H(Yr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Dm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function vh(t,e){t.asyncQueue.verifyOperationInProgress(),H(Yr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await FE(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function bv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await oD(t);H(Yr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>wv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>wv(e.remoteStore,s)),t._onlineComponents=e}async function oD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(Yr,"Using user provided OfflineComponentProvider");try{await vh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===M.FAILED_PRECONDITION||s.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;As("Error using user provided cache. Falling back to memory cache: "+n),await vh(t,new iu)}}else H(Yr,"Using default OfflineComponentProvider"),await vh(t,new sD(void 0));return t._offlineComponents}async function aI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(Yr,"Using user provided OnlineComponentProvider"),await bv(t,t._uninitializedComponentsProvider._online)):(H(Yr,"Using default OnlineComponentProvider"),await bv(t,new Kf))),t._onlineComponents}function aD(t){return aI(t).then(e=>e.syncEngine)}async function Qf(t){const e=await aI(t),n=e.eventManager;return n.onListen=H4.bind(null,e.syncEngine),n.onUnlisten=K4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=q4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Q4.bind(null,e.syncEngine),n}function lD(t,e,n,r){const s=new oI(r),i=new JE(e,s,n);return t.asyncQueue.enqueueAndForget(async()=>QE(await Qf(t),i)),()=>{s.Nu(),t.asyncQueue.enqueueAndForget(async()=>YE(await Qf(t),i))}}function cD(t,e,n={}){const r=new Fr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const h=new oI({next:m=>{h.Nu(),o.enqueueAndForget(()=>YE(i,p)),m.fromCache&&c.source==="server"?u.reject(new W(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new JE(l,h,{includeMetadataChanges:!0,Ka:!0});return QE(i,p)}(await Qf(t),t.asyncQueue,e,n,r)),r.promise}function uD(t,e){const n=new Fr;return t.asyncQueue.enqueueAndForget(async()=>Y4(await aD(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD="ComponentProvider",Nv=new Map;function hD(t,e,n,r,s){return new PA(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,lI(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI="firestore.googleapis.com",Rv=!0;class kv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new W(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cI,this.ssl=Rv}else this.host=e.host,this.ssl=e.ssl??Rv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=VE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<UP)throw new W(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Qx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lI(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new W(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new W(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new W(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class od{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Gx;switch(r.type){case"firstParty":return new gA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Nv.get(n);r&&(H(dD,"Removing Datastore"),Nv.delete(n),r.terminate())}(this),Promise.resolve()}}function uI(t,e,n,r={}){var u;t=Yt(t,od);const s=Ls(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(Zp(`https://${l}`),em("Firestore",!0)),i.host!==cI&&i.host!==l&&As("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!Ns(c,o)&&(t._setSettings(c),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=ht.MOCK_USER;else{h=U1(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new W(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ht(m)}t._authCredentials=new fA(new qx(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new sr(this.firestore,e,this._query)}}class Pe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pe(this.firestore,e,this._key)}toJSON(){return{type:Pe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ja(n,Pe._jsonSchema))return new Pe(e,r||null,new K(ye.fromString(n.referencePath)))}}Pe._jsonSchemaVersion="firestore/documentReference/1.0",Pe._jsonSchema={type:Fe("string",Pe._jsonSchemaVersion),referencePath:Fe("string")};class Bn extends sr{constructor(e,n,r){super(e,n,_m(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pe(this.firestore,null,new K(e))}withConverter(e){return new Bn(this.firestore,e,this._path)}}function ws(t,e,...n){if(t=ne(t),Kx("collection","path",e),t instanceof od){const r=ye.fromString(e,...n);return $0(r),new Bn(t,null,r)}{if(!(t instanceof Pe||t instanceof Bn))throw new W(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ye.fromString(e,...n));return $0(r),new Bn(t.firestore,null,r)}}function Zn(t,e,...n){if(t=ne(t),arguments.length===1&&(e=qu.newId()),Kx("doc","path",e),t instanceof od){const r=ye.fromString(e,...n);return z0(r),new Pe(t,null,new K(r))}{if(!(t instanceof Pe||t instanceof Bn))throw new W(M.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ye.fromString(e,...n));return z0(r),new Pe(t.firestore,t instanceof Bn?t.converter:null,new K(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="AsyncQueue";class Av{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new zE(this,"async_queue_retry"),this._c=()=>{const r=yh();r&&H(Cv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=yh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=yh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Fr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Zi(e))throw e;H(Cv,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Jn("INTERNAL UNHANDLED ERROR: ",Pv(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Pm.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&J(47125,{Pc:Pv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Pv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class er extends od{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Av,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Av(e),this._firestoreClient=void 0,await e}}}function dI(t,e){const n=typeof t=="object"?t:rm(),r=typeof t=="string"?t:Jc,s=Ou(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=V1("firestore");i&&uI(s,...i)}return s}function nl(t){if(t._terminated)throw new W(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||fD(t),t._firestoreClient}function fD(t){var r,s,i,o;const e=t._freezeSettings(),n=hD(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(s=t._app)==null?void 0:s.options.apiKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new iD(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mt(Ze.fromBase64String(e))}catch(n){throw new W(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Mt(Ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Mt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ja(e,Mt._jsonSchema))return Mt.fromBase64String(e.bytes)}}Mt._jsonSchemaVersion="firestore/bytes/1.0",Mt._jsonSchema={type:Fe("string",Mt._jsonSchemaVersion),bytes:Fe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ye(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:fn._jsonSchemaVersion}}static fromJSON(e){if(Ja(e,fn._jsonSchema))return new fn(e.latitude,e.longitude)}}fn._jsonSchemaVersion="firestore/geoPoint/1.0",fn._jsonSchema={type:Fe("string",fn._jsonSchemaVersion),latitude:Fe("number"),longitude:Fe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Jt._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ja(e,Jt._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Jt(e.vectorValues);throw new W(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Jt._jsonSchemaVersion="firestore/vectorValue/1.0",Jt._jsonSchema={type:Fe("string",Jt._jsonSchemaVersion),vectorValues:Fe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD=/^__.*__$/;class mD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ns(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xa(e,this.data,n,this.fieldTransforms)}}class hI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ns(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function fI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J(40011,{dataSource:t})}}class Vm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Vm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return ou(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(fI(this.dataSource)&&pD.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class gD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||rd(e)}createContext(e,n,r,s=!1){return new Vm({dataSource:e,methodName:n,targetDoc:r,path:Ye.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ld(t){const e=t._freezeSettings(),n=rd(t._databaseId);return new gD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function pI(t,e,n,r,s,i={}){const o=t.createContext(i.merge||i.mergeFields?2:0,e,n,s);Mm("Data must be an object, but it was:",o,r);const l=yI(r,o);let c,u;if(i.merge)c=new Ut(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const p of i.mergeFields){const m=Ds(e,p,n);if(!o.contains(m))throw new W(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);wI(h,m)||h.push(m)}c=new Ut(h),u=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,u=o.fieldTransforms;return new mD(new kt(l),c,u)}class cd extends ad{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cd}}function mI(t,e,n,r){const s=t.createContext(1,e,n);Mm("Data must be an object, but it was:",s,r);const i=[],o=kt.empty();ts(r,(c,u)=>{const h=_I(e,c,n);u=ne(u);const p=s.childContextForFieldPath(h);if(u instanceof cd)i.push(h);else{const m=sl(u,p);m!=null&&(i.push(h),o.set(h,m))}});const l=new Ut(i);return new hI(o,l,s.fieldTransforms)}function gI(t,e,n,r,s,i){const o=t.createContext(1,e,n),l=[Ds(e,r,n)],c=[s];if(i.length%2!=0)throw new W(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(Ds(e,i[m])),c.push(i[m+1]);const u=[],h=kt.empty();for(let m=l.length-1;m>=0;--m)if(!wI(u,l[m])){const x=l[m];let N=c[m];N=ne(N);const A=o.childContextForFieldPath(x);if(N instanceof cd)u.push(x);else{const k=sl(N,A);k!=null&&(u.push(x),h.set(x,k))}}const p=new Ut(u);return new hI(h,p,o.fieldTransforms)}function yD(t,e,n,r=!1){return sl(n,t.createContext(r?4:3,e))}function sl(t,e){if(vI(t=ne(t)))return Mm("Unsupported field value:",e,t),yI(t,e);if(t instanceof ad)return function(r,s){if(!fI(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=sl(l,s.childContextForArray(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=ne(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return sP(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ve.fromDate(r);return{timestampValue:nu(s.serializer,i)}}if(r instanceof ve){const i=new ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nu(s.serializer,i)}}if(r instanceof fn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Mt)return{bytesValue:kE(s.serializer,r._byteString)};if(r instanceof Pe){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Im(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Jt)return function(o,l){const c=o instanceof Jt?o.toArray():o;return{mapValue:{fields:{[sE]:{stringValue:iE},[Xc]:{arrayValue:{values:c.map(h=>{if(typeof h!="number")throw l.createError("VectorValues must only contain numeric values.");return wm(l.serializer,h)})}}}}}}(r,s);if(LE(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${Gu(r)}`)}(t,e)}function yI(t,e){const n={};return Xx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ts(t,(r,s)=>{const i=sl(s,e.childContextForField(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function vI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ve||t instanceof fn||t instanceof Mt||t instanceof Pe||t instanceof ad||t instanceof Jt||LE(t))}function Mm(t,e,n){if(!vI(n)||!Yx(n)){const r=Gu(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Ds(t,e,n){if((e=ne(e))instanceof rl)return e._internalPath;if(typeof e=="string")return _I(t,e);throw ou("Field path arguments must be of type string or ",t,!1,void 0,n)}const vD=new RegExp("[~\\*/\\[\\]]");function _I(t,e,n){if(e.search(vD)>=0)throw ou(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new rl(...e.split("."))._internalPath}catch{throw ou(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ou(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new W(M.INVALID_ARGUMENT,l+t+c)}function wI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{convertValue(e,n="none"){switch(Kr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ce(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Gr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw J(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ts(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Xc].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Ce(o.doubleValue));return new Jt(n)}convertGeoPoint(e){return new fn(Ce(e.latitude),Ce(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Yu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Oa(e));default:return null}}convertTimestamp(e){const n=qr(e);return new ve(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ye.fromString(e);fe(jE(r),9688,{name:e});const s=new Oi(r.get(1),r.get(3)),i=new K(r.popFirst(5));return s.isEqual(n)||Jn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm extends xI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pe(this.firestore,null,n)}}const Dv="@firebase/firestore",Ov="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Pe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _D(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(Ds("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class _D extends EI{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Um{}class zm extends Um{}function aa(t,e,...n){let r=[];e instanceof Um&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof ud).length,l=i.filter(c=>c instanceof il).length;if(o>1||o>0&&l>0)throw new W(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class il extends zm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new il(e,n,r)}_apply(e){const n=this._parse(e);return bI(e._query,n),new sr(e.firestore,e.converter,Mf(e._query,n))}_parse(e){const n=ld(e.firestore);return function(i,o,l,c,u,h,p){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new W(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Vv(p,h);const N=[];for(const A of p)N.push(Lv(c,i,A));m={arrayValue:{values:N}}}else m=Lv(c,i,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Vv(p,h),m=yD(l,o,p,h==="in"||h==="not-in");return Me.create(u,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function TI(t,e,n){const r=e,s=Ds("where",t);return il._create(s,r,n)}class ud extends Um{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ud(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:mn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)bI(o,c),o=Mf(o,c)}(e._query,n),new sr(e.firestore,e.converter,Mf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class dd extends zm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new dd(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new W(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new W(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new La(i,o)}(e._query,this._field,this._direction);return new sr(e.firestore,e.converter,YA(e._query,n))}}function SI(t,e="asc"){const n=e,r=Ds("orderBy",t);return dd._create(r,n)}function Lv(t,e,n){if(typeof(n=ne(n))=="string"){if(n==="")throw new W(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fE(e)&&n.indexOf("/")!==-1)throw new W(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ye.fromString(n));if(!K.isDocumentKey(r))throw new W(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Y0(t,new K(r))}if(n instanceof Pe)return Y0(t,n._key);throw new W(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gu(n)}.`)}function Vv(t,e){if(!Array.isArray(t)||t.length===0)throw new W(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bI(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function NI(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ci{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ur extends EI{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new la(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ds("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new W(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ur._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ur._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ur._jsonSchema={type:Fe("string",Ur._jsonSchemaVersion),bundleSource:Fe("string","DocumentSnapshot"),bundleName:Fe("string"),bundle:Fe("string")};class la extends Ur{data(e={}){return super.data(e)}}class zr{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ci(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new la(this._firestore,this._userDataWriter,r.key,r,new ci(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new la(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ci(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new la(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ci(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:wD(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new W(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=zr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=qu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function wD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zr._jsonSchemaVersion="firestore/querySnapshot/1.0",zr._jsonSchema={type:Fe("string",zr._jsonSchemaVersion),bundleSource:Fe("string","QuerySnapshot"),bundleName:Fe("string"),bundle:Fe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ld(e)}set(e,n,r){this._verifyNotCommitted();const s=_h(e,this._firestore),i=NI(s.converter,n,r),o=pI(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,jt.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=_h(e,this._firestore);let o;return o=typeof(n=ne(n))=="string"||n instanceof rl?gI(this._dataReader,"WriteBatch.update",i._key,n,r,s):mI(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,jt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=_h(e,this._firestore);return this._mutations=this._mutations.concat(new td(n._key,jt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new W(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _h(t,e){if((t=ne(t)).firestore!==e)throw new W(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function $m(t){t=Yt(t,sr);const e=Yt(t.firestore,er),n=nl(e),r=new Fm(e);return II(t._query),cD(n,t._query).then(s=>new zr(e,r,t,s))}function Fi(t,e,n,...r){t=Yt(t,Pe);const s=Yt(t.firestore,er),i=ld(s);let o;return o=typeof(e=ne(e))=="string"||e instanceof rl?gI(i,"updateDoc",t._key,e,n,r):mI(i,"updateDoc",t._key,e),ol(s,[o.toMutation(t._key,jt.exists(!0))])}function xD(t){return ol(Yt(t.firestore,er),[new td(t._key,jt.none())])}function ED(t,e){const n=Yt(t.firestore,er),r=Zn(t),s=NI(t.converter,e),i=ld(t.firestore);return ol(n,[pI(i,"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,jt.exists(!1))]).then(()=>r)}function yc(t,...e){var u,h,p;t=ne(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||jv(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(jv(e[r])){const m=e[r];e[r]=(u=m.next)==null?void 0:u.bind(m),e[r+1]=(h=m.error)==null?void 0:h.bind(m),e[r+2]=(p=m.complete)==null?void 0:p.bind(m)}let i,o,l;if(t instanceof Pe)o=Yt(t.firestore,er),l=_m(t._key.path),i={next:m=>{e[r]&&e[r](ID(o,t,m))},error:e[r+1],complete:e[r+2]};else{const m=Yt(t,sr);o=Yt(m.firestore,er),l=m._query;const x=new Fm(o);i={next:N=>{e[r]&&e[r](new zr(o,x,m,N))},error:e[r+1],complete:e[r+2]},II(t._query)}const c=nl(o);return lD(c,l,s,i)}function ol(t,e){const n=nl(t);return uD(n,e)}function ID(t,e,n){const r=n.docs.get(e._key),s=new Fm(t);return new Ur(t,s,e._key,r,new ci(n.hasPendingWrites,n.fromCache),e.converter)}function Yf(t){return t=Yt(t,er),nl(t),new RI(t,e=>ol(t,e))}(function(e,n=!0){hA(Vs),Rs(new Wr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new er(new pA(r.getProvider("auth-internal")),new yA(o,r.getProvider("app-check-internal")),DA(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Sn(Dv,Ov,e),Sn(Dv,Ov,"esm2020")})();const wh=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:xI,Bytes:Mt,CollectionReference:Bn,DocumentReference:Pe,DocumentSnapshot:Ur,FieldPath:rl,FieldValue:ad,Firestore:er,FirestoreError:W,GeoPoint:fn,Query:sr,QueryCompositeFilterConstraint:ud,QueryConstraint:zm,QueryDocumentSnapshot:la,QueryFieldFilterConstraint:il,QueryOrderByConstraint:dd,QuerySnapshot:zr,SnapshotMetadata:ci,Timestamp:ve,VectorValue:Jt,WriteBatch:RI,_AutoId:qu,_ByteString:Ze,_DatabaseId:Oi,_DocumentKey:K,_EmptyAuthCredentialsProvider:Gx,_FieldPath:Ye,_cast:Yt,_logWarn:As,_validateIsNotUsedTogether:Qx,addDoc:ED,collection:ws,connectFirestoreEmulator:uI,deleteDoc:xD,doc:Zn,ensureFirestoreConfigured:nl,executeWrite:ol,getDocs:$m,getFirestore:dI,onSnapshot:yc,orderBy:SI,query:aa,updateDoc:Fi,where:TI,writeBatch:Yf},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI="firebasestorage.googleapis.com",TD="storageBucket",SD=2*60*1e3,bD=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn extends Pn{constructor(e,n,r=0){super(xh(e),`Firebase Storage: ${n} (${xh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Dn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return xh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Cn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Cn||(Cn={}));function xh(t){return"storage/"+t}function ND(){const t="An unknown error occurred, please check the error payload for server response.";return new Dn(Cn.UNKNOWN,t)}function RD(){return new Dn(Cn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function kD(){return new Dn(Cn.CANCELED,"User canceled the upload/download.")}function CD(t){return new Dn(Cn.INVALID_URL,"Invalid URL '"+t+"'.")}function AD(t){return new Dn(Cn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Mv(t){return new Dn(Cn.INVALID_ARGUMENT,t)}function CI(){return new Dn(Cn.APP_DELETED,"The Firebase app was deleted.")}function PD(t){return new Dn(Cn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=un.makeFromUrl(e,n)}catch{return new un(e,"")}if(r.path==="")return r;throw AD(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function u(R){R.path_=decodeURIComponent(R.path)}const h="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",x=new RegExp(`^https?://${p}/${h}/b/${s}/o${m}`,"i"),N={bucket:1,path:3},A=n===kI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",I=new RegExp(`^https?://${A}/${s}/${k}`,"i"),E=[{regex:l,indices:c,postModify:i},{regex:x,indices:N,postModify:u},{regex:I,indices:{bucket:1,path:2},postModify:u}];for(let R=0;R<E.length;R++){const P=E[R],O=P.regex.exec(e);if(O){const _=O[P.indices.bucket];let y=O[P.indices.path];y||(y=""),r=new un(_,y),P.postModify(r);break}}if(r==null)throw CD(e);return r}}class DD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function c(){return l===2}let u=!1;function h(...k){u||(u=!0,e.apply(null,k))}function p(k){s=setTimeout(()=>{s=null,t(x,c())},k)}function m(){i&&clearTimeout(i)}function x(k,...I){if(u){m();return}if(k){m(),h.call(null,k,...I);return}if(c()||o){m(),h.call(null,k,...I);return}r<64&&(r*=2);let E;l===1?(l=2,E=0):E=(r+Math.random())*1e3,p(E)}let N=!1;function A(k){N||(N=!0,m(),!u&&(s!==null?(k||(l=2),clearTimeout(s),p(0)):k||(l=1)))}return p(0),i=setTimeout(()=>{o=!0,A(!0)},n),A}function jD(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(t){return t!==void 0}function Fv(t,e,n,r){if(r<e)throw Mv(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Mv(`Invalid value for '${t}'. Expected ${n} or less.`)}function VD(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var au;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(au||(au={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e,n,r,s,i,o,l,c,u,h,p,m=!0,x=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=p,this.retry=m,this.isUsingEmulator=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,A)=>{this.resolve_=N,this.reject_=A,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Gl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===au.NO_ERROR,c=i.getStatus();if(!l||MD(c,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===au.ABORT;r(!1,new Gl(!1,null,h));return}const u=this.successCodes_.indexOf(c)!==-1;r(!0,new Gl(u,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());LD(c)?i(c):i()}catch(c){o(c)}else if(l!==null){const c=ND();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(s.canceled){const c=this.appDelete_?CI():kD();o(c)}else{const c=RD();o(c)}};this.canceled_?n(!1,new Gl(!1,null,!0)):this.backoffId_=OD(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&jD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Gl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function UD(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function zD(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function $D(t,e){e&&(t["X-Firebase-GMPID"]=e)}function BD(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function WD(t,e,n,r,s,i,o=!0,l=!1){const c=VD(t.urlParams),u=t.url+c,h=Object.assign({},t.headers);return $D(h,e),UD(h,n),zD(h,i),BD(h,r),new FD(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HD(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function qD(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n){this._service=e,n instanceof un?this._location=n:this._location=un.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new lu(e,n)}get root(){const e=new un(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return qD(this._location.path)}get storage(){return this._service}get parent(){const e=HD(this._location.path);if(e===null)return null;const n=new un(this._location.bucket,e);return new lu(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw PD(e)}}function Uv(t,e){const n=e==null?void 0:e[TD];return n==null?null:un.makeFromBucketSpec(n,t)}function GD(t,e,n,r={}){t.host=`${e}:${n}`;const s=Ls(e);s&&(Zp(`https://${t.host}/b`),em("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:U1(i,t.app.options.projectId))}class KD{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=kI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=SD,this._maxUploadRetryTime=bD,this._requests=new Set,s!=null?this._bucket=un.makeFromBucketSpec(s,this._host):this._bucket=Uv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=un.makeFromBucketSpec(this._url,e):this._bucket=Uv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Fv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Fv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Ve(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new lu(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new DD(CI());{const o=WD(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const zv="@firebase/storage",$v="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI="storage";function QD(t=rm(),e){t=ne(t);const r=Ou(t,AI).getImmediate({identifier:e}),s=V1("storage");return s&&YD(r,...s),r}function YD(t,e,n,r={}){GD(t,e,n,r)}function JD(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new KD(n,r,s,e,Vs)}function XD(){Rs(new Wr(AI,JD,"PUBLIC").setMultipleInstances(!0)),Sn(zv,$v,""),Sn(zv,$v,"esm2020")}XD();/*! Capacitor: https://capacitorjs.com/ - MIT License */var Ui;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Ui||(Ui={}));class Eh extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const ZD=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},eO=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>e!==null?e.name:ZD(t),i=()=>s()!=="web",o=p=>{const m=u.get(p);return!!(m!=null&&m.platforms.has(s())||l(p))},l=p=>{var m;return(m=n.PluginHeaders)===null||m===void 0?void 0:m.find(x=>x.name===p)},c=p=>t.console.error(p),u=new Map,h=(p,m={})=>{const x=u.get(p);if(x)return console.warn(`Capacitor plugin "${p}" already registered. Cannot register plugins twice.`),x.proxy;const N=s(),A=l(p);let k;const I=async()=>(!k&&N in m?k=typeof m[N]=="function"?k=await m[N]():k=m[N]:e!==null&&!k&&"web"in m&&(k=typeof m.web=="function"?k=await m.web():k=m.web),k),v=(y,T)=>{var S,C;if(A){const D=A==null?void 0:A.methods.find(b=>T===b.name);if(D)return D.rtype==="promise"?b=>n.nativePromise(p,T.toString(),b):(b,ce)=>n.nativeCallback(p,T.toString(),b,ce);if(y)return(S=y[T])===null||S===void 0?void 0:S.bind(y)}else{if(y)return(C=y[T])===null||C===void 0?void 0:C.bind(y);throw new Eh(`"${p}" plugin is not implemented on ${N}`,Ui.Unimplemented)}},E=y=>{let T;const S=(...C)=>{const D=I().then(b=>{const ce=v(b,y);if(ce){const he=ce(...C);return T=he==null?void 0:he.remove,he}else throw new Eh(`"${p}.${y}()" is not implemented on ${N}`,Ui.Unimplemented)});return y==="addListener"&&(D.remove=async()=>T()),D};return S.toString=()=>`${y.toString()}() { [capacitor code] }`,Object.defineProperty(S,"name",{value:y,writable:!1,configurable:!1}),S},R=E("addListener"),P=E("removeListener"),O=(y,T)=>{const S=R({eventName:y},T),C=async()=>{const b=await S;P({eventName:y,callbackId:b},T)},D=new Promise(b=>S.then(()=>b({remove:C})));return D.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await C()},D},_=new Proxy({},{get(y,T){switch(T){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return A?O:R;case"removeListener":return P;default:return E(T)}}});return r[p]=_,u.set(p,{name:p,proxy:_,platforms:new Set([...Object.keys(m),...A?[N]:[]])}),_};return n.convertFileSrc||(n.convertFileSrc=p=>p),n.getPlatform=s,n.handleError=c,n.isNativePlatform=i,n.isPluginAvailable=o,n.registerPlugin=h,n.Exception=Eh,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},tO=t=>t.Capacitor=eO(t),ln=tO(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),no=ln.registerPlugin;class Bm{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const s=this.listeners[e];if(!s){if(r){let i=this.retainedEventArguments[e];i||(i=[]),i.push(n),this.retainedEventArguments[e]=i}return}s.forEach(i=>i(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new ln.Exception(e,Ui.Unimplemented)}unavailable(e="not available"){return new ln.Exception(e,Ui.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const s=r.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const Bv=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Wv=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class nO extends Bm{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=Wv(s).trim(),i=Wv(i).trim(),n[s]=i}),n}async setCookie(e){try{const n=Bv(e.key),r=Bv(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${i}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}no("CapacitorCookies",{web:()=>new nO});const rO=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(t)}),sO=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,i,o)=>(s[i]=t[e[o]],s),{})},iO=(t,e=!0)=>t?Object.entries(t).reduce((r,s)=>{const[i,o]=s;let l,c;return Array.isArray(o)?(c="",o.forEach(u=>{l=e?encodeURIComponent(u):u,c+=`${i}=${l}&`}),c.slice(0,-1)):(l=e?encodeURIComponent(o):o,c=`${i}=${l}`),`${r}&${c}`},"").substr(1):null,oO=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=sO(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,l]of Object.entries(t.data||{}))i.set(o,l);n.body=i.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((l,c)=>{i.append(c,l)});else for(const l of Object.keys(t.data))i.append(l,t.data[l]);n.body=i;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class aO extends Bm{async request(e){const n=oO(e,e.webFetchExtra),r=iO(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,i=await fetch(s,n),o=i.headers.get("content-type")||"";let{responseType:l="text"}=i.ok?e:{};o.includes("application/json")&&(l="json");let c,u;switch(l){case"arraybuffer":case"blob":u=await i.blob(),c=await rO(u);break;case"json":c=await i.json();break;case"document":case"text":default:c=await i.text()}const h={};return i.headers.forEach((p,m)=>{h[m]=p}),{data:c,headers:h,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}no("CapacitorHttp",{web:()=>new aO});var Hv;(function(t){t.Dark="DARK",t.Light="LIGHT",t.Default="DEFAULT"})(Hv||(Hv={}));var qv;(function(t){t.StatusBar="StatusBar",t.NavigationBar="NavigationBar"})(qv||(qv={}));class lO extends Bm{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}no("SystemBars",{web:()=>new lO});const cO={apiKey:"AIzaSyCH2Q18CquL9IGi9t6KovkSqQj3DYnXf9g",authDomain:"munirathnam-illam.firebaseapp.com",projectId:"munirathnam-illam",storageBucket:"munirathnam-illam.firebasestorage.app",messagingSenderId:"852272424128",appId:"1:852272424128:web:e5400d3d2f512d7e477925"},cu=B1(cO),Vn=ln.isNativePlatform()?hx(cu,{persistence:Tx}):lA(cu),Qe=dI(cu);QD(cu);const PI=new En,uO="modulepreload",dO=function(t){return"/"+t},Gv={},Ii=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=dO(c),c in Gv)return;Gv[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":uO,u||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),u)return new Promise((m,x)=>{p.addEventListener("load",m),p.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};var Kv;(function(t){t.IndexedDbLocal="INDEXED_DB_LOCAL",t.InMemory="IN_MEMORY",t.BrowserLocal="BROWSER_LOCAL",t.BrowserSession="BROWSER_SESSION"})(Kv||(Kv={}));var Qv;(function(t){t.APPLE="apple.com",t.FACEBOOK="facebook.com",t.GAME_CENTER="gc.apple.com",t.GITHUB="github.com",t.GOOGLE="google.com",t.MICROSOFT="microsoft.com",t.PLAY_GAMES="playgames.google.com",t.TWITTER="twitter.com",t.YAHOO="yahoo.com",t.PASSWORD="password",t.PHONE="phone"})(Qv||(Qv={}));const Yv=no("FirebaseAuthentication",{web:()=>Ii(()=>import("./web-FyVHeoCD.js"),[]).then(t=>new t.FirebaseAuthenticationWeb)}),hO=no("App",{web:()=>Ii(()=>import("./web-BSTWjZEz.js"),[]).then(t=>new t.AppWeb)});var Jv;(function(t){t[t.NONE=0]="NONE",t[t.TOUCH_ID=1]="TOUCH_ID",t[t.FACE_ID=2]="FACE_ID",t[t.FINGERPRINT=3]="FINGERPRINT",t[t.FACE_AUTHENTICATION=4]="FACE_AUTHENTICATION",t[t.IRIS_AUTHENTICATION=5]="IRIS_AUTHENTICATION",t[t.MULTIPLE=6]="MULTIPLE"})(Jv||(Jv={}));var Xv;(function(t){t[t.NONE=0]="NONE",t[t.STRONG=1]="STRONG",t[t.WEAK=2]="WEAK"})(Xv||(Xv={}));var Zv;(function(t){t[t.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",t[t.BIOMETRICS_UNAVAILABLE=1]="BIOMETRICS_UNAVAILABLE",t[t.USER_LOCKOUT=2]="USER_LOCKOUT",t[t.BIOMETRICS_NOT_ENROLLED=3]="BIOMETRICS_NOT_ENROLLED",t[t.USER_TEMPORARY_LOCKOUT=4]="USER_TEMPORARY_LOCKOUT",t[t.AUTHENTICATION_FAILED=10]="AUTHENTICATION_FAILED",t[t.APP_CANCEL=11]="APP_CANCEL",t[t.INVALID_CONTEXT=12]="INVALID_CONTEXT",t[t.NOT_INTERACTIVE=13]="NOT_INTERACTIVE",t[t.PASSCODE_NOT_SET=14]="PASSCODE_NOT_SET",t[t.SYSTEM_CANCEL=15]="SYSTEM_CANCEL",t[t.USER_CANCEL=16]="USER_CANCEL",t[t.USER_FALLBACK=17]="USER_FALLBACK"})(Zv||(Zv={}));const DI=no("NativeBiometric",{web:()=>Ii(()=>import("./web-kLHca8Zg.js"),[]).then(t=>new t.NativeBiometricWeb)}),OI=V.createContext();function al(){return V.useContext(OI)}function fO({children:t}){const[e,n]=V.useState(null),[r,s]=V.useState(!0),[i,o]=V.useState(ln.isNativePlatform()),l=V.useRef(!1),c=()=>o(!0),u=async()=>{if(!ln.isNativePlatform()){o(!1);return}try{l.current=!0;const x=await DI.verifyIdentity({reason:"Unlock Rent Manager",title:"Authentication Required",subtitle:"Confirm your identity",description:"Use Face ID to access the app"});o(!1)}catch(x){console.error("Biometric Unlock Failed:",x)}finally{setTimeout(()=>{l.current=!1},500)}};async function h(){if(ln.isNativePlatform())try{const x=await Yv.signInWithGoogle(),N=En.credential(x.credential.idToken);return await zu(Vn,N)}catch(x){throw console.error("Native Google Sign-In Error:",x),x}else return Dx(Vn,PI)}function p(){return ln.isNativePlatform()?Yv.signOut().then(()=>Cf(Vn)):Cf(Vn)}V.useEffect(()=>{const x=xx(Vn,k=>{n(k),s(!1),k||o(!1)});let N;ln.isNativePlatform()&&(N=hO.addListener("appStateChange",({isActive:k})=>{if(!k&&Vn.currentUser){if(l.current)return;console.log("App backgrounded. Locking..."),o(!0)}}));const A=setTimeout(()=>{s(k=>k&&!1)},5e3);return()=>{x(),N&&N.remove(),clearTimeout(A)}},[]);const m={currentUser:e,loginWithGoogle:h,logout:p,loading:r,isAppLocked:i,lockApp:c,unlockWithBiometrics:u};return d.jsx(OI.Provider,{value:m,children:!r&&t})}const Je={"01":{roomNo:"01",roomId:"G01",keyNo:"124",ebServNo:"19781",ebAcNo:"5097784"},"02":{roomNo:"02",roomId:"G02",keyNo:"153",ebServNo:"19778",ebAcNo:"5097781"},"04":{roomNo:"04",roomId:"102",keyNo:"76",ebServNo:"19780",ebAcNo:"5097783"},"05":{roomNo:"05",roomId:"201",keyNo:"151",ebServNo:"19779",ebAcNo:"5097782"},"06":{roomNo:"06",roomId:"202",keyNo:"185",ebServNo:"19782",ebAcNo:"5097785"},"07":{roomNo:"07",roomId:"203",keyNo:"101",ebServNo:"19783",ebAcNo:"5097786"},"08":{roomNo:"08",roomId:"301",keyNo:"403",ebServNo:"19784",ebAcNo:"5097787"},"09":{roomNo:"09",roomId:"302",keyNo:"249",ebServNo:"19785",ebAcNo:"5097788"},10:{roomNo:"10",roomId:"303",keyNo:"123",ebServNo:"19789",ebAcNo:"5097792"},11:{roomNo:"11",roomId:"401",keyNo:"35",ebServNo:"19788",ebAcNo:"5097791"},12:{roomNo:"12",roomId:"402",keyNo:"144",ebServNo:"19787",ebAcNo:"5097790"},13:{roomNo:"13",roomId:"403",keyNo:"120",ebServNo:"19786",ebAcNo:"5097789"}},pO=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Fa=.25,mO=.2,gO=["11","12","13"],ca=10,Wm=60,an=pO;function An(t,e){return`${t}-${an[e]}`}function zi(t,e){return`${an[e]} ${t}`}function uu(t,e,n=new Date){const r=n.getFullYear(),s=n.getMonth();return t>r||t===r&&e>s}function st(t,e){return!t||!e?null:(Array.isArray(t)?t:Object.values(t)).find(r=>String(r.roomId||"").trim()===String(e||"").trim()||String(r.roomNo||"").trim()===String(e||"").trim())||null}function Ti(t){return t?String(t.status||"").trim()==="Occupied":!1}function hd(t,e,n){if(!t||!t.isEvictionConfirmed||!t.evictionNoticeDate)return!1;const r=new Date(t.evictionNoticeDate),s=new Date(e,n,1),i=new Date(r.getFullYear(),r.getMonth(),1);return s>=i}function du(t,e,n){if(!t||hd(t,e,n))return 0;let r=Number(t.rent)||0;if(t.lastRevision){const s=new Date(t.lastRevision),i=new Date(e,n,1),o=new Date(s.getFullYear(),s.getMonth(),1);i<o&&(r=Number(t.lastRent)||r)}return r}function yO(t,e,n,r){const s=An(n,r);let i=0;return Object.keys(Je).forEach(o=>{const l=Je[o],c=st(t,l.roomId);if(!c||hd(c,n,r))return;const h=(c.paymentHistory||{})[s]||null,p=c.archivedTenant||null,m=(p==null?void 0:p.paymentHistory)||{},x=(m==null?void 0:m[s])||null,N=(!h||h==="None")&&x;if((N?x:h)!=="Paid")return;const I=du(N?p:c,n,r);i+=I}),i}function vO(t,e,n,r){const s=An(n,r);let i=0;return Object.keys(Je).forEach(o=>{const l=Je[o],c=st(t,l.roomId);if(!c||hd(c,n,r))return;const h=(c.paymentHistory||{})[s]||null,p=c.archivedTenant||null,m=(p==null?void 0:p.paymentHistory)||{},x=(m==null?void 0:m[s])||null,N=(!h||h==="None")&&x;if((N?x:h)!=="Pending")return;i+=du(N?p:c,n,r)}),i}function _O(t,e,n,r){const s=An(n,r);let i={rent:0,water:0,total:0,pending:0};return Object.keys(Je).forEach(o=>{const l=Je[o],c=st(t,l.roomId);if(!c||hd(c,n,r))return;const u=c.paymentHistory||{};c.paymentTotals;const h=u[s]||null,p=c.archivedTenant||null,m=(p==null?void 0:p.paymentHistory)||{};p!=null&&p.paymentTotals;const x=(m==null?void 0:m[s])||null,N=(!h||h==="None")&&x,A=N?x:h,k=N?p:c;if(A==="Pending"){i.pending+=du(k,n,r);return}if(A!=="Paid")return;const I=du(k,n,r),v=N?(p==null?void 0:p.waterRate)||Fa:(c==null?void 0:c.waterRate)||Fa,P=(fd(k,n,r,v).amount||0)+Wm;i.rent+=I,i.water+=P,i.total+=I+P}),i}function wO(t,e,n){const r=An(e,n);return!t||!Array.isArray(t)?0:t.filter(s=>String((s==null?void 0:s.monthKey)||"")===String(r)).reduce((s,i)=>s+(Number(i==null?void 0:i.amount)||0),0)}function hu(t){const e=String(t||"").trim();return gO.includes(e)?mO:Fa}function fs(t,e){return`${t}-${an[e]}`}function xs(t,e){return e>0?{year:t,monthIndex:e-1}:{year:t-1,monthIndex:11}}function fd(t,e,n,r){const s=(t==null?void 0:t.waterReadings)||{},i=(t==null?void 0:t.waterMeterReset)||{},o=fs(e,n),l=xs(e,n),c=fs(l.year,l.monthIndex),u=s==null?void 0:s[o],h=s==null?void 0:s[c],p=u!=null&&u!=="",m=h!=null&&h!=="",x=p?Number(u):NaN,N=m?Number(h):NaN;if(!!(i!=null&&i[o])){if(!Number.isFinite(x))return{currentReading:null,units:null,amount:null,meterReset:!0};const E=x*ca,R=Number.isFinite(r)?r:Fa,P=Math.round(E*R);return{currentReading:x,units:E,amount:P,meterReset:!0}}if(!Number.isFinite(x)||!Number.isFinite(N))return{currentReading:Number.isFinite(x)?x:null,units:null,amount:null,meterReset:!1};const k=(x-N)*ca,I=Number.isFinite(r)?r:Fa,v=Math.round(k*I);return{currentReading:x,units:k,amount:v,meterReset:!1}}const xO=15;function jI(t,e=new Date){if(!t)return{isDue:!1};const n=!!(t!=null&&t.noRevision),r=!!(t!=null&&t.isEvictionConfirmed);if(n||r)return{isDue:!1,reason:r?"Eviction in progress":"Disabled"};const s=t==null?void 0:t.lastRevision,i=t==null?void 0:t.joinDate,o=k=>k?new Date(k):null,l=o(s),c=o(i),u=l||c;if(!u)return{isDue:!1,reason:"No date available"};const h=new Date(u);h.setFullYear(h.getFullYear()+1);const p=new Date(e.getFullYear(),e.getMonth(),e.getDate()),x=new Date(h.getFullYear(),h.getMonth(),h.getDate())-p,N=Math.ceil(x/(1e3*60*60*24));return{isDue:N<=xO,daysRemaining:N,nextDue:h,baseDate:u,isOverdue:N<0}}const LI=V.createContext();function ro(){return V.useContext(LI)}function EO({children:t}){const[e,n]=V.useState([]),[r,s]=V.useState([]),[i,o]=V.useState(!0),[l,c]=V.useState(Je);V.useEffect(()=>{const k=aa(ws(Qe,"properties")),I=yc(k,O=>{const _={};O.forEach(y=>{_[y.id]={id:y.id,...y.data()}}),n(_)},O=>{console.error("Error fetching tenants:",O)}),v=aa(ws(Qe,"expenses"),SI("date","desc")),E=yc(v,O=>{const _=[];O.forEach(y=>{_.push({id:y.id,...y.data()})}),s(_)},O=>{console.error("Error fetching expenses:",O)}),R=aa(ws(Qe,"rooms")),P=yc(R,O=>{if(O.empty)console.warn("Rooms collection empty. Using hardcoded fallback."),c(Je);else{const _={...Je};O.forEach(S=>{_[S.id]?_[S.id]={..._[S.id],...S.data()}:_[S.id]=S.data()});const y=Object.keys(_).sort(),T={};y.forEach(S=>T[S]=_[S]),c(T)}o(!1)},O=>{console.error("Error fetching rooms:",O),c(Je),o(!1)});return()=>{I(),E(),P()}},[]);const u=async(k,I,v,E,R,P)=>{let O="Pending";v==="Pending"?O="Rent Only":v==="Rent Only"?O="Paid":v==="Paid"&&(O="None");const _={};if(O==="Paid"){const y=Number(E==null?void 0:E.rent)||0,T=(E==null?void 0:E.waterRate)!==null&&(E==null?void 0:E.waterRate)!==void 0&&String(E==null?void 0:E.waterRate).trim()!==""?Number(E==null?void 0:E.waterRate):hu(E==null?void 0:E.roomNo),S=fd(E,R,P,T);if(!Number.isFinite(S==null?void 0:S.amount))throw new Error("Please enter water readings for this month AND previous month (Water Bill screen) before marking Paid.");if(Number(S==null?void 0:S.units)<0)throw new Error("Water units cannot be negative. Please check readings.");const C=Math.round((y+Number(S.amount)+Wm)*100)/100;_[`paymentHistory.${I}`]="Paid",_[`paymentTotals.${I}`]=C}else O==="None"?(_[`paymentHistory.${I}`]=null,_[`paymentTotals.${I}`]=null):(_[`paymentHistory.${I}`]=O,_[`paymentTotals.${I}`]=null);if(!(E!=null&&E.id))throw new Error("Tenant ID missing");await Fi(Zn(Qe,"properties",E.id),_)},h=async k=>{const{addDoc:I,collection:v}=await Ii(async()=>{const{addDoc:E,collection:R}=await Promise.resolve().then(()=>wh);return{addDoc:E,collection:R}},void 0);await I(v(Qe,"expenses"),k)},p=async k=>{const{deleteDoc:I,doc:v}=await Ii(async()=>{const{deleteDoc:E,doc:R}=await Promise.resolve().then(()=>wh);return{deleteDoc:E,doc:R}},void 0);await I(v(Qe,"expenses",k))},m=async(k,I)=>{await Fi(Zn(Qe,"properties",k),I)},[x,N]=V.useState(new Date().getFullYear()),A={tenants:e,expenses:r,rooms:l,loading:i,globalYear:x,setGlobalYear:N,updateRentStatus:u,addExpense:h,deleteExpense:p,updateTenant:m,createTenant:async k=>{const{addDoc:I,collection:v}=await Ii(async()=>{const{addDoc:E,collection:R}=await Promise.resolve().then(()=>wh);return{addDoc:E,collection:R}},void 0);await I(v(Qe,"properties"),k)}};return d.jsx(LI.Provider,{value:A,children:t})}/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var IO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ee=(t,e)=>{const n=V.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},h)=>V.createElement("svg",{ref:h,...IO,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${TO(t)}`,l].join(" "),...u},[...e.map(([p,m])=>V.createElement(p,m)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e_=ee("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=ee("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jf=ee("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=ee("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=ee("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=ee("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=ee("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=ee("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=ee("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=ee("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=ee("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=ee("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=ee("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=ee("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=ee("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=ee("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=ee("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MI=ee("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=ee("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=ee("Fingerprint",[["path",{d:"M2 12C2 6.5 6.5 2 12 2a10 10 0 0 1 8 4",key:"1jc9o5"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12c0-.7.12-1.37.34-2",key:"1mxgy1"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2c0 .47 0 1.17-.02 2",key:"1fgabc"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=ee("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=ee("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=ee("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=ee("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=ee("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=ee("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=ee("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=ee("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=ee("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=ee("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=ee("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=ee("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=ee("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=ee("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xf=ee("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=ee("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=ee("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=ee("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=ee("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=ee("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=ee("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=ee("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),BI=V.createContext();function ll(){return V.useContext(BI)}function BO({children:t}){const[e,n]=V.useState([]),[r,s]=V.useState({isOpen:!1,title:"",message:"",confirmText:"Confirm",cancelText:"Cancel",type:"confirm",resolve:null}),i=V.useCallback((h,p="info")=>{const m=Date.now();n(x=>[...x,{id:m,message:h,type:p}]),setTimeout(()=>{n(x=>x.filter(N=>N.id!==m))},3e3)},[]),o=h=>{n(p=>p.filter(m=>m.id!==h))},l=V.useCallback(({title:h,message:p,confirmText:m="Confirm",cancelText:x="Cancel",type:N="confirm"})=>new Promise(A=>{s({isOpen:!0,title:h,message:p,confirmText:m,cancelText:x,type:N,resolve:A})}),[]),c=()=>{r.resolve&&r.resolve(!0),s(h=>({...h,isOpen:!1}))},u=()=>{r.resolve&&r.resolve(!1),s(h=>({...h,isOpen:!1}))};return d.jsxs(BI.Provider,{value:{showToast:i,confirm:l},children:[t,d.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-[100] flex flex-col items-center gap-2 pointer-events-none",children:e.map(h=>d.jsxs("div",{className:`pointer-events-auto flex items-center gap-3 px-6 py-3 rounded-2xl shadow-xl border animate-in slide-in-from-bottom-5 fade-in duration-300 min-w-[300px] justify-between ${h.type==="error"?"bg-rose-50 border-rose-100 text-rose-700":h.type==="success"?"bg-emerald-50 border-emerald-100 text-emerald-700":h.type==="warning"?"bg-amber-50 border-amber-100 text-amber-700":"bg-slate-50 border-slate-200 text-slate-700"}`,children:[d.jsxs("div",{className:"flex items-center gap-3",children:[h.type==="error"&&d.jsx(Si,{size:20}),h.type==="success"&&d.jsx(NO,{size:20}),h.type==="warning"&&d.jsx(Si,{size:20}),h.type==="info"&&d.jsx(jO,{size:20}),d.jsx("span",{className:"font-bold text-sm",children:h.message})]}),d.jsx("button",{onClick:()=>o(h.id),className:"opacity-50 hover:opacity-100",children:d.jsx(mu,{size:16})})]},h.id))}),r.isOpen&&d.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:d.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-[400px] overflow-hidden animate-in zoom-in-95 duration-200",children:[d.jsxs("div",{className:"p-8 text-center space-y-4",children:[d.jsx("div",{className:`mx-auto size-16 rounded-full flex items-center justify-center mb-2 ${r.type==="danger"?"bg-rose-100 text-rose-600":"bg-blue-100 text-blue-600"}`,children:r.type==="danger"?d.jsx(Si,{size:32}):d.jsx(DO,{size:32})}),d.jsx("h3",{className:"text-xl font-extrabold text-slate-900 leading-tight",children:r.title}),d.jsx("p",{className:"text-slate-500 font-medium",children:r.message})]}),d.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-100 flex gap-3",children:[d.jsx("button",{onClick:u,className:"flex-1 py-3 px-4 rounded-xl font-bold text-slate-600 hover:bg-slate-200 transition-colors",children:r.cancelText}),d.jsx("button",{onClick:c,className:`flex-1 py-3 px-4 rounded-xl font-bold text-white shadow-lg transition-all hover:scale-105 active:scale-95 ${r.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-200":"bg-blue-600 hover:bg-blue-700 shadow-blue-200"}`,children:r.confirmText})]})]})})]})}function Hs({children:t}){const{currentUser:e,logout:n}=al(),r=Gi(),s=o=>r.pathname===o,i=({to:o,icon:l,label:c,mobile:u=!1})=>d.jsxs(P1,{to:o,className:`flex items-center gap-3 px-4 py-3 rounded-2xl transition-all ${s(o)?"bg-emerald-100 text-emerald-900 font-bold shadow-sm ring-1 ring-emerald-200":"text-slate-500 hover:text-slate-900 hover:bg-slate-50"} ${u?"flex-col text-[10px] gap-1 px-1 py-1 rounded-none bg-transparent hover:bg-transparent ring-0 shadow-none":"text-sm"}`,children:[d.jsx("div",{className:`p-2 rounded-xl transition-colors ${s(o)&&!u?"bg-emerald-200/50 text-emerald-800":"bg-transparent"}`,children:d.jsx(l,{size:u?20:18})}),d.jsx("span",{children:c})]});return d.jsxs("div",{className:"min-h-screen bg-white md:bg-stone-50/30 flex flex-col md:flex-row",children:[d.jsxs("aside",{className:"hidden md:flex flex-col w-64 shrink-0 h-screen sticky top-0 bg-white border-r border-stone-100 p-6 z-40",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-10 px-2",children:[d.jsx("span",{className:"inline-flex size-10 items-center justify-center rounded-2xl bg-emerald-100/70 border border-emerald-200/60 text-emerald-800 shadow-sm",children:d.jsx(Jf,{size:20})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-lg font-extrabold tracking-tight text-slate-900 leading-tight",children:"Munirathnam"}),d.jsx("p",{className:"text-xs font-bold text-emerald-600 tracking-wide uppercase",children:"Illam Manager"})]})]}),d.jsxs("nav",{className:"space-y-2 flex-1",children:[d.jsx("div",{className:"px-4 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Menu"}),d.jsx(i,{to:"/",icon:i_,label:"Dashboard"}),d.jsx(i,{to:"/rooms",icon:Ua,label:"Room Details"}),d.jsx(i,{to:"/rent",icon:o_,label:"Rent Status"}),d.jsx(i,{to:"/water",icon:s_,label:"Water Bill"}),d.jsx(i,{to:"/expenses",icon:a_,label:"Expenses"}),d.jsx("div",{className:"h-px bg-stone-100 my-2"}),d.jsx(i,{to:"/admin/migrate",icon:AO,label:"Migration"})]}),d.jsx("div",{className:"pt-6 border-t border-stone-100",children:d.jsx("div",{className:"flex items-center gap-3 px-2 py-2",children:e&&d.jsxs(d.Fragment,{children:[d.jsx("img",{src:e.photoURL,alt:"User",className:"w-9 h-9 rounded-full border border-stone-200 bg-stone-50",onError:o=>{o.target.style.display="none"}}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-sm font-bold text-slate-700 truncate",children:e.displayName}),d.jsx("p",{className:"text-[10px] font-medium text-slate-400 truncate",children:"Admin Access"})]}),d.jsx("button",{onClick:n,className:"p-2 rounded-xl text-slate-400 hover:text-rose-600 hover:bg-rose-50 transition-colors",title:"Sign Out",children:d.jsx(UI,{size:16})})]})})})]}),d.jsxs("div",{className:"flex-1 min-w-0 flex flex-col min-h-screen",children:[d.jsxs("header",{className:"md:hidden bg-white/90 backdrop-blur-md border-b border-stone-100 sticky top-0 z-30 px-4 pb-3 pt-[calc(env(safe-area-inset-top)+16px)] flex items-center justify-between transition-all",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:"inline-flex size-9 items-center justify-center rounded-xl bg-emerald-100 text-emerald-700 shadow-sm ring-1 ring-emerald-50",children:d.jsx(Jf,{size:18})}),d.jsxs("div",{children:[d.jsx("h1",{className:"font-black text-slate-900 text-base leading-tight tracking-tight",children:"Munirathnam"}),d.jsx("p",{className:"text-[10px] font-bold text-emerald-600 uppercase tracking-widest",children:"Rent Manager"})]})]}),d.jsx("div",{className:"flex items-center gap-2",children:e&&d.jsx("img",{src:e.photoURL,className:"w-8 h-8 rounded-full border border-stone-200 shadow-sm"})})]}),d.jsx("main",{className:"p-4 md:p-8 lg:p-10 max-w-7xl w-full mx-auto pb-24 md:pb-10",children:t})]}),d.jsx("div",{className:"fixed bottom-0 inset-x-0 z-50 md:hidden bg-white border-t border-stone-100 pb-safe",children:d.jsxs("div",{className:"grid grid-cols-5 gap-1 p-2",children:[d.jsx(i,{to:"/",icon:i_,label:"Dash",mobile:!0}),d.jsx(i,{to:"/rooms",icon:Ua,label:"Rooms",mobile:!0}),d.jsx(i,{to:"/rent",icon:o_,label:"Rent",mobile:!0}),d.jsx(i,{to:"/water",icon:s_,label:"Water",mobile:!0}),d.jsx(i,{to:"/expenses",icon:a_,label:"Expenses",mobile:!0})]})})]})}function WO(){const{tenants:t,expenses:e,rooms:n,loading:r,globalYear:s,setGlobalYear:i}=ro(),o=s;if(r)return d.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading data..."});const l=p=>i(m=>m+p),c=[];for(let p=0;p<12;p++){const m=uu(o,p),x=_O(t,n,o,p);c.push({label:zi(o,p),rent:m?0:x.rent,water:m?0:x.water,total:m?0:x.total,expenses:wO(e,o,p),pending:m?0:x.pending,locked:m})}const u=c.some(p=>p.pending>0),h=[];return Object.keys(Je).forEach(p=>{const m=n[p];if(!m)return;const x=st(t,m.roomId);if(x&&x.status==="Occupied"){const N=jI(x);N.isDue&&h.push({roomNo:m.roomNo,tenantName:x.tenant,days:N.daysRemaining,date:N.nextDue})}}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsx("h2",{className:"text-2xl sm:text-3xl font-extrabold tracking-tight text-slate-900",children:"Dashboard"}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700",children:[d.jsx("span",{className:"font-semibold",children:"Year"}),d.jsxs("div",{className:"inline-flex items-center gap-1 rounded-full bg-stone-50 border border-black/5 shadow-sm px-2 py-1.5",children:[d.jsx("button",{onClick:()=>l(-1),className:"p-1 hover:bg-stone-200 rounded-full",children:d.jsx(RO,{size:16})}),d.jsx("span",{className:"min-w-[4rem] text-center font-extrabold text-emerald-800",children:o}),d.jsx("button",{onClick:()=>l(1),className:"p-1 hover:bg-stone-200 rounded-full",children:d.jsx(n_,{size:16})})]})]})]}),(h.length>0||u)&&d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 animate-in slide-in-from-top-4",children:[h.length>0&&d.jsxs("div",{className:"bg-amber-50 rounded-3xl p-5 border border-amber-100 shadow-sm relative overflow-hidden group",children:[d.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition",children:d.jsx(r_,{size:80,className:"text-amber-600"})}),d.jsxs("div",{className:"relative z-10",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx("div",{className:"p-2 bg-amber-100 rounded-xl text-amber-700",children:d.jsx(r_,{size:20})}),d.jsx("h3",{className:"text-base font-bold text-amber-900",children:"Annual Revision Due"}),d.jsx("span",{className:"bg-amber-200 text-amber-800 text-xs font-bold px-2 py-0.5 rounded-full",children:h.length})]}),d.jsx("div",{className:"space-y-2 mt-3 max-h-32 overflow-y-auto custom-scrollbar",children:h.map((p,m)=>d.jsxs("div",{className:"flex justify-between items-center bg-white/60 p-2 rounded-lg text-sm",children:[d.jsxs("div",{children:[d.jsxs("span",{className:"font-bold text-slate-800",children:["Room ",p.roomNo]}),d.jsxs("span",{className:"text-slate-500 text-xs ml-2",children:["(",p.tenantName,")"]})]}),d.jsx("div",{className:`text-xs font-bold ${p.days<0?"text-rose-600":"text-amber-600"}`,children:p.days<0?`${Math.abs(p.days)} days overdue`:`Due in ${p.days} days`})]},m))})]})]}),u&&d.jsxs("div",{className:"bg-rose-50 rounded-3xl p-5 border border-rose-100 shadow-sm relative overflow-hidden group",children:[d.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition",children:d.jsx(e_,{size:80,className:"text-rose-600"})}),d.jsxs("div",{className:"relative z-10",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx("div",{className:"p-2 bg-rose-100 rounded-xl text-rose-700",children:d.jsx(e_,{size:20})}),d.jsx("h3",{className:"text-base font-bold text-rose-900",children:"Pending Payments"}),d.jsxs("span",{className:"bg-rose-200/50 text-rose-800 text-xs font-bold px-2 py-0.5 rounded-full",children:["",c.reduce((p,m)=>p+m.pending,0).toLocaleString("en-IN")]})]}),d.jsx("p",{className:"text-sm text-rose-800/80 mt-1 font-medium",children:"Action required for unpaid rents. Check the Rent Details page for breakdown."}),d.jsxs(P1,{to:"/rent",className:"inline-flex items-center gap-2 mt-3 text-xs font-bold text-rose-700 hover:text-rose-900 transition",children:["View details ",d.jsx(n_,{size:14})]})]})]})]}),d.jsxs("div",{className:"bg-stone-50 rounded-3xl shadow-sm border border-black/5 overflow-hidden",children:[d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-sm text-left",children:[d.jsx("thead",{className:"bg-emerald-100/60 text-slate-700",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-5 py-4 font-semibold",children:"Month"}),d.jsx("th",{className:"px-5 py-4 text-right font-semibold",children:"Rent Collected"}),d.jsx("th",{className:"px-5 py-4 text-right font-semibold",children:"Expenses"}),d.jsx("th",{className:"px-5 py-4 text-right font-semibold",children:"Water Charges"}),d.jsx("th",{className:"px-5 py-4 text-right font-semibold",children:"Pending Rent"})]})}),d.jsx("tbody",{className:"divide-y divide-slate-100",children:c.map((p,m)=>d.jsxs("tr",{className:p.locked?"bg-stone-100/50 text-slate-400":"hover:bg-emerald-50/30 transition",children:[d.jsx("td",{className:"px-5 py-4 font-bold text-slate-800",children:p.label}),d.jsx("td",{className:"px-5 py-4 text-right font-medium text-emerald-700",children:p.locked?"0":`${p.rent.toLocaleString("en-IN")}`}),d.jsx("td",{className:"px-5 py-4 text-right font-medium text-rose-700",children:`${p.expenses.toLocaleString("en-IN")}`}),d.jsx("td",{className:"px-5 py-4 text-right font-medium text-blue-600",children:p.locked?"0":`${p.water.toLocaleString("en-IN")}`}),d.jsx("td",{className:"px-5 py-4 text-right font-medium text-amber-800",children:p.locked?"0":`${p.pending.toLocaleString("en-IN")}`})]},m))})]})}),d.jsx("div",{className:"p-4 bg-emerald-50/50 text-[10px] text-slate-500 text-center border-t border-emerald-100",children:"Rent Collected includes only months marked Paid. Water Charges are computed from meter readings."})]})]})}function Th({roomNo:t,roomData:e,tenantData:n,rentStatus:r,onClick:s,isPlaceholder:i=!1}){if(i||!e)return d.jsx("div",{className:"h-[200px] rounded-t-xl mx-2 border-b-0 border-2 border-dashed border-slate-200 bg-slate-50/30 flex items-center justify-center",children:d.jsx("span",{className:"text-slate-200 font-bold text-xs uppercase tracking-widest",children:"Empty"})});const o=(n==null?void 0:n.status)==="Occupied",l=!!(n!=null&&n.evictionConfirmed),c=o?(n==null?void 0:n.tenant)||"Unknown":"Vacant",h=jI(n).isDue,p=o?l?"bg-rose-50 border-rose-200":"bg-white border-slate-200":"bg-slate-100 border-slate-200",m=o?l?"border-rose-900 bg-rose-900":"border-slate-800 bg-slate-800":"border-slate-400 bg-slate-400",x=o?"bg-amber-400 shadow-sm":"bg-slate-300",N=()=>{if(!o||!r||r==="None")return null;const A=r==="Adjusted"?"Adjusted":r,k={Paid:"bg-emerald-500 text-white border-emerald-600",Pending:"bg-rose-500 text-white border-rose-600 animate-pulse","Rent Only":"bg-purple-500 text-white border-purple-600",Adjusted:"bg-blue-500 text-white border-blue-600"},I={Paid:"PAID",Pending:"DUE","Rent Only":"PARTIAL",Adjusted:"ADJ (SD)"},v=k[A]||"bg-slate-500 text-white",E=I[A]||A;return d.jsx("div",{className:`mt-2 px-1.5 py-0.5 text-[8px] font-bold rounded shadow-sm border ${v} tracking-wider`,children:E})};return d.jsxs("div",{onClick:s,className:"group relative flex flex-col items-center justify-end h-[220px] cursor-pointer",title:`Room ${t}`,children:[d.jsx("div",{className:`relative w-full h-full rounded-t-2xl border-x-8 border-t-8 ${m} shadow-xl overflow-hidden transition-transform transform group-hover:-translate-y-1`,children:d.jsxs("div",{className:`absolute inset-0 top-0.5 mx-0.5 mb-0 rounded-t-xl ${p} border-x border-t shadow-inner flex flex-col items-center pt-6`,children:[d.jsx("div",{className:"bg-gradient-to-br from-amber-100 to-amber-200 border border-amber-300 px-3 py-1 rounded shadow text-amber-900 font-bold text-lg font-mono",children:t}),o&&d.jsx("div",{className:"text-[9px] text-slate-400 mt-1 font-mono",children:e.roomId}),d.jsx("div",{className:"mt-2",children:l?d.jsx("div",{className:"w-3 h-3 rounded-full bg-rose-500 shadow-lg shadow-rose-500/50 animate-pulse"}):o?d.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 shadow-lg shadow-emerald-500/50"}):d.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-300"})}),N(),o&&h&&d.jsx("div",{className:"absolute top-10 right-2 bg-yellow-300 text-yellow-900 text-[8px] font-bold px-1.5 py-0.5 rounded-sm shadow-sm rotate-[-12deg] border border-yellow-400 z-10",children:"REV DUE"}),d.jsx("div",{className:`absolute right-3 top-1/2 w-3 h-3 rounded-full ${x} border border-black/10`}),d.jsx("div",{className:"mt-auto mb-8 w-3/4 text-center",children:d.jsx("div",{className:`py-1 px-2 rounded border ${o?"bg-white border-slate-200 shadow-sm":"bg-transparent border-transparent"}`,children:d.jsx("div",{className:`text-xs font-bold truncate ${o?"text-slate-700":"text-slate-400 italic"}`,children:c})})})]})}),d.jsx("div",{className:"absolute -bottom-2 w-[90%] h-2 bg-black/10 rounded-full blur-sm"})]})}function HO({room:t,tenant:e,onClose:n}){if(!t)return null;const{updateTenant:r,createTenant:s}=ro(),{showToast:i}=ll(),o=(e==null?void 0:e.status)||"Vacant",[l,c]=V.useState(o),u=l==="Occupied";ui.useEffect(()=>{c((e==null?void 0:e.status)||"Vacant")},[e]),ui.useEffect(()=>{const Q=le=>{le.key==="Escape"&&n()};return window.addEventListener("keydown",Q),()=>window.removeEventListener("keydown",Q)},[n]);const[h,p]=V.useState("tenant"),[m,x]=V.useState(!1),[N,A]=V.useState({}),k=Q=>{const le=Q.target.value;c(le),le==="Occupied"&&!e&&(x(!0),A({tenant:"",phone:"",email:"",rent:"",waterRate:"0.25",advance:"",lastRevision:"",joinDate:new Date().toISOString().split("T")[0],status:"Occupied",roomNo:t.roomNo,roomId:t.roomId}),p("tenant"))},I=()=>{A({tenant:(e==null?void 0:e.tenant)??"",phone:(e==null?void 0:e.phone)??"",email:(e==null?void 0:e.email)??"",rent:(e==null?void 0:e.rent)??"",waterRate:(e==null?void 0:e.waterRate)??"0.25",advance:(e==null?void 0:e.advance)??"",lastRevision:(e==null?void 0:e.lastRevision)??"",joinDate:(e==null?void 0:e.joinDate)??""}),x(!0),p("tenant")},[v,E]=V.useState(!1),R=async()=>{E(!0);try{const Q={...N,status:l,isEvictionConfirmed:P,noRevision:_,evictionNoticeDate:P?T:null,evictionDate:P?C:null};if(e!=null&&e.rent&&String(e.rent)!==String(Q.rent)&&(Q.lastRent=e.rent),(Q.waterRate===void 0||Q.waterRate==="")&&(Q.waterRate="0.25"),e!=null&&e.id)await r(e.id,Q),i("Tenant details updated successfully","success");else{if(!t.roomId)throw new Error("Room ID missing");await s({...Q,status:"Occupied",roomId:t.roomId,roomNo:t.roomNo}),i("New tenant created successfully","success")}x(!1),e!=null&&e.id||n()}catch(Q){console.error("Failed to update/create tenant:",Q),i("Failed to save: "+Q.message,"error")}finally{E(!1)}},[P,O]=V.useState(!1),[_,y]=V.useState(!1);ui.useEffect(()=>{e?(O(!!e.isEvictionConfirmed),y(!!e.noRevision),S(e.evictionNoticeDate||""),D(e.evictionDate||"")):(O(!1),y(!1),S(""),D(""))},[e]);const[T,S]=V.useState(""),[C,D]=V.useState(""),b=V.useMemo(()=>{if(!u||!T||!C)return null;const Q=new Date(T),le=new Date(C),z=Number(e.rent||0),G=Number(e.advance||0),Y=[];let re=new Date(Q.getFullYear(),Q.getMonth(),1);const me=new Date(le.getFullYear(),le.getMonth(),1);for(;re<=me;)Y.push({year:re.getFullYear(),monthIndex:re.getMonth(),label:zi(re.getFullYear(),re.getMonth())}),re.setMonth(re.getMonth()+1);const Tt=Y.length,tt=Tt*z,Ht=z,at=hu(t.roomNo);let St=0;const tn=60;let cl=Tt*tn;const ul=Y.map(ir=>{const io=fd(e,ir.year,ir.monthIndex,at),rs=io.amount||0;St+=rs;let ss="";return io.units!==null?ss=`${io.units} units + ${tn}`:ss=`Water data missing + ${tn}`,{...ir,rent:z,waterCost:rs,totalWater:rs+tn,notes:ss}}),dl=St+cl,so=tt+Ht+dl-G;return{monthsCount:Tt,rentDeduction:tt,mandatoryRent:Ht,waterAndServiceTotal:dl,deposit:G,balance:so,monthDetails:ul,isWaterComplete:ul.every(ir=>!ir.notes.includes("missing"))}},[u,T,C,e,t.roomNo]),ce=Q=>{p(le=>le===Q?null:Q)},he=(Q,le)=>{if(Q==="phone"){const z=le.replace(/\D/g,"");if(z.length>10)return;A(G=>({...G,[Q]:z}));return}A(z=>({...z,[Q]:le}))};return d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-in fade-in duration-200",children:d.jsxs("div",{className:"bg-stone-50 rounded-[2rem] shadow-2xl w-full max-w-lg h-[90vh] md:h-auto md:max-h-[90vh] overflow-y-auto flex flex-col",children:[d.jsxs("div",{className:"flex justify-between items-start p-6 pb-2 bg-stone-50 sticky top-0 z-10",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[d.jsxs("h3",{className:"text-2xl font-extrabold text-slate-900",children:["Room ",t.roomNo]}),u&&d.jsx("span",{className:"bg-emerald-100 text-emerald-700 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase tracking-wide border border-emerald-200/50",children:"Occupied"})]}),d.jsxs("p",{className:"text-xs font-bold text-slate-400",children:["ID: ",t.roomId]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[u&&!m&&d.jsx("button",{onClick:I,className:"p-2 bg-white rounded-full hover:bg-stone-200 transition text-slate-400 border border-stone-100 shadow-sm",title:"Edit Tenant Details",children:d.jsx(MO,{size:18})}),m&&d.jsxs("button",{onClick:R,disabled:v,className:"px-4 py-2 bg-emerald-600 text-white rounded-xl hover:bg-emerald-700 transition shadow-sm flex items-center gap-2 text-xs font-bold disabled:opacity-50",children:[d.jsx(Xf,{size:16})," ",v?"Saving...":"Save"]}),d.jsx("button",{onClick:()=>{x(!1),n()},className:"p-2 bg-white rounded-full hover:bg-stone-200 transition text-slate-400 border border-stone-100 shadow-sm",children:d.jsx(mu,{size:20})})]})]}),d.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto custom-scrollbar",children:[d.jsxs("div",{className:"bg-white p-4 rounded-3xl border border-stone-200 shadow-sm",children:[d.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-2 block ml-1",children:"Room Status"}),d.jsxs("div",{className:"relative",children:[d.jsxs("select",{className:"w-full appearance-none bg-stone-50 border border-stone-200 text-slate-700 text-sm font-bold rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-emerald-500/20",value:l,onChange:k,children:[d.jsx("option",{value:"Occupied",children:"Occupied - Tenant Present"}),d.jsx("option",{value:"Vacant",children:"Vacant - Ready for Tenant"}),d.jsx("option",{value:"Maintenance",children:"Maintenance - Not Available"})]}),d.jsx(Hm,{className:"absolute right-4 top-3.5 text-slate-400 pointer-events-none",size:16})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx(Sh,{id:"tenant",title:"Tenant Information",icon:$I,badge:u?"Occupied":null,expandedSection:h,onToggle:ce,children:u?d.jsxs("div",{className:"grid grid-cols-2 gap-y-5 gap-x-4",children:[d.jsx(bt,{label:"Tenant Name",value:e.tenant,fieldKey:"tenant",isEditing:m,editForm:N,onChange:he}),d.jsx(bt,{label:"Phone",value:e.phone,fieldKey:"phone",type:"tel",isEditing:m,editForm:N,onChange:he,maxLength:10}),d.jsx(bt,{label:"Email",value:e.email,fieldKey:"email",type:"email",isEditing:m,editForm:N,onChange:he}),d.jsx(bt,{label:"Move-in Date",value:e.joinDate,fieldKey:"joinDate",type:"date",isEditing:m,editForm:N,onChange:he}),d.jsx(bt,{label:"Room ID",value:t.roomId})]}):d.jsx("div",{className:"text-center py-4 text-slate-400 text-sm",children:"No tenant assigned."})}),d.jsx(Sh,{id:"financial",title:"Financial Details",icon:CO,badge:(()=>{var Y;if(!u)return null;if(P)return"Adjusted in SD";const Q=new Date,le=xs(Q.getFullYear(),Q.getMonth()),z=An(le.year,le.monthIndex);return((Y=e==null?void 0:e.paymentHistory)==null?void 0:Y[z])==="Paid"?"Paid":"Pending"})(),expandedSection:h,onToggle:ce,children:u?d.jsxs("div",{className:"grid grid-cols-2 gap-y-5 gap-x-4",children:[d.jsx(bt,{label:"Monthly Rent",value:`${Number(e.rent||0).toLocaleString("en-IN")}`,fieldKey:"rent",type:"number",isEditing:m,editForm:N,onChange:he}),d.jsx(bt,{label:"Water Rate (/Unit)",value:e.waterRate||"0.25",fieldKey:"waterRate",type:"number",step:"0.01",isEditing:m,editForm:N,onChange:he}),d.jsx(bt,{label:`Payment Status (${(()=>{const Q=new Date,le=xs(Q.getFullYear(),Q.getMonth());return zi(le.year,le.monthIndex)})()})`,value:(()=>{var Y;if(P)return"Adjusted in SD";if(!e)return"Pending";const Q=new Date,le=xs(Q.getFullYear(),Q.getMonth()),z=An(le.year,le.monthIndex);return((Y=e.paymentHistory)==null?void 0:Y[z])==="Paid"?"Paid":"Pending"})()}),d.jsx(bt,{label:"Advance Amount",value:`${Number(e.advance||0).toLocaleString("en-IN")}`,fieldKey:"advance",type:"number",isEditing:m,editForm:N,onChange:he}),d.jsx(bt,{label:"Advance Balance",value:`${Number(e.advance||0).toLocaleString("en-IN")}`}),d.jsx(bt,{label:"Last Rent Revision",value:e.lastRevision||"N/A",fieldKey:"lastRevision",type:"date",isEditing:m,editForm:N,onChange:he}),e.lastRent&&d.jsx(bt,{label:"Last Recorded Rent",value:`${Number(e.lastRent).toLocaleString("en-IN")}`})]}):d.jsx("div",{className:"text-center py-4 text-slate-400 text-sm",children:"No financial data."})}),d.jsx(GO,{tenant:e,updateTenant:r,showToast:i}),d.jsx(Sh,{id:"room",title:"Room Details",icon:Ua,badge:null,expandedSection:h,onToggle:ce,children:d.jsxs("div",{className:"grid grid-cols-1 gap-y-4",children:[d.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:P?d.jsx("span",{className:"px-2 py-1 rounded-md bg-rose-50 text-rose-600 text-[10px] font-bold uppercase border border-rose-100",children:"Eviction: Pending"}):d.jsx("span",{className:"px-2 py-1 rounded-md bg-emerald-100 text-emerald-800 text-[10px] font-bold uppercase",children:"Paid"})}),d.jsx(bt,{label:"Room Number",value:t.roomNo}),d.jsx(bt,{label:"EB Service No",value:t.ebServNo})]})})]}),d.jsxs("div",{className:"space-y-3 pt-2",children:[d.jsx(qO,{isOccupied:u,isEvictionConfirmed:P,setIsEvictionConfirmed:O,noRevision:_,setNoRevision:y}),P&&u&&d.jsxs("div",{className:"bg-stone-50 rounded-3xl p-6 border border-stone-200 mt-4 animate-in slide-in-from-top-4",children:[d.jsxs("div",{className:"mb-8",children:[d.jsx("h4",{className:"font-bold text-slate-800 text-sm mb-4",children:"Eviction dates"}),d.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-4",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Eviction notice date"}),d.jsx("input",{type:"date",value:T,onChange:Q=>S(Q.target.value),className:"w-full bg-white border border-stone-200 rounded-xl px-3 py-2 text-sm font-bold text-slate-800 focus:outline-none focus:ring-2 focus:ring-emerald-500/20"})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Eviction date"}),d.jsx("input",{type:"date",value:C,onChange:Q=>D(Q.target.value),className:"w-full bg-white border border-stone-200 rounded-xl px-3 py-2 text-sm font-bold text-slate-800 focus:outline-none focus:ring-2 focus:ring-emerald-500/20"})]})]}),d.jsx("p",{className:"text-[10px] text-slate-400 mt-3 font-medium",children:"Step 1: Set Notice  Step 2: Set Eviction. When eviction date is reached, scheduler auto-vacates."})]}),b&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"bg-white rounded-2xl p-5 border border-stone-200 shadow-sm mb-6",children:[d.jsx("h4",{className:"font-bold text-slate-800 text-sm mb-1",children:"Eviction Settlement (from deposit)"}),d.jsx("p",{className:"text-[10px] text-slate-400 font-medium mb-4",children:"Deduct rent + water + 60 service (full months), plus mandatory 1 month rent."}),d.jsxs("div",{className:"grid grid-cols-2 gap-y-6 gap-x-4",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Months (Notice  Vacate)"}),d.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:b.monthsCount})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Mandatory 1 Month Rent"}),d.jsxs("div",{className:"text-xl font-bold text-slate-900",children:["",b.mandatoryRent.toLocaleString("en-IN")]})]}),d.jsxs("div",{children:[d.jsxs("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:["Rent Deduction (",b.monthsCount," months)"]}),d.jsxs("div",{className:"text-xl font-bold text-slate-900",children:["",b.rentDeduction.toLocaleString("en-IN")]})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Water + Service (known)"}),d.jsxs("div",{className:"text-xl font-bold text-slate-900",children:["",b.waterAndServiceTotal.toLocaleString("en-IN")]})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Security Deposit"}),d.jsxs("div",{className:"text-xl font-bold text-slate-900",children:["",b.deposit.toLocaleString("en-IN")]})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Result (known)"}),d.jsxs("div",{className:`text-xl font-extrabold ${b.balance>0?"text-rose-600":"text-emerald-600"}`,children:[b.balance>0?"Tenant owes":"Refund",": ",Math.abs(b.balance).toLocaleString("en-IN")]})]})]}),d.jsxs("div",{className:"mt-6 bg-rose-50/50 rounded-xl overflow-hidden border border-rose-100",children:[d.jsx("div",{className:"px-4 py-2 bg-rose-100/50 border-b border-rose-100",children:d.jsx("h5",{className:"text-xs font-bold text-rose-800",children:"Month-wise deduction"})}),d.jsxs("table",{className:"w-full text-xs text-left",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"text-slate-500 border-b border-rose-100/50",children:[d.jsx("th",{className:"px-4 py-2 font-bold",children:"Month"}),d.jsx("th",{className:"px-4 py-2 text-right font-bold",children:"Rent"}),d.jsx("th",{className:"px-4 py-2 text-right font-bold",children:"Water"}),d.jsx("th",{className:"px-4 py-2 font-bold",children:"Notes"})]})}),d.jsx("tbody",{className:"divide-y divide-rose-100/50",children:b.monthDetails.map((Q,le)=>d.jsxs("tr",{className:"bg-white",children:[d.jsx("td",{className:"px-4 py-2 font-bold text-slate-800",children:Q.label}),d.jsxs("td",{className:"px-4 py-2 text-right font-medium text-slate-600",children:["",Q.rent.toLocaleString("en-IN")]}),d.jsxs("td",{className:"px-4 py-2 text-right font-medium text-slate-600",children:["",Q.waterCost.toLocaleString("en-IN")]}),d.jsx("td",{className:"px-4 py-2 text-slate-500",children:Q.notes})]},le))})]})]})]}),d.jsx("p",{className:"text-[11px] text-slate-400 font-medium mb-4",children:b.isWaterComplete?"All required water readings are available for the selected months.":" Some water readings are missing. Please update them in Water Bill section."}),d.jsx("button",{className:"w-full py-3 bg-rose-600 hover:bg-rose-700 text-white font-bold rounded-xl shadow-sm shadow-rose-200 transition",children:"Finalize Settlement & Mark Vacant"})]})]})]}),d.jsxs("div",{className:"mt-8 flex items-center justify-end gap-3 pt-6 border-t border-stone-100",children:[d.jsx("button",{className:"px-5 py-2.5 bg-amber-500 hover:bg-amber-600 text-white text-sm font-bold rounded-xl shadow-sm shadow-amber-200 transition",children:"Mark Rent Revised"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{className:"px-5 py-2.5 bg-rose-600 hover:bg-rose-700 text-white text-sm font-bold rounded-xl shadow-sm shadow-rose-200 transition",children:"Mark Vacant"}),d.jsx("button",{onClick:R,disabled:v,className:"p-2.5 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl shadow-sm shadow-emerald-200 transition disabled:opacity-50",title:"Save Changes",children:d.jsx(Xf,{size:20})})]}),d.jsx("button",{onClick:n,className:"p-2.5 bg-stone-100 hover:bg-stone-200 text-slate-600 rounded-xl transition",children:d.jsx(mu,{size:18})})]})]})]})})}function qO({isOccupied:t,isEvictionConfirmed:e,setIsEvictionConfirmed:n,noRevision:r,setNoRevision:s}){return d.jsxs(d.Fragment,{children:[d.jsxs("label",{className:`flex items-start gap-3 p-1 cursor-pointer group ${t?"":"opacity-50 pointer-events-none"}`,children:[d.jsxs("div",{className:"relative flex items-center",children:[d.jsx("input",{type:"checkbox",checked:e,onChange:i=>n(i.target.checked),className:"peer size-5 appearance-none rounded-md border-2 border-slate-300 checked:bg-emerald-500 checked:border-emerald-500 transition cursor-pointer"}),d.jsx("svg",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-3.5 h-3.5 text-white opacity-0 peer-checked:opacity-100 pointer-events-none transition",viewBox:"0 0 14 14",fill:"none",children:d.jsx("path",{d:"M11.6666 3.5L5.24992 9.91667L2.33325 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm font-bold text-slate-700 group-hover:text-slate-900 transition flex items-center gap-2",children:"Tenant confirmed eviction"}),d.jsx("p",{className:"text-[11px] text-slate-400 font-medium leading-relaxed mt-0.5",children:"Enable eviction notice/date and deposit settlement controls."})]})]}),d.jsxs("label",{className:"flex items-start gap-3 p-1 cursor-pointer group",children:[d.jsxs("div",{className:"relative flex items-center",children:[d.jsx("input",{type:"checkbox",checked:r,onChange:i=>s(i.target.checked),className:"peer size-5 appearance-none rounded-md border-2 border-slate-300 checked:bg-emerald-500 checked:border-emerald-500 transition cursor-pointer"}),d.jsx("svg",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-3.5 h-3.5 text-white opacity-0 peer-checked:opacity-100 pointer-events-none transition",viewBox:"0 0 14 14",fill:"none",children:d.jsx("path",{d:"M11.6666 3.5L5.24992 9.91667L2.33325 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm font-bold text-slate-700 group-hover:text-slate-900 transition",children:"No annual revision"}),d.jsx("p",{className:"text-[11px] text-slate-400 font-medium leading-relaxed mt-0.5",children:"Exclude from Rent Revision Due Soon list."})]})]})]})}const Sh=({id:t,title:e,icon:n,badge:r,expandedSection:s,onToggle:i,children:o})=>{const l=s===t;return d.jsxs("div",{className:`bg-white rounded-3xl border transition-all duration-200 overflow-hidden ${l?"border-emerald-500 shadow-md ring-1 ring-emerald-100":"border-stone-200"}`,children:[d.jsxs("button",{onClick:()=>i(t),className:"w-full flex items-center justify-between p-4 bg-white",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:`p-2 rounded-xl ${l?"bg-emerald-100 text-emerald-700":"bg-stone-100 text-slate-500"}`,children:d.jsx(n,{size:18})}),d.jsxs("div",{className:"text-left",children:[d.jsx("h4",{className:"font-bold text-slate-800 text-sm",children:e}),d.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Hover (or tap) to expand"})]})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[r&&d.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-0.5 rounded-md ${r==="Occupied"||r==="Paid"?"bg-emerald-100 text-emerald-700":"bg-stone-100 text-slate-500"}`,children:r}),l?d.jsx(VI,{size:16,className:"text-slate-400"}):d.jsx(Hm,{size:16,className:"text-slate-400"})]})]}),l&&d.jsxs("div",{className:"px-4 pb-5 pt-0 animate-in slide-in-from-top-2 duration-200",children:[d.jsx("div",{className:"h-px bg-stone-100 mb-4 mx-2"}),o]})]})};function GO({tenant:t,updateTenant:e,showToast:n}){const[r,s]=V.useState(!1),i=(t==null?void 0:t.documents)||{},o=async()=>{const h=crypto.randomUUID();try{await e(t.id,{uploadToken:h,uploadTokenCreatedAt:new Date().toISOString()}),n("Secure upload link generated","success")}catch{n("Failed to generate link","error")}},l=()=>{const h=`${window.location.origin}/upload/${t.uploadToken}`;navigator.clipboard.writeText(h),n("Link copied to clipboard","success")},c=()=>{const h=`${window.location.origin}/upload/${t.uploadToken}`,p=`Document Upload Link for Room ${t.roomNo}`,m=`Hi ${t.tenant},

Please use the following secure link to upload your documents (Aadhar, ID Proof, Agreement, Photo) for Room ${t.roomNo}.

${h}

This link is valid for 24 hours.

Regards,
Munirathnam Illam`;window.open(`mailto:${t.email||""}?subject=${encodeURIComponent(p)}&body=${encodeURIComponent(m)}`)},u=async h=>{const p={...i};delete p[h];try{await e(t.id,{documents:p}),n("Document removed","success")}catch{n("Failed to remove document","error")}};return d.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 overflow-hidden",children:[d.jsxs("button",{onClick:()=>s(!r),className:"w-full flex items-center justify-between p-6 bg-slate-50/50 hover:bg-slate-50 transition",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"bg-blue-100 p-3 rounded-2xl text-blue-600",children:d.jsx(LO,{size:24})}),d.jsxs("div",{className:"text-left",children:[d.jsx("h3",{className:"font-bold text-slate-900",children:"Document Vault"}),d.jsx("p",{className:"text-xs text-slate-500",children:"Manage tenant documents"})]})]}),r?d.jsx(VI,{size:20,className:"text-slate-400"}):d.jsx(Hm,{size:20,className:"text-slate-400"})]}),r&&d.jsxs("div",{className:"p-6 border-t border-slate-100 animate-in slide-in-from-top-2",children:[d.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-4 mb-6",children:[d.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Secure Upload Link"}),t!=null&&t.uploadToken?d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("div",{className:"flex-1 bg-white border border-slate-200 rounded-lg px-3 py-2 text-sm text-slate-600 truncate font-mono",children:[window.location.origin,"/upload/",t.uploadToken]}),d.jsx("button",{onClick:l,className:"p-2 bg-slate-200 hover:bg-slate-300 text-slate-700 rounded-lg transition",title:"Copy Link",children:d.jsx(kO,{size:18})}),d.jsx("button",{onClick:c,className:"p-2 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-lg transition",title:"Share via Email",children:d.jsx(MI,{size:18})})]}):d.jsx("button",{onClick:o,className:"w-full py-2 bg-blue-600 text-white rounded-lg font-bold text-sm hover:bg-blue-700 transition",children:"Generate Link"}),d.jsx("p",{className:"text-[10px] text-slate-400 mt-2",children:"Link expires in 24 hours. Tenant needs Google Sign-in to access."})]}),d.jsxs("div",{className:"space-y-3",children:[t.familyMembers&&d.jsxs("div",{className:"bg-amber-50 border border-amber-100 rounded-xl p-4 mb-4",children:[d.jsx("h4",{className:"text-xs font-bold text-amber-800 uppercase mb-1",children:"Family Contacts"}),d.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:t.familyMembers})]}),d.jsx(Kl,{title:"Tenant Photo",docUrl:i.photo,onDelete:()=>u("photo")}),d.jsx(Kl,{title:"Aadhar Card",docUrl:i.aadhar,onDelete:()=>u("aadhar")}),d.jsx(Kl,{title:"ID Proof",docUrl:i.pan,onDelete:()=>u("pan")}),d.jsx(Kl,{title:"Rental Agreement",docUrl:i.agreement,onDelete:()=>u("agreement")})]})]})]})}function Kl({title:t,docUrl:e,onDelete:n}){return d.jsxs("div",{className:"flex items-center justify-between p-3 border border-slate-100 rounded-xl hover:bg-slate-50 transition",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:`p-2 rounded-lg ${e?"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-400"}`,children:e?d.jsx(fu,{size:16}):d.jsx($I,{size:16})}),d.jsxs("div",{children:[d.jsx("div",{className:"font-bold text-sm text-slate-700",children:t}),d.jsx("div",{className:"text-[10px] text-slate-400",children:e?"Uploaded":"Pending"})]})]}),e&&d.jsxs("div",{className:"flex gap-2",children:[d.jsx("a",{href:e,target:"_blank",rel:"noreferrer",className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition",title:"View Document",children:d.jsx(MI,{size:16})}),d.jsx("button",{onClick:n,className:"p-2 text-rose-500 hover:bg-rose-50 rounded-lg transition",title:"Remove Document",children:d.jsx(zI,{size:16})})]})]})}const bt=({label:t,value:e,fieldKey:n,type:r="text",step:s,isEditing:i,editForm:o,onChange:l,maxLength:c})=>d.jsxs("div",{children:[d.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1",children:t}),i&&n?d.jsx("input",{type:r,step:s,maxLength:c,value:o[n]||"",onChange:u=>l(n,u.target.value),className:"w-full bg-white border border-stone-200 rounded-lg px-3 py-2 text-sm font-bold text-slate-800 focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none"}):d.jsx("div",{className:"text-sm font-bold text-slate-800 break-words",children:e||"N/A"})]});function KO(){const{rooms:t,tenants:e,loading:n}=ro(),[r,s]=ui.useState(null);if(n)return d.jsx("div",{className:"p-12 text-center text-slate-400",children:"Loading rooms..."});const i=12,o=[{name:"Ground Floor",rooms:["01","02"]},{name:"1st Floor",rooms:["04"]},{name:"2nd Floor",rooms:["05","06","07"]},{name:"3rd Floor",rooms:["08","09","10"]},{name:"4th Floor",rooms:["11","12","13"]}];let l=0;o.forEach(v=>{v.rooms.forEach(E=>{const R=t[E];if(R){const P=st(e,R.roomId);Ti(P)&&l++}})});const c=i-l,u=({label:v,mainValue:E,subValue:R,icon:P,bgClass:O,iconClass:_})=>d.jsx("div",{className:`p-6 rounded-3xl ${O} flex flex-col justify-between h-40 relative overflow-hidden`,children:d.jsxs("div",{className:"flex justify-between items-start z-10",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-semibold text-slate-600 mb-1",children:v}),d.jsx("h3",{className:"text-4xl font-extrabold text-slate-900",children:E}),R&&d.jsx("p",{className:"text-xs text-slate-500 mt-2",children:R})]}),d.jsx("div",{className:`p-2 rounded-full ${_}`,children:d.jsx(P,{size:24})})]})}),h=(v,E)=>{s({room:v,tenant:E})},p=new Date().getFullYear(),m=new Date().getMonth(),x=xs(p,m),N=An(x.year,x.monthIndex),A=yO(e,t,x.year,x.monthIndex),k=vO(e,t,x.year,x.monthIndex),I=[];return Object.keys(Je).forEach(v=>{var P;const E=t[v]||Je[v],R=st(e,E.roomId);R&&R.status==="Occupied"&&!R.isEvictionConfirmed&&((P=R.paymentHistory)==null?void 0:P[N])==="Pending"&&I.push({roomNo:E.roomNo,amount:R.rent,tenantName:R.tenant})}),d.jsxs("div",{className:"space-y-8 pb-12",children:[d.jsx("h2",{className:"text-3xl font-extrabold text-slate-900",children:"Room Details"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[d.jsx(u,{label:"Occupied Rooms",mainValue:l,subValue:`Out of ${i}`,icon:Ua,bgClass:"bg-stone-50 border border-stone-100",iconClass:"bg-emerald-100 text-emerald-700"}),d.jsx(u,{label:"Vacant Rooms",mainValue:c,subValue:"Available",icon:Ua,bgClass:"bg-stone-50 border border-stone-100",iconClass:"bg-slate-200 text-slate-600"}),d.jsx(u,{label:"Rent Received",mainValue:`${A.toLocaleString("en-IN")}`,subValue:`Month of ${zi(x.year,x.monthIndex)}`,icon:bO,bgClass:"bg-stone-50 border border-stone-100",iconClass:"bg-emerald-100 text-emerald-700"}),d.jsx(u,{label:"Pending Rent",mainValue:`${k.toLocaleString("en-IN")}`,subValue:`Month of ${zi(x.year,x.monthIndex)}`,icon:Si,bgClass:"bg-stone-50 border border-stone-100",iconClass:"bg-amber-100 text-amber-600"})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[d.jsx("div",{className:"lg:col-span-2 space-y-8 bg-stone-50/50 p-6 rounded-3xl border border-stone-100",children:o.map(v=>d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[d.jsx("div",{className:"md:col-span-1 flex items-center",children:d.jsx("span",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:v.name})}),d.jsxs("div",{className:"md:col-span-3 grid grid-cols-1 sm:grid-cols-3 gap-4",children:[v.rooms.map(E=>{var _;const R=t[E],P=st(e,R==null?void 0:R.roomId);let O=null;return P&&P.status==="Occupied"&&(P.isEvictionConfirmed?O="Adjusted":O=((_=P.paymentHistory)==null?void 0:_[N])||"Pending"),d.jsx(Th,{roomNo:E,roomData:R,tenantData:P,rentStatus:O,isPlaceholder:!R,onClick:()=>h(R,P)},E)}),v.name==="1st Floor"?d.jsx("div",{className:"sm:col-span-2",children:d.jsx(Th,{roomNo:"Owner",roomData:{roomId:"Flat"},tenantData:{status:"Occupied",tenant:"Munirathnam",evictionConfirmed:!1},rentStatus:"Paid",onClick:()=>{}})}):Array.from({length:3-v.rooms.length}).map((E,R)=>d.jsx(Th,{isPlaceholder:!0},`placeholder-${R}`))]})]},v.name))}),d.jsx("div",{className:"lg:col-span-1",children:d.jsxs("div",{className:"bg-stone-50 rounded-3xl border border-stone-100 p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h3",{className:"font-bold text-slate-800",children:"Last Month Pending"}),d.jsx("span",{className:"bg-amber-100 text-amber-800 text-xs font-bold px-2 py-1 rounded-full",children:I.length})]}),d.jsxs("div",{className:"space-y-3",children:[I.length>0?I.map((v,E)=>d.jsxs("div",{className:"bg-white p-4 rounded-xl border border-stone-100 shadow-sm cursor-pointer hover:border-rose-200 transition",onClick:()=>{const R=t[v.roomNo],P=st(e,R==null?void 0:R.roomId);R&&P&&h(R,P)},children:[d.jsxs("div",{className:"flex justify-between mb-1",children:[d.jsxs("span",{className:"font-bold text-slate-700",children:["Room ",v.roomNo]}),d.jsxs("span",{className:"font-bold text-rose-600",children:["",Number(v.amount).toLocaleString()]})]}),d.jsx("div",{className:"text-xs text-slate-500",children:v.tenantName})]},E)):d.jsx("div",{className:"text-center py-8 text-slate-400 text-sm",children:"No pending payments from last month."}),d.jsx("p",{className:"text-xs text-slate-400 mt-4 text-center",children:"Click a row to open Rent Details."})]})]})})]}),r&&d.jsx(HO,{room:r.room,tenant:st(e,r.room.roomId),onClose:()=>s(null)})]})}function QO(){const{rooms:t,tenants:e,loading:n,updateRentStatus:r,globalYear:s}=ro(),{showToast:i}=ll(),o=s;if(n)return d.jsx("div",{className:"p-12 text-center text-slate-400",children:"Loading rent details..."});const l=Object.keys(Je).map(u=>t[u]||Je[u]).sort((u,h)=>String(u.roomNo).localeCompare(String(h.roomNo),void 0,{numeric:!0})),c=async(u,h,p)=>{const m=st(e,u.roomId);if(!Ti(m))return;const x=An(o,h),N=new Date;if(!(uu(o,h)||o===N.getFullYear()&&h===N.getMonth()))try{await r(u.roomId,x,p,m,o,h)}catch(k){i(k.message,"error")}};return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsx("h2",{className:"text-3xl font-extrabold text-slate-900",children:"Rent Status"}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[d.jsxs("span",{className:"font-semibold",children:["Year: ",o]}),d.jsx("span",{className:"text-xs text-slate-400",children:"(Change in Dashboard)"})]})]}),d.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden",children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-base text-left whitespace-nowrap",children:[d.jsx("thead",{className:"bg-slate-50 text-slate-700 font-semibold border-b border-slate-200",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-2 py-4 border-r border-slate-200 sticky left-0 bg-slate-50 z-10 w-20 text-center",children:"Room ID"}),d.jsx("th",{className:"px-2 py-4 border-r border-slate-200 w-20 text-center",children:"Room No"}),d.jsx("th",{className:"px-4 py-4 border-r border-slate-200 w-40",children:"Tenant"}),an.map(u=>d.jsx("th",{className:"px-1 py-4 text-center w-12",children:u},u))]})}),d.jsx("tbody",{className:"divide-y divide-slate-100",children:l.map(u=>{const h=st(e,u.roomId),p=Ti(h),m=p?(h==null?void 0:h.tenant)||"Unknown":"Vacant",x=(h==null?void 0:h.paymentHistory)||{};return d.jsxs("tr",{className:p?"hover:bg-slate-50":"bg-slate-50/50",children:[d.jsx("td",{className:"px-2 py-4 border-r border-slate-100 font-bold text-blue-600 sticky left-0 bg-white z-10 text-center",children:u.roomId}),d.jsx("td",{className:"px-2 py-4 border-r border-slate-100 font-medium text-center",children:u.roomNo}),d.jsx("td",{className:`px-4 py-4 border-r border-slate-100 font-medium truncate max-w-[160px] ${p?"text-slate-800":"text-slate-400 italic"}`,title:m,children:m}),an.map((N,A)=>{const k=An(o,A),I=x[k]||"None",v=new Date,E=o===v.getFullYear()&&A===v.getMonth(),R=uu(o,A)||E;let P=d.jsx(Ih,{size:14,className:"mx-auto text-slate-300"}),O="cursor-not-allowed bg-slate-100/50";if(p)if(R)P=d.jsx(Ih,{size:14,className:"mx-auto text-slate-300"}),O="cursor-not-allowed bg-slate-50";else{let _=!1;if(h.isEvictionConfirmed)if(h.evictionNoticeDate){const y=new Date(h.evictionNoticeDate),T=new Date(y.getFullYear(),y.getMonth(),1);new Date(o,A,1)>=T&&(_=!0)}else _=!0;_?(P=d.jsx("span",{className:"text-[10px] font-black text-cyan-600",children:"SD"}),O="cursor-not-allowed bg-cyan-50"):I==="Paid"?(P=d.jsx(fu,{size:16,className:"mx-auto text-green-600",strokeWidth:3}),O="cursor-pointer bg-green-50 hover:bg-green-100"):I==="Pending"?(P=d.jsx(mu,{size:16,className:"mx-auto text-amber-600",strokeWidth:3}),O="cursor-pointer bg-amber-50 hover:bg-amber-100"):I==="Rent Only"?(P=d.jsx(fu,{size:16,className:"mx-auto text-purple-600",strokeWidth:3}),O="cursor-pointer bg-purple-50 hover:bg-purple-100"):(P=d.jsx(Ih,{size:14,className:"mx-auto text-slate-400"}),O="cursor-pointer bg-white hover:bg-slate-50")}return d.jsx("td",{className:`px-1 py-4 border-r border-slate-100 text-center transition-colors ${O}`,onClick:()=>c(u,A,I),title:p?R?"Locked":I:"Vacant",children:P},k)})]},u.roomId)})})]})})}),d.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden mt-8",children:[d.jsxs("div",{className:"p-6 border-b border-slate-100 bg-emerald-50/50",children:[d.jsx("h3",{className:"text-xl font-bold text-emerald-900",children:"Rent and Water"}),d.jsx("p",{className:"text-sm text-emerald-700 mt-1",children:"Rent and Water Details (Water Calculation Disabled Temporarily for Debugging)"})]}),d.jsx("div",{className:"overflow-x-auto text-sm",children:d.jsxs("table",{className:"w-full text-left whitespace-nowrap",children:[d.jsx("thead",{className:"bg-emerald-100 text-emerald-900 font-bold",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-2 py-4 sticky left-0 bg-emerald-100 z-10 w-20 text-center",children:"Room ID"}),d.jsx("th",{className:"px-2 py-4 border-r border-emerald-200/50 w-20 text-center",children:"Room No"}),d.jsx("th",{className:"px-4 py-4 border-r border-emerald-200/50 w-40",children:"Tenant Name"}),Array.from({length:12}).map((u,h)=>d.jsx("th",{className:"px-1 py-4 text-center min-w-[70px]",children:zi(o,h).split(" ")[0]},h))]})}),d.jsx("tbody",{className:"divide-y divide-emerald-50",children:l.map(u=>{const h=st(e,u.roomId),p=h&&h.status==="Occupied";return d.jsxs("tr",{className:"hover:bg-slate-50 transition",children:[d.jsx("td",{className:"px-2 py-4 font-bold text-blue-600 sticky left-0 bg-white shadow-[1px_0_5px_-2px_rgba(0,0,0,0.1)] text-center",children:u.roomId}),d.jsx("td",{className:"px-2 py-4 border-r border-slate-100 font-medium text-slate-700 text-center",children:u.roomNo}),d.jsx("td",{className:"px-4 py-4 border-r border-slate-100 font-medium text-slate-900 truncate max-w-[160px]",title:p?h.tenant:"Vacant",children:p?h.tenant:d.jsx("span",{className:"text-slate-400 italic",children:"Vacant"})}),Array.from({length:12}).map((m,x)=>{const N=`${o}-${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][x]}`;let A="-",k="text-slate-300";if(h){const I=h.paymentHistory||{},v=h.paymentTotals||{},E=I[N];let R=Number(h.rent);if(h.lastRevision){const _=new Date(h.lastRevision),y=new Date(o,x,1),T=new Date(_.getFullYear(),_.getMonth(),1);y<T&&(R=Number(h.lastRent)||R)}const P=Wm;let O=!1;if(h.isEvictionConfirmed&&h.evictionNoticeDate){const _=new Date(h.evictionNoticeDate),y=new Date(o,x,1),T=new Date(_.getFullYear(),_.getMonth(),1);y>=T&&(O=!0,R=0)}if(E==="Paid")if(O)A="0",k="text-slate-900 font-bold";else{const _=v[N];Number.isFinite(_)?(A=_.toLocaleString("en-IN"),k="text-slate-900 font-bold"):(A=(R+P).toLocaleString("en-IN"),k="text-slate-900 font-bold")}}return d.jsx("td",{className:`px-1 py-4 text-center ${k} border-r border-slate-50`,children:A},x)})]},u.roomId)})})]})})]})]})}const YO="AIzaSyAIJxq1lZET1G8a4VI0TfsSDQV8Qn-pYxY",JO=`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${YO}`;async function XO(t,e="image/jpeg"){var n,r,s,i,o,l;try{const c=await fetch(JO,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:"Analyze this image of a water meter. Extract the numeric reading shown on the counter. Return ONLY the number as a plain integer or float. Ignore any units or leading zeros if they are not part of the value. If you cannot clearly see a number, return 'ERROR'."},{inline_data:{mime_type:e,data:t}}]}]})});if(!c.ok){const m=await c.text();throw console.error("Gemini API Error:",m),new Error(`Gemini API Error: ${c.statusText}`)}const u=await c.json(),h=(l=(o=(i=(s=(r=(n=u==null?void 0:u.candidates)==null?void 0:n[0])==null?void 0:r.content)==null?void 0:s.parts)==null?void 0:i[0])==null?void 0:o.text)==null?void 0:l.trim();if(console.log("Gemini Raw Response:",h),!h||h==="ERROR")return null;const p=h.match(/(\d+\.?\d*)/);return p?parseFloat(p[0]):null}catch(c){throw console.error("Failed to analyze image with Gemini:",c),c}}const ZO=({size:t=24,className:e=""})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"currentColor",className:e,children:d.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})});function ej(){const{rooms:t,tenants:e,loading:n,globalYear:r}=ro(),{showToast:s,confirm:i}=ll(),o=r,[l,c]=V.useState(null),[u,h]=V.useState(""),[p,m]=V.useState(!1),[x,N]=V.useState(!1);if(n)return d.jsx("div",{className:"p-12 text-center text-slate-400",children:"Loading water details..."});const A=Object.keys(Je).map(R=>t[R]||Je[R]).sort((R,P)=>String(R.roomNo).localeCompare(String(P.roomNo),void 0,{numeric:!0})),k=(R,P,O,_,y,T,S)=>{!_&&!Ti(st(e,R.roomId))||O||(c({room:R,monthIndex:P,currentVal:y,prevVal:S,existingReset:T}),h(y??""),m(!!T))},I=async()=>{if(!l)return;const{room:R,monthIndex:P}=l;try{const O=st(e,R.roomId);if(!O||!O.id)throw new Error("Tenant record not found");const _=Number(u);if(u!==""&&(!Number.isFinite(_)||_<0)){s("Please enter a valid non-negative reading","warning");return}const y=fs(o,P);!p&&u!==""&&Number.isFinite(l.prevVal)&&_<l.prevVal&&await i({title:"Potential Meter Reset?",message:`Reading (${_}) is lower than previous (${l.prevVal}).

Is this a meter reset/replacement?`,confirmText:"Yes, Meter Reset",cancelText:"No, Save Anyway",type:"danger"})&&m(!0);const T={[`waterReadings.${y}`]:u===""?null:_,[`waterMeterReset.${y}`]:!!p};await Fi(Zn(Qe,"properties",O.id),T),c(null),s("Water reading saved successfully","success")}catch(O){console.error(O),s("Error saving reading: "+O.message,"error")}},v=R=>{R!==null?(h(R.toString()),s("Reading extracted successfully!","success")):s("Could not extract reading. Please try again or enter manually.","error"),N(!1)},E=async(R,P=null,O=null)=>{var y,T;const _=R.target.files[0];if(_){if(P!==null&&O){const S=st(e,O.roomId);Ti(S);const C=fs(o,P),D=(y=S==null?void 0:S.waterReadings)==null?void 0:y[C],b=((S==null?void 0:S.waterMeterReset)||{})[C],ce=xs(o,P),he=fs(ce.year,ce.monthIndex),Q=Number((T=S==null?void 0:S.waterReadings)==null?void 0:T[he]);c({room:O,monthIndex:P,currentVal:D,prevVal:Q,existingReset:b}),h("")}N(!0);try{const S=new FileReader;S.onloadend=async()=>{const C=S.result.toString().split(",")[1],D=_.type,b=await XO(C,D);v(b)},S.readAsDataURL(_)}catch(S){console.error(S),s("Error processing image: "+S.message,"error"),N(!1)}}};return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsx("h2",{className:"text-3xl font-extrabold text-slate-900",children:"Water Bill"}),d.jsx("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:d.jsxs("span",{className:"font-semibold",children:["Year: ",o]})})]}),d.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden",children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-sm text-center whitespace-nowrap",children:[d.jsx("thead",{className:"bg-slate-50 text-slate-700 font-semibold border-b border-slate-200",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 border-r border-slate-200 sticky left-0 bg-slate-50 z-10 text-left min-w-[100px]",children:"Room"}),an.map(R=>d.jsx("th",{className:"px-2 py-3 w-24",children:R},R)),d.jsx("th",{className:"px-2 py-3 w-16 sticky right-0 bg-slate-50 z-10 border-l border-slate-200",children:"Scan"})]})}),d.jsx("tbody",{className:"divide-y divide-slate-100",children:A.map(R=>{var S;const P=st(e,R.roomId),O=Ti(P),_=(P==null?void 0:P.waterReadings)&&Object.keys(P.waterReadings).length>0,y=((S=P==null?void 0:P.archivedTenant)==null?void 0:S.tenant)||"",T=O?(P==null?void 0:P.tenant)||"Unknown":y?`${y} (Vacated)`:"Vacant";return d.jsxs("tr",{className:"hover:bg-slate-50/50",children:[d.jsxs("td",{className:"px-4 py-3 border-r border-slate-100 sticky left-0 bg-white z-10 text-left",children:[d.jsx("div",{className:"font-bold text-blue-600",children:R.roomNo}),d.jsx("div",{className:"text-xs text-slate-500 truncate max-w-[120px]",children:T})]}),an.map((C,D)=>{var at,St;const b=uu(o,D),ce=O||_,he=Number(P==null?void 0:P.waterRate),Q=Number.isFinite(he)?he:hu(R.roomNo),le=fd(P,o,D,Q),z=fs(o,D),G=(at=P==null?void 0:P.waterReadings)==null?void 0:at[z],Y=((P==null?void 0:P.waterMeterReset)||{})[z];let re=d.jsx("span",{className:"text-slate-300",children:"-"}),me="bg-slate-50 text-slate-400 cursor-not-allowed";if(ce)if(b&&O)re=d.jsx("span",{className:"text-slate-300",children:"-"}),me="bg-slate-100 text-slate-400 cursor-not-allowed";else if(me="cursor-pointer bg-white hover:bg-blue-50 transition-colors",le.units!==null&&le.amount!==null){const tn=le.units<0;re=d.jsxs("div",{className:"flex flex-col items-center leading-tight",children:[d.jsxs("span",{className:"font-extrabold text-blue-700",children:["",le.amount]}),d.jsxs("span",{className:`text-[10px] ${tn?"text-red-600 font-bold":"text-slate-500"}`,children:["Units: ",le.units]}),Y&&d.jsxs("span",{className:"text-[9px] text-amber-600 font-bold flex items-center gap-0.5",children:[d.jsx(UO,{size:8})," Reset"]})]}),tn&&(me+=" bg-red-50 hover:bg-red-100")}else Number.isFinite(Number(G))?re=d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx("span",{className:"font-semibold text-slate-700",children:G}),d.jsx("span",{className:"text-[9px] text-slate-400",children:"reading"})]}):re=d.jsx("span",{className:"text-slate-200",children:""});const Tt=xs(o,D),tt=fs(Tt.year,Tt.monthIndex),Ht=Number((St=P==null?void 0:P.waterReadings)==null?void 0:St[tt]);return d.jsx("td",{className:`px-1 py-2 border-r border-slate-100 h-16 align-middle ${me}`,onClick:()=>k(R,D,ce&&b&&O,ce,G,Y,Ht),children:re},D)}),d.jsx("td",{className:"px-2 py-2 h-16 align-middle sticky right-0 bg-white z-10 border-l border-slate-100",children:(()=>{const C=new Date().getMonth();return o===new Date().getFullYear()?d.jsxs("label",{className:"flex items-center justify-center size-10 rounded-xl bg-blue-50 text-blue-600 hover:bg-blue-600 hover:text-white transition-all cursor-pointer mx-auto",children:[d.jsx("input",{type:"file",accept:"image/*",capture:"environment",className:"hidden",onChange:b=>E(b,C,R),disabled:x}),x?d.jsx(pu,{size:18,className:"animate-spin"}):d.jsx(t_,{size:18})]}):d.jsx("span",{className:"text-slate-200",children:"-"})})()})]},R.roomId)})})]})})}),l&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:d.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-[340px] overflow-hidden animate-in zoom-in-95 duration-200",children:[d.jsxs("div",{className:"bg-white px-6 pt-6 pb-2",children:[d.jsx("h3",{className:"text-xl font-extrabold text-slate-800 tracking-tight",children:"Water meter reading"}),d.jsxs("p",{className:"text-sm font-medium text-slate-400 mt-1",children:["Room ",l.room.roomNo,"  ",an[l.monthIndex]," ",o]})]}),d.jsxs("div",{className:"p-6 space-y-5",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsxs("label",{className:"block text-xs font-bold text-slate-400 uppercase tracking-wider",children:["Previous month reading (",an[(l.monthIndex-1+12)%12]," ",l.monthIndex===0?o-1:o,")"]}),d.jsx("div",{className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-600 font-mono font-bold text-lg",children:Number.isFinite(l.prevVal)?l.prevVal:"N/A"})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Units multiplier"}),d.jsxs("div",{className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-600 font-bold",children:["",ca]})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Meter reset?"}),d.jsxs("select",{className:"w-full px-3 py-3 bg-white border border-slate-200 rounded-xl text-slate-700 font-bold focus:outline-none focus:ring-2 focus:ring-blue-500/20 appearance-none",value:p?"Yes":"No",onChange:R=>m(R.target.value==="Yes"),children:[d.jsx("option",{value:"No",children:"No"}),d.jsx("option",{value:"Yes",children:"Yes"})]})]})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("label",{className:"block text-sm font-bold text-blue-900",children:"Current reading"}),d.jsxs("label",{className:"flex items-center gap-1.5 text-xs font-bold text-blue-600 bg-blue-50 px-2 py-1 rounded-lg cursor-pointer hover:bg-blue-100 transition-colors",children:[d.jsx("input",{type:"file",accept:"image/*",capture:"environment",className:"hidden",onChange:E,disabled:x}),x?d.jsxs(d.Fragment,{children:[d.jsx(pu,{size:14,className:"animate-spin"}),"Analyzing..."]}):d.jsxs(d.Fragment,{children:[d.jsx(t_,{size:14}),"Scan Meter"]})]})]}),d.jsx("div",{className:"relative",children:d.jsx("input",{type:"number",autoFocus:!0,className:"w-full px-4 py-3 rounded-xl border-2 border-blue-100 bg-blue-50/50 focus:bg-white focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 outline-none text-2xl font-mono font-bold text-blue-900 placeholder:text-blue-200 transition-all",placeholder:"000",value:u,onChange:R=>h(R.target.value),onKeyDown:R=>R.key==="Enter"&&I()})})]})]}),d.jsxs("div",{className:"px-6 pb-6 flex items-center justify-end gap-3",children:[d.jsx("button",{onClick:()=>c(null),className:"size-12 rounded-2xl flex items-center justify-center bg-slate-100 text-slate-400 hover:bg-slate-200 hover:text-slate-600 transition-all",title:"Close",children:d.jsx("span",{className:"text-2xl leading-none",children:""})}),(()=>{const R=st(e,l.room.roomId),P=R==null?void 0:R.phone,O=Number(u);let _="#",y=!1;if(P){if(u!==""&&Number.isFinite(O)){Number.isFinite(l.prevVal)&&l.prevVal;const T=p;let S=null;if(T?S=O*ca:Number.isFinite(l.prevVal)&&(S=(O-l.prevVal)*ca),S!==null&&S>=0){const C=Number(R==null?void 0:R.waterRate),D=Number.isFinite(C)?C:hu(l.room.roomNo),b=Math.round(S*D),he=`Water Bill - ${`${an[l.monthIndex]} ${o}`}
No of Ltrs - ${S}
Amnt.        - ${b}`;_=`https://wa.me/91${P}?text=${encodeURIComponent(he)}`,y=!0}}}return!y&&P&&(_=`https://wa.me/91${P}?text=Hi, please send the water meter reading for ${an[l.monthIndex]} ${o}.`),d.jsx("a",{href:P?_:void 0,onClick:T=>!P&&alert("No phone number for tenant"),target:"_blank",rel:"noreferrer",className:"size-12 rounded-2xl flex items-center justify-center bg-emerald-100 text-emerald-600 hover:bg-emerald-500 hover:text-white transition-all border border-emerald-200",title:y?"Send Bill on WhatsApp":"Request Reading on WhatsApp",children:d.jsx(ZO,{})})})(),d.jsx("button",{onClick:I,className:"size-12 rounded-2xl flex items-center justify-center bg-blue-600 text-white hover:bg-blue-700 hover:scale-105 active:scale-95 transition-all shadow-lg shadow-blue-200",title:"Save Recording",children:d.jsx(Xf,{size:24})})]})]})})]})}const bh=["House Keeping Salary","Electricity Bill","Internet Bill","Painting","Room Maintenance","Other"];function tj(){const{expenses:t,addExpense:e,deleteExpense:n,loading:r,globalYear:s}=ro(),{showToast:i,confirm:o}=ll(),l=s,[c,u]=V.useState(new Date().toISOString().split("T")[0]),[h,p]=V.useState(bh[0]),[m,x]=V.useState(""),[N,A]=V.useState(""),[k,I]=V.useState(!1),v=async O=>{if(O.preventDefault(),!c||!h||!m||Number(m)<=0){i("Please fill in all required fields with valid values.","warning");return}I(!0);try{const _=new Date(c),y=An(_.getFullYear(),_.getMonth());await e({date:c,category:h,amount:Number(m),note:N.trim(),monthKey:y,createdAt:new Date().toISOString()}),x(""),A(""),p(bh[0]),i("Expense added successfully","success")}catch(_){console.error(_),i("Failed to add expense: "+_.message,"error")}finally{I(!1)}},E=async O=>{if(await o({title:"Delete Expense?",message:"Are you sure you want to delete this expense? This action cannot be undone.",type:"danger",confirmText:"Delete"}))try{await n(O),i("Expense deleted successfully","success")}catch(y){i("Failed to delete: "+y.message,"error")}};if(r)return d.jsx("div",{className:"p-12 text-center text-slate-400",children:"Loading expenses..."});const R=t.filter(O=>O.date?new Date(O.date).getFullYear()===l:!1),P=R.reduce((O,_)=>O+(Number(_.amount)||0),0);return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsx("h2",{className:"text-3xl font-extrabold text-slate-900",children:"Expenses"}),d.jsx("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:d.jsxs("span",{className:"font-semibold",children:["Year: ",l]})})]}),d.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-rose-600 rounded-3xl p-6 text-white shadow-lg shadow-rose-200",children:[d.jsxs("div",{className:"text-white/80 font-medium mb-1",children:["Total Expenses (",l,")"]}),d.jsxs("div",{className:"text-4xl font-extrabold tracking-tight",children:["",P.toLocaleString("en-IN")]})]}),d.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 p-6",children:[d.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[d.jsx(FO,{className:"text-blue-600",size:20})," New Expense"]}),d.jsxs("form",{onSubmit:v,className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-end",children:[d.jsxs("div",{className:"md:col-span-2",children:[d.jsx("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"Date"}),d.jsxs("div",{className:"relative",children:[d.jsx(SO,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),d.jsx("input",{type:"date",required:!0,value:c,onChange:O=>u(O.target.value),className:"w-full pl-9 pr-3 py-2.5 rounded-xl border border-slate-200 bg-slate-50 focus:ring-2 focus:ring-blue-500 outline-none font-medium text-slate-700"})]})]}),d.jsxs("div",{className:"md:col-span-3",children:[d.jsx("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"Category"}),d.jsxs("div",{className:"relative",children:[d.jsx($O,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),d.jsx("select",{required:!0,value:h,onChange:O=>p(O.target.value),className:"w-full pl-9 pr-3 py-2.5 rounded-xl border border-slate-200 bg-slate-50 focus:ring-2 focus:ring-blue-500 outline-none font-medium text-slate-700 appearance-none",children:bh.map(O=>d.jsx("option",{value:O,children:O},O))})]})]}),d.jsxs("div",{className:"md:col-span-3",children:[d.jsx("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"Note (Optional)"}),d.jsxs("div",{className:"relative",children:[d.jsx(FI,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),d.jsx("input",{type:"text",placeholder:"Details...",value:N,onChange:O=>A(O.target.value),className:"w-full pl-9 pr-3 py-2.5 rounded-xl border border-slate-200 bg-slate-50 focus:ring-2 focus:ring-blue-500 outline-none font-medium text-slate-700"})]})]}),d.jsxs("div",{className:"md:col-span-2",children:[d.jsx("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"Amount"}),d.jsxs("div",{className:"relative",children:[d.jsx(OO,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),d.jsx("input",{type:"number",required:!0,min:"0",step:"any",placeholder:"0.00",value:m,onChange:O=>x(O.target.value),className:"w-full pl-9 pr-3 py-2.5 rounded-xl border border-slate-200 bg-slate-50 focus:ring-2 focus:ring-blue-500 outline-none font-bold text-slate-900"})]})]}),d.jsx("div",{className:"md:col-span-2",children:d.jsx("button",{type:"submit",disabled:k,className:"w-full py-2.5 bg-slate-900 text-white rounded-xl font-bold hover:bg-black transition-colors disabled:opacity-50",children:k?"Adding...":"Add"})})]})]}),d.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden",children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-sm text-left",children:[d.jsx("thead",{className:"bg-slate-50 text-slate-500 font-semibold border-b border-slate-200",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-4 w-32",children:"Date"}),d.jsx("th",{className:"px-6 py-4 w-48",children:"Category"}),d.jsx("th",{className:"px-6 py-4",children:"Note"}),d.jsx("th",{className:"px-6 py-4 w-32 text-right",children:"Amount"}),d.jsx("th",{className:"px-6 py-4 w-16"})]})}),d.jsx("tbody",{className:"divide-y divide-slate-100",children:R.length===0?d.jsx("tr",{children:d.jsxs("td",{colspan:"5",className:"px-6 py-12 text-center text-slate-400 italic",children:["No expenses recorded for ",l,"."]})}):R.map(O=>d.jsxs("tr",{className:"hover:bg-slate-50 group",children:[d.jsx("td",{className:"px-6 py-4 font-medium text-slate-600 whitespace-nowrap",children:O.date}),d.jsx("td",{className:"px-6 py-4 font-medium text-slate-900",children:d.jsx("span",{className:"inline-block px-2 py-1 bg-slate-100 rounded-lg text-xs border border-slate-200",children:O.category})}),d.jsx("td",{className:"px-6 py-4 text-slate-500",children:O.note||d.jsx("span",{className:"text-slate-300",children:"-"})}),d.jsxs("td",{className:"px-6 py-4 text-right font-bold text-slate-900",children:["",Number(O.amount).toLocaleString("en-IN")]}),d.jsx("td",{className:"px-6 py-4 text-right",children:d.jsx("button",{onClick:()=>E(O.id),className:"p-2 text-slate-300 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors opacity-0 group-hover:opacity-100",title:"Delete Expense",children:d.jsx(zI,{size:16})})})]},O.id))})]})})})]})}const nj=[{roomNo:"01",roomId:"G01",tenant:"Remish",rent:5200,advance:15e3,join:"15-Oct-2024",rev:"15-Oct-2024",phone:"8526487895"},{roomNo:"02",roomId:"G02",tenant:"Anil (L)",rent:500,advance:65e4,join:"24-Aug-2022",rev:"24-Aug-2022",phone:"8073256471"},{roomNo:"04",roomId:"102",tenant:"Venkatesh(L)",rent:500,advance:45e4,join:"24-Nov-2021",rev:"24-Nov-2021",phone:"9513072188"},{roomNo:"05",roomId:"201",tenant:"Prem",rent:8800,advance:3e4,join:"1-Feb-2024",rev:"1-Feb-2024",phone:"8639384523"},{roomNo:"06",roomId:"202",tenant:"Aravind",rent:8800,advance:35e3,join:"1-Aug-2025",rev:"",phone:"8147161034"},{roomNo:"07",roomId:"203",tenant:"Panduranga",rent:8800,advance:28e3,join:"23-Nov-2024",rev:"23-Nov-2024",phone:"9742392131"},{roomNo:"08",roomId:"301",tenant:"Nirmal Raj",rent:8800,advance:3e4,join:"1-Nov-2024",rev:"1-Nov-2024",phone:"6382702408"},{roomNo:"09",roomId:"302",tenant:"Logesh",rent:8300,advance:25e3,join:"26-Feb-2023",rev:"26-Feb-2024",phone:"7010250108"},{roomNo:"10",roomId:"303",tenant:"Prasanth Patil",rent:8800,advance:25e3,join:"01-Jan-2023",rev:"1-Jan-2024",phone:"9880662547"},{roomNo:"11",roomId:"401",tenant:"Mastan",rent:8e3,advance:25e3,join:"31-Jul-2023",rev:"31-Jul-2024",phone:"9902217031"},{roomNo:"12",roomId:"402",tenant:"Sudha / Bharath",rent:8e3,advance:25e3,join:"31-Jul-2023",rev:"31-Jul-2024",phone:"9100770982"},{roomNo:"13",roomId:"403",tenant:"Siri/Vamsi",rent:8e3,advance:25e3,join:"31-Jul-2023",rev:"31-Jul-2024",phone:"6303596330"}],rj={"01":[67,125,191,316,534,584,723,967,1129,1389,1503,1813,1944,2180,2379,2550,2649,2768,2865,3174,3314],"02":[270,1005,1377,1892,2407,2959,3498,3797,4309,4803,5264,6150,7065,7302,7880,8594,9148,10088,10957,11449,11456],"04":[211,572,861,1228,1528,1793,2025,2263,2579,3030,3361,4278,4771,5476,6008,6461,6902,7382,7886,8313,8684],"05":[79,158,502,956,1360,1734,1900,2422,2953,3112,3673,4347,4885,5262,5649,5914,6174,6430,6569,6816,6986],"06":[213,242,640,1078,1306,1643,2095,2572,2842,3207,3710,4182,4404,4637,4811,4855,5113,5465,5678,5991,6299],"07":[609,1375,2635,3621,3621,4378,4624,4738,5068,5441,5865,6428,6781,7162,7411,8186,8983,9800,10339,10972,11814],"08":[0,0,137,578,1007,1007,1007,1007,1007,494,1223,1769,2216,2258,2403,2439,3039,3039,3039,3039,3039],"09":[137,359,500,700,847,1058,1240,1419,1586,1683,1858,2154,2464,2674,2888,3092,3141,3342,3446,3595,3708],10:[101,275,540,673,1227,1412,1527,1642,1807,1951,2278,2472,3084,4500,5511,6628,7066,8161,9391,10388,11723],11:[150,303,524,756,932,1087,1240,1451,1625,1802,1953,2181,2426,2719,2945,3189,3474,3734,3986,4184,4400],12:[88,169,345,471,728,1037,1260,1621,2047,2112,2500,2821,3097,3341,3503,3934,4245,4577,4915,5144,5331],13:[214,488,754,1152,1606,2048,2409,2888,3387,3791,4255,4676,4887,5154,5575,6516,6710,7293,7509,7757,8005]},l_=t=>{if(!t)return"";const e={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"},n=t.split("-");if(n.length!==3)return"";const r=n[0].padStart(2,"0"),s=e[n[1]],i=n[2];return s?`${i}-${s}-${r}`:""};function sj(){const[t,e]=V.useState(""),[n,r]=V.useState(!1),{confirm:s,showToast:i}=ll(),o=async()=>{if(await s({title:"Migrate Rooms?",message:"This will overwrite/create room data in 'rooms' collection. Continue?"})){r(!0),e("Starting migration...");try{const u=Yf(Qe),h=ws(Qe,"rooms");let p=0;Object.entries(Je).forEach(([x,N])=>{const A=Zn(Qe,"rooms",x);u.set(A,{...N,sortOrder:parseInt(x)}),p++}),await u.commit();const m=`Successfully migrated ${p} rooms to Firestore.`;e(m),i(m,"success")}catch(u){console.error(u);const h="Error: "+u.message;e(h),i(h,"error")}finally{r(!1)}}},l=async()=>{if(await s({title:"Seed Tenant Data?",message:`This will CREATE new tenant records in 'properties'.
Warning: This clears existing data and overwrites it. Continue?`,type:"danger",confirmText:"Yes, Overwrite"})){r(!0),e("Seeding tenants...");try{const u=Yf(Qe),h=ws(Qe,"properties");(await $m(h)).forEach(m=>{u.delete(m.ref)}),nj.forEach(m=>{const x=Zn(Qe,"properties",`tenant_room_${m.roomNo}`),N=l_(m.join),A=l_(m.rev),k={},I={},v=rj[m.roomNo]||[],E=["Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];let P=0,O=0;E.forEach(_=>{const y=`2024-${_}`,T=v[P];T!=null&&(k[y]=T,P>0&&T<O&&(I[y]=!0,console.log(`Reset detected for Room ${m.roomNo} at ${y}: ${O} -> ${T}`)),O=T),P++}),R.forEach(_=>{const y=`2025-${_}`,T=v[P];T!=null&&(k[y]=T,T<O&&(I[y]=!0,console.log(`Reset detected for Room ${m.roomNo} at ${y}: ${O} -> ${T}`)),O=T),P++}),u.set(x,{tenant:m.tenant,roomNo:m.roomNo,roomId:m.roomId,rent:String(m.rent),advance:String(m.advance),joinDate:N,lastRevision:A,status:"Occupied",phone:m.phone||"",email:"",waterRate:"0.25",waterReadings:k,waterMeterReset:I,paymentHistory:{},paymentTotals:{}})}),await u.commit(),e("Successfully seeded tenants.")}catch(u){console.error(u),e("Error seeding: "+u.message)}finally{r(!1)}}};return d.jsxs("div",{className:"p-8 bg-white rounded-3xl shadow-sm border border-slate-200",children:[d.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Data Migration Admin"}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"font-semibold mb-2",children:"Migrate Rooms"}),d.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Uploads the hardcoded IMMUTABLE_ROOMS_DATA to Firestore 'rooms' collection."}),d.jsx("button",{onClick:o,disabled:n,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:n?"Migrating...":"Start Migration"})]}),d.jsxs("div",{className:"mb-6 border-t pt-6",children:[d.jsx("h3",{className:"font-semibold mb-2",children:"Seed Tenant Data"}),d.jsxs("p",{className:"text-sm text-slate-500 mb-4",children:["Populates 'properties' collection with data from screenshot (Remish, Anil, etc.).",d.jsx("br",{}),d.jsx("span",{className:"text-amber-600 font-bold",children:"Warning:"})," Clears/Overwrites if ID 'tenant_room_XX' exists."]}),d.jsx("button",{onClick:l,disabled:n,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50",children:n?"Seeding...":"Seed Tenants"})]}),t&&d.jsx("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-lg text-sm font-mono whitespace-pre-wrap",children:t})]})}const ij="dhze5ifcf",oj="mi_unsigned_preset",aj=async t=>{var n;const e=new FormData;e.append("file",t),e.append("upload_preset",oj);try{const r=await fetch(`https://api.cloudinary.com/v1_1/${ij}/auto/upload`,{method:"POST",body:e});if(!r.ok){const i=await r.json();throw new Error(((n=i.error)==null?void 0:n.message)||"Cloudinary Upload Failed")}return(await r.json()).secure_url}catch(r){throw console.error("Cloudinary Service Error:",r),r}};function lj(){const{token:t}=xb(),[e,n]=V.useState("verifying"),[r,s]=V.useState(null),[i,o]=V.useState(null),[l,c]=V.useState({}),[u,h]=V.useState({});V.useEffect(()=>{const k=xx(Vn,I=>{s(I),I?x():n("login_required")});return()=>k()},[t]);const p=async()=>{try{await Dx(Vn,PI)}catch(k){console.error("Login failed",k),alert("Login failed. Please try again.")}},m=()=>{Cf(Vn),o(null),n("login_required")},x=async()=>{n("verifying");try{const k=aa(ws(Qe,"properties"),TI("uploadToken","==",t)),I=await $m(k);if(I.empty){n("invalid");return}const v=I.docs[0],E=v.data();o({id:v.id,...E}),h(E.documents||{}),n("valid")}catch(k){console.error("Link validation failed:",k),n("error")}},N=async(k,I)=>{if(!(!k||!i)){if(k.size>10*1024*1024){alert("File is too large. Max 10MB.");return}c(v=>({...v,[I]:!0}));try{const v=await aj(k),E={...u,[I]:v};await Fi(Zn(Qe,"properties",i.id),{documents:E,[`meta_${I}_uploadedBy`]:r.email,[`meta_${I}_uploadedAt`]:new Date().toISOString()}),h(E)}catch(v){console.error("Upload Error Details:",v),alert(`Upload failed: ${v.message}`)}finally{c(v=>({...v,[I]:!1}))}}};if(e==="verifying")return d.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 text-slate-400",children:[d.jsx(pu,{className:"animate-spin mb-2",size:32}),d.jsx("p",{children:"Verifying Access..."})]});if(e==="login_required")return d.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 p-6",children:d.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-slate-200 w-full max-w-md text-center",children:[d.jsx(Zf,{className:"mx-auto text-blue-600 mb-4",size:48}),d.jsx("h1",{className:"text-xl font-bold text-slate-900 mb-2",children:"Secure Upload Portal"}),d.jsx("p",{className:"text-slate-500 mb-8",children:"Please sign in with Google to verify your identity and access the document vault."}),d.jsxs("button",{onClick:p,className:"w-full py-3 bg-black text-white rounded-xl font-bold hover:bg-slate-800 transition flex items-center justify-center gap-2",children:[d.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[d.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),d.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),d.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),d.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign in with Google"]}),d.jsx("p",{className:"text-xs text-slate-400 mt-4",children:"Munirathnam Illam Secure Cloud"})]})});if(e==="invalid")return d.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 p-6 text-center",children:d.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-slate-200 w-full max-w-md",children:[d.jsx(Si,{className:"mx-auto text-rose-500 mb-4",size:48}),d.jsx("h1",{className:"text-xl font-bold text-slate-900 mb-2",children:"Invalid Link"}),d.jsx("p",{className:"text-slate-500",children:"This link does not exist. Please request a new one."})]})});if(e==="expired")return d.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 p-6 text-center",children:d.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-slate-200 w-full max-w-md",children:[d.jsx("div",{className:"bg-amber-100 p-4 rounded-full inline-block mb-4 text-amber-600",children:d.jsx(Zf,{size:32})}),d.jsx("h1",{className:"text-xl font-bold text-slate-900 mb-2",children:"Link Expired"}),d.jsx("p",{className:"text-slate-500 mb-4",children:"This secure upload link has expired (valid for 24h only)."}),d.jsx("p",{className:"text-sm font-bold text-slate-400",children:"Please request a new link from the Admin."})]})});if(e==="error")return d.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 p-6 text-center",children:d.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-slate-200 w-full max-w-md",children:[d.jsx(Si,{className:"mx-auto text-rose-500 mb-4",size:48}),d.jsx("h1",{className:"text-xl font-bold text-slate-900 mb-2",children:"An Error Occurred"}),d.jsx("p",{className:"text-slate-500",children:"Please try again later or contact support."})]})});const A=({title:k,type:I,description:v})=>{const E=!!u[I],R=l[I];return d.jsxs("div",{className:`relative overflow-hidden rounded-2xl border transition-all ${E?"bg-emerald-50 border-emerald-200":"bg-white border-slate-200 shadow-sm"}`,children:[d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex items-start justify-between mb-4",children:[d.jsx("div",{className:`p-3 rounded-xl ${E?"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-600"}`,children:E?d.jsx(fu,{size:24,strokeWidth:3}):d.jsx(FI,{size:24})}),E&&d.jsx("span",{className:"text-xs font-bold text-emerald-600 bg-white px-2 py-1 rounded-full shadow-sm",children:"UPLOADED"})]}),d.jsx("h3",{className:"font-bold text-slate-900 mb-1",children:k}),d.jsx("p",{className:"text-sm text-slate-500 mb-6",children:v}),d.jsxs("label",{className:`block w-full text-center py-3 rounded-xl font-bold cursor-pointer transition-colors ${E?"bg-white text-emerald-600 border-2 border-emerald-100 hover:border-emerald-200":"bg-black text-white hover:bg-slate-800"}`,children:[R?"Uploading...":E?"Replace File":"Select File",d.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",disabled:R,onChange:P=>N(P.target.files[0],I)})]})]}),R&&d.jsx("div",{className:"absolute inset-0 bg-white/80 flex items-center justify-center",children:d.jsx(pu,{className:"animate-spin text-black",size:32})})]})};return d.jsx("div",{className:"min-h-screen bg-slate-50 p-6 md:p-12",children:d.jsxs("div",{className:"max-w-xl mx-auto",children:[d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsx("div",{className:"inline-block px-4 py-1.5 bg-blue-100 text-blue-700 rounded-full text-xs font-bold tracking-wide uppercase",children:"Secure Upload Portal"}),d.jsxs("button",{onClick:m,className:"text-slate-400 hover:text-slate-600 flex items-center gap-1 text-sm font-bold",children:[d.jsx(UI,{size:16})," Sign Out"]})]}),d.jsxs("div",{className:"text-center mb-10",children:[d.jsxs("h1",{className:"text-3xl font-extrabold text-slate-900 mb-2",children:["Hello, ",i.tenant,"!"]}),d.jsxs("p",{className:"text-slate-500",children:["Room ",i.roomNo," (",i.roomId,")"]}),d.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["Logged in as ",r.email]})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[d.jsx("label",{className:"block text-sm font-bold text-slate-900 mb-2",children:"Family Member Contact Numbers"}),d.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Please provide contact details for your family members (Name & Phone)."}),d.jsx("textarea",{className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm font-medium focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition",rows:3,placeholder:"e.g. Spouse: 9876543210, Father: 9123456780",defaultValue:i.familyMembers||"",onBlur:k=>{Fi(Zn(Qe,"properties",i.id),{familyMembers:k.target.value})}})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx(A,{title:"Tenant Photo",type:"photo",description:"Recent passport size photo."}),d.jsx(A,{title:"Aadhar Card",type:"aadhar",description:"Front and back photo or PDF."}),d.jsx(A,{title:"ID Proof",type:"pan",description:"Any valid government ID (PAN/Voter)."}),d.jsx(A,{title:"Rental Agreement",type:"agreement",description:"Signed copy of the agreement."})]})]}),d.jsx("div",{className:"mt-12 text-center text-xs text-slate-400",children:d.jsx("p",{children:"Files are securely stored in Munirathnam Illam Cloud."})})]})})}function cj(){const{unlockWithBiometrics:t}=al(),[e,n]=V.useState(null),[r,s]=V.useState(!1);V.useEffect(()=>{i()},[]);async function i(){if(ln.isNativePlatform())try{const l=await DI.isAvailable();s(l.isAvailable)}catch(l){console.error("Biometric Check Error:",l),n("Biometrics not available")}}const o=async()=>{n(null);try{await t()}catch{n("Authentication failed.")}};return ln.isNativePlatform()?d.jsxs("div",{className:"fixed inset-0 z-[100] flex flex-col items-center justify-center p-8 bg-gradient-to-br from-emerald-900 via-emerald-800 to-slate-900 text-white",children:[d.jsxs("div",{className:"flex flex-col items-center space-y-8 animate-in fade-in zoom-in duration-300",children:[d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 bg-emerald-400 rounded-full blur-3xl opacity-20"}),d.jsx("div",{className:"relative p-6 bg-white/10 backdrop-blur-xl rounded-full ring-1 ring-white/20 shadow-2xl",children:d.jsx(VO,{size:48,className:"text-emerald-100"})})]}),d.jsxs("div",{className:"text-center space-y-2",children:[d.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"App Locked"}),d.jsx("p",{className:"text-emerald-100/70 text-sm",children:"Munirathnam Illam Rental Manager"})]}),d.jsxs("div",{className:"pt-8 flex flex-col items-center gap-4",children:[d.jsxs("button",{onClick:o,className:"flex items-center gap-3 px-8 py-4 bg-emerald-500 hover:bg-emerald-400 text-emerald-950 rounded-2xl font-bold transition-all active:scale-95 shadow-lg shadow-emerald-900/50",children:[d.jsx(PO,{size:24}),d.jsx("span",{children:"Unlock with Face ID"})]}),d.jsx("button",{onClick:()=>window.location.reload(),className:"text-sm text-emerald-200/50 font-medium hover:text-white transition",children:"Reload App"})]}),e&&d.jsx("p",{className:"text-rose-300 text-sm font-medium mt-4 animate-pulse",children:e})]}),d.jsx("div",{className:"absolute bottom-8 text-center",children:d.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-white/30 uppercase tracking-widest font-bold",children:[d.jsx(zO,{size:12}),d.jsx("span",{children:"Secured by Biometrics"})]})})]}):d.jsx("div",{className:"fixed inset-0 z-[100] bg-stone-900 flex items-center justify-center",children:d.jsxs("div",{className:"bg-white p-8 rounded-2xl text-center space-y-4",children:[d.jsx("p",{children:"Biometrics not supported on Web."}),d.jsx("button",{onClick:o,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg",children:"Mock Unlock"})]})})}function uj(){const{loginWithGoogle:t,currentUser:e}=al(),[n,r]=V.useState(!1);if(e)return d.jsx(A1,{to:"/"});const s=async()=>{try{r(!0),await t()}catch(i){console.error("Login failed:",i),alert("Login failed. Please try again."),r(!1)}};return d.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row bg-white",children:[d.jsxs("div",{className:"w-full md:w-1/2 bg-gradient-to-br from-emerald-50 via-emerald-50 to-emerald-100 p-8 md:p-12 lg:p-20 flex flex-col justify-between relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-emerald-100/50 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),d.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-emerald-200/20 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"}),d.jsxs("div",{className:"relative z-10",children:[d.jsxs("div",{className:"flex items-center gap-3 text-emerald-800 mb-12",children:[d.jsx("div",{className:"p-2 bg-white/60 rounded-xl backdrop-blur-sm shadow-sm ring-1 ring-black/5",children:d.jsx(Jf,{size:24})}),d.jsx("span",{className:"font-bold tracking-tight",children:"Munirathnam Illam"})]}),d.jsxs("div",{className:"space-y-6 max-w-lg",children:[d.jsx("h1",{className:"text-4xl md:text-5xl font-black text-slate-900 tracking-tight leading-[1.1]",children:"Property Management System"}),d.jsx("p",{className:"text-lg text-slate-600 font-medium leading-relaxed",children:"Manage tenants, rent, maintenance, and reports from one unified dashboard."})]})]}),d.jsxs("div",{className:"relative z-10 mt-12 text-sm font-medium text-emerald-800/60",children:[" ",new Date().getFullYear()," Munirathnam Illam"]})]}),d.jsxs("div",{className:"w-full md:w-1/2 p-4 flex items-center justify-center bg-white relative",children:[d.jsx("div",{className:"absolute top-0 w-full h-[env(safe-area-inset-top)] bg-transparent md:hidden"}),d.jsxs("div",{className:"w-full max-w-md space-y-8 p-8",children:[d.jsxs("div",{className:"text-center space-y-4",children:[d.jsx("div",{className:"inline-flex p-4 bg-stone-50 rounded-2xl mb-4 ring-1 ring-stone-100 shadow-sm",children:d.jsx(Zf,{className:"w-10 h-10 text-emerald-600"})}),d.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Welcome Back"}),d.jsx("p",{className:"text-slate-500",children:"Sign in to manage your property"})]}),d.jsxs("div",{className:"space-y-4 pt-4",children:[d.jsx("button",{onClick:s,disabled:n,className:"w-full flex items-center justify-center gap-3 px-6 py-4 bg-white border-2 border-stone-200 rounded-2xl text-slate-700 font-bold hover:bg-stone-50 hover:border-stone-300 transition-all active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed group shadow-sm",children:n?d.jsx("span",{className:"w-5 h-5 border-2 border-slate-300 border-t-slate-600 rounded-full animate-spin"}):d.jsxs(d.Fragment,{children:[d.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[d.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),d.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),d.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),d.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),d.jsx("span",{children:"Continue with Google"})]})}),d.jsx("p",{className:"text-center text-xs text-slate-400 font-medium pt-4",children:"Your data is securely encrypted"})]})]})]})]})}function qs({children:t}){const{currentUser:e,loading:n}=al();return n?d.jsx("div",{children:"Loading..."}):e?t:d.jsx(A1,{to:"/login"})}function dj(){const{isAppLocked:t,unlockApp:e,currentUser:n}=al();return n&&t?d.jsx(cj,{}):null}function hj(){return d.jsx(fO,{children:d.jsx(BO,{children:d.jsxs(EO,{children:[d.jsx(dj,{}),d.jsx(Wb,{children:d.jsxs(Vb,{children:[d.jsx(On,{path:"/login",element:d.jsx(uj,{})}),d.jsx(On,{path:"/upload/:token",element:d.jsx(lj,{})}),d.jsx(On,{path:"/",element:d.jsx(qs,{children:d.jsx(Hs,{children:d.jsx(WO,{})})})}),d.jsx(On,{path:"/rooms",element:d.jsx(qs,{children:d.jsx(Hs,{children:d.jsx(KO,{})})})}),d.jsx(On,{path:"/rent",element:d.jsx(qs,{children:d.jsx(Hs,{children:d.jsx(QO,{})})})}),d.jsx(On,{path:"/water",element:d.jsx(qs,{children:d.jsx(Hs,{children:d.jsx(ej,{})})})}),d.jsx(On,{path:"/expenses",element:d.jsx(qs,{children:d.jsx(Hs,{children:d.jsx(tj,{})})})}),d.jsx(On,{path:"/admin/migrate",element:d.jsx(qs,{children:d.jsx(Hs,{children:d.jsx(sj,{})})})})]})})]})})})}Nh.createRoot(document.getElementById("root")).render(d.jsx(ui.StrictMode,{children:d.jsx(hj,{})}));export{mk as A,bj as B,Mj as C,Dx as D,Ms as E,vr as F,_r as G,Fj as H,Vj as I,Vk as J,Yn as K,Cj as L,x0 as M,aC as N,cc as O,Qv as P,bx as Q,Oj as R,Tx as S,wr as T,Jv as U,Xv as V,Bm as W,vj as a,yj as b,_j as c,Dj as d,Uj as e,Tj as f,lA as g,En as h,Ej as i,Pj as j,gj as k,Lj as l,xj as m,Kv as n,Aj as o,fj as p,mj as q,WR as r,Sj as s,wj as t,Ij as u,jj as v,pj as w,Rj as x,kj as y,Nj as z};
