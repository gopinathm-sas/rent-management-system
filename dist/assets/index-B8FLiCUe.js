function aT(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function lT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pv={exports:{}},Wu={},mv={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _a=Symbol.for("react.element"),uT=Symbol.for("react.portal"),cT=Symbol.for("react.fragment"),hT=Symbol.for("react.strict_mode"),dT=Symbol.for("react.profiler"),fT=Symbol.for("react.provider"),pT=Symbol.for("react.context"),mT=Symbol.for("react.forward_ref"),gT=Symbol.for("react.suspense"),yT=Symbol.for("react.memo"),vT=Symbol.for("react.lazy"),ig=Symbol.iterator;function _T(t){return t===null||typeof t!="object"?null:(t=ig&&t[ig]||t["@@iterator"],typeof t=="function"?t:null)}var gv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yv=Object.assign,vv={};function Ai(t,e,n){this.props=t,this.context=e,this.refs=vv,this.updater=n||gv}Ai.prototype.isReactComponent={};Ai.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ai.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _v(){}_v.prototype=Ai.prototype;function gf(t,e,n){this.props=t,this.context=e,this.refs=vv,this.updater=n||gv}var yf=gf.prototype=new _v;yf.constructor=gf;yv(yf,Ai.prototype);yf.isPureReactComponent=!0;var og=Array.isArray,wv=Object.prototype.hasOwnProperty,vf={current:null},xv={key:!0,ref:!0,__self:!0,__source:!0};function Ev(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)wv.call(e,r)&&!xv.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:_a,type:t,key:i,ref:o,props:s,_owner:vf.current}}function wT(t,e){return{$$typeof:_a,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function _f(t){return typeof t=="object"&&t!==null&&t.$$typeof===_a}function xT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ag=/\/+/g;function Xc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?xT(""+t.key):e.toString(36)}function Nl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case _a:case uT:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Xc(o,0):r,og(s)?(n="",t!=null&&(n=t.replace(ag,"$&/")+"/"),Nl(s,e,n,"",function(c){return c})):s!=null&&(_f(s)&&(s=wT(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(ag,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",og(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+Xc(i,l);o+=Nl(i,e,n,u,s)}else if(u=_T(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+Xc(i,l++),o+=Nl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function tl(t,e,n){if(t==null)return t;var r=[],s=0;return Nl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function ET(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mt={current:null},Rl={transition:null},TT={ReactCurrentDispatcher:mt,ReactCurrentBatchConfig:Rl,ReactCurrentOwner:vf};function Tv(){throw Error("act(...) is not supported in production builds of React.")}ne.Children={map:tl,forEach:function(t,e,n){tl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return tl(t,function(){e++}),e},toArray:function(t){return tl(t,function(e){return e})||[]},only:function(t){if(!_f(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ne.Component=Ai;ne.Fragment=cT;ne.Profiler=dT;ne.PureComponent=gf;ne.StrictMode=hT;ne.Suspense=gT;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TT;ne.act=Tv;ne.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=yv({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=vf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)wv.call(e,u)&&!xv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:_a,type:t.type,key:s,ref:i,props:r,_owner:o}};ne.createContext=function(t){return t={$$typeof:pT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:fT,_context:t},t.Consumer=t};ne.createElement=Ev;ne.createFactory=function(t){var e=Ev.bind(null,t);return e.type=t,e};ne.createRef=function(){return{current:null}};ne.forwardRef=function(t){return{$$typeof:mT,render:t}};ne.isValidElement=_f;ne.lazy=function(t){return{$$typeof:vT,_payload:{_status:-1,_result:t},_init:ET}};ne.memo=function(t,e){return{$$typeof:yT,type:t,compare:e===void 0?null:e}};ne.startTransition=function(t){var e=Rl.transition;Rl.transition={};try{t()}finally{Rl.transition=e}};ne.unstable_act=Tv;ne.useCallback=function(t,e){return mt.current.useCallback(t,e)};ne.useContext=function(t){return mt.current.useContext(t)};ne.useDebugValue=function(){};ne.useDeferredValue=function(t){return mt.current.useDeferredValue(t)};ne.useEffect=function(t,e){return mt.current.useEffect(t,e)};ne.useId=function(){return mt.current.useId()};ne.useImperativeHandle=function(t,e,n){return mt.current.useImperativeHandle(t,e,n)};ne.useInsertionEffect=function(t,e){return mt.current.useInsertionEffect(t,e)};ne.useLayoutEffect=function(t,e){return mt.current.useLayoutEffect(t,e)};ne.useMemo=function(t,e){return mt.current.useMemo(t,e)};ne.useReducer=function(t,e,n){return mt.current.useReducer(t,e,n)};ne.useRef=function(t){return mt.current.useRef(t)};ne.useState=function(t){return mt.current.useState(t)};ne.useSyncExternalStore=function(t,e,n){return mt.current.useSyncExternalStore(t,e,n)};ne.useTransition=function(){return mt.current.useTransition()};ne.version="18.3.1";mv.exports=ne;var L=mv.exports;const Xs=lT(L),IT=aT({__proto__:null,default:Xs},[L]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ST=L,NT=Symbol.for("react.element"),RT=Symbol.for("react.fragment"),bT=Object.prototype.hasOwnProperty,AT=ST.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kT={key:!0,ref:!0,__self:!0,__source:!0};function Iv(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)bT.call(e,r)&&!kT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:NT,type:t,key:i,ref:o,props:s,_owner:AT.current}}Wu.Fragment=RT;Wu.jsx=Iv;Wu.jsxs=Iv;pv.exports=Wu;var h=pv.exports,Hh={},Sv={exports:{}},Vt={},Nv={exports:{}},Rv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,q){var Q=z.length;z.push(q);e:for(;0<Q;){var ae=Q-1>>>1,fe=z[ae];if(0<s(fe,q))z[ae]=q,z[Q]=fe,Q=ae;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var q=z[0],Q=z.pop();if(Q!==q){z[0]=Q;e:for(var ae=0,fe=z.length,yt=fe>>>1;ae<yt;){var $e=2*(ae+1)-1,an=z[$e],Rt=$e+1,qt=z[Rt];if(0>s(an,Q))Rt<fe&&0>s(qt,an)?(z[ae]=qt,z[Rt]=Q,ae=Rt):(z[ae]=an,z[$e]=Q,ae=$e);else if(Rt<fe&&0>s(qt,Q))z[ae]=qt,z[Rt]=Q,ae=Rt;else break e}}return q}function s(z,q){var Q=z.sortIndex-q.sortIndex;return Q!==0?Q:z.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],d=1,p=null,g=3,T=!1,b=!1,k=!1,N=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(z){for(var q=n(c);q!==null;){if(q.callback===null)r(c);else if(q.startTime<=z)r(c),q.sortIndex=q.expirationTime,e(u,q);else break;q=n(c)}}function C(z){if(k=!1,x(z),!b)if(n(u)!==null)b=!0,K(V);else{var q=n(c);q!==null&&oe(C,q.startTime-z)}}function V(z,q){b=!1,k&&(k=!1,_(v),v=-1),T=!0;var Q=g;try{for(x(q),p=n(u);p!==null&&(!(p.expirationTime>q)||z&&!A());){var ae=p.callback;if(typeof ae=="function"){p.callback=null,g=p.priorityLevel;var fe=ae(p.expirationTime<=q);q=t.unstable_now(),typeof fe=="function"?p.callback=fe:p===n(u)&&r(u),x(q)}else r(u);p=n(u)}if(p!==null)var yt=!0;else{var $e=n(c);$e!==null&&oe(C,$e.startTime-q),yt=!1}return yt}finally{p=null,g=Q,T=!1}}var P=!1,E=null,v=-1,I=5,R=-1;function A(){return!(t.unstable_now()-R<I)}function D(){if(E!==null){var z=t.unstable_now();R=z;var q=!0;try{q=E(!0,z)}finally{q?S():(P=!1,E=null)}}else P=!1}var S;if(typeof y=="function")S=function(){y(D)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,Ne=we.port2;we.port1.onmessage=D,S=function(){Ne.postMessage(null)}}else S=function(){N(D,0)};function K(z){E=z,P||(P=!0,S())}function oe(z,q){v=N(function(){z(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){b||T||(b=!0,K(V))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(z){switch(g){case 1:case 2:case 3:var q=3;break;default:q=g}var Q=g;g=q;try{return z()}finally{g=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Q=g;g=z;try{return q()}finally{g=Q}},t.unstable_scheduleCallback=function(z,q,Q){var ae=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ae+Q:ae):Q=ae,z){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=Q+fe,z={id:d++,callback:q,priorityLevel:z,startTime:Q,expirationTime:fe,sortIndex:-1},Q>ae?(z.sortIndex=Q,e(c,z),n(u)===null&&z===n(c)&&(k?(_(v),v=-1):k=!0,oe(C,Q-ae))):(z.sortIndex=fe,e(u,z),b||T||(b=!0,K(V))),z},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(z){var q=g;return function(){var Q=g;g=q;try{return z.apply(this,arguments)}finally{g=Q}}}})(Rv);Nv.exports=Rv;var CT=Nv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PT=L,jt=CT;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bv=new Set,$o={};function Ts(t,e){fi(t,e),fi(t+"Capture",e)}function fi(t,e){for($o[t]=e,t=0;t<e.length;t++)bv.add(e[t])}var On=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qh=Object.prototype.hasOwnProperty,DT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lg={},ug={};function jT(t){return qh.call(ug,t)?!0:qh.call(lg,t)?!1:DT.test(t)?ug[t]=!0:(lg[t]=!0,!1)}function VT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function OT(t,e,n,r){if(e===null||typeof e>"u"||VT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){et[t]=new gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];et[e]=new gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){et[t]=new gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){et[t]=new gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){et[t]=new gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){et[t]=new gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){et[t]=new gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){et[t]=new gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){et[t]=new gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var wf=/[\-:]([a-z])/g;function xf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(wf,xf);et[e]=new gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(wf,xf);et[e]=new gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(wf,xf);et[e]=new gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){et[t]=new gt(t,1,!1,t.toLowerCase(),null,!1,!1)});et.xlinkHref=new gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){et[t]=new gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ef(t,e,n,r){var s=et.hasOwnProperty(e)?et[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(OT(e,n,s,r)&&(n=null),r||s===null?jT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var qn=PT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nl=Symbol.for("react.element"),Fs=Symbol.for("react.portal"),Us=Symbol.for("react.fragment"),Tf=Symbol.for("react.strict_mode"),Gh=Symbol.for("react.profiler"),Av=Symbol.for("react.provider"),kv=Symbol.for("react.context"),If=Symbol.for("react.forward_ref"),Kh=Symbol.for("react.suspense"),Qh=Symbol.for("react.suspense_list"),Sf=Symbol.for("react.memo"),ir=Symbol.for("react.lazy"),Cv=Symbol.for("react.offscreen"),cg=Symbol.iterator;function oo(t){return t===null||typeof t!="object"?null:(t=cg&&t[cg]||t["@@iterator"],typeof t=="function"?t:null)}var Ie=Object.assign,Zc;function go(t){if(Zc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Zc=e&&e[1]||""}return`
`+Zc+t}var eh=!1;function th(t,e){if(!t||eh)return"";eh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{eh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?go(t):""}function MT(t){switch(t.tag){case 5:return go(t.type);case 16:return go("Lazy");case 13:return go("Suspense");case 19:return go("SuspenseList");case 0:case 2:case 15:return t=th(t.type,!1),t;case 11:return t=th(t.type.render,!1),t;case 1:return t=th(t.type,!0),t;default:return""}}function Yh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Us:return"Fragment";case Fs:return"Portal";case Gh:return"Profiler";case Tf:return"StrictMode";case Kh:return"Suspense";case Qh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case kv:return(t.displayName||"Context")+".Consumer";case Av:return(t._context.displayName||"Context")+".Provider";case If:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Sf:return e=t.displayName||null,e!==null?e:Yh(t.type)||"Memo";case ir:e=t._payload,t=t._init;try{return Yh(t(e))}catch{}}return null}function LT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yh(e);case 8:return e===Tf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Cr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Pv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function FT(t){var e=Pv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function rl(t){t._valueTracker||(t._valueTracker=FT(t))}function Dv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Pv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Kl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Jh(t,e){var n=e.checked;return Ie({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function hg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Cr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function jv(t,e){e=e.checked,e!=null&&Ef(t,"checked",e,!1)}function Xh(t,e){jv(t,e);var n=Cr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Zh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Zh(t,e.type,Cr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function dg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Zh(t,e,n){(e!=="number"||Kl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var yo=Array.isArray;function Zs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Cr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ed(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ie({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function fg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(yo(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Cr(n)}}function Vv(t,e){var n=Cr(e.value),r=Cr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function pg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ov(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function td(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ov(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var sl,Mv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(sl=sl||document.createElement("div"),sl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=sl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Bo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var To={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},UT=["Webkit","ms","Moz","O"];Object.keys(To).forEach(function(t){UT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),To[e]=To[t]})});function Lv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||To.hasOwnProperty(t)&&To[t]?(""+e).trim():e+"px"}function Fv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Lv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var zT=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nd(t,e){if(e){if(zT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function rd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sd=null;function Nf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var id=null,ei=null,ti=null;function mg(t){if(t=Ea(t)){if(typeof id!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Qu(e),id(t.stateNode,t.type,e))}}function Uv(t){ei?ti?ti.push(t):ti=[t]:ei=t}function zv(){if(ei){var t=ei,e=ti;if(ti=ei=null,mg(t),e)for(t=0;t<e.length;t++)mg(e[t])}}function $v(t,e){return t(e)}function Bv(){}var nh=!1;function Wv(t,e,n){if(nh)return t(e,n);nh=!0;try{return $v(t,e,n)}finally{nh=!1,(ei!==null||ti!==null)&&(Bv(),zv())}}function Wo(t,e){var n=t.stateNode;if(n===null)return null;var r=Qu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var od=!1;if(On)try{var ao={};Object.defineProperty(ao,"passive",{get:function(){od=!0}}),window.addEventListener("test",ao,ao),window.removeEventListener("test",ao,ao)}catch{od=!1}function $T(t,e,n,r,s,i,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Io=!1,Ql=null,Yl=!1,ad=null,BT={onError:function(t){Io=!0,Ql=t}};function WT(t,e,n,r,s,i,o,l,u){Io=!1,Ql=null,$T.apply(BT,arguments)}function HT(t,e,n,r,s,i,o,l,u){if(WT.apply(this,arguments),Io){if(Io){var c=Ql;Io=!1,Ql=null}else throw Error(U(198));Yl||(Yl=!0,ad=c)}}function Is(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Hv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function gg(t){if(Is(t)!==t)throw Error(U(188))}function qT(t){var e=t.alternate;if(!e){if(e=Is(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return gg(s),t;if(i===r)return gg(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function qv(t){return t=qT(t),t!==null?Gv(t):null}function Gv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Gv(t);if(e!==null)return e;t=t.sibling}return null}var Kv=jt.unstable_scheduleCallback,yg=jt.unstable_cancelCallback,GT=jt.unstable_shouldYield,KT=jt.unstable_requestPaint,ke=jt.unstable_now,QT=jt.unstable_getCurrentPriorityLevel,Rf=jt.unstable_ImmediatePriority,Qv=jt.unstable_UserBlockingPriority,Jl=jt.unstable_NormalPriority,YT=jt.unstable_LowPriority,Yv=jt.unstable_IdlePriority,Hu=null,pn=null;function JT(t){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(Hu,t,void 0,(t.current.flags&128)===128)}catch{}}var en=Math.clz32?Math.clz32:eI,XT=Math.log,ZT=Math.LN2;function eI(t){return t>>>=0,t===0?32:31-(XT(t)/ZT|0)|0}var il=64,ol=4194304;function vo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Xl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=vo(l):(i&=o,i!==0&&(r=vo(i)))}else o=n&~s,o!==0?r=vo(o):i!==0&&(r=vo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-en(e),s=1<<n,r|=t[n],e&=~s;return r}function tI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-en(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=tI(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function ld(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Jv(){var t=il;return il<<=1,!(il&4194240)&&(il=64),t}function rh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function wa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-en(e),t[e]=n}function rI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-en(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function bf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-en(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var he=0;function Xv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Zv,Af,e_,t_,n_,ud=!1,al=[],gr=null,yr=null,vr=null,Ho=new Map,qo=new Map,ar=[],sI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vg(t,e){switch(t){case"focusin":case"focusout":gr=null;break;case"dragenter":case"dragleave":yr=null;break;case"mouseover":case"mouseout":vr=null;break;case"pointerover":case"pointerout":Ho.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qo.delete(e.pointerId)}}function lo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ea(e),e!==null&&Af(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function iI(t,e,n,r,s){switch(e){case"focusin":return gr=lo(gr,t,e,n,r,s),!0;case"dragenter":return yr=lo(yr,t,e,n,r,s),!0;case"mouseover":return vr=lo(vr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ho.set(i,lo(Ho.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,qo.set(i,lo(qo.get(i)||null,t,e,n,r,s)),!0}return!1}function r_(t){var e=ns(t.target);if(e!==null){var n=Is(e);if(n!==null){if(e=n.tag,e===13){if(e=Hv(n),e!==null){t.blockedOn=e,n_(t.priority,function(){e_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function bl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=cd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);sd=r,n.target.dispatchEvent(r),sd=null}else return e=Ea(n),e!==null&&Af(e),t.blockedOn=n,!1;e.shift()}return!0}function _g(t,e,n){bl(t)&&n.delete(e)}function oI(){ud=!1,gr!==null&&bl(gr)&&(gr=null),yr!==null&&bl(yr)&&(yr=null),vr!==null&&bl(vr)&&(vr=null),Ho.forEach(_g),qo.forEach(_g)}function uo(t,e){t.blockedOn===e&&(t.blockedOn=null,ud||(ud=!0,jt.unstable_scheduleCallback(jt.unstable_NormalPriority,oI)))}function Go(t){function e(s){return uo(s,t)}if(0<al.length){uo(al[0],t);for(var n=1;n<al.length;n++){var r=al[n];r.blockedOn===t&&(r.blockedOn=null)}}for(gr!==null&&uo(gr,t),yr!==null&&uo(yr,t),vr!==null&&uo(vr,t),Ho.forEach(e),qo.forEach(e),n=0;n<ar.length;n++)r=ar[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ar.length&&(n=ar[0],n.blockedOn===null);)r_(n),n.blockedOn===null&&ar.shift()}var ni=qn.ReactCurrentBatchConfig,Zl=!0;function aI(t,e,n,r){var s=he,i=ni.transition;ni.transition=null;try{he=1,kf(t,e,n,r)}finally{he=s,ni.transition=i}}function lI(t,e,n,r){var s=he,i=ni.transition;ni.transition=null;try{he=4,kf(t,e,n,r)}finally{he=s,ni.transition=i}}function kf(t,e,n,r){if(Zl){var s=cd(t,e,n,r);if(s===null)fh(t,e,r,eu,n),vg(t,r);else if(iI(s,t,e,n,r))r.stopPropagation();else if(vg(t,r),e&4&&-1<sI.indexOf(t)){for(;s!==null;){var i=Ea(s);if(i!==null&&Zv(i),i=cd(t,e,n,r),i===null&&fh(t,e,r,eu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else fh(t,e,r,null,n)}}var eu=null;function cd(t,e,n,r){if(eu=null,t=Nf(r),t=ns(t),t!==null)if(e=Is(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Hv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return eu=t,null}function s_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(QT()){case Rf:return 1;case Qv:return 4;case Jl:case YT:return 16;case Yv:return 536870912;default:return 16}default:return 16}}var dr=null,Cf=null,Al=null;function i_(){if(Al)return Al;var t,e=Cf,n=e.length,r,s="value"in dr?dr.value:dr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Al=s.slice(t,1<r?1-r:void 0)}function kl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ll(){return!0}function wg(){return!1}function Ot(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ll:wg,this.isPropagationStopped=wg,this}return Ie(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ll)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ll)},persist:function(){},isPersistent:ll}),e}var ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pf=Ot(ki),xa=Ie({},ki,{view:0,detail:0}),uI=Ot(xa),sh,ih,co,qu=Ie({},xa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Df,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==co&&(co&&t.type==="mousemove"?(sh=t.screenX-co.screenX,ih=t.screenY-co.screenY):ih=sh=0,co=t),sh)},movementY:function(t){return"movementY"in t?t.movementY:ih}}),xg=Ot(qu),cI=Ie({},qu,{dataTransfer:0}),hI=Ot(cI),dI=Ie({},xa,{relatedTarget:0}),oh=Ot(dI),fI=Ie({},ki,{animationName:0,elapsedTime:0,pseudoElement:0}),pI=Ot(fI),mI=Ie({},ki,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gI=Ot(mI),yI=Ie({},ki,{data:0}),Eg=Ot(yI),vI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_I={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=wI[t])?!!e[t]:!1}function Df(){return xI}var EI=Ie({},xa,{key:function(t){if(t.key){var e=vI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=kl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_I[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Df,charCode:function(t){return t.type==="keypress"?kl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?kl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),TI=Ot(EI),II=Ie({},qu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tg=Ot(II),SI=Ie({},xa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Df}),NI=Ot(SI),RI=Ie({},ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),bI=Ot(RI),AI=Ie({},qu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),kI=Ot(AI),CI=[9,13,27,32],jf=On&&"CompositionEvent"in window,So=null;On&&"documentMode"in document&&(So=document.documentMode);var PI=On&&"TextEvent"in window&&!So,o_=On&&(!jf||So&&8<So&&11>=So),Ig=" ",Sg=!1;function a_(t,e){switch(t){case"keyup":return CI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function l_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zs=!1;function DI(t,e){switch(t){case"compositionend":return l_(e);case"keypress":return e.which!==32?null:(Sg=!0,Ig);case"textInput":return t=e.data,t===Ig&&Sg?null:t;default:return null}}function jI(t,e){if(zs)return t==="compositionend"||!jf&&a_(t,e)?(t=i_(),Al=Cf=dr=null,zs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return o_&&e.locale!=="ko"?null:e.data;default:return null}}var VI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ng(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!VI[t.type]:e==="textarea"}function u_(t,e,n,r){Uv(r),e=tu(e,"onChange"),0<e.length&&(n=new Pf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var No=null,Ko=null;function OI(t){w_(t,0)}function Gu(t){var e=Ws(t);if(Dv(e))return t}function MI(t,e){if(t==="change")return e}var c_=!1;if(On){var ah;if(On){var lh="oninput"in document;if(!lh){var Rg=document.createElement("div");Rg.setAttribute("oninput","return;"),lh=typeof Rg.oninput=="function"}ah=lh}else ah=!1;c_=ah&&(!document.documentMode||9<document.documentMode)}function bg(){No&&(No.detachEvent("onpropertychange",h_),Ko=No=null)}function h_(t){if(t.propertyName==="value"&&Gu(Ko)){var e=[];u_(e,Ko,t,Nf(t)),Wv(OI,e)}}function LI(t,e,n){t==="focusin"?(bg(),No=e,Ko=n,No.attachEvent("onpropertychange",h_)):t==="focusout"&&bg()}function FI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gu(Ko)}function UI(t,e){if(t==="click")return Gu(e)}function zI(t,e){if(t==="input"||t==="change")return Gu(e)}function $I(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sn=typeof Object.is=="function"?Object.is:$I;function Qo(t,e){if(sn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!qh.call(e,s)||!sn(t[s],e[s]))return!1}return!0}function Ag(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function kg(t,e){var n=Ag(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ag(n)}}function d_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?d_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function f_(){for(var t=window,e=Kl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Kl(t.document)}return e}function Vf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function BI(t){var e=f_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&d_(n.ownerDocument.documentElement,n)){if(r!==null&&Vf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=kg(n,i);var o=kg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var WI=On&&"documentMode"in document&&11>=document.documentMode,$s=null,hd=null,Ro=null,dd=!1;function Cg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;dd||$s==null||$s!==Kl(r)||(r=$s,"selectionStart"in r&&Vf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ro&&Qo(Ro,r)||(Ro=r,r=tu(hd,"onSelect"),0<r.length&&(e=new Pf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=$s)))}function ul(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Bs={animationend:ul("Animation","AnimationEnd"),animationiteration:ul("Animation","AnimationIteration"),animationstart:ul("Animation","AnimationStart"),transitionend:ul("Transition","TransitionEnd")},uh={},p_={};On&&(p_=document.createElement("div").style,"AnimationEvent"in window||(delete Bs.animationend.animation,delete Bs.animationiteration.animation,delete Bs.animationstart.animation),"TransitionEvent"in window||delete Bs.transitionend.transition);function Ku(t){if(uh[t])return uh[t];if(!Bs[t])return t;var e=Bs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in p_)return uh[t]=e[n];return t}var m_=Ku("animationend"),g_=Ku("animationiteration"),y_=Ku("animationstart"),v_=Ku("transitionend"),__=new Map,Pg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ur(t,e){__.set(t,e),Ts(e,[t])}for(var ch=0;ch<Pg.length;ch++){var hh=Pg[ch],HI=hh.toLowerCase(),qI=hh[0].toUpperCase()+hh.slice(1);Ur(HI,"on"+qI)}Ur(m_,"onAnimationEnd");Ur(g_,"onAnimationIteration");Ur(y_,"onAnimationStart");Ur("dblclick","onDoubleClick");Ur("focusin","onFocus");Ur("focusout","onBlur");Ur(v_,"onTransitionEnd");fi("onMouseEnter",["mouseout","mouseover"]);fi("onMouseLeave",["mouseout","mouseover"]);fi("onPointerEnter",["pointerout","pointerover"]);fi("onPointerLeave",["pointerout","pointerover"]);Ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ts("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _o="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GI=new Set("cancel close invalid load scroll toggle".split(" ").concat(_o));function Dg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,HT(r,e,void 0,t),t.currentTarget=null}function w_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Dg(s,l,c),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Dg(s,l,c),i=u}}}if(Yl)throw t=ad,Yl=!1,ad=null,t}function ve(t,e){var n=e[yd];n===void 0&&(n=e[yd]=new Set);var r=t+"__bubble";n.has(r)||(x_(e,t,2,!1),n.add(r))}function dh(t,e,n){var r=0;e&&(r|=4),x_(n,t,r,e)}var cl="_reactListening"+Math.random().toString(36).slice(2);function Yo(t){if(!t[cl]){t[cl]=!0,bv.forEach(function(n){n!=="selectionchange"&&(GI.has(n)||dh(n,!1,t),dh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[cl]||(e[cl]=!0,dh("selectionchange",!1,e))}}function x_(t,e,n,r){switch(s_(e)){case 1:var s=aI;break;case 4:s=lI;break;default:s=kf}n=s.bind(null,e,n,t),s=void 0,!od||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function fh(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ns(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Wv(function(){var c=i,d=Nf(n),p=[];e:{var g=__.get(t);if(g!==void 0){var T=Pf,b=t;switch(t){case"keypress":if(kl(n)===0)break e;case"keydown":case"keyup":T=TI;break;case"focusin":b="focus",T=oh;break;case"focusout":b="blur",T=oh;break;case"beforeblur":case"afterblur":T=oh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=xg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=hI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=NI;break;case m_:case g_:case y_:T=pI;break;case v_:T=bI;break;case"scroll":T=uI;break;case"wheel":T=kI;break;case"copy":case"cut":case"paste":T=gI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Tg}var k=(e&4)!==0,N=!k&&t==="scroll",_=k?g!==null?g+"Capture":null:g;k=[];for(var y=c,x;y!==null;){x=y;var C=x.stateNode;if(x.tag===5&&C!==null&&(x=C,_!==null&&(C=Wo(y,_),C!=null&&k.push(Jo(y,C,x)))),N)break;y=y.return}0<k.length&&(g=new T(g,b,null,n,d),p.push({event:g,listeners:k}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",g&&n!==sd&&(b=n.relatedTarget||n.fromElement)&&(ns(b)||b[Mn]))break e;if((T||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,T?(b=n.relatedTarget||n.toElement,T=c,b=b?ns(b):null,b!==null&&(N=Is(b),b!==N||b.tag!==5&&b.tag!==6)&&(b=null)):(T=null,b=c),T!==b)){if(k=xg,C="onMouseLeave",_="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(k=Tg,C="onPointerLeave",_="onPointerEnter",y="pointer"),N=T==null?g:Ws(T),x=b==null?g:Ws(b),g=new k(C,y+"leave",T,n,d),g.target=N,g.relatedTarget=x,C=null,ns(d)===c&&(k=new k(_,y+"enter",b,n,d),k.target=x,k.relatedTarget=N,C=k),N=C,T&&b)t:{for(k=T,_=b,y=0,x=k;x;x=Ps(x))y++;for(x=0,C=_;C;C=Ps(C))x++;for(;0<y-x;)k=Ps(k),y--;for(;0<x-y;)_=Ps(_),x--;for(;y--;){if(k===_||_!==null&&k===_.alternate)break t;k=Ps(k),_=Ps(_)}k=null}else k=null;T!==null&&jg(p,g,T,k,!1),b!==null&&N!==null&&jg(p,N,b,k,!0)}}e:{if(g=c?Ws(c):window,T=g.nodeName&&g.nodeName.toLowerCase(),T==="select"||T==="input"&&g.type==="file")var V=MI;else if(Ng(g))if(c_)V=zI;else{V=FI;var P=LI}else(T=g.nodeName)&&T.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(V=UI);if(V&&(V=V(t,c))){u_(p,V,n,d);break e}P&&P(t,g,c),t==="focusout"&&(P=g._wrapperState)&&P.controlled&&g.type==="number"&&Zh(g,"number",g.value)}switch(P=c?Ws(c):window,t){case"focusin":(Ng(P)||P.contentEditable==="true")&&($s=P,hd=c,Ro=null);break;case"focusout":Ro=hd=$s=null;break;case"mousedown":dd=!0;break;case"contextmenu":case"mouseup":case"dragend":dd=!1,Cg(p,n,d);break;case"selectionchange":if(WI)break;case"keydown":case"keyup":Cg(p,n,d)}var E;if(jf)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else zs?a_(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(o_&&n.locale!=="ko"&&(zs||v!=="onCompositionStart"?v==="onCompositionEnd"&&zs&&(E=i_()):(dr=d,Cf="value"in dr?dr.value:dr.textContent,zs=!0)),P=tu(c,v),0<P.length&&(v=new Eg(v,t,null,n,d),p.push({event:v,listeners:P}),E?v.data=E:(E=l_(n),E!==null&&(v.data=E)))),(E=PI?DI(t,n):jI(t,n))&&(c=tu(c,"onBeforeInput"),0<c.length&&(d=new Eg("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:c}),d.data=E))}w_(p,e)})}function Jo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function tu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Wo(t,n),i!=null&&r.unshift(Jo(t,i,s)),i=Wo(t,e),i!=null&&r.push(Jo(t,i,s))),t=t.return}return r}function Ps(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function jg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,s?(u=Wo(n,i),u!=null&&o.unshift(Jo(n,u,l))):s||(u=Wo(n,i),u!=null&&o.push(Jo(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var KI=/\r\n?/g,QI=/\u0000|\uFFFD/g;function Vg(t){return(typeof t=="string"?t:""+t).replace(KI,`
`).replace(QI,"")}function hl(t,e,n){if(e=Vg(e),Vg(t)!==e&&n)throw Error(U(425))}function nu(){}var fd=null,pd=null;function md(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gd=typeof setTimeout=="function"?setTimeout:void 0,YI=typeof clearTimeout=="function"?clearTimeout:void 0,Og=typeof Promise=="function"?Promise:void 0,JI=typeof queueMicrotask=="function"?queueMicrotask:typeof Og<"u"?function(t){return Og.resolve(null).then(t).catch(XI)}:gd;function XI(t){setTimeout(function(){throw t})}function ph(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Go(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Go(e)}function _r(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Mg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ci=Math.random().toString(36).slice(2),fn="__reactFiber$"+Ci,Xo="__reactProps$"+Ci,Mn="__reactContainer$"+Ci,yd="__reactEvents$"+Ci,ZI="__reactListeners$"+Ci,e2="__reactHandles$"+Ci;function ns(t){var e=t[fn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Mn]||n[fn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Mg(t);t!==null;){if(n=t[fn])return n;t=Mg(t)}return e}t=n,n=t.parentNode}return null}function Ea(t){return t=t[fn]||t[Mn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ws(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Qu(t){return t[Xo]||null}var vd=[],Hs=-1;function zr(t){return{current:t}}function _e(t){0>Hs||(t.current=vd[Hs],vd[Hs]=null,Hs--)}function ge(t,e){Hs++,vd[Hs]=t.current,t.current=e}var Pr={},ut=zr(Pr),Tt=zr(!1),hs=Pr;function pi(t,e){var n=t.type.contextTypes;if(!n)return Pr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function It(t){return t=t.childContextTypes,t!=null}function ru(){_e(Tt),_e(ut)}function Lg(t,e,n){if(ut.current!==Pr)throw Error(U(168));ge(ut,e),ge(Tt,n)}function E_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,LT(t)||"Unknown",s));return Ie({},n,r)}function su(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pr,hs=ut.current,ge(ut,t),ge(Tt,Tt.current),!0}function Fg(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=E_(t,e,hs),r.__reactInternalMemoizedMergedChildContext=t,_e(Tt),_e(ut),ge(ut,t)):_e(Tt),ge(Tt,n)}var bn=null,Yu=!1,mh=!1;function T_(t){bn===null?bn=[t]:bn.push(t)}function t2(t){Yu=!0,T_(t)}function $r(){if(!mh&&bn!==null){mh=!0;var t=0,e=he;try{var n=bn;for(he=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}bn=null,Yu=!1}catch(s){throw bn!==null&&(bn=bn.slice(t+1)),Kv(Rf,$r),s}finally{he=e,mh=!1}}return null}var qs=[],Gs=0,iu=null,ou=0,Mt=[],Lt=0,ds=null,kn=1,Cn="";function Zr(t,e){qs[Gs++]=ou,qs[Gs++]=iu,iu=t,ou=e}function I_(t,e,n){Mt[Lt++]=kn,Mt[Lt++]=Cn,Mt[Lt++]=ds,ds=t;var r=kn;t=Cn;var s=32-en(r)-1;r&=~(1<<s),n+=1;var i=32-en(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,kn=1<<32-en(e)+s|n<<s|r,Cn=i+t}else kn=1<<i|n<<s|r,Cn=t}function Of(t){t.return!==null&&(Zr(t,1),I_(t,1,0))}function Mf(t){for(;t===iu;)iu=qs[--Gs],qs[Gs]=null,ou=qs[--Gs],qs[Gs]=null;for(;t===ds;)ds=Mt[--Lt],Mt[Lt]=null,Cn=Mt[--Lt],Mt[Lt]=null,kn=Mt[--Lt],Mt[Lt]=null}var Dt=null,Ct=null,xe=!1,Yt=null;function S_(t,e){var n=Ut(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ug(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dt=t,Ct=_r(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dt=t,Ct=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ds!==null?{id:kn,overflow:Cn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ut(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dt=t,Ct=null,!0):!1;default:return!1}}function _d(t){return(t.mode&1)!==0&&(t.flags&128)===0}function wd(t){if(xe){var e=Ct;if(e){var n=e;if(!Ug(t,e)){if(_d(t))throw Error(U(418));e=_r(n.nextSibling);var r=Dt;e&&Ug(t,e)?S_(r,n):(t.flags=t.flags&-4097|2,xe=!1,Dt=t)}}else{if(_d(t))throw Error(U(418));t.flags=t.flags&-4097|2,xe=!1,Dt=t}}}function zg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dt=t}function dl(t){if(t!==Dt)return!1;if(!xe)return zg(t),xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!md(t.type,t.memoizedProps)),e&&(e=Ct)){if(_d(t))throw N_(),Error(U(418));for(;e;)S_(t,e),e=_r(e.nextSibling)}if(zg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ct=_r(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ct=null}}else Ct=Dt?_r(t.stateNode.nextSibling):null;return!0}function N_(){for(var t=Ct;t;)t=_r(t.nextSibling)}function mi(){Ct=Dt=null,xe=!1}function Lf(t){Yt===null?Yt=[t]:Yt.push(t)}var n2=qn.ReactCurrentBatchConfig;function ho(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function fl(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function $g(t){var e=t._init;return e(t._payload)}function R_(t){function e(_,y){if(t){var x=_.deletions;x===null?(_.deletions=[y],_.flags|=16):x.push(y)}}function n(_,y){if(!t)return null;for(;y!==null;)e(_,y),y=y.sibling;return null}function r(_,y){for(_=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function s(_,y){return _=Tr(_,y),_.index=0,_.sibling=null,_}function i(_,y,x){return _.index=x,t?(x=_.alternate,x!==null?(x=x.index,x<y?(_.flags|=2,y):x):(_.flags|=2,y)):(_.flags|=1048576,y)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function l(_,y,x,C){return y===null||y.tag!==6?(y=Eh(x,_.mode,C),y.return=_,y):(y=s(y,x),y.return=_,y)}function u(_,y,x,C){var V=x.type;return V===Us?d(_,y,x.props.children,C,x.key):y!==null&&(y.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===ir&&$g(V)===y.type)?(C=s(y,x.props),C.ref=ho(_,y,x),C.return=_,C):(C=Ml(x.type,x.key,x.props,null,_.mode,C),C.ref=ho(_,y,x),C.return=_,C)}function c(_,y,x,C){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=Th(x,_.mode,C),y.return=_,y):(y=s(y,x.children||[]),y.return=_,y)}function d(_,y,x,C,V){return y===null||y.tag!==7?(y=ls(x,_.mode,C,V),y.return=_,y):(y=s(y,x),y.return=_,y)}function p(_,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Eh(""+y,_.mode,x),y.return=_,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case nl:return x=Ml(y.type,y.key,y.props,null,_.mode,x),x.ref=ho(_,null,y),x.return=_,x;case Fs:return y=Th(y,_.mode,x),y.return=_,y;case ir:var C=y._init;return p(_,C(y._payload),x)}if(yo(y)||oo(y))return y=ls(y,_.mode,x,null),y.return=_,y;fl(_,y)}return null}function g(_,y,x,C){var V=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return V!==null?null:l(_,y,""+x,C);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case nl:return x.key===V?u(_,y,x,C):null;case Fs:return x.key===V?c(_,y,x,C):null;case ir:return V=x._init,g(_,y,V(x._payload),C)}if(yo(x)||oo(x))return V!==null?null:d(_,y,x,C,null);fl(_,x)}return null}function T(_,y,x,C,V){if(typeof C=="string"&&C!==""||typeof C=="number")return _=_.get(x)||null,l(y,_,""+C,V);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case nl:return _=_.get(C.key===null?x:C.key)||null,u(y,_,C,V);case Fs:return _=_.get(C.key===null?x:C.key)||null,c(y,_,C,V);case ir:var P=C._init;return T(_,y,x,P(C._payload),V)}if(yo(C)||oo(C))return _=_.get(x)||null,d(y,_,C,V,null);fl(y,C)}return null}function b(_,y,x,C){for(var V=null,P=null,E=y,v=y=0,I=null;E!==null&&v<x.length;v++){E.index>v?(I=E,E=null):I=E.sibling;var R=g(_,E,x[v],C);if(R===null){E===null&&(E=I);break}t&&E&&R.alternate===null&&e(_,E),y=i(R,y,v),P===null?V=R:P.sibling=R,P=R,E=I}if(v===x.length)return n(_,E),xe&&Zr(_,v),V;if(E===null){for(;v<x.length;v++)E=p(_,x[v],C),E!==null&&(y=i(E,y,v),P===null?V=E:P.sibling=E,P=E);return xe&&Zr(_,v),V}for(E=r(_,E);v<x.length;v++)I=T(E,_,v,x[v],C),I!==null&&(t&&I.alternate!==null&&E.delete(I.key===null?v:I.key),y=i(I,y,v),P===null?V=I:P.sibling=I,P=I);return t&&E.forEach(function(A){return e(_,A)}),xe&&Zr(_,v),V}function k(_,y,x,C){var V=oo(x);if(typeof V!="function")throw Error(U(150));if(x=V.call(x),x==null)throw Error(U(151));for(var P=V=null,E=y,v=y=0,I=null,R=x.next();E!==null&&!R.done;v++,R=x.next()){E.index>v?(I=E,E=null):I=E.sibling;var A=g(_,E,R.value,C);if(A===null){E===null&&(E=I);break}t&&E&&A.alternate===null&&e(_,E),y=i(A,y,v),P===null?V=A:P.sibling=A,P=A,E=I}if(R.done)return n(_,E),xe&&Zr(_,v),V;if(E===null){for(;!R.done;v++,R=x.next())R=p(_,R.value,C),R!==null&&(y=i(R,y,v),P===null?V=R:P.sibling=R,P=R);return xe&&Zr(_,v),V}for(E=r(_,E);!R.done;v++,R=x.next())R=T(E,_,v,R.value,C),R!==null&&(t&&R.alternate!==null&&E.delete(R.key===null?v:R.key),y=i(R,y,v),P===null?V=R:P.sibling=R,P=R);return t&&E.forEach(function(D){return e(_,D)}),xe&&Zr(_,v),V}function N(_,y,x,C){if(typeof x=="object"&&x!==null&&x.type===Us&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case nl:e:{for(var V=x.key,P=y;P!==null;){if(P.key===V){if(V=x.type,V===Us){if(P.tag===7){n(_,P.sibling),y=s(P,x.props.children),y.return=_,_=y;break e}}else if(P.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===ir&&$g(V)===P.type){n(_,P.sibling),y=s(P,x.props),y.ref=ho(_,P,x),y.return=_,_=y;break e}n(_,P);break}else e(_,P);P=P.sibling}x.type===Us?(y=ls(x.props.children,_.mode,C,x.key),y.return=_,_=y):(C=Ml(x.type,x.key,x.props,null,_.mode,C),C.ref=ho(_,y,x),C.return=_,_=C)}return o(_);case Fs:e:{for(P=x.key;y!==null;){if(y.key===P)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(_,y.sibling),y=s(y,x.children||[]),y.return=_,_=y;break e}else{n(_,y);break}else e(_,y);y=y.sibling}y=Th(x,_.mode,C),y.return=_,_=y}return o(_);case ir:return P=x._init,N(_,y,P(x._payload),C)}if(yo(x))return b(_,y,x,C);if(oo(x))return k(_,y,x,C);fl(_,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(_,y.sibling),y=s(y,x),y.return=_,_=y):(n(_,y),y=Eh(x,_.mode,C),y.return=_,_=y),o(_)):n(_,y)}return N}var gi=R_(!0),b_=R_(!1),au=zr(null),lu=null,Ks=null,Ff=null;function Uf(){Ff=Ks=lu=null}function zf(t){var e=au.current;_e(au),t._currentValue=e}function xd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ri(t,e){lu=t,Ff=Ks=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Et=!0),t.firstContext=null)}function Wt(t){var e=t._currentValue;if(Ff!==t)if(t={context:t,memoizedValue:e,next:null},Ks===null){if(lu===null)throw Error(U(308));Ks=t,lu.dependencies={lanes:0,firstContext:t}}else Ks=Ks.next=t;return e}var rs=null;function $f(t){rs===null?rs=[t]:rs.push(t)}function A_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,$f(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ln(t,r)}function Ln(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var or=!1;function Bf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function k_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function jn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function wr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ue&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ln(t,n)}return s=r.interleaved,s===null?(e.next=e,$f(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ln(t,n)}function Cl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,bf(t,n)}}function Bg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function uu(t,e,n,r){var s=t.updateQueue;or=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?i=c:o.next=c,o=u;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,d=c=u=null,l=i;do{var g=l.lane,T=l.eventTime;if((r&g)===g){d!==null&&(d=d.next={eventTime:T,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,k=l;switch(g=e,T=n,k.tag){case 1:if(b=k.payload,typeof b=="function"){p=b.call(T,p,g);break e}p=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=k.payload,g=typeof b=="function"?b.call(T,p,g):b,g==null)break e;p=Ie({},p,g);break e;case 2:or=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else T={eventTime:T,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=T,u=p):d=d.next=T,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(d===null&&(u=p),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ps|=o,t.lanes=o,t.memoizedState=p}}function Wg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var Ta={},mn=zr(Ta),Zo=zr(Ta),ea=zr(Ta);function ss(t){if(t===Ta)throw Error(U(174));return t}function Wf(t,e){switch(ge(ea,e),ge(Zo,t),ge(mn,Ta),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:td(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=td(e,t)}_e(mn),ge(mn,e)}function yi(){_e(mn),_e(Zo),_e(ea)}function C_(t){ss(ea.current);var e=ss(mn.current),n=td(e,t.type);e!==n&&(ge(Zo,t),ge(mn,n))}function Hf(t){Zo.current===t&&(_e(mn),_e(Zo))}var Ee=zr(0);function cu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gh=[];function qf(){for(var t=0;t<gh.length;t++)gh[t]._workInProgressVersionPrimary=null;gh.length=0}var Pl=qn.ReactCurrentDispatcher,yh=qn.ReactCurrentBatchConfig,fs=0,Te=null,Fe=null,He=null,hu=!1,bo=!1,ta=0,r2=0;function nt(){throw Error(U(321))}function Gf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sn(t[n],e[n]))return!1;return!0}function Kf(t,e,n,r,s,i){if(fs=i,Te=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Pl.current=t===null||t.memoizedState===null?a2:l2,t=n(r,s),bo){i=0;do{if(bo=!1,ta=0,25<=i)throw Error(U(301));i+=1,He=Fe=null,e.updateQueue=null,Pl.current=u2,t=n(r,s)}while(bo)}if(Pl.current=du,e=Fe!==null&&Fe.next!==null,fs=0,He=Fe=Te=null,hu=!1,e)throw Error(U(300));return t}function Qf(){var t=ta!==0;return ta=0,t}function hn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Te.memoizedState=He=t:He=He.next=t,He}function Ht(){if(Fe===null){var t=Te.alternate;t=t!==null?t.memoizedState:null}else t=Fe.next;var e=He===null?Te.memoizedState:He.next;if(e!==null)He=e,Fe=t;else{if(t===null)throw Error(U(310));Fe=t,t={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},He===null?Te.memoizedState=He=t:He=He.next=t}return He}function na(t,e){return typeof e=="function"?e(t):e}function vh(t){var e=Ht(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Fe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,c=i;do{var d=c.lane;if((fs&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var p={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,Te.lanes|=d,ps|=d}c=c.next}while(c!==null&&c!==i);u===null?o=r:u.next=l,sn(r,e.memoizedState)||(Et=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Te.lanes|=i,ps|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function _h(t){var e=Ht(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);sn(i,e.memoizedState)||(Et=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function P_(){}function D_(t,e){var n=Te,r=Ht(),s=e(),i=!sn(r.memoizedState,s);if(i&&(r.memoizedState=s,Et=!0),r=r.queue,Yf(O_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||He!==null&&He.memoizedState.tag&1){if(n.flags|=2048,ra(9,V_.bind(null,n,r,s,e),void 0,null),Qe===null)throw Error(U(349));fs&30||j_(n,e,s)}return s}function j_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function V_(t,e,n,r){e.value=n,e.getSnapshot=r,M_(e)&&L_(t)}function O_(t,e,n){return n(function(){M_(e)&&L_(t)})}function M_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sn(t,n)}catch{return!0}}function L_(t){var e=Ln(t,1);e!==null&&tn(e,t,1,-1)}function Hg(t){var e=hn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:t},e.queue=t,t=t.dispatch=o2.bind(null,Te,t),[e.memoizedState,t]}function ra(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function F_(){return Ht().memoizedState}function Dl(t,e,n,r){var s=hn();Te.flags|=t,s.memoizedState=ra(1|e,n,void 0,r===void 0?null:r)}function Ju(t,e,n,r){var s=Ht();r=r===void 0?null:r;var i=void 0;if(Fe!==null){var o=Fe.memoizedState;if(i=o.destroy,r!==null&&Gf(r,o.deps)){s.memoizedState=ra(e,n,i,r);return}}Te.flags|=t,s.memoizedState=ra(1|e,n,i,r)}function qg(t,e){return Dl(8390656,8,t,e)}function Yf(t,e){return Ju(2048,8,t,e)}function U_(t,e){return Ju(4,2,t,e)}function z_(t,e){return Ju(4,4,t,e)}function $_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function B_(t,e,n){return n=n!=null?n.concat([t]):null,Ju(4,4,$_.bind(null,e,t),n)}function Jf(){}function W_(t,e){var n=Ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Gf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function H_(t,e){var n=Ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Gf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function q_(t,e,n){return fs&21?(sn(n,e)||(n=Jv(),Te.lanes|=n,ps|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Et=!0),t.memoizedState=n)}function s2(t,e){var n=he;he=n!==0&&4>n?n:4,t(!0);var r=yh.transition;yh.transition={};try{t(!1),e()}finally{he=n,yh.transition=r}}function G_(){return Ht().memoizedState}function i2(t,e,n){var r=Er(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},K_(t))Q_(e,n);else if(n=A_(t,e,n,r),n!==null){var s=pt();tn(n,t,r,s),Y_(n,e,r)}}function o2(t,e,n){var r=Er(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(K_(t))Q_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,sn(l,o)){var u=e.interleaved;u===null?(s.next=s,$f(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=A_(t,e,s,r),n!==null&&(s=pt(),tn(n,t,r,s),Y_(n,e,r))}}function K_(t){var e=t.alternate;return t===Te||e!==null&&e===Te}function Q_(t,e){bo=hu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Y_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,bf(t,n)}}var du={readContext:Wt,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},a2={readContext:Wt,useCallback:function(t,e){return hn().memoizedState=[t,e===void 0?null:e],t},useContext:Wt,useEffect:qg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Dl(4194308,4,$_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Dl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Dl(4,2,t,e)},useMemo:function(t,e){var n=hn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=hn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=i2.bind(null,Te,t),[r.memoizedState,t]},useRef:function(t){var e=hn();return t={current:t},e.memoizedState=t},useState:Hg,useDebugValue:Jf,useDeferredValue:function(t){return hn().memoizedState=t},useTransition:function(){var t=Hg(!1),e=t[0];return t=s2.bind(null,t[1]),hn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Te,s=hn();if(xe){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Qe===null)throw Error(U(349));fs&30||j_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,qg(O_.bind(null,r,i,t),[t]),r.flags|=2048,ra(9,V_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=hn(),e=Qe.identifierPrefix;if(xe){var n=Cn,r=kn;n=(r&~(1<<32-en(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ta++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=r2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},l2={readContext:Wt,useCallback:W_,useContext:Wt,useEffect:Yf,useImperativeHandle:B_,useInsertionEffect:U_,useLayoutEffect:z_,useMemo:H_,useReducer:vh,useRef:F_,useState:function(){return vh(na)},useDebugValue:Jf,useDeferredValue:function(t){var e=Ht();return q_(e,Fe.memoizedState,t)},useTransition:function(){var t=vh(na)[0],e=Ht().memoizedState;return[t,e]},useMutableSource:P_,useSyncExternalStore:D_,useId:G_,unstable_isNewReconciler:!1},u2={readContext:Wt,useCallback:W_,useContext:Wt,useEffect:Yf,useImperativeHandle:B_,useInsertionEffect:U_,useLayoutEffect:z_,useMemo:H_,useReducer:_h,useRef:F_,useState:function(){return _h(na)},useDebugValue:Jf,useDeferredValue:function(t){var e=Ht();return Fe===null?e.memoizedState=t:q_(e,Fe.memoizedState,t)},useTransition:function(){var t=_h(na)[0],e=Ht().memoizedState;return[t,e]},useMutableSource:P_,useSyncExternalStore:D_,useId:G_,unstable_isNewReconciler:!1};function Kt(t,e){if(t&&t.defaultProps){e=Ie({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ed(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ie({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Xu={isMounted:function(t){return(t=t._reactInternals)?Is(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=pt(),s=Er(t),i=jn(r,s);i.payload=e,n!=null&&(i.callback=n),e=wr(t,i,s),e!==null&&(tn(e,t,s,r),Cl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=pt(),s=Er(t),i=jn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=wr(t,i,s),e!==null&&(tn(e,t,s,r),Cl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pt(),r=Er(t),s=jn(n,r);s.tag=2,e!=null&&(s.callback=e),e=wr(t,s,r),e!==null&&(tn(e,t,r,n),Cl(e,t,r))}};function Gg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Qo(n,r)||!Qo(s,i):!0}function J_(t,e,n){var r=!1,s=Pr,i=e.contextType;return typeof i=="object"&&i!==null?i=Wt(i):(s=It(e)?hs:ut.current,r=e.contextTypes,i=(r=r!=null)?pi(t,s):Pr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Xu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Kg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Xu.enqueueReplaceState(e,e.state,null)}function Td(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Bf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Wt(i):(i=It(e)?hs:ut.current,s.context=pi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ed(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Xu.enqueueReplaceState(s,s.state,null),uu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function vi(t,e){try{var n="",r=e;do n+=MT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function wh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Id(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var c2=typeof WeakMap=="function"?WeakMap:Map;function X_(t,e,n){n=jn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){pu||(pu=!0,jd=r),Id(t,e)},n}function Z_(t,e,n){n=jn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Id(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Id(t,e),typeof r!="function"&&(xr===null?xr=new Set([this]):xr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Qg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new c2;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=I2.bind(null,t,e,n),e.then(t,t))}function Yg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Jg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=jn(-1,1),e.tag=2,wr(n,e,1))),n.lanes|=1),t)}var h2=qn.ReactCurrentOwner,Et=!1;function ft(t,e,n,r){e.child=t===null?b_(e,null,n,r):gi(e,t.child,n,r)}function Xg(t,e,n,r,s){n=n.render;var i=e.ref;return ri(e,s),r=Kf(t,e,n,r,i,s),n=Qf(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Fn(t,e,s)):(xe&&n&&Of(e),e.flags|=1,ft(t,e,r,s),e.child)}function Zg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!ip(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,e1(t,e,i,r,s)):(t=Ml(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Qo,n(o,r)&&t.ref===e.ref)return Fn(t,e,s)}return e.flags|=1,t=Tr(i,r),t.ref=e.ref,t.return=e,e.child=t}function e1(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Qo(i,r)&&t.ref===e.ref)if(Et=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Et=!0);else return e.lanes=t.lanes,Fn(t,e,s)}return Sd(t,e,n,r,s)}function t1(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(Ys,At),At|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ge(Ys,At),At|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ge(Ys,At),At|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ge(Ys,At),At|=r;return ft(t,e,s,n),e.child}function n1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Sd(t,e,n,r,s){var i=It(n)?hs:ut.current;return i=pi(e,i),ri(e,s),n=Kf(t,e,n,r,i,s),r=Qf(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Fn(t,e,s)):(xe&&r&&Of(e),e.flags|=1,ft(t,e,n,s),e.child)}function ey(t,e,n,r,s){if(It(n)){var i=!0;su(e)}else i=!1;if(ri(e,s),e.stateNode===null)jl(t,e),J_(e,n,r),Td(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Wt(c):(c=It(n)?hs:ut.current,c=pi(e,c));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&Kg(e,o,r,c),or=!1;var g=e.memoizedState;o.state=g,uu(e,r,o,s),u=e.memoizedState,l!==r||g!==u||Tt.current||or?(typeof d=="function"&&(Ed(e,n,d,r),u=e.memoizedState),(l=or||Gg(e,n,l,r,g,u,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,k_(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:Kt(e.type,l),o.props=c,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Wt(u):(u=It(n)?hs:ut.current,u=pi(e,u));var T=n.getDerivedStateFromProps;(d=typeof T=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||g!==u)&&Kg(e,o,r,u),or=!1,g=e.memoizedState,o.state=g,uu(e,r,o,s);var b=e.memoizedState;l!==p||g!==b||Tt.current||or?(typeof T=="function"&&(Ed(e,n,T,r),b=e.memoizedState),(c=or||Gg(e,n,c,r,g,b,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Nd(t,e,n,r,i,s)}function Nd(t,e,n,r,s,i){n1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Fg(e,n,!1),Fn(t,e,i);r=e.stateNode,h2.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=gi(e,t.child,null,i),e.child=gi(e,null,l,i)):ft(t,e,l,i),e.memoizedState=r.state,s&&Fg(e,n,!0),e.child}function r1(t){var e=t.stateNode;e.pendingContext?Lg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Lg(t,e.context,!1),Wf(t,e.containerInfo)}function ty(t,e,n,r,s){return mi(),Lf(s),e.flags|=256,ft(t,e,n,r),e.child}var Rd={dehydrated:null,treeContext:null,retryLane:0};function bd(t){return{baseLanes:t,cachePool:null,transitions:null}}function s1(t,e,n){var r=e.pendingProps,s=Ee.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ge(Ee,s&1),t===null)return wd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=tc(o,r,0,null),t=ls(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=bd(n),e.memoizedState=Rd,t):Xf(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return d2(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Tr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Tr(l,i):(i=ls(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?bd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Rd,r}return i=t.child,t=i.sibling,r=Tr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Xf(t,e){return e=tc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pl(t,e,n,r){return r!==null&&Lf(r),gi(e,t.child,null,n),t=Xf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function d2(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=wh(Error(U(422))),pl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=tc({mode:"visible",children:r.children},s,0,null),i=ls(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&gi(e,t.child,null,o),e.child.memoizedState=bd(o),e.memoizedState=Rd,i);if(!(e.mode&1))return pl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(U(419)),r=wh(i,r,void 0),pl(t,e,o,r)}if(l=(o&t.childLanes)!==0,Et||l){if(r=Qe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ln(t,s),tn(r,t,s,-1))}return sp(),r=wh(Error(U(421))),pl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=S2.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ct=_r(s.nextSibling),Dt=e,xe=!0,Yt=null,t!==null&&(Mt[Lt++]=kn,Mt[Lt++]=Cn,Mt[Lt++]=ds,kn=t.id,Cn=t.overflow,ds=e),e=Xf(e,r.children),e.flags|=4096,e)}function ny(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),xd(t.return,e,n)}function xh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function i1(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ft(t,e,r.children,n),r=Ee.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ny(t,n,e);else if(t.tag===19)ny(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ge(Ee,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&cu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),xh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&cu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}xh(e,!0,n,null,i);break;case"together":xh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Fn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ps|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Tr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Tr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function f2(t,e,n){switch(e.tag){case 3:r1(e),mi();break;case 5:C_(e);break;case 1:It(e.type)&&su(e);break;case 4:Wf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ge(au,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ge(Ee,Ee.current&1),e.flags|=128,null):n&e.child.childLanes?s1(t,e,n):(ge(Ee,Ee.current&1),t=Fn(t,e,n),t!==null?t.sibling:null);ge(Ee,Ee.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return i1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ge(Ee,Ee.current),r)break;return null;case 22:case 23:return e.lanes=0,t1(t,e,n)}return Fn(t,e,n)}var o1,Ad,a1,l1;o1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ad=function(){};a1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ss(mn.current);var i=null;switch(n){case"input":s=Jh(t,s),r=Jh(t,r),i=[];break;case"select":s=Ie({},s,{value:void 0}),r=Ie({},r,{value:void 0}),i=[];break;case"textarea":s=ed(t,s),r=ed(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=nu)}nd(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&($o.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(l=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&($o.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&ve("scroll",t),i||l===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};l1=function(t,e,n,r){n!==r&&(e.flags|=4)};function fo(t,e){if(!xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function rt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function p2(t,e,n){var r=e.pendingProps;switch(Mf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(e),null;case 1:return It(e.type)&&ru(),rt(e),null;case 3:return r=e.stateNode,yi(),_e(Tt),_e(ut),qf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(dl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yt!==null&&(Md(Yt),Yt=null))),Ad(t,e),rt(e),null;case 5:Hf(e);var s=ss(ea.current);if(n=e.type,t!==null&&e.stateNode!=null)a1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return rt(e),null}if(t=ss(mn.current),dl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[fn]=e,r[Xo]=i,t=(e.mode&1)!==0,n){case"dialog":ve("cancel",r),ve("close",r);break;case"iframe":case"object":case"embed":ve("load",r);break;case"video":case"audio":for(s=0;s<_o.length;s++)ve(_o[s],r);break;case"source":ve("error",r);break;case"img":case"image":case"link":ve("error",r),ve("load",r);break;case"details":ve("toggle",r);break;case"input":hg(r,i),ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ve("invalid",r);break;case"textarea":fg(r,i),ve("invalid",r)}nd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&hl(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&hl(r.textContent,l,t),s=["children",""+l]):$o.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ve("scroll",r)}switch(n){case"input":rl(r),dg(r,i,!0);break;case"textarea":rl(r),pg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=nu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ov(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[fn]=e,t[Xo]=r,o1(t,e,!1,!1),e.stateNode=t;e:{switch(o=rd(n,r),n){case"dialog":ve("cancel",t),ve("close",t),s=r;break;case"iframe":case"object":case"embed":ve("load",t),s=r;break;case"video":case"audio":for(s=0;s<_o.length;s++)ve(_o[s],t);s=r;break;case"source":ve("error",t),s=r;break;case"img":case"image":case"link":ve("error",t),ve("load",t),s=r;break;case"details":ve("toggle",t),s=r;break;case"input":hg(t,r),s=Jh(t,r),ve("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ie({},r,{value:void 0}),ve("invalid",t);break;case"textarea":fg(t,r),s=ed(t,r),ve("invalid",t);break;default:s=r}nd(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Fv(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Mv(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Bo(t,u):typeof u=="number"&&Bo(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&($o.hasOwnProperty(i)?u!=null&&i==="onScroll"&&ve("scroll",t):u!=null&&Ef(t,i,u,o))}switch(n){case"input":rl(t),dg(t,r,!1);break;case"textarea":rl(t),pg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Cr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Zs(t,!!r.multiple,i,!1):r.defaultValue!=null&&Zs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=nu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return rt(e),null;case 6:if(t&&e.stateNode!=null)l1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=ss(ea.current),ss(mn.current),dl(e)){if(r=e.stateNode,n=e.memoizedProps,r[fn]=e,(i=r.nodeValue!==n)&&(t=Dt,t!==null))switch(t.tag){case 3:hl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&hl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[fn]=e,e.stateNode=r}return rt(e),null;case 13:if(_e(Ee),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xe&&Ct!==null&&e.mode&1&&!(e.flags&128))N_(),mi(),e.flags|=98560,i=!1;else if(i=dl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[fn]=e}else mi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;rt(e),i=!1}else Yt!==null&&(Md(Yt),Yt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ee.current&1?Ue===0&&(Ue=3):sp())),e.updateQueue!==null&&(e.flags|=4),rt(e),null);case 4:return yi(),Ad(t,e),t===null&&Yo(e.stateNode.containerInfo),rt(e),null;case 10:return zf(e.type._context),rt(e),null;case 17:return It(e.type)&&ru(),rt(e),null;case 19:if(_e(Ee),i=e.memoizedState,i===null)return rt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)fo(i,!1);else{if(Ue!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=cu(t),o!==null){for(e.flags|=128,fo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ge(Ee,Ee.current&1|2),e.child}t=t.sibling}i.tail!==null&&ke()>_i&&(e.flags|=128,r=!0,fo(i,!1),e.lanes=4194304)}else{if(!r)if(t=cu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),fo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!xe)return rt(e),null}else 2*ke()-i.renderingStartTime>_i&&n!==1073741824&&(e.flags|=128,r=!0,fo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ke(),e.sibling=null,n=Ee.current,ge(Ee,r?n&1|2:n&1),e):(rt(e),null);case 22:case 23:return rp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?At&1073741824&&(rt(e),e.subtreeFlags&6&&(e.flags|=8192)):rt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function m2(t,e){switch(Mf(e),e.tag){case 1:return It(e.type)&&ru(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return yi(),_e(Tt),_e(ut),qf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Hf(e),null;case 13:if(_e(Ee),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));mi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return _e(Ee),null;case 4:return yi(),null;case 10:return zf(e.type._context),null;case 22:case 23:return rp(),null;case 24:return null;default:return null}}var ml=!1,ot=!1,g2=typeof WeakSet=="function"?WeakSet:Set,H=null;function Qs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){be(t,e,r)}else n.current=null}function kd(t,e,n){try{n()}catch(r){be(t,e,r)}}var ry=!1;function y2(t,e){if(fd=Zl,t=f_(),Vf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,d=0,p=t,g=null;t:for(;;){for(var T;p!==n||s!==0&&p.nodeType!==3||(l=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(T=p.firstChild)!==null;)g=p,p=T;for(;;){if(p===t)break t;if(g===n&&++c===s&&(l=o),g===i&&++d===r&&(u=o),(T=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=T}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(pd={focusedElem:t,selectionRange:n},Zl=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var k=b.memoizedProps,N=b.memoizedState,_=e.stateNode,y=_.getSnapshotBeforeUpdate(e.elementType===e.type?k:Kt(e.type,k),N);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(C){be(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return b=ry,ry=!1,b}function Ao(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&kd(e,n,i)}s=s.next}while(s!==r)}}function Zu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Cd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function u1(t){var e=t.alternate;e!==null&&(t.alternate=null,u1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[fn],delete e[Xo],delete e[yd],delete e[ZI],delete e[e2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function c1(t){return t.tag===5||t.tag===3||t.tag===4}function sy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||c1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Pd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=nu));else if(r!==4&&(t=t.child,t!==null))for(Pd(t,e,n),t=t.sibling;t!==null;)Pd(t,e,n),t=t.sibling}function Dd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Dd(t,e,n),t=t.sibling;t!==null;)Dd(t,e,n),t=t.sibling}var Je=null,Qt=!1;function rr(t,e,n){for(n=n.child;n!==null;)h1(t,e,n),n=n.sibling}function h1(t,e,n){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(Hu,n)}catch{}switch(n.tag){case 5:ot||Qs(n,e);case 6:var r=Je,s=Qt;Je=null,rr(t,e,n),Je=r,Qt=s,Je!==null&&(Qt?(t=Je,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Je.removeChild(n.stateNode));break;case 18:Je!==null&&(Qt?(t=Je,n=n.stateNode,t.nodeType===8?ph(t.parentNode,n):t.nodeType===1&&ph(t,n),Go(t)):ph(Je,n.stateNode));break;case 4:r=Je,s=Qt,Je=n.stateNode.containerInfo,Qt=!0,rr(t,e,n),Je=r,Qt=s;break;case 0:case 11:case 14:case 15:if(!ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&kd(n,e,o),s=s.next}while(s!==r)}rr(t,e,n);break;case 1:if(!ot&&(Qs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){be(n,e,l)}rr(t,e,n);break;case 21:rr(t,e,n);break;case 22:n.mode&1?(ot=(r=ot)||n.memoizedState!==null,rr(t,e,n),ot=r):rr(t,e,n);break;default:rr(t,e,n)}}function iy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new g2),e.forEach(function(r){var s=N2.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Gt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Je=l.stateNode,Qt=!1;break e;case 3:Je=l.stateNode.containerInfo,Qt=!0;break e;case 4:Je=l.stateNode.containerInfo,Qt=!0;break e}l=l.return}if(Je===null)throw Error(U(160));h1(i,o,s),Je=null,Qt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){be(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)d1(e,t),e=e.sibling}function d1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Gt(e,t),cn(t),r&4){try{Ao(3,t,t.return),Zu(3,t)}catch(k){be(t,t.return,k)}try{Ao(5,t,t.return)}catch(k){be(t,t.return,k)}}break;case 1:Gt(e,t),cn(t),r&512&&n!==null&&Qs(n,n.return);break;case 5:if(Gt(e,t),cn(t),r&512&&n!==null&&Qs(n,n.return),t.flags&32){var s=t.stateNode;try{Bo(s,"")}catch(k){be(t,t.return,k)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&jv(s,i),rd(l,o);var c=rd(l,i);for(o=0;o<u.length;o+=2){var d=u[o],p=u[o+1];d==="style"?Fv(s,p):d==="dangerouslySetInnerHTML"?Mv(s,p):d==="children"?Bo(s,p):Ef(s,d,p,c)}switch(l){case"input":Xh(s,i);break;case"textarea":Vv(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var T=i.value;T!=null?Zs(s,!!i.multiple,T,!1):g!==!!i.multiple&&(i.defaultValue!=null?Zs(s,!!i.multiple,i.defaultValue,!0):Zs(s,!!i.multiple,i.multiple?[]:"",!1))}s[Xo]=i}catch(k){be(t,t.return,k)}}break;case 6:if(Gt(e,t),cn(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(k){be(t,t.return,k)}}break;case 3:if(Gt(e,t),cn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Go(e.containerInfo)}catch(k){be(t,t.return,k)}break;case 4:Gt(e,t),cn(t);break;case 13:Gt(e,t),cn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(tp=ke())),r&4&&iy(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(ot=(c=ot)||d,Gt(e,t),ot=c):Gt(e,t),cn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(H=t,d=t.child;d!==null;){for(p=H=d;H!==null;){switch(g=H,T=g.child,g.tag){case 0:case 11:case 14:case 15:Ao(4,g,g.return);break;case 1:Qs(g,g.return);var b=g.stateNode;if(typeof b.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(k){be(r,n,k)}}break;case 5:Qs(g,g.return);break;case 22:if(g.memoizedState!==null){ay(p);continue}}T!==null?(T.return=g,H=T):ay(p)}d=d.sibling}e:for(d=null,p=t;;){if(p.tag===5){if(d===null){d=p;try{s=p.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Lv("display",o))}catch(k){be(t,t.return,k)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(k){be(t,t.return,k)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Gt(e,t),cn(t),r&4&&iy(t);break;case 21:break;default:Gt(e,t),cn(t)}}function cn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(c1(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Bo(s,""),r.flags&=-33);var i=sy(t);Dd(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=sy(t);Pd(t,l,o);break;default:throw Error(U(161))}}catch(u){be(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function v2(t,e,n){H=t,f1(t)}function f1(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ml;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||ot;l=ml;var c=ot;if(ml=o,(ot=u)&&!c)for(H=s;H!==null;)o=H,u=o.child,o.tag===22&&o.memoizedState!==null?ly(s):u!==null?(u.return=o,H=u):ly(s);for(;i!==null;)H=i,f1(i),i=i.sibling;H=s,ml=l,ot=c}oy(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):oy(t)}}function oy(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ot||Zu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ot)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Kt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Wg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Wg(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&Go(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}ot||e.flags&512&&Cd(e)}catch(g){be(e,e.return,g)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function ay(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function ly(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Zu(4,e)}catch(u){be(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){be(e,s,u)}}var i=e.return;try{Cd(e)}catch(u){be(e,i,u)}break;case 5:var o=e.return;try{Cd(e)}catch(u){be(e,o,u)}}}catch(u){be(e,e.return,u)}if(e===t){H=null;break}var l=e.sibling;if(l!==null){l.return=e.return,H=l;break}H=e.return}}var _2=Math.ceil,fu=qn.ReactCurrentDispatcher,Zf=qn.ReactCurrentOwner,zt=qn.ReactCurrentBatchConfig,ue=0,Qe=null,Ve=null,Ze=0,At=0,Ys=zr(0),Ue=0,sa=null,ps=0,ec=0,ep=0,ko=null,wt=null,tp=0,_i=1/0,Rn=null,pu=!1,jd=null,xr=null,gl=!1,fr=null,mu=0,Co=0,Vd=null,Vl=-1,Ol=0;function pt(){return ue&6?ke():Vl!==-1?Vl:Vl=ke()}function Er(t){return t.mode&1?ue&2&&Ze!==0?Ze&-Ze:n2.transition!==null?(Ol===0&&(Ol=Jv()),Ol):(t=he,t!==0||(t=window.event,t=t===void 0?16:s_(t.type)),t):1}function tn(t,e,n,r){if(50<Co)throw Co=0,Vd=null,Error(U(185));wa(t,n,r),(!(ue&2)||t!==Qe)&&(t===Qe&&(!(ue&2)&&(ec|=n),Ue===4&&lr(t,Ze)),St(t,r),n===1&&ue===0&&!(e.mode&1)&&(_i=ke()+500,Yu&&$r()))}function St(t,e){var n=t.callbackNode;nI(t,e);var r=Xl(t,t===Qe?Ze:0);if(r===0)n!==null&&yg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&yg(n),e===1)t.tag===0?t2(uy.bind(null,t)):T_(uy.bind(null,t)),JI(function(){!(ue&6)&&$r()}),n=null;else{switch(Xv(r)){case 1:n=Rf;break;case 4:n=Qv;break;case 16:n=Jl;break;case 536870912:n=Yv;break;default:n=Jl}n=x1(n,p1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function p1(t,e){if(Vl=-1,Ol=0,ue&6)throw Error(U(327));var n=t.callbackNode;if(si()&&t.callbackNode!==n)return null;var r=Xl(t,t===Qe?Ze:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=gu(t,r);else{e=r;var s=ue;ue|=2;var i=g1();(Qe!==t||Ze!==e)&&(Rn=null,_i=ke()+500,as(t,e));do try{E2();break}catch(l){m1(t,l)}while(!0);Uf(),fu.current=i,ue=s,Ve!==null?e=0:(Qe=null,Ze=0,e=Ue)}if(e!==0){if(e===2&&(s=ld(t),s!==0&&(r=s,e=Od(t,s))),e===1)throw n=sa,as(t,0),lr(t,r),St(t,ke()),n;if(e===6)lr(t,r);else{if(s=t.current.alternate,!(r&30)&&!w2(s)&&(e=gu(t,r),e===2&&(i=ld(t),i!==0&&(r=i,e=Od(t,i))),e===1))throw n=sa,as(t,0),lr(t,r),St(t,ke()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:es(t,wt,Rn);break;case 3:if(lr(t,r),(r&130023424)===r&&(e=tp+500-ke(),10<e)){if(Xl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){pt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=gd(es.bind(null,t,wt,Rn),e);break}es(t,wt,Rn);break;case 4:if(lr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-en(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_2(r/1960))-r,10<r){t.timeoutHandle=gd(es.bind(null,t,wt,Rn),r);break}es(t,wt,Rn);break;case 5:es(t,wt,Rn);break;default:throw Error(U(329))}}}return St(t,ke()),t.callbackNode===n?p1.bind(null,t):null}function Od(t,e){var n=ko;return t.current.memoizedState.isDehydrated&&(as(t,e).flags|=256),t=gu(t,e),t!==2&&(e=wt,wt=n,e!==null&&Md(e)),t}function Md(t){wt===null?wt=t:wt.push.apply(wt,t)}function w2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!sn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function lr(t,e){for(e&=~ep,e&=~ec,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-en(e),r=1<<n;t[n]=-1,e&=~r}}function uy(t){if(ue&6)throw Error(U(327));si();var e=Xl(t,0);if(!(e&1))return St(t,ke()),null;var n=gu(t,e);if(t.tag!==0&&n===2){var r=ld(t);r!==0&&(e=r,n=Od(t,r))}if(n===1)throw n=sa,as(t,0),lr(t,e),St(t,ke()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,es(t,wt,Rn),St(t,ke()),null}function np(t,e){var n=ue;ue|=1;try{return t(e)}finally{ue=n,ue===0&&(_i=ke()+500,Yu&&$r())}}function ms(t){fr!==null&&fr.tag===0&&!(ue&6)&&si();var e=ue;ue|=1;var n=zt.transition,r=he;try{if(zt.transition=null,he=1,t)return t()}finally{he=r,zt.transition=n,ue=e,!(ue&6)&&$r()}}function rp(){At=Ys.current,_e(Ys)}function as(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,YI(n)),Ve!==null)for(n=Ve.return;n!==null;){var r=n;switch(Mf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ru();break;case 3:yi(),_e(Tt),_e(ut),qf();break;case 5:Hf(r);break;case 4:yi();break;case 13:_e(Ee);break;case 19:_e(Ee);break;case 10:zf(r.type._context);break;case 22:case 23:rp()}n=n.return}if(Qe=t,Ve=t=Tr(t.current,null),Ze=At=e,Ue=0,sa=null,ep=ec=ps=0,wt=ko=null,rs!==null){for(e=0;e<rs.length;e++)if(n=rs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}rs=null}return t}function m1(t,e){do{var n=Ve;try{if(Uf(),Pl.current=du,hu){for(var r=Te.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}hu=!1}if(fs=0,He=Fe=Te=null,bo=!1,ta=0,Zf.current=null,n===null||n.return===null){Ue=1,sa=e,Ve=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=Ze,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=l,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var T=Yg(o);if(T!==null){T.flags&=-257,Jg(T,o,l,i,e),T.mode&1&&Qg(i,c,e),e=T,u=c;var b=e.updateQueue;if(b===null){var k=new Set;k.add(u),e.updateQueue=k}else b.add(u);break e}else{if(!(e&1)){Qg(i,c,e),sp();break e}u=Error(U(426))}}else if(xe&&l.mode&1){var N=Yg(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Jg(N,o,l,i,e),Lf(vi(u,l));break e}}i=u=vi(u,l),Ue!==4&&(Ue=2),ko===null?ko=[i]:ko.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=X_(i,u,e);Bg(i,_);break e;case 1:l=u;var y=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(xr===null||!xr.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=Z_(i,l,e);Bg(i,C);break e}}i=i.return}while(i!==null)}v1(n)}catch(V){e=V,Ve===n&&n!==null&&(Ve=n=n.return);continue}break}while(!0)}function g1(){var t=fu.current;return fu.current=du,t===null?du:t}function sp(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),Qe===null||!(ps&268435455)&&!(ec&268435455)||lr(Qe,Ze)}function gu(t,e){var n=ue;ue|=2;var r=g1();(Qe!==t||Ze!==e)&&(Rn=null,as(t,e));do try{x2();break}catch(s){m1(t,s)}while(!0);if(Uf(),ue=n,fu.current=r,Ve!==null)throw Error(U(261));return Qe=null,Ze=0,Ue}function x2(){for(;Ve!==null;)y1(Ve)}function E2(){for(;Ve!==null&&!GT();)y1(Ve)}function y1(t){var e=w1(t.alternate,t,At);t.memoizedProps=t.pendingProps,e===null?v1(t):Ve=e,Zf.current=null}function v1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=m2(n,e),n!==null){n.flags&=32767,Ve=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ue=6,Ve=null;return}}else if(n=p2(n,e,At),n!==null){Ve=n;return}if(e=e.sibling,e!==null){Ve=e;return}Ve=e=t}while(e!==null);Ue===0&&(Ue=5)}function es(t,e,n){var r=he,s=zt.transition;try{zt.transition=null,he=1,T2(t,e,n,r)}finally{zt.transition=s,he=r}return null}function T2(t,e,n,r){do si();while(fr!==null);if(ue&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(rI(t,i),t===Qe&&(Ve=Qe=null,Ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gl||(gl=!0,x1(Jl,function(){return si(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=zt.transition,zt.transition=null;var o=he;he=1;var l=ue;ue|=4,Zf.current=null,y2(t,n),d1(n,t),BI(pd),Zl=!!fd,pd=fd=null,t.current=n,v2(n),KT(),ue=l,he=o,zt.transition=i}else t.current=n;if(gl&&(gl=!1,fr=t,mu=s),i=t.pendingLanes,i===0&&(xr=null),JT(n.stateNode),St(t,ke()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(pu)throw pu=!1,t=jd,jd=null,t;return mu&1&&t.tag!==0&&si(),i=t.pendingLanes,i&1?t===Vd?Co++:(Co=0,Vd=t):Co=0,$r(),null}function si(){if(fr!==null){var t=Xv(mu),e=zt.transition,n=he;try{if(zt.transition=null,he=16>t?16:t,fr===null)var r=!1;else{if(t=fr,fr=null,mu=0,ue&6)throw Error(U(331));var s=ue;for(ue|=4,H=t.current;H!==null;){var i=H,o=i.child;if(H.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(H=c;H!==null;){var d=H;switch(d.tag){case 0:case 11:case 15:Ao(8,d,i)}var p=d.child;if(p!==null)p.return=d,H=p;else for(;H!==null;){d=H;var g=d.sibling,T=d.return;if(u1(d),d===c){H=null;break}if(g!==null){g.return=T,H=g;break}H=T}}}var b=i.alternate;if(b!==null){var k=b.child;if(k!==null){b.child=null;do{var N=k.sibling;k.sibling=null,k=N}while(k!==null)}}H=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,H=o;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ao(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,H=_;break e}H=i.return}}var y=t.current;for(H=y;H!==null;){o=H;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,H=x;else e:for(o=y;H!==null;){if(l=H,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Zu(9,l)}}catch(V){be(l,l.return,V)}if(l===o){H=null;break e}var C=l.sibling;if(C!==null){C.return=l.return,H=C;break e}H=l.return}}if(ue=s,$r(),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(Hu,t)}catch{}r=!0}return r}finally{he=n,zt.transition=e}}return!1}function cy(t,e,n){e=vi(n,e),e=X_(t,e,1),t=wr(t,e,1),e=pt(),t!==null&&(wa(t,1,e),St(t,e))}function be(t,e,n){if(t.tag===3)cy(t,t,n);else for(;e!==null;){if(e.tag===3){cy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(xr===null||!xr.has(r))){t=vi(n,t),t=Z_(e,t,1),e=wr(e,t,1),t=pt(),e!==null&&(wa(e,1,t),St(e,t));break}}e=e.return}}function I2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=pt(),t.pingedLanes|=t.suspendedLanes&n,Qe===t&&(Ze&n)===n&&(Ue===4||Ue===3&&(Ze&130023424)===Ze&&500>ke()-tp?as(t,0):ep|=n),St(t,e)}function _1(t,e){e===0&&(t.mode&1?(e=ol,ol<<=1,!(ol&130023424)&&(ol=4194304)):e=1);var n=pt();t=Ln(t,e),t!==null&&(wa(t,e,n),St(t,n))}function S2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),_1(t,n)}function N2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),_1(t,n)}var w1;w1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Tt.current)Et=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Et=!1,f2(t,e,n);Et=!!(t.flags&131072)}else Et=!1,xe&&e.flags&1048576&&I_(e,ou,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;jl(t,e),t=e.pendingProps;var s=pi(e,ut.current);ri(e,n),s=Kf(null,e,r,t,s,n);var i=Qf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,It(r)?(i=!0,su(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Bf(e),s.updater=Xu,e.stateNode=s,s._reactInternals=e,Td(e,r,t,n),e=Nd(null,e,r,!0,i,n)):(e.tag=0,xe&&i&&Of(e),ft(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(jl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=b2(r),t=Kt(r,t),s){case 0:e=Sd(null,e,r,t,n);break e;case 1:e=ey(null,e,r,t,n);break e;case 11:e=Xg(null,e,r,t,n);break e;case 14:e=Zg(null,e,r,Kt(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kt(r,s),Sd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kt(r,s),ey(t,e,r,s,n);case 3:e:{if(r1(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,k_(t,e),uu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=vi(Error(U(423)),e),e=ty(t,e,r,n,s);break e}else if(r!==s){s=vi(Error(U(424)),e),e=ty(t,e,r,n,s);break e}else for(Ct=_r(e.stateNode.containerInfo.firstChild),Dt=e,xe=!0,Yt=null,n=b_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(mi(),r===s){e=Fn(t,e,n);break e}ft(t,e,r,n)}e=e.child}return e;case 5:return C_(e),t===null&&wd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,md(r,s)?o=null:i!==null&&md(r,i)&&(e.flags|=32),n1(t,e),ft(t,e,o,n),e.child;case 6:return t===null&&wd(e),null;case 13:return s1(t,e,n);case 4:return Wf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=gi(e,null,r,n):ft(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kt(r,s),Xg(t,e,r,s,n);case 7:return ft(t,e,e.pendingProps,n),e.child;case 8:return ft(t,e,e.pendingProps.children,n),e.child;case 12:return ft(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ge(au,r._currentValue),r._currentValue=o,i!==null)if(sn(i.value,o)){if(i.children===s.children&&!Tt.current){e=Fn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=jn(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),xd(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),xd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ft(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ri(e,n),s=Wt(s),r=r(s),e.flags|=1,ft(t,e,r,n),e.child;case 14:return r=e.type,s=Kt(r,e.pendingProps),s=Kt(r.type,s),Zg(t,e,r,s,n);case 15:return e1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kt(r,s),jl(t,e),e.tag=1,It(r)?(t=!0,su(e)):t=!1,ri(e,n),J_(e,r,s),Td(e,r,s,n),Nd(null,e,r,!0,t,n);case 19:return i1(t,e,n);case 22:return t1(t,e,n)}throw Error(U(156,e.tag))};function x1(t,e){return Kv(t,e)}function R2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ut(t,e,n,r){return new R2(t,e,n,r)}function ip(t){return t=t.prototype,!(!t||!t.isReactComponent)}function b2(t){if(typeof t=="function")return ip(t)?1:0;if(t!=null){if(t=t.$$typeof,t===If)return 11;if(t===Sf)return 14}return 2}function Tr(t,e){var n=t.alternate;return n===null?(n=Ut(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ml(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")ip(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Us:return ls(n.children,s,i,e);case Tf:o=8,s|=8;break;case Gh:return t=Ut(12,n,e,s|2),t.elementType=Gh,t.lanes=i,t;case Kh:return t=Ut(13,n,e,s),t.elementType=Kh,t.lanes=i,t;case Qh:return t=Ut(19,n,e,s),t.elementType=Qh,t.lanes=i,t;case Cv:return tc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Av:o=10;break e;case kv:o=9;break e;case If:o=11;break e;case Sf:o=14;break e;case ir:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Ut(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ls(t,e,n,r){return t=Ut(7,t,r,e),t.lanes=n,t}function tc(t,e,n,r){return t=Ut(22,t,r,e),t.elementType=Cv,t.lanes=n,t.stateNode={isHidden:!1},t}function Eh(t,e,n){return t=Ut(6,t,null,e),t.lanes=n,t}function Th(t,e,n){return e=Ut(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function A2(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rh(0),this.expirationTimes=rh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function op(t,e,n,r,s,i,o,l,u){return t=new A2(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ut(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bf(i),t}function k2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function E1(t){if(!t)return Pr;t=t._reactInternals;e:{if(Is(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(It(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(It(n))return E_(t,n,e)}return e}function T1(t,e,n,r,s,i,o,l,u){return t=op(n,r,!0,t,s,i,o,l,u),t.context=E1(null),n=t.current,r=pt(),s=Er(n),i=jn(r,s),i.callback=e??null,wr(n,i,s),t.current.lanes=s,wa(t,s,r),St(t,r),t}function nc(t,e,n,r){var s=e.current,i=pt(),o=Er(s);return n=E1(n),e.context===null?e.context=n:e.pendingContext=n,e=jn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=wr(s,e,o),t!==null&&(tn(t,s,o,i),Cl(t,s,o)),o}function yu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function hy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ap(t,e){hy(t,e),(t=t.alternate)&&hy(t,e)}function C2(){return null}var I1=typeof reportError=="function"?reportError:function(t){console.error(t)};function lp(t){this._internalRoot=t}rc.prototype.render=lp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));nc(t,e,null,null)};rc.prototype.unmount=lp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ms(function(){nc(null,t,null,null)}),e[Mn]=null}};function rc(t){this._internalRoot=t}rc.prototype.unstable_scheduleHydration=function(t){if(t){var e=t_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ar.length&&e!==0&&e<ar[n].priority;n++);ar.splice(n,0,t),n===0&&r_(t)}};function up(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function sc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function dy(){}function P2(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=yu(o);i.call(c)}}var o=T1(e,r,t,0,null,!1,!1,"",dy);return t._reactRootContainer=o,t[Mn]=o.current,Yo(t.nodeType===8?t.parentNode:t),ms(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var c=yu(u);l.call(c)}}var u=op(t,0,!1,null,null,!1,!1,"",dy);return t._reactRootContainer=u,t[Mn]=u.current,Yo(t.nodeType===8?t.parentNode:t),ms(function(){nc(e,u,n,r)}),u}function ic(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=yu(o);l.call(u)}}nc(e,o,t,s)}else o=P2(n,e,t,s,r);return yu(o)}Zv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=vo(e.pendingLanes);n!==0&&(bf(e,n|1),St(e,ke()),!(ue&6)&&(_i=ke()+500,$r()))}break;case 13:ms(function(){var r=Ln(t,1);if(r!==null){var s=pt();tn(r,t,1,s)}}),ap(t,1)}};Af=function(t){if(t.tag===13){var e=Ln(t,134217728);if(e!==null){var n=pt();tn(e,t,134217728,n)}ap(t,134217728)}};e_=function(t){if(t.tag===13){var e=Er(t),n=Ln(t,e);if(n!==null){var r=pt();tn(n,t,e,r)}ap(t,e)}};t_=function(){return he};n_=function(t,e){var n=he;try{return he=t,e()}finally{he=n}};id=function(t,e,n){switch(e){case"input":if(Xh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Qu(r);if(!s)throw Error(U(90));Dv(r),Xh(r,s)}}}break;case"textarea":Vv(t,n);break;case"select":e=n.value,e!=null&&Zs(t,!!n.multiple,e,!1)}};$v=np;Bv=ms;var D2={usingClientEntryPoint:!1,Events:[Ea,Ws,Qu,Uv,zv,np]},po={findFiberByHostInstance:ns,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},j2={bundleType:po.bundleType,version:po.version,rendererPackageName:po.rendererPackageName,rendererConfig:po.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=qv(t),t===null?null:t.stateNode},findFiberByHostInstance:po.findFiberByHostInstance||C2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yl.isDisabled&&yl.supportsFiber)try{Hu=yl.inject(j2),pn=yl}catch{}}Vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D2;Vt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!up(e))throw Error(U(200));return k2(t,e,null,n)};Vt.createRoot=function(t,e){if(!up(t))throw Error(U(299));var n=!1,r="",s=I1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=op(t,1,!1,null,null,n,!1,r,s),t[Mn]=e.current,Yo(t.nodeType===8?t.parentNode:t),new lp(e)};Vt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=qv(e),t=t===null?null:t.stateNode,t};Vt.flushSync=function(t){return ms(t)};Vt.hydrate=function(t,e,n){if(!sc(e))throw Error(U(200));return ic(null,t,e,!0,n)};Vt.hydrateRoot=function(t,e,n){if(!up(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=I1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=T1(e,null,t,1,n??null,s,!1,i,o),t[Mn]=e.current,Yo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new rc(e)};Vt.render=function(t,e,n){if(!sc(e))throw Error(U(200));return ic(null,t,e,!1,n)};Vt.unmountComponentAtNode=function(t){if(!sc(t))throw Error(U(40));return t._reactRootContainer?(ms(function(){ic(null,null,t,!1,function(){t._reactRootContainer=null,t[Mn]=null})}),!0):!1};Vt.unstable_batchedUpdates=np;Vt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!sc(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return ic(t,e,n,!1,r)};Vt.version="18.3.1-next-f1338f8080-20240426";function S1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(S1)}catch(t){console.error(t)}}S1(),Sv.exports=Vt;var V2=Sv.exports,fy=V2;Hh.createRoot=fy.createRoot,Hh.hydrateRoot=fy.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ia(){return ia=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ia.apply(this,arguments)}var pr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(pr||(pr={}));const py="popstate";function O2(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return Ld("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:vu(s)}return L2(e,n,null,t)}function Pe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function cp(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function M2(){return Math.random().toString(36).substr(2,8)}function my(t,e){return{usr:t.state,key:t.key,idx:e}}function Ld(t,e,n,r){return n===void 0&&(n=null),ia({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Pi(e):e,{state:n,key:e&&e.key||r||M2()})}function vu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Pi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function L2(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=pr.Pop,u=null,c=d();c==null&&(c=0,o.replaceState(ia({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function p(){l=pr.Pop;let N=d(),_=N==null?null:N-c;c=N,u&&u({action:l,location:k.location,delta:_})}function g(N,_){l=pr.Push;let y=Ld(k.location,N,_);c=d()+1;let x=my(y,c),C=k.createHref(y);try{o.pushState(x,"",C)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;s.location.assign(C)}i&&u&&u({action:l,location:k.location,delta:1})}function T(N,_){l=pr.Replace;let y=Ld(k.location,N,_);c=d();let x=my(y,c),C=k.createHref(y);o.replaceState(x,"",C),i&&u&&u({action:l,location:k.location,delta:0})}function b(N){let _=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof N=="string"?N:vu(N);return y=y.replace(/ $/,"%20"),Pe(_,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,_)}let k={get action(){return l},get location(){return t(s,o)},listen(N){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(py,p),u=N,()=>{s.removeEventListener(py,p),u=null}},createHref(N){return e(s,N)},createURL:b,encodeLocation(N){let _=b(N);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:g,replace:T,go(N){return o.go(N)}};return k}var gy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(gy||(gy={}));function F2(t,e,n){return n===void 0&&(n="/"),U2(t,e,n)}function U2(t,e,n,r){let s=typeof e=="string"?Pi(e):e,i=hp(s.pathname||"/",n);if(i==null)return null;let o=N1(t);z2(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let c=Z2(i);l=Y2(o[u],c)}return l}function N1(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Pe(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=Ir([r,u.relativePath]),d=n.concat(u);i.children&&i.children.length>0&&(Pe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),N1(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:K2(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let u of R1(i.path))s(i,o,u)}),e}function R1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=R1(r.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function z2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Q2(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const $2=/^:[\w-]+$/,B2=3,W2=2,H2=1,q2=10,G2=-2,yy=t=>t==="*";function K2(t,e){let n=t.split("/"),r=n.length;return n.some(yy)&&(r+=G2),e&&(r+=W2),n.filter(s=>!yy(s)).reduce((s,i)=>s+($2.test(i)?B2:i===""?H2:q2),r)}function Q2(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Y2(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],c=l===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",p=J2({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},d),g=u.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:Ir([i,p.pathname]),pathnameBase:sS(Ir([i,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(i=Ir([i,p.pathnameBase]))}return o}function J2(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=X2(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((c,d,p)=>{let{paramName:g,isOptional:T}=d;if(g==="*"){let k=l[p]||"";o=i.slice(0,i.length-k.length).replace(/(.)\/+$/,"$1")}const b=l[p];return T&&!b?c[g]=void 0:c[g]=(b||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function X2(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),cp(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Z2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cp(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function hp(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const eS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tS=t=>eS.test(t);function nS(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Pi(t):t,i;if(n)if(tS(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),cp(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=vy(n.substring(1),"/"):i=vy(n,e)}else i=e;return{pathname:i,search:iS(r),hash:oS(s)}}function vy(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Ih(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function rS(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function dp(t,e){let n=rS(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function fp(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Pi(t):(s=ia({},t),Pe(!s.pathname||!s.pathname.includes("?"),Ih("?","pathname","search",s)),Pe(!s.pathname||!s.pathname.includes("#"),Ih("#","pathname","hash",s)),Pe(!s.search||!s.search.includes("#"),Ih("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}l=p>=0?e[p]:"/"}let u=nS(s,l),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||d)&&(u.pathname+="/"),u}const Ir=t=>t.join("/").replace(/\/\/+/g,"/"),sS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),iS=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,oS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function aS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const b1=["post","put","patch","delete"];new Set(b1);const lS=["get",...b1];new Set(lS);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function oa(){return oa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oa.apply(this,arguments)}const pp=L.createContext(null),uS=L.createContext(null),Br=L.createContext(null),oc=L.createContext(null),Gn=L.createContext({outlet:null,matches:[],isDataRoute:!1}),A1=L.createContext(null);function cS(t,e){let{relative:n}=e===void 0?{}:e;Di()||Pe(!1);let{basename:r,navigator:s}=L.useContext(Br),{hash:i,pathname:o,search:l}=P1(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Ir([r,o])),s.createHref({pathname:u,search:l,hash:i})}function Di(){return L.useContext(oc)!=null}function ji(){return Di()||Pe(!1),L.useContext(oc).location}function k1(t){L.useContext(Br).static||L.useLayoutEffect(t)}function C1(){let{isDataRoute:t}=L.useContext(Gn);return t?IS():hS()}function hS(){Di()||Pe(!1);let t=L.useContext(pp),{basename:e,future:n,navigator:r}=L.useContext(Br),{matches:s}=L.useContext(Gn),{pathname:i}=ji(),o=JSON.stringify(dp(s,n.v7_relativeSplatPath)),l=L.useRef(!1);return k1(()=>{l.current=!0}),L.useCallback(function(c,d){if(d===void 0&&(d={}),!l.current)return;if(typeof c=="number"){r.go(c);return}let p=fp(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Ir([e,p.pathname])),(d.replace?r.replace:r.push)(p,d.state,d)},[e,r,o,i,t])}function dS(){let{matches:t}=L.useContext(Gn),e=t[t.length-1];return e?e.params:{}}function P1(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=L.useContext(Br),{matches:s}=L.useContext(Gn),{pathname:i}=ji(),o=JSON.stringify(dp(s,r.v7_relativeSplatPath));return L.useMemo(()=>fp(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function fS(t,e){return pS(t,e)}function pS(t,e,n,r){Di()||Pe(!1);let{navigator:s}=L.useContext(Br),{matches:i}=L.useContext(Gn),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=ji(),d;if(e){var p;let N=typeof e=="string"?Pi(e):e;u==="/"||(p=N.pathname)!=null&&p.startsWith(u)||Pe(!1),d=N}else d=c;let g=d.pathname||"/",T=g;if(u!=="/"){let N=u.replace(/^\//,"").split("/");T="/"+g.replace(/^\//,"").split("/").slice(N.length).join("/")}let b=F2(t,{pathname:T}),k=_S(b&&b.map(N=>Object.assign({},N,{params:Object.assign({},l,N.params),pathname:Ir([u,s.encodeLocation?s.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?u:Ir([u,s.encodeLocation?s.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),i,n,r);return e&&k?L.createElement(oc.Provider,{value:{location:oa({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:pr.Pop}},k):k}function mS(){let t=TS(),e=aS(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),n?L.createElement("pre",{style:s},n):null,null)}const gS=L.createElement(mS,null);class yS extends L.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?L.createElement(Gn.Provider,{value:this.props.routeContext},L.createElement(A1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function vS(t){let{routeContext:e,match:n,children:r}=t,s=L.useContext(pp);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),L.createElement(Gn.Provider,{value:e},r)}function _S(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);d>=0||Pe(!1),o=o.slice(0,Math.min(o.length,d+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let p=o[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=d),p.route.id){let{loaderData:g,errors:T}=n,b=p.route.loader&&g[p.route.id]===void 0&&(!T||T[p.route.id]===void 0);if(p.route.lazy||b){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,p,g)=>{let T,b=!1,k=null,N=null;n&&(T=l&&p.route.id?l[p.route.id]:void 0,k=p.route.errorElement||gS,u&&(c<0&&g===0?(SS("route-fallback"),b=!0,N=null):c===g&&(b=!0,N=p.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,g+1)),y=()=>{let x;return T?x=k:b?x=N:p.route.Component?x=L.createElement(p.route.Component,null):p.route.element?x=p.route.element:x=d,L.createElement(vS,{match:p,routeContext:{outlet:d,matches:_,isDataRoute:n!=null},children:x})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?L.createElement(yS,{location:n.location,revalidation:n.revalidation,component:k,error:T,children:y(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):y()},null)}var D1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(D1||{}),j1=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(j1||{});function wS(t){let e=L.useContext(pp);return e||Pe(!1),e}function xS(t){let e=L.useContext(uS);return e||Pe(!1),e}function ES(t){let e=L.useContext(Gn);return e||Pe(!1),e}function V1(t){let e=ES(),n=e.matches[e.matches.length-1];return n.route.id||Pe(!1),n.route.id}function TS(){var t;let e=L.useContext(A1),n=xS(),r=V1();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function IS(){let{router:t}=wS(D1.UseNavigateStable),e=V1(j1.UseNavigateStable),n=L.useRef(!1);return k1(()=>{n.current=!0}),L.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,oa({fromRouteId:e},i)))},[t,e])}const _y={};function SS(t,e,n){_y[t]||(_y[t]=!0)}function NS(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function O1(t){let{to:e,replace:n,state:r,relative:s}=t;Di()||Pe(!1);let{future:i,static:o}=L.useContext(Br),{matches:l}=L.useContext(Gn),{pathname:u}=ji(),c=C1(),d=fp(e,dp(l,i.v7_relativeSplatPath),u,s==="path"),p=JSON.stringify(d);return L.useEffect(()=>c(JSON.parse(p),{replace:n,state:r,relative:s}),[c,p,s,n,r]),null}function Nn(t){Pe(!1)}function RS(t){let{basename:e="/",children:n=null,location:r,navigationType:s=pr.Pop,navigator:i,static:o=!1,future:l}=t;Di()&&Pe(!1);let u=e.replace(/^\/*/,"/"),c=L.useMemo(()=>({basename:u,navigator:i,static:o,future:oa({v7_relativeSplatPath:!1},l)}),[u,l,i,o]);typeof r=="string"&&(r=Pi(r));let{pathname:d="/",search:p="",hash:g="",state:T=null,key:b="default"}=r,k=L.useMemo(()=>{let N=hp(d,u);return N==null?null:{location:{pathname:N,search:p,hash:g,state:T,key:b},navigationType:s}},[u,d,p,g,T,b,s]);return k==null?null:L.createElement(Br.Provider,{value:c},L.createElement(oc.Provider,{children:n,value:k}))}function bS(t){let{children:e,location:n}=t;return fS(Fd(e),n)}new Promise(()=>{});function Fd(t,e){e===void 0&&(e=[]);let n=[];return L.Children.forEach(t,(r,s)=>{if(!L.isValidElement(r))return;let i=[...e,s];if(r.type===L.Fragment){n.push.apply(n,Fd(r.props.children,i));return}r.type!==Nn&&Pe(!1),!r.props.index||!r.props.children||Pe(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Fd(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ud(){return Ud=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ud.apply(this,arguments)}function AS(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function kS(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function CS(t,e){return t.button===0&&(!e||e==="_self")&&!kS(t)}const PS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],DS="6";try{window.__reactRouterVersion=DS}catch{}const jS="startTransition",wy=IT[jS];function VS(t){let{basename:e,children:n,future:r,window:s}=t,i=L.useRef();i.current==null&&(i.current=O2({window:s,v5Compat:!0}));let o=i.current,[l,u]=L.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=L.useCallback(p=>{c&&wy?wy(()=>u(p)):u(p)},[u,c]);return L.useLayoutEffect(()=>o.listen(d),[o,d]),L.useEffect(()=>NS(r),[r]),L.createElement(RS,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const OS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",MS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,M1=L.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:u,to:c,preventScrollReset:d,viewTransition:p}=e,g=AS(e,PS),{basename:T}=L.useContext(Br),b,k=!1;if(typeof c=="string"&&MS.test(c)&&(b=c,OS))try{let x=new URL(window.location.href),C=c.startsWith("//")?new URL(x.protocol+c):new URL(c),V=hp(C.pathname,T);C.origin===x.origin&&V!=null?c=V+C.search+C.hash:k=!0}catch{}let N=cS(c,{relative:s}),_=LS(c,{replace:o,state:l,target:u,preventScrollReset:d,relative:s,viewTransition:p});function y(x){r&&r(x),x.defaultPrevented||_(x)}return L.createElement("a",Ud({},g,{href:b||N,onClick:k||i?r:y,ref:n,target:u}))});var xy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(xy||(xy={}));var Ey;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ey||(Ey={}));function LS(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,u=C1(),c=ji(),d=P1(t,{relative:o});return L.useCallback(p=>{if(CS(p,n)){p.preventDefault();let g=r!==void 0?r:vu(c)===vu(d);u(t,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[c,u,d,r,s,n,t,i,o,l])}const FS=()=>{};var Ty={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},US=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},F1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,c=u?t[s+2]:0,d=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|c>>6,T=c&63;u||(T=64,o||(g=64)),r.push(n[d],n[p],n[g],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(L1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):US(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||c==null||p==null)throw new zS;const g=i<<2|l>>4;if(r.push(g),c!==64){const T=l<<4&240|c>>2;if(r.push(T),p!==64){const b=c<<6&192|p;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class zS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $S=function(t){const e=L1(t);return F1.encodeByteArray(e,!0)},_u=function(t){return $S(t).replace(/\./g,"")},U1=function(t){try{return F1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS=()=>BS().__FIREBASE_DEFAULTS__,HS=()=>{if(typeof process>"u"||typeof Ty>"u")return;const t=Ty.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&U1(t[1]);return e&&JSON.parse(e)},ac=()=>{try{return FS()||WS()||HS()||qS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},z1=t=>{var e,n;return(n=(e=ac())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},$1=t=>{const e=z1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},B1=()=>{var t;return(t=ac())==null?void 0:t.config},W1=t=>{var e;return(e=ac())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function mp(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[_u(JSON.stringify(n)),_u(JSON.stringify(o)),""].join(".")}const Po={};function KS(){const t={prod:[],emulator:[]};for(const e of Object.keys(Po))Po[e]?t.emulator.push(e):t.prod.push(e);return t}function QS(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Iy=!1;function gp(t,e){if(typeof window>"u"||typeof document>"u"||!Ss(window.location.host)||Po[t]===e||Po[t]||Iy)return;Po[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=KS().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,T){g.setAttribute("width","24"),g.setAttribute("id",T),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function c(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Iy=!0,o()},g}function d(g,T){g.setAttribute("id",T),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=QS(r),T=n("text"),b=document.getElementById(T)||document.createElement("span"),k=n("learnmore"),N=document.getElementById(k)||document.createElement("a"),_=n("preprendIcon"),y=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const x=g.element;l(x),d(N,k);const C=c();u(y,_),x.append(y,b,N,C),document.body.appendChild(x)}i?(b.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ct())}function JS(){var e;const t=(e=ac())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function eN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tN(){const t=ct();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function nN(){return!JS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rN(){try{return typeof indexedDB=="object"}catch{return!1}}function sN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN="FirebaseError";class In extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=iN,Object.setPrototypeOf(this,In.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ia.prototype.create)}}class Ia{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?oN(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new In(s,l,r)}}function oN(t,e){return t.replace(aN,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const aN=/\{\$([^}]+)}/g;function lN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function gs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Sy(i)&&Sy(o)){if(!gs(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Sy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function uN(t,e){const n=new cN(t,e);return n.subscribe.bind(n)}class cN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");hN(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Sh),s.error===void 0&&(s.error=Sh),s.complete===void 0&&(s.complete=Sh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Sh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(t){return t&&t._delegate?t._delegate:t}class Dr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new GS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pN(e))try{this.getOrInitializeService({instanceIdentifier:ts})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ts){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ts){return this.instances.has(e)}getOptions(e=ts){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:fN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ts){return this.component?this.component.multipleInstances?e:ts:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fN(t){return t===ts?void 0:t}function pN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new dN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(re||(re={}));const gN={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},yN=re.INFO,vN={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},_N=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=vN[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yp{constructor(e){this.name=e,this._logLevel=yN,this._logHandler=_N,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...e),this._logHandler(this,re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...e),this._logHandler(this,re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,re.INFO,...e),this._logHandler(this,re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,re.WARN,...e),this._logHandler(this,re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...e),this._logHandler(this,re.ERROR,...e)}}const wN=(t,e)=>e.some(n=>t instanceof n);let Ny,Ry;function xN(){return Ny||(Ny=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function EN(){return Ry||(Ry=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const q1=new WeakMap,zd=new WeakMap,G1=new WeakMap,Nh=new WeakMap,vp=new WeakMap;function TN(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Sr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&q1.set(n,t)}).catch(()=>{}),vp.set(e,t),e}function IN(t){if(zd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});zd.set(t,e)}let $d={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return zd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||G1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Sr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function SN(t){$d=t($d)}function NN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Rh(this),e,...n);return G1.set(r,e.sort?e.sort():[e]),Sr(r)}:EN().includes(t)?function(...e){return t.apply(Rh(this),e),Sr(q1.get(this))}:function(...e){return Sr(t.apply(Rh(this),e))}}function RN(t){return typeof t=="function"?NN(t):(t instanceof IDBTransaction&&IN(t),wN(t,xN())?new Proxy(t,$d):t)}function Sr(t){if(t instanceof IDBRequest)return TN(t);if(Nh.has(t))return Nh.get(t);const e=RN(t);return e!==t&&(Nh.set(t,e),vp.set(e,t)),e}const Rh=t=>vp.get(t);function bN(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Sr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Sr(o.result),u.oldVersion,u.newVersion,Sr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const AN=["get","getKey","getAll","getAllKeys","count"],kN=["put","add","delete","clear"],bh=new Map;function by(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bh.get(e))return bh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=kN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||AN.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),s&&u.done]))[0]};return bh.set(e,i),i}SN(t=>({...t,get:(e,n,r)=>by(e,n)||t.get(e,n,r),has:(e,n)=>!!by(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(PN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function PN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bd="@firebase/app",Ay="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un=new yp("@firebase/app"),DN="@firebase/app-compat",jN="@firebase/analytics-compat",VN="@firebase/analytics",ON="@firebase/app-check-compat",MN="@firebase/app-check",LN="@firebase/auth",FN="@firebase/auth-compat",UN="@firebase/database",zN="@firebase/data-connect",$N="@firebase/database-compat",BN="@firebase/functions",WN="@firebase/functions-compat",HN="@firebase/installations",qN="@firebase/installations-compat",GN="@firebase/messaging",KN="@firebase/messaging-compat",QN="@firebase/performance",YN="@firebase/performance-compat",JN="@firebase/remote-config",XN="@firebase/remote-config-compat",ZN="@firebase/storage",eR="@firebase/storage-compat",tR="@firebase/firestore",nR="@firebase/ai",rR="@firebase/firestore-compat",sR="firebase",iR="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd="[DEFAULT]",oR={[Bd]:"fire-core",[DN]:"fire-core-compat",[VN]:"fire-analytics",[jN]:"fire-analytics-compat",[MN]:"fire-app-check",[ON]:"fire-app-check-compat",[LN]:"fire-auth",[FN]:"fire-auth-compat",[UN]:"fire-rtdb",[zN]:"fire-data-connect",[$N]:"fire-rtdb-compat",[BN]:"fire-fn",[WN]:"fire-fn-compat",[HN]:"fire-iid",[qN]:"fire-iid-compat",[GN]:"fire-fcm",[KN]:"fire-fcm-compat",[QN]:"fire-perf",[YN]:"fire-perf-compat",[JN]:"fire-rc",[XN]:"fire-rc-compat",[ZN]:"fire-gcs",[eR]:"fire-gcs-compat",[tR]:"fire-fst",[rR]:"fire-fst-compat",[nR]:"fire-vertex","fire-js":"fire-js",[sR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu=new Map,aR=new Map,Hd=new Map;function ky(t,e){try{t.container.addComponent(e)}catch(n){Un.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ys(t){const e=t.name;if(Hd.has(e))return Un.debug(`There were multiple attempts to register component ${e}.`),!1;Hd.set(e,t);for(const n of wu.values())ky(n,t);for(const n of aR.values())ky(n,t);return!0}function lc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ft(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nr=new Ia("app","Firebase",lR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Dr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns=iR;function K1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Wd,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Nr.create("bad-app-name",{appName:String(s)});if(n||(n=B1()),!n)throw Nr.create("no-options");const i=wu.get(s);if(i){if(gs(n,i.options)&&gs(r,i.config))return i;throw Nr.create("duplicate-app",{appName:s})}const o=new mN(s);for(const u of Hd.values())o.addComponent(u);const l=new uR(n,r,o);return wu.set(s,l),l}function _p(t=Wd){const e=wu.get(t);if(!e&&t===Wd&&B1())return K1();if(!e)throw Nr.create("no-app",{appName:t});return e}function gn(t,e,n){let r=oR[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Un.warn(o.join(" "));return}ys(new Dr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR="firebase-heartbeat-database",hR=1,aa="firebase-heartbeat-store";let Ah=null;function Q1(){return Ah||(Ah=bN(cR,hR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(aa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Nr.create("idb-open",{originalErrorMessage:t.message})})),Ah}async function dR(t){try{const n=(await Q1()).transaction(aa),r=await n.objectStore(aa).get(Y1(t));return await n.done,r}catch(e){if(e instanceof In)Un.warn(e.message);else{const n=Nr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Un.warn(n.message)}}}async function Cy(t,e){try{const r=(await Q1()).transaction(aa,"readwrite");await r.objectStore(aa).put(e,Y1(t)),await r.done}catch(n){if(n instanceof In)Un.warn(n.message);else{const r=Nr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Un.warn(r.message)}}}function Y1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=1024,pR=30;class mR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new yR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Py();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>pR){const o=vR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Un.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Py(),{heartbeatsToSend:r,unsentEntries:s}=gR(this._heartbeatsCache.heartbeats),i=_u(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Un.warn(n),""}}}function Py(){return new Date().toISOString().substring(0,10)}function gR(t,e=fR){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Dy(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Dy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class yR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rN()?sN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await dR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Cy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Cy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Dy(t){return _u(JSON.stringify({version:2,heartbeats:t})).length}function vR(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(t){ys(new Dr("platform-logger",e=>new CN(e),"PRIVATE")),ys(new Dr("heartbeat",e=>new mR(e),"PRIVATE")),gn(Bd,Ay,t),gn(Bd,Ay,"esm2020"),gn("fire-js","")}_R("");function J1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wR=J1,X1=new Ia("auth","Firebase",J1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xu=new yp("@firebase/auth");function xR(t,...e){xu.logLevel<=re.WARN&&xu.warn(`Auth (${Ns}): ${t}`,...e)}function Ll(t,...e){xu.logLevel<=re.ERROR&&xu.error(`Auth (${Ns}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(t,...e){throw xp(t,...e)}function nn(t,...e){return xp(t,...e)}function wp(t,e,n){const r={...wR(),[e]:n};return new Ia("auth","Firebase",r).create(e,{appName:t.name})}function us(t){return wp(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ER(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&wn(t,"argument-error"),wp(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function xp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return X1.create(t,...e)}function J(t,e,...n){if(!t)throw xp(e,...n)}function Pn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ll(e),new Error(e)}function zn(t,e){t||Pn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function TR(){return jy()==="http:"||jy()==="https:"}function jy(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(TR()||ZS()||"connection"in navigator)?navigator.onLine:!0}function SR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,n){this.shortDelay=e,this.longDelay=n,zn(n>e,"Short delay should be less than long delay!"),this.isMobile=YS()||eN()}get(){return IR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(t,e){zn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bR=new Na(3e4,6e4);function Tp(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Vi(t,e,n,r,s={}){return ew(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Sa({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:u,...i};return XS()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Ss(t.emulatorConfig.host)&&(c.credentials="include"),Z1.fetch()(await tw(t,t.config.apiHost,n,l),c)})}async function ew(t,e,n){t._canInitEmulator=!1;const r={...NR,...e};try{const s=new kR(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw vl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw vl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw vl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw vl(t,"user-disabled",o);const d=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw wp(t,d,c);wn(t,d)}}catch(s){if(s instanceof In)throw s;wn(t,"network-request-failed",{message:String(s)})}}async function AR(t,e,n,r,s={}){const i=await Vi(t,e,n,r,s);return"mfaPendingCredential"in i&&wn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function tw(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Ep(t.config,s):`${t.config.apiScheme}://${s}`;return RR.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class kR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(nn(this.auth,"network-request-failed")),bR.get())})}}function vl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=nn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CR(t,e){return Vi(t,"POST","/v1/accounts:delete",e)}async function Eu(t,e){return Vi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Do(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function PR(t,e=!1){const n=De(t),r=await n.getIdToken(e),s=Ip(r);J(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Do(kh(s.auth_time)),issuedAtTime:Do(kh(s.iat)),expirationTime:Do(kh(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function kh(t){return Number(t)*1e3}function Ip(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ll("JWT malformed, contained fewer than 3 sections"),null;try{const s=U1(n);return s?JSON.parse(s):(Ll("Failed to decode base64 JWT payload"),null)}catch(s){return Ll("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Vy(t){const e=Ip(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function la(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof In&&DR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function DR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Do(this.lastLoginAt),this.creationTime=Do(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tu(t){var p;const e=t.auth,n=await t.getIdToken(),r=await la(t,Eu(e,{idToken:n}));J(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(p=s.providerUserInfo)!=null&&p.length?nw(s.providerUserInfo):[],o=OR(t.providerData,i),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Gd(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function VR(t){const e=De(t);await Tu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function OR(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function nw(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MR(t,e){const n=await ew(t,{},async()=>{const r=Sa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await tw(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:r};return t.emulatorConfig&&Ss(t.emulatorConfig.host)&&(u.credentials="include"),Z1.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function LR(t,e){return Vi(t,"POST","/v2/accounts:revokeToken",Tp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Vy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");const n=Vy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await MR(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ii;return r&&(J(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(J(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(J(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ii,this.toJSON())}_performRefresh(){return Pn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Xt{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new jR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Gd(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await la(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return PR(this,e)}reload(){return VR(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xt({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Tu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ft(this.auth.app))return Promise.reject(us(this.auth));const e=await this.getIdToken();return await la(this,CR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,c=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:T,providerData:b,stsTokenManager:k}=n;J(p&&k,e,"internal-error");const N=ii.fromJSON(this.name,k);J(typeof p=="string",e,"internal-error"),sr(r,e.name),sr(s,e.name),J(typeof g=="boolean",e,"internal-error"),J(typeof T=="boolean",e,"internal-error"),sr(i,e.name),sr(o,e.name),sr(l,e.name),sr(u,e.name),sr(c,e.name),sr(d,e.name);const _=new Xt({uid:p,auth:e,email:s,emailVerified:g,displayName:r,isAnonymous:T,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:N,createdAt:c,lastLoginAt:d});return b&&Array.isArray(b)&&(_.providerData=b.map(y=>({...y}))),u&&(_._redirectEventId=u),_}static async _fromIdTokenResponse(e,n,r=!1){const s=new ii;s.updateFromServerResponse(n);const i=new Xt({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Tu(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];J(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?nw(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new ii;l.updateFromIdToken(r);const u=new Xt({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Gd(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy=new Map;function Dn(t){zn(t instanceof Function,"Expected a class definition");let e=Oy.get(t);return e?(zn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Oy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}rw.type="NONE";const My=rw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(t,e,n){return`firebase:${t}:${e}:${n}`}class oi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Fl(this.userKey,s.apiKey,i),this.fullPersistenceKey=Fl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Eu(this.auth,{idToken:e}).catch(()=>{});return n?Xt._fromGetAccountInfoResponse(this.auth,n,e):null}return Xt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new oi(Dn(My),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Dn(My);const o=Fl(r,e.config.apiKey,e.name);let l=null;for(const c of n)try{const d=await c._get(o);if(d){let p;if(typeof d=="string"){const g=await Eu(e,{idToken:d}).catch(()=>{});if(!g)break;p=await Xt._fromGetAccountInfoResponse(e,g,d)}else p=Xt._fromJSON(e,d);c!==i&&(l=p),i=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new oi(i,e,r):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new oi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(aw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uw(e))return"Blackberry";if(cw(e))return"Webos";if(iw(e))return"Safari";if((e.includes("chrome/")||ow(e))&&!e.includes("edge/"))return"Chrome";if(lw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function sw(t=ct()){return/firefox\//i.test(t)}function iw(t=ct()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ow(t=ct()){return/crios\//i.test(t)}function aw(t=ct()){return/iemobile/i.test(t)}function lw(t=ct()){return/android/i.test(t)}function uw(t=ct()){return/blackberry/i.test(t)}function cw(t=ct()){return/webos/i.test(t)}function Sp(t=ct()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function FR(t=ct()){var e;return Sp(t)&&!!((e=window.navigator)!=null&&e.standalone)}function UR(){return tN()&&document.documentMode===10}function hw(t=ct()){return Sp(t)||lw(t)||cw(t)||uw(t)||/windows phone/i.test(t)||aw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(t,e=[]){let n;switch(t){case"Browser":n=Ly(ct());break;case"Worker":n=`${Ly(ct())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ns}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $R(t,e={}){return Vi(t,"GET","/v2/passwordPolicy",Tp(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=6;class WR{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??BR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fy(this),this.idTokenSubscription=new Fy(this),this.beforeStateQueue=new zR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=X1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Dn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await oi.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Eu(this,{idToken:e}),r=await Xt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Ft(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Tu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ft(this.app))return Promise.reject(us(this));const n=e?De(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ft(this.app)?Promise.reject(us(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ft(this.app)?Promise.reject(us(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Dn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $R(this),n=new WR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ia("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await LR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Dn(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await oi.create(this,[Dn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Ft(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&xR(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function uc(t){return De(t)}class Fy{constructor(e){this.auth=e,this.observer=null,this.addObserver=uN(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Np={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qR(t){Np=t}function GR(t){return Np.loadJS(t)}function KR(){return Np.gapiScript}function QR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(t,e){const n=lc(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(gs(i,e??{}))return s;wn(s,"already-initialized")}return n.initialize({options:e})}function JR(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Dn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function XR(t,e,n){const r=uc(t);J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=fw(e),{host:o,port:l}=ZR(e),u=l===null?"":`:${l}`,c={url:`${i}//${o}${u}/`},d=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){J(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),J(gs(c,r.config.emulator)&&gs(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Ss(o)?(mp(`${i}//${o}${u}`),gp("Auth",!0)):eb()}function fw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ZR(t){const e=fw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Uy(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Uy(o)}}}function Uy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function eb(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Pn("not implemented")}_getIdTokenResponse(e){return Pn("not implemented")}_linkToIdToken(e,n){return Pn("not implemented")}_getReauthenticationResolver(e){return Pn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ai(t,e){return AR(t,"POST","/v1/accounts:signInWithIdp",Tp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb="http://localhost";class vs extends pw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new vs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):wn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new vs(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ai(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ai(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ai(e,n)}buildRequest(){const e={requestUri:tb,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Sa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra extends Rp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends Ra{constructor(){super("facebook.com")}static credential(e){return vs._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ur.credential(e.oauthAccessToken)}catch{return null}}}ur.FACEBOOK_SIGN_IN_METHOD="facebook.com";ur.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An extends Ra{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return vs._fromParams({providerId:An.PROVIDER_ID,signInMethod:An.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return An.credentialFromTaggedObject(e)}static credentialFromError(e){return An.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return An.credential(n,r)}catch{return null}}}An.GOOGLE_SIGN_IN_METHOD="google.com";An.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends Ra{constructor(){super("github.com")}static credential(e){return vs._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cr.credential(e.oauthAccessToken)}catch{return null}}}cr.GITHUB_SIGN_IN_METHOD="github.com";cr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends Ra{constructor(){super("twitter.com")}static credential(e,n){return vs._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return hr.credential(n,r)}catch{return null}}}hr.TWITTER_SIGN_IN_METHOD="twitter.com";hr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Xt._fromIdTokenResponse(e,r,s),o=zy(r);return new wi({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=zy(r);return new wi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function zy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu extends In{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Iu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Iu(e,n,r,s)}}function mw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Iu._fromErrorAndOperation(t,i,e,r):i})}async function nb(t,e,n=!1){const r=await la(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return wi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rb(t,e,n=!1){const{auth:r}=t;if(Ft(r.app))return Promise.reject(us(r));const s="reauthenticate";try{const i=await la(t,mw(r,s,e,t),n);J(i.idToken,r,"internal-error");const o=Ip(i.idToken);J(o,r,"internal-error");const{sub:l}=o;return J(t.uid===l,r,"user-mismatch"),wi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&wn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sb(t,e,n=!1){if(Ft(t.app))return Promise.reject(us(t));const r="signIn",s=await mw(t,r,e),i=await wi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function ib(t,e,n,r){return De(t).onIdTokenChanged(e,n,r)}function ob(t,e,n){return De(t).beforeAuthStateChanged(e,n)}function gw(t,e,n,r){return De(t).onAuthStateChanged(e,n,r)}function yw(t){return De(t).signOut()}const Su="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Su,"1"),this.storage.removeItem(Su),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab=1e3,lb=10;class _w extends vw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);UR()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,lb):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},ab)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}_w.type="LOCAL";const ub=_w;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww extends vw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ww.type="SESSION";const xw=ww;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new cc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async c=>c(n.origin,i)),u=await cb(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const c=bp("",20);s.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(d),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(){return window}function db(t){yn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(){return typeof yn().WorkerGlobalScope<"u"&&typeof yn().importScripts=="function"}async function fb(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function pb(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function mb(){return Ew()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw="firebaseLocalStorageDb",gb=1,Nu="firebaseLocalStorage",Iw="fbase_key";class ba{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function hc(t,e){return t.transaction([Nu],e?"readwrite":"readonly").objectStore(Nu)}function yb(){const t=indexedDB.deleteDatabase(Tw);return new ba(t).toPromise()}function Kd(){const t=indexedDB.open(Tw,gb);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Nu,{keyPath:Iw})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Nu)?e(r):(r.close(),await yb(),e(await Kd()))})})}async function $y(t,e,n){const r=hc(t,!0).put({[Iw]:e,value:n});return new ba(r).toPromise()}async function vb(t,e){const n=hc(t,!1).get(e),r=await new ba(n).toPromise();return r===void 0?null:r.value}function By(t,e){const n=hc(t,!0).delete(e);return new ba(n).toPromise()}const _b=800,wb=3;class Sw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kd(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>wb)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ew()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cc._getInstance(mb()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await fb(),!this.activeServiceWorker)return;this.sender=new hb(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||pb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kd();return await $y(e,Su,"1"),await By(e,Su),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>$y(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>vb(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>By(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=hc(s,!1).getAll();return new ba(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_b)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Sw.type="LOCAL";const xb=Sw;new Na(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(t,e){return e?Dn(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap extends pw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ai(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ai(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ai(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Eb(t){return sb(t.auth,new Ap(t),t.bypassAuthState)}function Tb(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),rb(n,new Ap(t),t.bypassAuthState)}async function Ib(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),nb(n,new Ap(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Eb;case"linkViaPopup":case"linkViaRedirect":return Ib;case"reauthViaPopup":case"reauthViaRedirect":return Tb;default:wn(this.auth,"internal-error")}}resolve(e){zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb=new Na(2e3,1e4);async function bw(t,e,n){if(Ft(t.app))return Promise.reject(nn(t,"operation-not-supported-in-this-environment"));const r=uc(t);ER(t,e,Rp);const s=Nw(r,n);return new is(r,"signInViaPopup",e,s).executeNotNull()}class is extends Rw{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,is.currentPopupAction&&is.currentPopupAction.cancel(),is.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){zn(this.filter.length===1,"Popup operations only handle one event");const e=bp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(nn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(nn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,is.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(nn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Sb.get())};e()}}is.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb="pendingRedirect",Ul=new Map;class Rb extends Rw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ul.get(this.auth._key());if(!e){try{const r=await bb(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ul.set(this.auth._key(),e)}return this.bypassAuthState||Ul.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bb(t,e){const n=Cb(e),r=kb(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function Ab(t,e){Ul.set(t._key(),e)}function kb(t){return Dn(t._redirectPersistence)}function Cb(t){return Fl(Nb,t.config.apiKey,t.name)}async function Pb(t,e,n=!1){if(Ft(t.app))return Promise.reject(us(t));const r=uc(t),s=Nw(r,e),o=await new Rb(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db=10*60*1e3;class jb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Vb(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Aw(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(nn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Db&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wy(e))}saveEventToCache(e){this.cachedEventUids.add(Wy(e)),this.lastProcessedEventTime=Date.now()}}function Wy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Aw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Vb(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Aw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ob(t,e={}){return Vi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Lb=/^https?/;async function Fb(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Ob(t);for(const n of e)try{if(Ub(n))return}catch{}wn(t,"unauthorized-domain")}function Ub(t){const e=qd(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Lb.test(n))return!1;if(Mb.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb=new Na(3e4,6e4);function Hy(){const t=yn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function $b(t){return new Promise((e,n)=>{var s,i,o;function r(){Hy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Hy(),n(nn(t,"network-request-failed"))},timeout:zb.get()})}if((i=(s=yn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=yn().gapi)!=null&&o.load)r();else{const l=QR("iframefcb");return yn()[l]=()=>{gapi.load?r():n(nn(t,"network-request-failed"))},GR(`${KR()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw zl=null,e})}let zl=null;function Bb(t){return zl=zl||$b(t),zl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb=new Na(5e3,15e3),Hb="__/auth/iframe",qb="emulator/auth/iframe",Gb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Kb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qb(t){const e=t.config;J(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ep(e,qb):`https://${t.config.authDomain}/${Hb}`,r={apiKey:e.apiKey,appName:t.name,v:Ns},s=Kb.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Sa(r).slice(1)}`}async function Yb(t){const e=await Bb(t),n=yn().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:Qb(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gb,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=nn(t,"network-request-failed"),l=yn().setTimeout(()=>{i(o)},Wb.get());function u(){yn().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Xb=500,Zb=600,eA="_blank",tA="http://localhost";class qy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nA(t,e,n,r=Xb,s=Zb){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u={...Jb,width:r.toString(),height:s.toString(),top:i,left:o},c=ct().toLowerCase();n&&(l=ow(c)?eA:n),sw(c)&&(e=e||tA,u.scrollbars="yes");const d=Object.entries(u).reduce((g,[T,b])=>`${g}${T}=${b},`,"");if(FR(c)&&l!=="_self")return rA(e||"",l),new qy(null);const p=window.open(e||"",l,d);J(p,t,"popup-blocked");try{p.focus()}catch{}return new qy(p)}function rA(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA="__/auth/handler",iA="emulator/auth/handler",oA=encodeURIComponent("fac");async function Gy(t,e,n,r,s,i){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ns,eventId:s};if(e instanceof Rp){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",lN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))o[d]=p}if(e instanceof Ra){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await t._getAppCheckToken(),c=u?`#${oA}=${encodeURIComponent(u)}`:"";return`${aA(t)}?${Sa(l).slice(1)}${c}`}function aA({config:t}){return t.emulator?Ep(t,iA):`https://${t.authDomain}/${sA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ch="webStorageSupport";class lA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xw,this._completeRedirectFn=Pb,this._overrideRedirectResult=Ab}async _openPopup(e,n,r,s){var o;zn((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await Gy(e,n,r,qd(),s);return nA(e,i,bp())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Gy(e,n,r,qd(),s);return db(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(zn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Yb(e),r=new jb(e);return n.register("authEvent",s=>(J(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ch,{type:Ch},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[Ch];i!==void 0&&n(!!i),wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Fb(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return hw()||iw()||Sp()}}const uA=lA;var Ky="@firebase/auth",Qy="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dA(t){ys(new Dr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dw(t)},c=new HR(r,s,i,u);return JR(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ys(new Dr("auth-internal",e=>{const n=uc(e.getProvider("auth").getImmediate());return(r=>new cA(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),gn(Ky,Qy,hA(t)),gn(Ky,Qy,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA=5*60,pA=W1("authIdTokenMaxAge")||fA;let Yy=null;const mA=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>pA)return;const s=n==null?void 0:n.token;Yy!==s&&(Yy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function gA(t=_p()){const e=lc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=YR(t,{popupRedirectResolver:uA,persistence:[xb,ub,xw]}),r=W1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=mA(i.toString());ob(n,o,()=>o(n.currentUser)),ib(n,l=>o(l))}}const s=z1("auth");return s&&XR(n,`http://${s}`),n}function yA(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}qR({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=nn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",yA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dA("Browser");var vA="firebase",_A="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn(vA,_A,"app");var Jy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rr,kw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,v){function I(){}I.prototype=v.prototype,E.F=v.prototype,E.prototype=new I,E.prototype.constructor=E,E.D=function(R,A,D){for(var S=Array(arguments.length-2),we=2;we<arguments.length;we++)S[we-2]=arguments[we];return v.prototype[A].apply(R,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,v,I){I||(I=0);const R=Array(16);if(typeof v=="string")for(var A=0;A<16;++A)R[A]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(A=0;A<16;++A)R[A]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=E.g[0],I=E.g[1],A=E.g[2];let D=E.g[3],S;S=v+(D^I&(A^D))+R[0]+3614090360&4294967295,v=I+(S<<7&4294967295|S>>>25),S=D+(A^v&(I^A))+R[1]+3905402710&4294967295,D=v+(S<<12&4294967295|S>>>20),S=A+(I^D&(v^I))+R[2]+606105819&4294967295,A=D+(S<<17&4294967295|S>>>15),S=I+(v^A&(D^v))+R[3]+3250441966&4294967295,I=A+(S<<22&4294967295|S>>>10),S=v+(D^I&(A^D))+R[4]+4118548399&4294967295,v=I+(S<<7&4294967295|S>>>25),S=D+(A^v&(I^A))+R[5]+1200080426&4294967295,D=v+(S<<12&4294967295|S>>>20),S=A+(I^D&(v^I))+R[6]+2821735955&4294967295,A=D+(S<<17&4294967295|S>>>15),S=I+(v^A&(D^v))+R[7]+4249261313&4294967295,I=A+(S<<22&4294967295|S>>>10),S=v+(D^I&(A^D))+R[8]+1770035416&4294967295,v=I+(S<<7&4294967295|S>>>25),S=D+(A^v&(I^A))+R[9]+2336552879&4294967295,D=v+(S<<12&4294967295|S>>>20),S=A+(I^D&(v^I))+R[10]+4294925233&4294967295,A=D+(S<<17&4294967295|S>>>15),S=I+(v^A&(D^v))+R[11]+2304563134&4294967295,I=A+(S<<22&4294967295|S>>>10),S=v+(D^I&(A^D))+R[12]+1804603682&4294967295,v=I+(S<<7&4294967295|S>>>25),S=D+(A^v&(I^A))+R[13]+4254626195&4294967295,D=v+(S<<12&4294967295|S>>>20),S=A+(I^D&(v^I))+R[14]+2792965006&4294967295,A=D+(S<<17&4294967295|S>>>15),S=I+(v^A&(D^v))+R[15]+1236535329&4294967295,I=A+(S<<22&4294967295|S>>>10),S=v+(A^D&(I^A))+R[1]+4129170786&4294967295,v=I+(S<<5&4294967295|S>>>27),S=D+(I^A&(v^I))+R[6]+3225465664&4294967295,D=v+(S<<9&4294967295|S>>>23),S=A+(v^I&(D^v))+R[11]+643717713&4294967295,A=D+(S<<14&4294967295|S>>>18),S=I+(D^v&(A^D))+R[0]+3921069994&4294967295,I=A+(S<<20&4294967295|S>>>12),S=v+(A^D&(I^A))+R[5]+3593408605&4294967295,v=I+(S<<5&4294967295|S>>>27),S=D+(I^A&(v^I))+R[10]+38016083&4294967295,D=v+(S<<9&4294967295|S>>>23),S=A+(v^I&(D^v))+R[15]+3634488961&4294967295,A=D+(S<<14&4294967295|S>>>18),S=I+(D^v&(A^D))+R[4]+3889429448&4294967295,I=A+(S<<20&4294967295|S>>>12),S=v+(A^D&(I^A))+R[9]+568446438&4294967295,v=I+(S<<5&4294967295|S>>>27),S=D+(I^A&(v^I))+R[14]+3275163606&4294967295,D=v+(S<<9&4294967295|S>>>23),S=A+(v^I&(D^v))+R[3]+4107603335&4294967295,A=D+(S<<14&4294967295|S>>>18),S=I+(D^v&(A^D))+R[8]+1163531501&4294967295,I=A+(S<<20&4294967295|S>>>12),S=v+(A^D&(I^A))+R[13]+2850285829&4294967295,v=I+(S<<5&4294967295|S>>>27),S=D+(I^A&(v^I))+R[2]+4243563512&4294967295,D=v+(S<<9&4294967295|S>>>23),S=A+(v^I&(D^v))+R[7]+1735328473&4294967295,A=D+(S<<14&4294967295|S>>>18),S=I+(D^v&(A^D))+R[12]+2368359562&4294967295,I=A+(S<<20&4294967295|S>>>12),S=v+(I^A^D)+R[5]+4294588738&4294967295,v=I+(S<<4&4294967295|S>>>28),S=D+(v^I^A)+R[8]+2272392833&4294967295,D=v+(S<<11&4294967295|S>>>21),S=A+(D^v^I)+R[11]+1839030562&4294967295,A=D+(S<<16&4294967295|S>>>16),S=I+(A^D^v)+R[14]+4259657740&4294967295,I=A+(S<<23&4294967295|S>>>9),S=v+(I^A^D)+R[1]+2763975236&4294967295,v=I+(S<<4&4294967295|S>>>28),S=D+(v^I^A)+R[4]+1272893353&4294967295,D=v+(S<<11&4294967295|S>>>21),S=A+(D^v^I)+R[7]+4139469664&4294967295,A=D+(S<<16&4294967295|S>>>16),S=I+(A^D^v)+R[10]+3200236656&4294967295,I=A+(S<<23&4294967295|S>>>9),S=v+(I^A^D)+R[13]+681279174&4294967295,v=I+(S<<4&4294967295|S>>>28),S=D+(v^I^A)+R[0]+3936430074&4294967295,D=v+(S<<11&4294967295|S>>>21),S=A+(D^v^I)+R[3]+3572445317&4294967295,A=D+(S<<16&4294967295|S>>>16),S=I+(A^D^v)+R[6]+76029189&4294967295,I=A+(S<<23&4294967295|S>>>9),S=v+(I^A^D)+R[9]+3654602809&4294967295,v=I+(S<<4&4294967295|S>>>28),S=D+(v^I^A)+R[12]+3873151461&4294967295,D=v+(S<<11&4294967295|S>>>21),S=A+(D^v^I)+R[15]+530742520&4294967295,A=D+(S<<16&4294967295|S>>>16),S=I+(A^D^v)+R[2]+3299628645&4294967295,I=A+(S<<23&4294967295|S>>>9),S=v+(A^(I|~D))+R[0]+4096336452&4294967295,v=I+(S<<6&4294967295|S>>>26),S=D+(I^(v|~A))+R[7]+1126891415&4294967295,D=v+(S<<10&4294967295|S>>>22),S=A+(v^(D|~I))+R[14]+2878612391&4294967295,A=D+(S<<15&4294967295|S>>>17),S=I+(D^(A|~v))+R[5]+4237533241&4294967295,I=A+(S<<21&4294967295|S>>>11),S=v+(A^(I|~D))+R[12]+1700485571&4294967295,v=I+(S<<6&4294967295|S>>>26),S=D+(I^(v|~A))+R[3]+2399980690&4294967295,D=v+(S<<10&4294967295|S>>>22),S=A+(v^(D|~I))+R[10]+4293915773&4294967295,A=D+(S<<15&4294967295|S>>>17),S=I+(D^(A|~v))+R[1]+2240044497&4294967295,I=A+(S<<21&4294967295|S>>>11),S=v+(A^(I|~D))+R[8]+1873313359&4294967295,v=I+(S<<6&4294967295|S>>>26),S=D+(I^(v|~A))+R[15]+4264355552&4294967295,D=v+(S<<10&4294967295|S>>>22),S=A+(v^(D|~I))+R[6]+2734768916&4294967295,A=D+(S<<15&4294967295|S>>>17),S=I+(D^(A|~v))+R[13]+1309151649&4294967295,I=A+(S<<21&4294967295|S>>>11),S=v+(A^(I|~D))+R[4]+4149444226&4294967295,v=I+(S<<6&4294967295|S>>>26),S=D+(I^(v|~A))+R[11]+3174756917&4294967295,D=v+(S<<10&4294967295|S>>>22),S=A+(v^(D|~I))+R[2]+718787259&4294967295,A=D+(S<<15&4294967295|S>>>17),S=I+(D^(A|~v))+R[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(A+(S<<21&4294967295|S>>>11))&4294967295,E.g[2]=E.g[2]+A&4294967295,E.g[3]=E.g[3]+D&4294967295}r.prototype.v=function(E,v){v===void 0&&(v=E.length);const I=v-this.blockSize,R=this.C;let A=this.h,D=0;for(;D<v;){if(A==0)for(;D<=I;)s(this,E,D),D+=this.blockSize;if(typeof E=="string"){for(;D<v;)if(R[A++]=E.charCodeAt(D++),A==this.blockSize){s(this,R),A=0;break}}else for(;D<v;)if(R[A++]=E[D++],A==this.blockSize){s(this,R),A=0;break}}this.h=A,this.o+=v},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;v=this.o*8;for(var I=E.length-8;I<E.length;++I)E[I]=v&255,v/=256;for(this.v(E),E=Array(16),v=0,I=0;I<4;++I)for(let R=0;R<32;R+=8)E[v++]=this.g[I]>>>R&255;return E};function i(E,v){var I=l;return Object.prototype.hasOwnProperty.call(I,E)?I[E]:I[E]=v(E)}function o(E,v){this.h=v;const I=[];let R=!0;for(let A=E.length-1;A>=0;A--){const D=E[A]|0;R&&D==v||(I[A]=D,R=!1)}this.g=I}var l={};function u(E){return-128<=E&&E<128?i(E,function(v){return new o([v|0],v<0?-1:0)}):new o([E|0],E<0?-1:0)}function c(E){if(isNaN(E)||!isFinite(E))return p;if(E<0)return N(c(-E));const v=[];let I=1;for(let R=0;E>=I;R++)v[R]=E/I|0,I*=4294967296;return new o(v,0)}function d(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return N(d(E.substring(1),v));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=c(Math.pow(v,8));let R=p;for(let D=0;D<E.length;D+=8){var A=Math.min(8,E.length-D);const S=parseInt(E.substring(D,D+A),v);A<8?(A=c(Math.pow(v,A)),R=R.j(A).add(c(S))):(R=R.j(I),R=R.add(c(S)))}return R}var p=u(0),g=u(1),T=u(16777216);t=o.prototype,t.m=function(){if(k(this))return-N(this).m();let E=0,v=1;for(let I=0;I<this.g.length;I++){const R=this.i(I);E+=(R>=0?R:4294967296+R)*v,v*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(b(this))return"0";if(k(this))return"-"+N(this).toString(E);const v=c(Math.pow(E,6));var I=this;let R="";for(;;){const A=C(I,v).g;I=_(I,A.j(v));let D=((I.g.length>0?I.g[0]:I.h)>>>0).toString(E);if(I=A,b(I))return D+R;for(;D.length<6;)D="0"+D;R=D+R}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function b(E){if(E.h!=0)return!1;for(let v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function k(E){return E.h==-1}t.l=function(E){return E=_(this,E),k(E)?-1:b(E)?0:1};function N(E){const v=E.g.length,I=[];for(let R=0;R<v;R++)I[R]=~E.g[R];return new o(I,~E.h).add(g)}t.abs=function(){return k(this)?N(this):this},t.add=function(E){const v=Math.max(this.g.length,E.g.length),I=[];let R=0;for(let A=0;A<=v;A++){let D=R+(this.i(A)&65535)+(E.i(A)&65535),S=(D>>>16)+(this.i(A)>>>16)+(E.i(A)>>>16);R=S>>>16,D&=65535,S&=65535,I[A]=S<<16|D}return new o(I,I[I.length-1]&-2147483648?-1:0)};function _(E,v){return E.add(N(v))}t.j=function(E){if(b(this)||b(E))return p;if(k(this))return k(E)?N(this).j(N(E)):N(N(this).j(E));if(k(E))return N(this.j(N(E)));if(this.l(T)<0&&E.l(T)<0)return c(this.m()*E.m());const v=this.g.length+E.g.length,I=[];for(var R=0;R<2*v;R++)I[R]=0;for(R=0;R<this.g.length;R++)for(let A=0;A<E.g.length;A++){const D=this.i(R)>>>16,S=this.i(R)&65535,we=E.i(A)>>>16,Ne=E.i(A)&65535;I[2*R+2*A]+=S*Ne,y(I,2*R+2*A),I[2*R+2*A+1]+=D*Ne,y(I,2*R+2*A+1),I[2*R+2*A+1]+=S*we,y(I,2*R+2*A+1),I[2*R+2*A+2]+=D*we,y(I,2*R+2*A+2)}for(E=0;E<v;E++)I[E]=I[2*E+1]<<16|I[2*E];for(E=v;E<2*v;E++)I[E]=0;return new o(I,0)};function y(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function x(E,v){this.g=E,this.h=v}function C(E,v){if(b(v))throw Error("division by zero");if(b(E))return new x(p,p);if(k(E))return v=C(N(E),v),new x(N(v.g),N(v.h));if(k(v))return v=C(E,N(v)),new x(N(v.g),v.h);if(E.g.length>30){if(k(E)||k(v))throw Error("slowDivide_ only works with positive integers.");for(var I=g,R=v;R.l(E)<=0;)I=V(I),R=V(R);var A=P(I,1),D=P(R,1);for(R=P(R,2),I=P(I,2);!b(R);){var S=D.add(R);S.l(E)<=0&&(A=A.add(I),D=S),R=P(R,1),I=P(I,1)}return v=_(E,A.j(v)),new x(A,v)}for(A=p;E.l(v)>=0;){for(I=Math.max(1,Math.floor(E.m()/v.m())),R=Math.ceil(Math.log(I)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),D=c(I),S=D.j(v);k(S)||S.l(E)>0;)I-=R,D=c(I),S=D.j(v);b(D)&&(D=g),A=A.add(D),E=_(E,S)}return new x(A,E)}t.B=function(E){return C(this,E).h},t.and=function(E){const v=Math.max(this.g.length,E.g.length),I=[];for(let R=0;R<v;R++)I[R]=this.i(R)&E.i(R);return new o(I,this.h&E.h)},t.or=function(E){const v=Math.max(this.g.length,E.g.length),I=[];for(let R=0;R<v;R++)I[R]=this.i(R)|E.i(R);return new o(I,this.h|E.h)},t.xor=function(E){const v=Math.max(this.g.length,E.g.length),I=[];for(let R=0;R<v;R++)I[R]=this.i(R)^E.i(R);return new o(I,this.h^E.h)};function V(E){const v=E.g.length+1,I=[];for(let R=0;R<v;R++)I[R]=E.i(R)<<1|E.i(R-1)>>>31;return new o(I,E.h)}function P(E,v){const I=v>>5;v%=32;const R=E.g.length-I,A=[];for(let D=0;D<R;D++)A[D]=v>0?E.i(D+I)>>>v|E.i(D+I+1)<<32-v:E.i(D+I);return new o(A,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,kw=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Rr=o}).apply(typeof Jy<"u"?Jy:typeof self<"u"?self:typeof window<"u"?window:{});var _l=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cw,wo,Pw,$l,Qd,Dw,jw,Vw;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof _l=="object"&&_l];for(var f=0;f<a.length;++f){var m=a[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(a,f){if(f)e:{var m=r;a=a.split(".");for(var w=0;w<a.length-1;w++){var j=a[w];if(!(j in m))break e;m=m[j]}a=a[a.length-1],w=m[a],f=f(w),f!=w&&f!=null&&e(m,a,{configurable:!0,writable:!0,value:f})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(f){var m=[],w;for(w in f)Object.prototype.hasOwnProperty.call(f,w)&&m.push([w,f[w]]);return m}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(a){var f=typeof a;return f=="object"&&a!=null||f=="function"}function u(a,f,m){return a.call.apply(a.bind,arguments)}function c(a,f,m){return c=u,c.apply(null,arguments)}function d(a,f){var m=Array.prototype.slice.call(arguments,1);return function(){var w=m.slice();return w.push.apply(w,arguments),a.apply(this,w)}}function p(a,f){function m(){}m.prototype=f.prototype,a.Z=f.prototype,a.prototype=new m,a.prototype.constructor=a,a.Ob=function(w,j,O){for(var $=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)$[ee-2]=arguments[ee];return f.prototype[j].apply(w,$)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function T(a){const f=a.length;if(f>0){const m=Array(f);for(let w=0;w<f;w++)m[w]=a[w];return m}return[]}function b(a,f){for(let w=1;w<arguments.length;w++){const j=arguments[w];var m=typeof j;if(m=m!="object"?m:j?Array.isArray(j)?"array":m:"null",m=="array"||m=="object"&&typeof j.length=="number"){m=a.length||0;const O=j.length||0;a.length=m+O;for(let $=0;$<O;$++)a[m+$]=j[$]}else a.push(j)}}class k{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function N(a){o.setTimeout(()=>{throw a},0)}function _(){var a=E;let f=null;return a.g&&(f=a.g,a.g=a.g.next,a.g||(a.h=null),f.next=null),f}class y{constructor(){this.h=this.g=null}add(f,m){const w=x.get();w.set(f,m),this.h?this.h.next=w:this.g=w,this.h=w}}var x=new k(()=>new C,a=>a.reset());class C{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let V,P=!1,E=new y,v=()=>{const a=Promise.resolve(void 0);V=()=>{a.then(I)}};function I(){for(var a;a=_();){try{a.h.call(a.g)}catch(m){N(m)}var f=x;f.j(a),f.h<100&&(f.h++,a.next=f.g,f.g=a)}P=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(a,f){this.type=a,this.g=this.target=f,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,f=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const m=()=>{};o.addEventListener("test",m,f),o.removeEventListener("test",m,f)}catch{}return a}();function S(a){return/^[\s\xa0]*$/.test(a)}function we(a,f){A.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,f)}p(we,A),we.prototype.init=function(a,f){const m=this.type=a.type,w=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=f,f=a.relatedTarget,f||(m=="mouseover"?f=a.fromElement:m=="mouseout"&&(f=a.toElement)),this.relatedTarget=f,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&we.Z.h.call(this)},we.prototype.h=function(){we.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ne="closure_listenable_"+(Math.random()*1e6|0),K=0;function oe(a,f,m,w,j){this.listener=a,this.proxy=null,this.src=f,this.type=m,this.capture=!!w,this.ha=j,this.key=++K,this.da=this.fa=!1}function z(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function q(a,f,m){for(const w in a)f.call(m,a[w],w,a)}function Q(a,f){for(const m in a)f.call(void 0,a[m],m,a)}function ae(a){const f={};for(const m in a)f[m]=a[m];return f}const fe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yt(a,f){let m,w;for(let j=1;j<arguments.length;j++){w=arguments[j];for(m in w)a[m]=w[m];for(let O=0;O<fe.length;O++)m=fe[O],Object.prototype.hasOwnProperty.call(w,m)&&(a[m]=w[m])}}function $e(a){this.src=a,this.g={},this.h=0}$e.prototype.add=function(a,f,m,w,j){const O=a.toString();a=this.g[O],a||(a=this.g[O]=[],this.h++);const $=Rt(a,f,w,j);return $>-1?(f=a[$],m||(f.fa=!1)):(f=new oe(f,this.src,O,!!w,j),f.fa=m,a.push(f)),f};function an(a,f){const m=f.type;if(m in a.g){var w=a.g[m],j=Array.prototype.indexOf.call(w,f,void 0),O;(O=j>=0)&&Array.prototype.splice.call(w,j,1),O&&(z(f),a.g[m].length==0&&(delete a.g[m],a.h--))}}function Rt(a,f,m,w){for(let j=0;j<a.length;++j){const O=a[j];if(!O.da&&O.listener==f&&O.capture==!!m&&O.ha==w)return j}return-1}var qt="closure_lm_"+(Math.random()*1e6|0),Qn={};function Ua(a,f,m,w,j){if(Array.isArray(f)){for(let O=0;O<f.length;O++)Ua(a,f[O],m,w,j);return null}return m=cm(m),a&&a[Ne]?a.J(f,m,l(w)?!!w.capture:!1,j):za(a,f,m,!1,w,j)}function za(a,f,m,w,j,O){if(!f)throw Error("Invalid event type");const $=l(j)?!!j.capture:!!j;let ee=qr(a);if(ee||(a[qt]=ee=new $e(a)),m=ee.add(f,m,w,$,O),m.proxy)return m;if(w=$a(),m.proxy=w,w.src=a,w.listener=m,a.addEventListener)D||(j=$),j===void 0&&(j=!1),a.addEventListener(f.toString(),w,j);else if(a.attachEvent)a.attachEvent(Yn(f.toString()),w);else if(a.addListener&&a.removeListener)a.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return m}function $a(){function a(m){return f.call(a.src,a.listener,m)}const f=Bi;return a}function jc(a,f,m,w,j){if(Array.isArray(f))for(var O=0;O<f.length;O++)jc(a,f[O],m,w,j);else w=l(w)?!!w.capture:!!w,m=cm(m),a&&a[Ne]?(a=a.i,O=String(f).toString(),O in a.g&&(f=a.g[O],m=Rt(f,m,w,j),m>-1&&(z(f[m]),Array.prototype.splice.call(f,m,1),f.length==0&&(delete a.g[O],a.h--)))):a&&(a=qr(a))&&(f=a.g[f.toString()],a=-1,f&&(a=Rt(f,m,w,j)),(m=a>-1?f[a]:null)&&$i(m))}function $i(a){if(typeof a!="number"&&a&&!a.da){var f=a.src;if(f&&f[Ne])an(f.i,a);else{var m=a.type,w=a.proxy;f.removeEventListener?f.removeEventListener(m,w,a.capture):f.detachEvent?f.detachEvent(Yn(m),w):f.addListener&&f.removeListener&&f.removeListener(w),(m=qr(f))?(an(m,a),m.h==0&&(m.src=null,f[qt]=null)):z(a)}}}function Yn(a){return a in Qn?Qn[a]:Qn[a]="on"+a}function Bi(a,f){if(a.da)a=!0;else{f=new we(f,this);const m=a.listener,w=a.ha||a.src;a.fa&&$i(a),a=m.call(w,f)}return a}function qr(a){return a=a[qt],a instanceof $e?a:null}var Gr="__closure_events_fn_"+(Math.random()*1e9>>>0);function cm(a){return typeof a=="function"?a:(a[Gr]||(a[Gr]=function(f){return a.handleEvent(f)}),a[Gr])}function tt(){R.call(this),this.i=new $e(this),this.M=this,this.G=null}p(tt,R),tt.prototype[Ne]=!0,tt.prototype.removeEventListener=function(a,f,m,w){jc(this,a,f,m,w)};function ht(a,f){var m,w=a.G;if(w)for(m=[];w;w=w.G)m.push(w);if(a=a.M,w=f.type||f,typeof f=="string")f=new A(f,a);else if(f instanceof A)f.target=f.target||a;else{var j=f;f=new A(w,a),yt(f,j)}j=!0;let O,$;if(m)for($=m.length-1;$>=0;$--)O=f.g=m[$],j=Ba(O,w,!0,f)&&j;if(O=f.g=a,j=Ba(O,w,!0,f)&&j,j=Ba(O,w,!1,f)&&j,m)for($=0;$<m.length;$++)O=f.g=m[$],j=Ba(O,w,!1,f)&&j}tt.prototype.N=function(){if(tt.Z.N.call(this),this.i){var a=this.i;for(const f in a.g){const m=a.g[f];for(let w=0;w<m.length;w++)z(m[w]);delete a.g[f],a.h--}}this.G=null},tt.prototype.J=function(a,f,m,w){return this.i.add(String(a),f,!1,m,w)},tt.prototype.K=function(a,f,m,w){return this.i.add(String(a),f,!0,m,w)};function Ba(a,f,m,w){if(f=a.i.g[String(f)],!f)return!0;f=f.concat();let j=!0;for(let O=0;O<f.length;++O){const $=f[O];if($&&!$.da&&$.capture==m){const ee=$.listener,Le=$.ha||$.src;$.fa&&an(a.i,$),j=ee.call(Le,w)!==!1&&j}}return j&&!w.defaultPrevented}function VE(a,f){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=c(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:o.setTimeout(a,f||0)}function hm(a){a.g=VE(()=>{a.g=null,a.i&&(a.i=!1,hm(a))},a.l);const f=a.h;a.h=null,a.m.apply(null,f)}class OE extends R{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:hm(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wi(a){R.call(this),this.h=a,this.g={}}p(Wi,R);var dm=[];function fm(a){q(a.g,function(f,m){this.g.hasOwnProperty(m)&&$i(f)},a),a.g={}}Wi.prototype.N=function(){Wi.Z.N.call(this),fm(this)},Wi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vc=o.JSON.stringify,ME=o.JSON.parse,LE=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function pm(){}function mm(){}var Hi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Oc(){A.call(this,"d")}p(Oc,A);function Mc(){A.call(this,"c")}p(Mc,A);var Kr={},gm=null;function Wa(){return gm=gm||new tt}Kr.Ia="serverreachability";function ym(a){A.call(this,Kr.Ia,a)}p(ym,A);function qi(a){const f=Wa();ht(f,new ym(f))}Kr.STAT_EVENT="statevent";function vm(a,f){A.call(this,Kr.STAT_EVENT,a),this.stat=f}p(vm,A);function dt(a){const f=Wa();ht(f,new vm(f,a))}Kr.Ja="timingevent";function _m(a,f){A.call(this,Kr.Ja,a),this.size=f}p(_m,A);function Gi(a,f){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},f)}function Ki(){this.g=!0}Ki.prototype.ua=function(){this.g=!1};function FE(a,f,m,w,j,O){a.info(function(){if(a.g)if(O){var $="",ee=O.split("&");for(let de=0;de<ee.length;de++){var Le=ee[de].split("=");if(Le.length>1){const Be=Le[0];Le=Le[1];const un=Be.split("_");$=un.length>=2&&un[1]=="type"?$+(Be+"="+Le+"&"):$+(Be+"=redacted&")}}}else $=null;else $=O;return"XMLHTTP REQ ("+w+") [attempt "+j+"]: "+f+`
`+m+`
`+$})}function UE(a,f,m,w,j,O,$){a.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+j+"]: "+f+`
`+m+`
`+O+" "+$})}function As(a,f,m,w){a.info(function(){return"XMLHTTP TEXT ("+f+"): "+$E(a,m)+(w?" "+w:"")})}function zE(a,f){a.info(function(){return"TIMEOUT: "+f})}Ki.prototype.info=function(){};function $E(a,f){if(!a.g)return f;if(!f)return null;try{const O=JSON.parse(f);if(O){for(a=0;a<O.length;a++)if(Array.isArray(O[a])){var m=O[a];if(!(m.length<2)){var w=m[1];if(Array.isArray(w)&&!(w.length<1)){var j=w[0];if(j!="noop"&&j!="stop"&&j!="close")for(let $=1;$<w.length;$++)w[$]=""}}}}return Vc(O)}catch{return f}}var Ha={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},wm={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xm;function Lc(){}p(Lc,pm),Lc.prototype.g=function(){return new XMLHttpRequest},xm=new Lc;function Qi(a){return encodeURIComponent(String(a))}function BE(a){var f=1;a=a.split(":");const m=[];for(;f>0&&a.length;)m.push(a.shift()),f--;return a.length&&m.push(a.join(":")),m}function Jn(a,f,m,w){this.j=a,this.i=f,this.l=m,this.S=w||1,this.V=new Wi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Em}function Em(){this.i=null,this.g="",this.h=!1}var Tm={},Fc={};function Uc(a,f,m){a.M=1,a.A=Ga(ln(f)),a.u=m,a.R=!0,Im(a,null)}function Im(a,f){a.F=Date.now(),qa(a),a.B=ln(a.A);var m=a.B,w=a.S;Array.isArray(w)||(w=[String(w)]),Mm(m.i,"t",w),a.C=0,m=a.j.L,a.h=new Em,a.g=tg(a.j,m?f:null,!a.u),a.P>0&&(a.O=new OE(c(a.Y,a,a.g),a.P)),f=a.V,m=a.g,w=a.ba;var j="readystatechange";Array.isArray(j)||(j&&(dm[0]=j.toString()),j=dm);for(let O=0;O<j.length;O++){const $=Ua(m,j[O],w||f.handleEvent,!1,f.h||f);if(!$)break;f.g[$.key]=$}f=a.J?ae(a.J):{},a.u?(a.v||(a.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,f)):(a.v="GET",a.g.ea(a.B,a.v,null,f)),qi(),FE(a.i,a.v,a.B,a.l,a.S,a.u)}Jn.prototype.ba=function(a){a=a.target;const f=this.O;f&&er(a)==3?f.j():this.Y(a)},Jn.prototype.Y=function(a){try{if(a==this.g)e:{const ee=er(this.g),Le=this.g.ya(),de=this.g.ca();if(!(ee<3)&&(ee!=3||this.g&&(this.h.h||this.g.la()||Wm(this.g)))){this.K||ee!=4||Le==7||(Le==8||de<=0?qi(3):qi(2)),zc(this);var f=this.g.ca();this.X=f;var m=WE(this);if(this.o=f==200,UE(this.i,this.v,this.B,this.l,this.S,ee,f),this.o){if(this.U&&!this.L){t:{if(this.g){var w,j=this.g;if((w=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(w)){var O=w;break t}}O=null}if(a=O)As(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,$c(this,a);else{this.o=!1,this.m=3,dt(12),Qr(this),Yi(this);break e}}if(this.R){a=!0;let Be;for(;!this.K&&this.C<m.length;)if(Be=HE(this,m),Be==Fc){ee==4&&(this.m=4,dt(14),a=!1),As(this.i,this.l,null,"[Incomplete Response]");break}else if(Be==Tm){this.m=4,dt(15),As(this.i,this.l,m,"[Invalid Chunk]"),a=!1;break}else As(this.i,this.l,Be,null),$c(this,Be);if(Sm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ee!=4||m.length!=0||this.h.h||(this.m=1,dt(16),a=!1),this.o=this.o&&a,!a)As(this.i,this.l,m,"[Invalid Chunked Response]"),Qr(this),Yi(this);else if(m.length>0&&!this.W){this.W=!0;var $=this.j;$.g==this&&$.aa&&!$.P&&($.j.info("Great, no buffering proxy detected. Bytes received: "+m.length),Yc($),$.P=!0,dt(11))}}else As(this.i,this.l,m,null),$c(this,m);ee==4&&Qr(this),this.o&&!this.K&&(ee==4?Jm(this.j,this):(this.o=!1,qa(this)))}else iT(this.g),f==400&&m.indexOf("Unknown SID")>0?(this.m=3,dt(12)):(this.m=0,dt(13)),Qr(this),Yi(this)}}}catch{}finally{}};function WE(a){if(!Sm(a))return a.g.la();const f=Wm(a.g);if(f==="")return"";let m="";const w=f.length,j=er(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Qr(a),Yi(a),"";a.h.i=new o.TextDecoder}for(let O=0;O<w;O++)a.h.h=!0,m+=a.h.i.decode(f[O],{stream:!(j&&O==w-1)});return f.length=0,a.h.g+=m,a.C=0,a.h.g}function Sm(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function HE(a,f){var m=a.C,w=f.indexOf(`
`,m);return w==-1?Fc:(m=Number(f.substring(m,w)),isNaN(m)?Tm:(w+=1,w+m>f.length?Fc:(f=f.slice(w,w+m),a.C=w+m,f)))}Jn.prototype.cancel=function(){this.K=!0,Qr(this)};function qa(a){a.T=Date.now()+a.H,Nm(a,a.H)}function Nm(a,f){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Gi(c(a.aa,a),f)}function zc(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Jn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(zE(this.i,this.B),this.M!=2&&(qi(),dt(17)),Qr(this),this.m=2,Yi(this)):Nm(this,this.T-a)};function Yi(a){a.j.I==0||a.K||Jm(a.j,a)}function Qr(a){zc(a);var f=a.O;f&&typeof f.dispose=="function"&&f.dispose(),a.O=null,fm(a.V),a.g&&(f=a.g,a.g=null,f.abort(),f.dispose())}function $c(a,f){try{var m=a.j;if(m.I!=0&&(m.g==a||Bc(m.h,a))){if(!a.L&&Bc(m.h,a)&&m.I==3){try{var w=m.Ba.g.parse(f)}catch{w=null}if(Array.isArray(w)&&w.length==3){var j=w;if(j[0]==0){e:if(!m.v){if(m.g)if(m.g.F+3e3<a.F)Xa(m),Ya(m);else break e;Qc(m),dt(18)}}else m.xa=j[1],0<m.xa-m.K&&j[2]<37500&&m.F&&m.A==0&&!m.C&&(m.C=Gi(c(m.Va,m),6e3));Am(m.h)<=1&&m.ta&&(m.ta=void 0)}else Jr(m,11)}else if((a.L||m.g==a)&&Xa(m),!S(f))for(j=m.Ba.g.parse(f),f=0;f<j.length;f++){let de=j[f];const Be=de[0];if(!(Be<=m.K))if(m.K=Be,de=de[1],m.I==2)if(de[0]=="c"){m.M=de[1],m.ba=de[2];const un=de[3];un!=null&&(m.ka=un,m.j.info("VER="+m.ka));const Xr=de[4];Xr!=null&&(m.za=Xr,m.j.info("SVER="+m.za));const tr=de[5];tr!=null&&typeof tr=="number"&&tr>0&&(w=1.5*tr,m.O=w,m.j.info("backChannelRequestTimeoutMs_="+w)),w=m;const nr=a.g;if(nr){const el=nr.g?nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(el){var O=w.h;O.g||el.indexOf("spdy")==-1&&el.indexOf("quic")==-1&&el.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Wc(O,O.h),O.h=null))}if(w.G){const Jc=nr.g?nr.g.getResponseHeader("X-HTTP-Session-Id"):null;Jc&&(w.wa=Jc,ye(w.J,w.G,Jc))}}m.I=3,m.l&&m.l.ra(),m.aa&&(m.T=Date.now()-a.F,m.j.info("Handshake RTT: "+m.T+"ms")),w=m;var $=a;if(w.na=eg(w,w.L?w.ba:null,w.W),$.L){km(w.h,$);var ee=$,Le=w.O;Le&&(ee.H=Le),ee.D&&(zc(ee),qa(ee)),w.g=$}else Qm(w);m.i.length>0&&Ja(m)}else de[0]!="stop"&&de[0]!="close"||Jr(m,7);else m.I==3&&(de[0]=="stop"||de[0]=="close"?de[0]=="stop"?Jr(m,7):Kc(m):de[0]!="noop"&&m.l&&m.l.qa(de),m.A=0)}}qi(4)}catch{}}var qE=class{constructor(a,f){this.g=a,this.map=f}};function Rm(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function bm(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Am(a){return a.h?1:a.g?a.g.size:0}function Bc(a,f){return a.h?a.h==f:a.g?a.g.has(f):!1}function Wc(a,f){a.g?a.g.add(f):a.h=f}function km(a,f){a.h&&a.h==f?a.h=null:a.g&&a.g.has(f)&&a.g.delete(f)}Rm.prototype.cancel=function(){if(this.i=Cm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Cm(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let f=a.i;for(const m of a.g.values())f=f.concat(m.G);return f}return T(a.i)}var Pm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function GE(a,f){if(a){a=a.split("&");for(let m=0;m<a.length;m++){const w=a[m].indexOf("=");let j,O=null;w>=0?(j=a[m].substring(0,w),O=a[m].substring(w+1)):j=a[m],f(j,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Xn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;a instanceof Xn?(this.l=a.l,Ji(this,a.j),this.o=a.o,this.g=a.g,Xi(this,a.u),this.h=a.h,Hc(this,Lm(a.i)),this.m=a.m):a&&(f=String(a).match(Pm))?(this.l=!1,Ji(this,f[1]||"",!0),this.o=Zi(f[2]||""),this.g=Zi(f[3]||"",!0),Xi(this,f[4]),this.h=Zi(f[5]||"",!0),Hc(this,f[6]||"",!0),this.m=Zi(f[7]||"")):(this.l=!1,this.i=new to(null,this.l))}Xn.prototype.toString=function(){const a=[];var f=this.j;f&&a.push(eo(f,Dm,!0),":");var m=this.g;return(m||f=="file")&&(a.push("//"),(f=this.o)&&a.push(eo(f,Dm,!0),"@"),a.push(Qi(m).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.u,m!=null&&a.push(":",String(m))),(m=this.h)&&(this.g&&m.charAt(0)!="/"&&a.push("/"),a.push(eo(m,m.charAt(0)=="/"?YE:QE,!0))),(m=this.i.toString())&&a.push("?",m),(m=this.m)&&a.push("#",eo(m,XE)),a.join("")},Xn.prototype.resolve=function(a){const f=ln(this);let m=!!a.j;m?Ji(f,a.j):m=!!a.o,m?f.o=a.o:m=!!a.g,m?f.g=a.g:m=a.u!=null;var w=a.h;if(m)Xi(f,a.u);else if(m=!!a.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var j=f.h.lastIndexOf("/");j!=-1&&(w=f.h.slice(0,j+1)+w)}if(j=w,j==".."||j==".")w="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){w=j.lastIndexOf("/",0)==0,j=j.split("/");const O=[];for(let $=0;$<j.length;){const ee=j[$++];ee=="."?w&&$==j.length&&O.push(""):ee==".."?((O.length>1||O.length==1&&O[0]!="")&&O.pop(),w&&$==j.length&&O.push("")):(O.push(ee),w=!0)}w=O.join("/")}else w=j}return m?f.h=w:m=a.i.toString()!=="",m?Hc(f,Lm(a.i)):m=!!a.m,m&&(f.m=a.m),f};function ln(a){return new Xn(a)}function Ji(a,f,m){a.j=m?Zi(f,!0):f,a.j&&(a.j=a.j.replace(/:$/,""))}function Xi(a,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);a.u=f}else a.u=null}function Hc(a,f,m){f instanceof to?(a.i=f,ZE(a.i,a.l)):(m||(f=eo(f,JE)),a.i=new to(f,a.l))}function ye(a,f,m){a.i.set(f,m)}function Ga(a){return ye(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Zi(a,f){return a?f?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function eo(a,f,m){return typeof a=="string"?(a=encodeURI(a).replace(f,KE),m&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function KE(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Dm=/[#\/\?@]/g,QE=/[#\?:]/g,YE=/[#\?]/g,JE=/[#\?@]/g,XE=/#/g;function to(a,f){this.h=this.g=null,this.i=a||null,this.j=!!f}function Yr(a){a.g||(a.g=new Map,a.h=0,a.i&&GE(a.i,function(f,m){a.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}t=to.prototype,t.add=function(a,f){Yr(this),this.i=null,a=ks(this,a);let m=this.g.get(a);return m||this.g.set(a,m=[]),m.push(f),this.h+=1,this};function jm(a,f){Yr(a),f=ks(a,f),a.g.has(f)&&(a.i=null,a.h-=a.g.get(f).length,a.g.delete(f))}function Vm(a,f){return Yr(a),f=ks(a,f),a.g.has(f)}t.forEach=function(a,f){Yr(this),this.g.forEach(function(m,w){m.forEach(function(j){a.call(f,j,w,this)},this)},this)};function Om(a,f){Yr(a);let m=[];if(typeof f=="string")Vm(a,f)&&(m=m.concat(a.g.get(ks(a,f))));else for(a=Array.from(a.g.values()),f=0;f<a.length;f++)m=m.concat(a[f]);return m}t.set=function(a,f){return Yr(this),this.i=null,a=ks(this,a),Vm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[f]),this.h+=1,this},t.get=function(a,f){return a?(a=Om(this,a),a.length>0?String(a[0]):f):f};function Mm(a,f,m){jm(a,f),m.length>0&&(a.i=null,a.g.set(ks(a,f),T(m)),a.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],f=Array.from(this.g.keys());for(let w=0;w<f.length;w++){var m=f[w];const j=Qi(m);m=Om(this,m);for(let O=0;O<m.length;O++){let $=j;m[O]!==""&&($+="="+Qi(m[O])),a.push($)}}return this.i=a.join("&")};function Lm(a){const f=new to;return f.i=a.i,a.g&&(f.g=new Map(a.g),f.h=a.h),f}function ks(a,f){return f=String(f),a.j&&(f=f.toLowerCase()),f}function ZE(a,f){f&&!a.j&&(Yr(a),a.i=null,a.g.forEach(function(m,w){const j=w.toLowerCase();w!=j&&(jm(this,w),Mm(this,j,m))},a)),a.j=f}function eT(a,f){const m=new Ki;if(o.Image){const w=new Image;w.onload=d(Zn,m,"TestLoadImage: loaded",!0,f,w),w.onerror=d(Zn,m,"TestLoadImage: error",!1,f,w),w.onabort=d(Zn,m,"TestLoadImage: abort",!1,f,w),w.ontimeout=d(Zn,m,"TestLoadImage: timeout",!1,f,w),o.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=a}else f(!1)}function tT(a,f){const m=new Ki,w=new AbortController,j=setTimeout(()=>{w.abort(),Zn(m,"TestPingServer: timeout",!1,f)},1e4);fetch(a,{signal:w.signal}).then(O=>{clearTimeout(j),O.ok?Zn(m,"TestPingServer: ok",!0,f):Zn(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(j),Zn(m,"TestPingServer: error",!1,f)})}function Zn(a,f,m,w,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),w(m)}catch{}}function nT(){this.g=new LE}function qc(a){this.i=a.Sb||null,this.h=a.ab||!1}p(qc,pm),qc.prototype.g=function(){return new Ka(this.i,this.h)};function Ka(a,f){tt.call(this),this.H=a,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Ka,tt),t=Ka.prototype,t.open=function(a,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=f,this.readyState=1,ro(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(f.body=a),(this.H||o).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,no(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ro(this)),this.g&&(this.readyState=3,ro(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Fm(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Fm(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var f=a.value?a.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!a.done}))&&(this.response=this.responseText+=f)}a.done?no(this):ro(this),this.readyState==3&&Fm(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,no(this))},t.Na=function(a){this.g&&(this.response=a,no(this))},t.ga=function(){this.g&&no(this)};function no(a){a.readyState=4,a.l=null,a.j=null,a.B=null,ro(a)}t.setRequestHeader=function(a,f){this.A.append(a,f)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,a.push(m[0]+": "+m[1]),m=f.next();return a.join(`\r
`)};function ro(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ka.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Um(a){let f="";return q(a,function(m,w){f+=w,f+=":",f+=m,f+=`\r
`}),f}function Gc(a,f,m){e:{for(w in m){var w=!1;break e}w=!0}w||(m=Um(m),typeof a=="string"?m!=null&&Qi(m):ye(a,f,m))}function Re(a){tt.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Re,tt);var rT=/^https?$/i,sT=["POST","PUT"];t=Re.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,f,m,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);f=f?f.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xm.g(),this.g.onreadystatechange=g(c(this.Ca,this));try{this.B=!0,this.g.open(f,String(a),!0),this.B=!1}catch(O){zm(this,O);return}if(a=m||"",m=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var j in w)m.set(j,w[j]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const O of w.keys())m.set(O,w.get(O));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(m.keys()).find(O=>O.toLowerCase()=="content-type"),j=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(sT,f,void 0)>=0)||w||j||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,$]of m)this.g.setRequestHeader(O,$);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(O){zm(this,O)}};function zm(a,f){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=f,a.o=5,$m(a),Qa(a)}function $m(a){a.A||(a.A=!0,ht(a,"complete"),ht(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,ht(this,"complete"),ht(this,"abort"),Qa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qa(this,!0)),Re.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Bm(this):this.Xa())},t.Xa=function(){Bm(this)};function Bm(a){if(a.h&&typeof i<"u"){if(a.v&&er(a)==4)setTimeout(a.Ca.bind(a),0);else if(ht(a,"readystatechange"),er(a)==4){a.h=!1;try{const O=a.ca();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var w;if(w=O===0){let $=String(a.D).match(Pm)[1]||null;!$&&o.self&&o.self.location&&($=o.self.location.protocol.slice(0,-1)),w=!rT.test($?$.toLowerCase():"")}m=w}if(m)ht(a,"complete"),ht(a,"success");else{a.o=6;try{var j=er(a)>2?a.g.statusText:""}catch{j=""}a.l=j+" ["+a.ca()+"]",$m(a)}}finally{Qa(a)}}}}function Qa(a,f){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const m=a.g;a.g=null,f||ht(a,"ready");try{m.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function er(a){return a.g?a.g.readyState:0}t.ca=function(){try{return er(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var f=this.g.responseText;return a&&f.indexOf(a)==0&&(f=f.substring(a.length)),ME(f)}};function Wm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function iT(a){const f={};a=(a.g&&er(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<a.length;w++){if(S(a[w]))continue;var m=BE(a[w]);const j=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const O=f[j]||[];f[j]=O,O.push(m)}Q(f,function(w){return w.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function so(a,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[a]||f}function Hm(a){this.za=0,this.i=[],this.j=new Ki,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=so("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=so("baseRetryDelayMs",5e3,a),this.Za=so("retryDelaySeedMs",1e4,a),this.Ta=so("forwardChannelMaxRetries",2,a),this.va=so("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Rm(a&&a.concurrentRequestLimit),this.Ba=new nT,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Hm.prototype,t.ka=8,t.I=1,t.connect=function(a,f,m,w){dt(0),this.W=a,this.H=f||{},m&&w!==void 0&&(this.H.OSID=m,this.H.OAID=w),this.F=this.X,this.J=eg(this,null,this.W),Ja(this)};function Kc(a){if(qm(a),a.I==3){var f=a.V++,m=ln(a.J);if(ye(m,"SID",a.M),ye(m,"RID",f),ye(m,"TYPE","terminate"),io(a,m),f=new Jn(a,a.j,f),f.M=2,f.A=Ga(ln(m)),m=!1,o.navigator&&o.navigator.sendBeacon)try{m=o.navigator.sendBeacon(f.A.toString(),"")}catch{}!m&&o.Image&&(new Image().src=f.A,m=!0),m||(f.g=tg(f.j,null),f.g.ea(f.A)),f.F=Date.now(),qa(f)}Zm(a)}function Ya(a){a.g&&(Yc(a),a.g.cancel(),a.g=null)}function qm(a){Ya(a),a.v&&(o.clearTimeout(a.v),a.v=null),Xa(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Ja(a){if(!bm(a.h)&&!a.m){a.m=!0;var f=a.Ea;V||v(),P||(V(),P=!0),E.add(f,a),a.D=0}}function oT(a,f){return Am(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=f.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Gi(c(a.Ea,a,f),Xm(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const j=new Jn(this,this.j,a);let O=this.o;if(this.U&&(O?(O=ae(O),yt(O,this.U)):O=this.U),this.u!==null||this.R||(j.J=O,O=null),this.S)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var w=this.i[m];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(f+=w,f>4096){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=Km(this,j,f),m=ln(this.J),ye(m,"RID",a),ye(m,"CVER",22),this.G&&ye(m,"X-HTTP-Session-Id",this.G),io(this,m),O&&(this.R?f="headers="+Qi(Um(O))+"&"+f:this.u&&Gc(m,this.u,O)),Wc(this.h,j),this.Ra&&ye(m,"TYPE","init"),this.S?(ye(m,"$req",f),ye(m,"SID","null"),j.U=!0,Uc(j,m,null)):Uc(j,m,f),this.I=2}}else this.I==3&&(a?Gm(this,a):this.i.length==0||bm(this.h)||Gm(this))};function Gm(a,f){var m;f?m=f.l:m=a.V++;const w=ln(a.J);ye(w,"SID",a.M),ye(w,"RID",m),ye(w,"AID",a.K),io(a,w),a.u&&a.o&&Gc(w,a.u,a.o),m=new Jn(a,a.j,m,a.D+1),a.u===null&&(m.J=a.o),f&&(a.i=f.G.concat(a.i)),f=Km(a,m,1e3),m.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Wc(a.h,m),Uc(m,w,f)}function io(a,f){a.H&&q(a.H,function(m,w){ye(f,w,m)}),a.l&&q({},function(m,w){ye(f,w,m)})}function Km(a,f,m){m=Math.min(a.i.length,m);const w=a.l?c(a.l.Ka,a.l,a):null;e:{var j=a.i;let ee=-1;for(;;){const Le=["count="+m];ee==-1?m>0?(ee=j[0].g,Le.push("ofs="+ee)):ee=0:Le.push("ofs="+ee);let de=!0;for(let Be=0;Be<m;Be++){var O=j[Be].g;const un=j[Be].map;if(O-=ee,O<0)ee=Math.max(0,j[Be].g-100),de=!1;else try{O="req"+O+"_"||"";try{var $=un instanceof Map?un:Object.entries(un);for(const[Xr,tr]of $){let nr=tr;l(tr)&&(nr=Vc(tr)),Le.push(O+Xr+"="+encodeURIComponent(nr))}}catch(Xr){throw Le.push(O+"type="+encodeURIComponent("_badmap")),Xr}}catch{w&&w(un)}}if(de){$=Le.join("&");break e}}$=void 0}return a=a.i.splice(0,m),f.G=a,$}function Qm(a){if(!a.g&&!a.v){a.Y=1;var f=a.Da;V||v(),P||(V(),P=!0),E.add(f,a),a.A=0}}function Qc(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Gi(c(a.Da,a),Xm(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Ym(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Gi(c(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,dt(10),Ya(this),Ym(this))};function Yc(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Ym(a){a.g=new Jn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var f=ln(a.na);ye(f,"RID","rpc"),ye(f,"SID",a.M),ye(f,"AID",a.K),ye(f,"CI",a.F?"0":"1"),!a.F&&a.ia&&ye(f,"TO",a.ia),ye(f,"TYPE","xmlhttp"),io(a,f),a.u&&a.o&&Gc(f,a.u,a.o),a.O&&(a.g.H=a.O);var m=a.g;a=a.ba,m.M=1,m.A=Ga(ln(f)),m.u=null,m.R=!0,Im(m,a)}t.Va=function(){this.C!=null&&(this.C=null,Ya(this),Qc(this),dt(19))};function Xa(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Jm(a,f){var m=null;if(a.g==f){Xa(a),Yc(a),a.g=null;var w=2}else if(Bc(a.h,f))m=f.G,km(a.h,f),w=1;else return;if(a.I!=0){if(f.o)if(w==1){m=f.u?f.u.length:0,f=Date.now()-f.F;var j=a.D;w=Wa(),ht(w,new _m(w,m)),Ja(a)}else Qm(a);else if(j=f.m,j==3||j==0&&f.X>0||!(w==1&&oT(a,f)||w==2&&Qc(a)))switch(m&&m.length>0&&(f=a.h,f.i=f.i.concat(m)),j){case 1:Jr(a,5);break;case 4:Jr(a,10);break;case 3:Jr(a,6);break;default:Jr(a,2)}}}function Xm(a,f){let m=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(m*=2),m*f}function Jr(a,f){if(a.j.info("Error code "+f),f==2){var m=c(a.bb,a),w=a.Ua;const j=!w;w=new Xn(w||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ji(w,"https"),Ga(w),j?eT(w.toString(),m):tT(w.toString(),m)}else dt(2);a.I=0,a.l&&a.l.pa(f),Zm(a),qm(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function Zm(a){if(a.I=0,a.ja=[],a.l){const f=Cm(a.h);(f.length!=0||a.i.length!=0)&&(b(a.ja,f),b(a.ja,a.i),a.h.i.length=0,T(a.i),a.i.length=0),a.l.oa()}}function eg(a,f,m){var w=m instanceof Xn?ln(m):new Xn(m);if(w.g!="")f&&(w.g=f+"."+w.g),Xi(w,w.u);else{var j=o.location;w=j.protocol,f=f?f+"."+j.hostname:j.hostname,j=+j.port;const O=new Xn(null);w&&Ji(O,w),f&&(O.g=f),j&&Xi(O,j),m&&(O.h=m),w=O}return m=a.G,f=a.wa,m&&f&&ye(w,m,f),ye(w,"VER",a.ka),io(a,w),w}function tg(a,f,m){if(f&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=a.Aa&&!a.ma?new Re(new qc({ab:m})):new Re(a.ma),f.Fa(a.L),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ng(){}t=ng.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Za(){}Za.prototype.g=function(a,f){return new bt(a,f)};function bt(a,f){tt.call(this),this.g=new Hm(f),this.l=a,this.h=f&&f.messageUrlParams||null,a=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(a?a["X-WebChannel-Content-Type"]=f.messageContentType:a={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(a?a["X-WebChannel-Client-Profile"]=f.sa:a={"X-WebChannel-Client-Profile":f.sa}),this.g.U=a,(a=f&&f.Qb)&&!S(a)&&(this.g.u=a),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!S(f)&&(this.g.G=f,a=this.h,a!==null&&f in a&&(a=this.h,f in a&&delete a[f])),this.j=new Cs(this)}p(bt,tt),bt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},bt.prototype.close=function(){Kc(this.g)},bt.prototype.o=function(a){var f=this.g;if(typeof a=="string"){var m={};m.__data__=a,a=m}else this.v&&(m={},m.__data__=Vc(a),a=m);f.i.push(new qE(f.Ya++,a)),f.I==3&&Ja(f)},bt.prototype.N=function(){this.g.l=null,delete this.j,Kc(this.g),delete this.g,bt.Z.N.call(this)};function rg(a){Oc.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var f=a.__sm__;if(f){e:{for(const m in f){a=m;break e}a=void 0}(this.i=a)&&(a=this.i,f=f!==null&&a in f?f[a]:void 0),this.data=f}else this.data=a}p(rg,Oc);function sg(){Mc.call(this),this.status=1}p(sg,Mc);function Cs(a){this.g=a}p(Cs,ng),Cs.prototype.ra=function(){ht(this.g,"a")},Cs.prototype.qa=function(a){ht(this.g,new rg(a))},Cs.prototype.pa=function(a){ht(this.g,new sg)},Cs.prototype.oa=function(){ht(this.g,"b")},Za.prototype.createWebChannel=Za.prototype.g,bt.prototype.send=bt.prototype.o,bt.prototype.open=bt.prototype.m,bt.prototype.close=bt.prototype.close,Vw=function(){return new Za},jw=function(){return Wa()},Dw=Kr,Qd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ha.NO_ERROR=0,Ha.TIMEOUT=8,Ha.HTTP_ERROR=6,$l=Ha,wm.COMPLETE="complete",Pw=wm,mm.EventType=Hi,Hi.OPEN="a",Hi.CLOSE="b",Hi.ERROR="c",Hi.MESSAGE="d",tt.prototype.listen=tt.prototype.J,wo=mm,Re.prototype.listenOnce=Re.prototype.K,Re.prototype.getLastError=Re.prototype.Ha,Re.prototype.getLastErrorCode=Re.prototype.ya,Re.prototype.getStatus=Re.prototype.ca,Re.prototype.getResponseJson=Re.prototype.La,Re.prototype.getResponseText=Re.prototype.la,Re.prototype.send=Re.prototype.ea,Re.prototype.setWithCredentials=Re.prototype.Fa,Cw=Re}).apply(typeof _l<"u"?_l:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let it=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};it.UNAUTHENTICATED=new it(null),it.GOOGLE_CREDENTIALS=new it("google-credentials-uid"),it.FIRST_PARTY=new it("first-party-uid"),it.MOCK_USER=new it("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oi="12.8.0";function wA(t){Oi=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s=new yp("@firebase/firestore");function Vs(){return _s.logLevel}function W(t,...e){if(_s.logLevel<=re.DEBUG){const n=e.map(kp);_s.debug(`Firestore (${Oi}): ${t}`,...n)}}function $n(t,...e){if(_s.logLevel<=re.ERROR){const n=e.map(kp);_s.error(`Firestore (${Oi}): ${t}`,...n)}}function ws(t,...e){if(_s.logLevel<=re.WARN){const n=e.map(kp);_s.warn(`Firestore (${Oi}): ${t}`,...n)}}function kp(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Ow(t,r,n)}function Ow(t,e,n){let r=`FIRESTORE (${Oi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw $n(r),new Error(r)}function ce(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Ow(e,s,r)}function Z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends In{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Lw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(it.UNAUTHENTICATED))}shutdown(){}}class xA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class EA{constructor(e){this.t=e,this.currentUser=it.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ce(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new br;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new br,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new br)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ce(typeof r.accessToken=="string",31837,{l:r}),new Mw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ce(e===null||typeof e=="string",2055,{h:e}),new it(e)}}class TA{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=it.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class IA{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new TA(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(it.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Xy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SA{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ft(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ce(this.o===void 0,3512);const r=i=>{i.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Xy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ce(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Xy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=NA(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function se(t,e){return t<e?-1:t>e?1:0}function Yd(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Ph(s)===Ph(i)?se(s,i):Ph(s)?1:-1}return se(t.length,e.length)}const RA=55296,bA=57343;function Ph(t){const e=t.charCodeAt(0);return e>=RA&&e<=bA}function xi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy="__name__";class dn{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Y(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return dn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof dn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=dn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return se(e.length,n.length)}static compareSegments(e,n){const r=dn.isNumericId(e),s=dn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?dn.extractNumericId(e).compare(dn.extractNumericId(n)):Yd(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Rr.fromString(e.substring(4,e.length-2))}}class pe extends dn{construct(e,n,r){return new pe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new B(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new pe(n)}static emptyPath(){return new pe([])}}const AA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ge extends dn{construct(e,n,r){return new Ge(e,n,r)}static isValidIdentifier(e){return AA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ge.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Zy}static keyField(){return new Ge([Zy])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new B(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new B(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new B(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new B(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ge(n)}static emptyPath(){return new Ge([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(pe.fromString(e))}static fromName(e){return new G(pe.fromString(e).popFirst(5))}static empty(){return new G(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new pe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(t,e,n){if(!n)throw new B(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Uw(t,e,n,r){if(e===!0&&r===!0)throw new B(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function e0(t){if(!G.isDocumentKey(t))throw new B(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function t0(t){if(G.isDocumentKey(t))throw new B(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function zw(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function fc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y(12329,{type:typeof t})}function $t(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fc(t);throw new B(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t,e){const n={typeString:t};return e&&(n.value=e),n}function Aa(t,e){if(!zw(t))throw new B(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new B(M.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0=-62135596800,r0=1e6;class me{static now(){return me.fromMillis(Date.now())}static fromDate(e){return me.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*r0);return new me(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<n0)throw new B(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/r0}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:me._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Aa(e,me._jsonSchema))return new me(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-n0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}me._jsonSchemaVersion="firestore/timestamp/1.0",me._jsonSchema={type:Me("string",me._jsonSchemaVersion),seconds:Me("number"),nanoseconds:Me("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{static fromTimestamp(e){return new X(e)}static min(){return new X(new me(0,0))}static max(){return new X(new me(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=-1;function kA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=X.fromTimestamp(r===1e9?new me(n+1,0):new me(n,r));return new jr(s,G.empty(),e)}function CA(t){return new jr(t.readTime,t.key,ua)}class jr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new jr(X.min(),G.empty(),ua)}static max(){return new jr(X.max(),G.empty(),ua)}}function PA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mi(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==DA)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const c=u;n(e[c]).next(d=>{o[c]=d,++l,l===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function VA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Li(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}pc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cp=-1;function mc(t){return t==null}function Ru(t){return t===0&&1/t==-1/0}function OA(t){return typeof t=="number"&&Number.isInteger(t)&&!Ru(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w="";function MA(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=s0(e)),e=LA(t.get(n),e);return s0(e)}function LA(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case $w:n+="";break;default:n+=i}}return n}function s0(t){return t+$w+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Bw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e,n){this.comparator=e,this.root=n||Xe.EMPTY}insert(e,n){return new Se(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xe.BLACK,null,null))}remove(e){return new Se(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wl(this.root,e,this.comparator,!1)}getReverseIterator(){return new wl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wl(this.root,e,this.comparator,!0)}}class wl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xe{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Xe.RED,this.left=s??Xe.EMPTY,this.right=i??Xe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Xe(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Xe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Xe.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Y(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Y(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Y(27949);return e+(this.isRed()?0:1)}}Xe.EMPTY=null,Xe.RED=!0,Xe.BLACK=!1;Xe.EMPTY=new class{constructor(){this.size=0}get key(){throw Y(57766)}get value(){throw Y(16141)}get color(){throw Y(16727)}get left(){throw Y(29726)}get right(){throw Y(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Xe(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.comparator=e,this.data=new Se(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new o0(this.data.getIterator())}getIteratorFrom(e){return new o0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ze(this.comparator);return n.data=e,n}}class o0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.fields=e,e.sort(Ge.comparator)}static empty(){return new Pt([])}unionWith(e){let n=new ze(Ge.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Pt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return xi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Ww("Invalid base64 string: "+i):i}}(e);return new Ye(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ye(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ye.EMPTY_BYTE_STRING=new Ye("");const FA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vr(t){if(ce(!!t,39018),typeof t=="string"){let e=0;const n=FA.exec(t);if(ce(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ae(t.seconds),nanos:Ae(t.nanos)}}function Ae(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Or(t){return typeof t=="string"?Ye.fromBase64String(t):Ye.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw="server_timestamp",qw="__type__",Gw="__previous_value__",Kw="__local_write_time__";function Pp(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[qw])==null?void 0:r.stringValue)===Hw}function gc(t){const e=t.mapValue.fields[Gw];return Pp(e)?gc(e):e}function ca(t){const e=Vr(t.mapValue.fields[Kw].timestampValue);return new me(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,n,r,s,i,o,l,u,c,d,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=d,this.apiKey=p}}const bu="(default)";class Ei{constructor(e,n){this.projectId=e,this.database=n||bu}static empty(){return new Ei("","")}get isDefaultDatabase(){return this.database===bu}isEqual(e){return e instanceof Ei&&e.projectId===this.projectId&&e.database===this.database}}function zA(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new B(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ei(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw="__type__",$A="__max__",xl={mapValue:{}},Yw="__vector__",Au="value";function Mr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Pp(t)?4:WA(t)?9007199254740991:BA(t)?10:11:Y(28295,{value:t})}function xn(t,e){if(t===e)return!0;const n=Mr(t);if(n!==Mr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ca(t).isEqual(ca(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Vr(s.timestampValue),l=Vr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Or(s.bytesValue).isEqual(Or(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ae(s.geoPointValue.latitude)===Ae(i.geoPointValue.latitude)&&Ae(s.geoPointValue.longitude)===Ae(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ae(s.integerValue)===Ae(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ae(s.doubleValue),l=Ae(i.doubleValue);return o===l?Ru(o)===Ru(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return xi(t.arrayValue.values||[],e.arrayValue.values||[],xn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(i0(o)!==i0(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!xn(o[u],l[u])))return!1;return!0}(t,e);default:return Y(52216,{left:t})}}function ha(t,e){return(t.values||[]).find(n=>xn(n,e))!==void 0}function Ti(t,e){if(t===e)return 0;const n=Mr(t),r=Mr(e);if(n!==r)return se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return se(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Ae(i.integerValue||i.doubleValue),u=Ae(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return a0(t.timestampValue,e.timestampValue);case 4:return a0(ca(t),ca(e));case 5:return Yd(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Or(i),u=Or(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const d=se(l[c],u[c]);if(d!==0)return d}return se(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=se(Ae(i.latitude),Ae(o.latitude));return l!==0?l:se(Ae(i.longitude),Ae(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return l0(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,T,b,k;const l=i.fields||{},u=o.fields||{},c=(g=l[Au])==null?void 0:g.arrayValue,d=(T=u[Au])==null?void 0:T.arrayValue,p=se(((b=c==null?void 0:c.values)==null?void 0:b.length)||0,((k=d==null?void 0:d.values)==null?void 0:k.length)||0);return p!==0?p:l0(c,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===xl.mapValue&&o===xl.mapValue)return 0;if(i===xl.mapValue)return 1;if(o===xl.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),c=o.fields||{},d=Object.keys(c);u.sort(),d.sort();for(let p=0;p<u.length&&p<d.length;++p){const g=Yd(u[p],d[p]);if(g!==0)return g;const T=Ti(l[u[p]],c[d[p]]);if(T!==0)return T}return se(u.length,d.length)}(t.mapValue,e.mapValue);default:throw Y(23264,{he:n})}}function a0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return se(t,e);const n=Vr(t),r=Vr(e),s=se(n.seconds,r.seconds);return s!==0?s:se(n.nanos,r.nanos)}function l0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ti(n[s],r[s]);if(i)return i}return se(n.length,r.length)}function Ii(t){return Jd(t)}function Jd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Vr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Or(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Jd(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Jd(n.fields[o])}`;return s+"}"}(t.mapValue):Y(61005,{value:t})}function Bl(t){switch(Mr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gc(t);return e?16+Bl(e):16;case 5:return 2*t.stringValue.length;case 6:return Or(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Bl(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Wr(r.fields,(i,o)=>{s+=i.length+Bl(o)}),s}(t.mapValue);default:throw Y(13486,{value:t})}}function u0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Xd(t){return!!t&&"integerValue"in t}function Dp(t){return!!t&&"arrayValue"in t}function c0(t){return!!t&&"nullValue"in t}function h0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wl(t){return!!t&&"mapValue"in t}function BA(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Qw])==null?void 0:r.stringValue)===Yw}function jo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Wr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=jo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=jo(t.arrayValue.values[n]);return e}return{...t}}function WA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===$A}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.value=e}static empty(){return new xt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Wl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=jo(n)}setAll(e){let n=Ge.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=jo(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Wl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Wl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Wr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new xt(jo(this.value))}}function Jw(t){const e=[];return Wr(t.fields,(n,r)=>{const s=new Ge([n]);if(Wl(r)){const i=Jw(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Pt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new at(e,0,X.min(),X.min(),X.min(),xt.empty(),0)}static newFoundDocument(e,n,r,s){return new at(e,1,n,X.min(),r,s,0)}static newNoDocument(e,n){return new at(e,2,n,X.min(),X.min(),xt.empty(),0)}static newUnknownDocument(e,n){return new at(e,3,n,X.min(),X.min(),xt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof at&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new at(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n){this.position=e,this.inclusive=n}}function d0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=Ti(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function f0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!xn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,n="asc"){this.field=e,this.dir=n}}function HA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{}class Oe extends Xw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new GA(e,n,r):n==="array-contains"?new YA(e,r):n==="in"?new JA(e,r):n==="not-in"?new XA(e,r):n==="array-contains-any"?new ZA(e,r):new Oe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new KA(e,r):new QA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ti(n,this.value)):n!==null&&Mr(this.value)===Mr(n)&&this.matchesComparison(Ti(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class on extends Xw{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new on(e,n)}matches(e){return Zw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Zw(t){return t.op==="and"}function ex(t){return qA(t)&&Zw(t)}function qA(t){for(const e of t.filters)if(e instanceof on)return!1;return!0}function Zd(t){if(t instanceof Oe)return t.field.canonicalString()+t.op.toString()+Ii(t.value);if(ex(t))return t.filters.map(e=>Zd(e)).join(",");{const e=t.filters.map(n=>Zd(n)).join(",");return`${t.op}(${e})`}}function tx(t,e){return t instanceof Oe?function(r,s){return s instanceof Oe&&r.op===s.op&&r.field.isEqual(s.field)&&xn(r.value,s.value)}(t,e):t instanceof on?function(r,s){return s instanceof on&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&tx(o,s.filters[l]),!0):!1}(t,e):void Y(19439)}function nx(t){return t instanceof Oe?function(n){return`${n.field.canonicalString()} ${n.op} ${Ii(n.value)}`}(t):t instanceof on?function(n){return n.op.toString()+" {"+n.getFilters().map(nx).join(" ,")+"}"}(t):"Filter"}class GA extends Oe{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class KA extends Oe{constructor(e,n){super(e,"in",n),this.keys=rx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class QA extends Oe{constructor(e,n){super(e,"not-in",n),this.keys=rx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function rx(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class YA extends Oe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Dp(n)&&ha(n.arrayValue,this.value)}}class JA extends Oe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ha(this.value.arrayValue,n)}}class XA extends Oe{constructor(e,n){super(e,"not-in",n)}matches(e){if(ha(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ha(this.value.arrayValue,n)}}class ZA extends Oe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Dp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ha(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function p0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new ek(t,e,n,r,s,i,o)}function jp(t){const e=Z(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Zd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),mc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ii(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ii(r)).join(",")),e.Te=n}return e.Te}function Vp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!HA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!tx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!f0(t.startAt,e.startAt)&&f0(t.endAt,e.endAt)}function ef(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function tk(t,e,n,r,s,i,o,l){return new Fi(t,e,n,r,s,i,o,l)}function Op(t){return new Fi(t)}function m0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function nk(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function sx(t){return t.collectionGroup!==null}function Vo(t){const e=Z(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new ze(Ge.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new da(i,r))}),n.has(Ge.keyField().canonicalString())||e.Ie.push(new da(Ge.keyField(),r))}return e.Ie}function vn(t){const e=Z(t);return e.Ee||(e.Ee=rk(e,Vo(t))),e.Ee}function rk(t,e){if(t.limitType==="F")return p0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new da(s.field,i)});const n=t.endAt?new ku(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ku(t.startAt.position,t.startAt.inclusive):null;return p0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function tf(t,e){const n=t.filters.concat([e]);return new Fi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function sk(t,e){const n=t.explicitOrderBy.concat([e]);return new Fi(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function nf(t,e,n){return new Fi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yc(t,e){return Vp(vn(t),vn(e))&&t.limitType===e.limitType}function ix(t){return`${jp(vn(t))}|lt:${t.limitType}`}function Os(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>nx(s)).join(", ")}]`),mc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ii(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ii(s)).join(",")),`Target(${r})`}(vn(t))}; limitType=${t.limitType})`}function vc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):G.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Vo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const c=d0(o,l,u);return o.inclusive?c<=0:c<0}(r.startAt,Vo(r),s)||r.endAt&&!function(o,l,u){const c=d0(o,l,u);return o.inclusive?c>=0:c>0}(r.endAt,Vo(r),s))}(t,e)}function ik(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ox(t){return(e,n)=>{let r=!1;for(const s of Vo(t)){const i=ok(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function ok(t,e,n){const r=t.field.isKeyField()?G.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),c=l.data.field(i);return u!==null&&c!==null?Ti(u,c):Y(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Wr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Bw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak=new Se(G.comparator);function Bn(){return ak}const ax=new Se(G.comparator);function xo(...t){let e=ax;for(const n of t)e=e.insert(n.key,n);return e}function lx(t){let e=ax;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function os(){return Oo()}function ux(){return Oo()}function Oo(){return new Rs(t=>t.toString(),(t,e)=>t.isEqual(e))}const lk=new Se(G.comparator),uk=new ze(G.comparator);function ie(...t){let e=uk;for(const n of t)e=e.add(n);return e}const ck=new ze(se);function hk(){return ck}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ru(e)?"-0":e}}function cx(t){return{integerValue:""+t}}function dk(t,e){return OA(e)?cx(e):Mp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(){this._=void 0}}function fk(t,e,n){return t instanceof Cu?function(s,i){const o={fields:{[qw]:{stringValue:Hw},[Kw]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Pp(i)&&(i=gc(i)),i&&(o.fields[Gw]=i),{mapValue:o}}(n,e):t instanceof fa?dx(t,e):t instanceof pa?fx(t,e):function(s,i){const o=hx(s,i),l=g0(o)+g0(s.Ae);return Xd(o)&&Xd(s.Ae)?cx(l):Mp(s.serializer,l)}(t,e)}function pk(t,e,n){return t instanceof fa?dx(t,e):t instanceof pa?fx(t,e):n}function hx(t,e){return t instanceof Pu?function(r){return Xd(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Cu extends _c{}class fa extends _c{constructor(e){super(),this.elements=e}}function dx(t,e){const n=px(e);for(const r of t.elements)n.some(s=>xn(s,r))||n.push(r);return{arrayValue:{values:n}}}class pa extends _c{constructor(e){super(),this.elements=e}}function fx(t,e){let n=px(e);for(const r of t.elements)n=n.filter(s=>!xn(s,r));return{arrayValue:{values:n}}}class Pu extends _c{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function g0(t){return Ae(t.integerValue||t.doubleValue)}function px(t){return Dp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function mk(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof fa&&s instanceof fa||r instanceof pa&&s instanceof pa?xi(r.elements,s.elements,xn):r instanceof Pu&&s instanceof Pu?xn(r.Ae,s.Ae):r instanceof Cu&&s instanceof Cu}(t.transform,e.transform)}class gk{constructor(e,n){this.version=e,this.transformResults=n}}class Nt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Nt}static exists(e){return new Nt(void 0,e)}static updateTime(e){return new Nt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class wc{}function mx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new xc(t.key,Nt.none()):new ka(t.key,t.data,Nt.none());{const n=t.data,r=xt.empty();let s=new ze(Ge.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Hr(t.key,r,new Pt(s.toArray()),Nt.none())}}function yk(t,e,n){t instanceof ka?function(s,i,o){const l=s.value.clone(),u=v0(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Hr?function(s,i,o){if(!Hl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=v0(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(gx(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Mo(t,e,n,r){return t instanceof ka?function(i,o,l,u){if(!Hl(i.precondition,o))return l;const c=i.value.clone(),d=_0(i.fieldTransforms,u,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Hr?function(i,o,l,u){if(!Hl(i.precondition,o))return l;const c=_0(i.fieldTransforms,u,o),d=o.data;return d.setAll(gx(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,l){return Hl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function vk(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=hx(r.transform,s||null);i!=null&&(n===null&&(n=xt.empty()),n.set(r.field,i))}return n||null}function y0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&xi(r,s,(i,o)=>mk(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ka extends wc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Hr extends wc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function gx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function v0(t,e,n){const r=new Map;ce(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,pk(o,l,n[s]))}return r}function _0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,fk(i,o,e))}return r}class xc extends wc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _k extends wc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&yk(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Mo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Mo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ux();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=mx(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&xi(this.mutations,e.mutations,(n,r)=>y0(n,r))&&xi(this.baseMutations,e.baseMutations,(n,r)=>y0(n,r))}}class Lp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ce(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return lk}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Lp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je,le;function Tk(t){switch(t){case M.OK:return Y(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return Y(15467,{code:t})}}function yx(t){if(t===void 0)return $n("GRPC error has no .code"),M.UNKNOWN;switch(t){case je.OK:return M.OK;case je.CANCELLED:return M.CANCELLED;case je.UNKNOWN:return M.UNKNOWN;case je.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case je.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case je.INTERNAL:return M.INTERNAL;case je.UNAVAILABLE:return M.UNAVAILABLE;case je.UNAUTHENTICATED:return M.UNAUTHENTICATED;case je.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case je.NOT_FOUND:return M.NOT_FOUND;case je.ALREADY_EXISTS:return M.ALREADY_EXISTS;case je.PERMISSION_DENIED:return M.PERMISSION_DENIED;case je.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case je.ABORTED:return M.ABORTED;case je.OUT_OF_RANGE:return M.OUT_OF_RANGE;case je.UNIMPLEMENTED:return M.UNIMPLEMENTED;case je.DATA_LOSS:return M.DATA_LOSS;default:return Y(39323,{code:t})}}(le=je||(je={}))[le.OK=0]="OK",le[le.CANCELLED=1]="CANCELLED",le[le.UNKNOWN=2]="UNKNOWN",le[le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",le[le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",le[le.NOT_FOUND=5]="NOT_FOUND",le[le.ALREADY_EXISTS=6]="ALREADY_EXISTS",le[le.PERMISSION_DENIED=7]="PERMISSION_DENIED",le[le.UNAUTHENTICATED=16]="UNAUTHENTICATED",le[le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",le[le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",le[le.ABORTED=10]="ABORTED",le[le.OUT_OF_RANGE=11]="OUT_OF_RANGE",le[le.UNIMPLEMENTED=12]="UNIMPLEMENTED",le[le.INTERNAL=13]="INTERNAL",le[le.UNAVAILABLE=14]="UNAVAILABLE",le[le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk=new Rr([4294967295,4294967295],0);function w0(t){const e=Ik().encode(t),n=new kw;return n.update(e),new Uint8Array(n.digest())}function x0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Rr([n,r],0),new Rr([s,i],0)]}class Fp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Eo(`Invalid padding: ${n}`);if(r<0)throw new Eo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Eo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Eo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Rr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Rr.fromNumber(r)));return s.compare(Sk)===1&&(s=new Rr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=w0(e),[r,s]=x0(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Fp(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=w0(e),[r,s]=x0(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Eo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ca.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ec(X.min(),s,new Se(se),Bn(),ie())}}class Ca{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ca(r,n,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class vx{constructor(e,n){this.targetId=e,this.Ce=n}}class _x{constructor(e,n,r=Ye.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class E0{constructor(){this.ve=0,this.Fe=T0(),this.Me=Ye.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ie(),n=ie(),r=ie();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Y(38017,{changeType:i})}}),new Ca(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=T0()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ce(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class Nk{constructor(e){this.Ge=e,this.ze=new Map,this.je=Bn(),this.He=El(),this.Je=El(),this.Ze=new Se(se)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Y(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(ef(i))if(r===0){const o=new G(i.path);this.et(n,o,at.newNoDocument(o,X.min()))}else ce(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),u=l?this.ct(l,e,o):1;if(u!==0){this.it(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Or(r).toUint8Array()}catch(u){if(u instanceof Ww)return ws("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Fp(o,s,i)}catch(u){return ws(u instanceof Eo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&ef(l.target)){const u=new G(l.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,at.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.Ke())}});let r=ie();this.Je.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.ot(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Ec(e,n,this.Ze,this.je,r);return this.je=Bn(),this.He=El(),this.Je=El(),this.Ze=new Se(se),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new E0,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new ze(se),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new ze(se),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new E0),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function El(){return new Se(G.comparator)}function T0(){return new Se(G.comparator)}const Rk={asc:"ASCENDING",desc:"DESCENDING"},bk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ak={and:"AND",or:"OR"};class kk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function rf(t,e){return t.useProto3Json||mc(e)?e:{value:e}}function Du(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Ck(t,e){return Du(t,e.toTimestamp())}function _n(t){return ce(!!t,49232),X.fromTimestamp(function(n){const r=Vr(n);return new me(r.seconds,r.nanos)}(t))}function Up(t,e){return sf(t,e).canonicalString()}function sf(t,e){const n=function(s){return new pe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function xx(t){const e=pe.fromString(t);return ce(Nx(e),10190,{key:e.toString()}),e}function of(t,e){return Up(t.databaseId,e.path)}function Dh(t,e){const n=xx(e);if(n.get(1)!==t.databaseId.projectId)throw new B(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(Tx(n))}function Ex(t,e){return Up(t.databaseId,e)}function Pk(t){const e=xx(t);return e.length===4?pe.emptyPath():Tx(e)}function af(t){return new pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Tx(t){return ce(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function I0(t,e,n){return{name:of(t,e),fields:n.value.mapValue.fields}}function Dk(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Y(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(ce(d===void 0||typeof d=="string",58123),Ye.fromBase64String(d||"")):(ce(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Ye.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(c){const d=c.code===void 0?M.UNKNOWN:yx(c.code);return new B(d,c.message||"")}(o);n=new _x(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Dh(t,r.document.name),i=_n(r.document.updateTime),o=r.document.createTime?_n(r.document.createTime):X.min(),l=new xt({mapValue:{fields:r.document.fields}}),u=at.newFoundDocument(s,i,o,l),c=r.targetIds||[],d=r.removedTargetIds||[];n=new ql(c,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Dh(t,r.document),i=r.readTime?_n(r.readTime):X.min(),o=at.newNoDocument(s,i),l=r.removedTargetIds||[];n=new ql([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Dh(t,r.document),i=r.removedTargetIds||[];n=new ql([],i,s,null)}else{if(!("filter"in e))return Y(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Ek(s,i),l=r.targetId;n=new vx(l,o)}}return n}function jk(t,e){let n;if(e instanceof ka)n={update:I0(t,e.key,e.value)};else if(e instanceof xc)n={delete:of(t,e.key)};else if(e instanceof Hr)n={update:I0(t,e.key,e.data),updateMask:Bk(e.fieldMask)};else{if(!(e instanceof _k))return Y(16599,{dt:e.type});n={verify:of(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Cu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof fa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof pa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Pu)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw Y(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Ck(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Y(27497)}(t,e.precondition)),n}function Vk(t,e){return t&&t.length>0?(ce(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?_n(s.updateTime):_n(i);return o.isEqual(X.min())&&(o=_n(i)),new gk(o,s.transformResults||[])}(n,e))):[]}function Ok(t,e){return{documents:[Ex(t,e.path)]}}function Mk(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ex(t,s);const i=function(c){if(c.length!==0)return Sx(on.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(g){return{field:Ms(g.field),direction:Uk(g.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=rf(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function Lk(t){let e=Pk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ce(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(p){const g=Ix(p);return g instanceof on&&ex(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(b){return new da(Ls(b.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,mc(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,T=p.values||[];return new ku(T,g)}(n.startAt));let c=null;return n.endAt&&(c=function(p){const g=!p.before,T=p.values||[];return new ku(T,g)}(n.endAt)),tk(e,s,o,i,l,"F",u,c)}function Fk(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Ix(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ls(n.unaryFilter.field);return Oe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ls(n.unaryFilter.field);return Oe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ls(n.unaryFilter.field);return Oe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ls(n.unaryFilter.field);return Oe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Y(61313);default:return Y(60726)}}(t):t.fieldFilter!==void 0?function(n){return Oe.create(Ls(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Y(58110);default:return Y(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return on.create(n.compositeFilter.filters.map(r=>Ix(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Y(1026)}}(n.compositeFilter.op))}(t):Y(30097,{filter:t})}function Uk(t){return Rk[t]}function zk(t){return bk[t]}function $k(t){return Ak[t]}function Ms(t){return{fieldPath:t.canonicalString()}}function Ls(t){return Ge.fromServerFormat(t.fieldPath)}function Sx(t){return t instanceof Oe?function(n){if(n.op==="=="){if(h0(n.value))return{unaryFilter:{field:Ms(n.field),op:"IS_NAN"}};if(c0(n.value))return{unaryFilter:{field:Ms(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(h0(n.value))return{unaryFilter:{field:Ms(n.field),op:"IS_NOT_NAN"}};if(c0(n.value))return{unaryFilter:{field:Ms(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ms(n.field),op:zk(n.op),value:n.value}}}(t):t instanceof on?function(n){const r=n.getFilters().map(s=>Sx(s));return r.length===1?r[0]:{compositeFilter:{op:$k(n.op),filters:r}}}(t):Y(54877,{filter:t})}function Bk(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Nx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function Rx(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,n,r,s,i=X.min(),o=X.min(),l=Ye.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new mr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e){this.yt=e}}function Hk(t){const e=Lk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?nf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(){this.Sn=new Gk}addToCollectionParentIndex(e,n){return this.Sn.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(jr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(jr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class Gk{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ze(pe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ze(pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bx=41943040;class _t{static withCacheSize(e){return new _t(e,_t.DEFAULT_COLLECTION_PERCENTILE,_t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_t.DEFAULT_COLLECTION_PERCENTILE=10,_t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_t.DEFAULT=new _t(bx,_t.DEFAULT_COLLECTION_PERCENTILE,_t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_t.DISABLED=new _t(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Si(0)}static ar(){return new Si(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0="LruGarbageCollector",Kk=1048576;function R0([t,e],[n,r]){const s=se(t,n);return s===0?se(e,r):s}class Qk{constructor(e){this.Pr=e,this.buffer=new ze(R0),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();R0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Yk{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){W(N0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Li(n)?W(N0,"Ignoring IndexedDB error during garbage collection: ",n):await Mi(n)}await this.Ar(3e5)})}}class Jk{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return F.resolve(pc.ce);const r=new Qk(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(S0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),S0):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,i,o,l,u,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(c=Date.now(),Vs()<=re.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(c-u)+`ms
Total Duration: ${c-d}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function Xk(t,e){return new Jk(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(){this.changes=new Rs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,at.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Mo(r.mutation,s,Pt.empty(),me.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ie()){const s=os();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=xo();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=os();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ie()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Bn();const o=Oo(),l=function(){return Oo()}();return n.forEach((u,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Hr)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Mo(d.mutation,c,d.mutation.getFieldMask(),me.now())):o.set(c.key,Pt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>l.set(c,new eC(d,o.get(c)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Oo();let s=new Se((o,l)=>o-l),i=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let d=r.get(u)||Pt.empty();d=l.applyToLocalView(c,d),r.set(u,d);const p=(s.get(l.batchId)||ie()).add(u);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,d=u.value,p=ux();d.forEach(g=>{if(!i.has(g)){const T=mx(n.get(g),r.get(g));T!==null&&p.set(g,T),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,p))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return nk(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):sx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(os());let l=ua,u=i;return o.next(c=>F.forEach(c,(d,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(d)?F.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{u=u.insert(d,g)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,u,c,ie())).next(d=>({batchId:l,changes:lx(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let s=xo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=xo();return this.indexManager.getCollectionParents(e,i).next(l=>F.forEach(l,u=>{const c=function(p,g){return new Fi(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,at.newInvalidDocument(d)))});let l=xo();return o.forEach((u,c)=>{const d=i.get(u);d!==void 0&&Mo(d.mutation,c,Pt.empty(),me.now()),vc(n,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return F.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:_n(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(s){return{name:s.name,query:Hk(s.bundledQuery),readTime:_n(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(){this.overlays=new Se(G.comparator),this.Lr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=os();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.bt(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Lr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=os(),i=n.length+1,o=new G(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Se((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=os(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const l=os(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>l.set(c,d)),!(l.size()>=s)););return F.resolve(l)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new xk(n,r));let i=this.Lr.get(n);i===void 0&&(i=ie(),this.Lr.set(n,i)),this.Lr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(){this.sessionToken=Ye.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(){this.kr=new ze(We.Kr),this.qr=new ze(We.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new We(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new We(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new G(new pe([])),r=new We(n,e),s=new We(n,e+1),i=[];return this.qr.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new G(new pe([])),r=new We(n,e),s=new We(n,e+1);let i=ie();return this.qr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new We(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class We{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return G.comparator(e.key,n.key)||se(e.Hr,n.Hr)}static Ur(e,n){return se(e.Hr,n.Hr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new ze(We.Kr)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new wk(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Jr=this.Jr.add(new We(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?Cp:this.Yn-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new We(n,0),s=new We(n,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],o=>{const l=this.Zr(o.Hr);i.push(l)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ze(se);return n.forEach(s=>{const i=new We(s,0),o=new We(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,o],l=>{r=r.add(l.Hr)})}),F.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;G.isDocumentKey(i)||(i=i.child(""));const o=new We(new G(i),0);let l=new ze(se);return this.Jr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(l=l.add(u.Hr)),!0)},o),F.resolve(this.Yr(l))}Yr(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ce(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return F.forEach(n.mutations,s=>{const i=new We(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new We(n,0),s=this.Jr.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e){this.ti=e,this.docs=function(){return new Se(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():at.newInvalidDocument(n))}getEntries(e,n){let r=Bn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():at.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Bn();const o=n.path,l=new G(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:d}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||PA(CA(d),r)<=0||(s.has(d.key)||vc(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Y(9500)}ni(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new aC(this)}getSize(e){return F.resolve(this.size)}}class aC extends Zk{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e){this.persistence=e,this.ri=new Rs(n=>jp(n),Vp),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.ii=0,this.si=new zp,this.targetCount=0,this.oi=Si._r()}forEachTarget(e,n){return this.ri.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),F.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Si(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.lr(n),F.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ri.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ri.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,n){this._i={},this.overlays={},this.ai=new pc(0),this.ui=!1,this.ui=!0,this.ci=new sC,this.referenceDelegate=e(this),this.li=new lC(this),this.indexManager=new qk,this.remoteDocumentCache=function(s){return new oC(s)}(r=>this.referenceDelegate.hi(r)),this.serializer=new Wk(n),this.Pi=new nC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new rC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new iC(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const s=new uC(this.ai.next());return this.referenceDelegate.Ti(),r(s).next(i=>this.referenceDelegate.Ii(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return F.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class uC extends jA{constructor(e){super(),this.currentSequenceNumber=e}}class $p{constructor(e){this.persistence=e,this.Ri=new zp,this.Ai=null}static Vi(e){return new $p(e)}get di(){if(this.Ai)return this.Ai;throw Y(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),F.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.di,r=>{const s=G.fromPath(r);return this.mi(e,s).next(i=>{i||n.removeEntry(s,X.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return F.or([()=>F.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class ju{constructor(e,n){this.persistence=e,this.fi=new Rs(r=>MA(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Xk(this,n)}static Vi(e,n){return new ju(e,n)}Ti(){}Ii(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return F.forEach(this.fi,(r,s)=>this.wr(e,r,s).next(i=>i?F.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,o=>this.wr(e,o,n).next(l=>{l||(r++,i.removeEntry(o,X.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),F.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Bl(e.data.value)),n}wr(e,n,r){return F.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return F.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=ie(),s=ie();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Bp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return nN()?8:VA(ct())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.gs(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ps(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new cC;return this.ys(e,n,o).next(l=>{if(i.result=l,this.As)return this.ws(e,n,o,l.size)})}).next(()=>i.result)}ws(e,n,r,s){return r.documentReadCount<this.Vs?(Vs()<=re.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Os(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),F.resolve()):(Vs()<=re.DEBUG&&W("QueryEngine","Query:",Os(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Vs()<=re.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Os(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vn(n))):F.resolve())}gs(e,n){if(m0(n))return F.resolve(null);let r=vn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=nf(n,null,"F"),r=vn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ie(...i);return this.fs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.bs(n,l);return this.Ss(n,c,o,u.readTime)?this.gs(e,nf(n,null,"F")):this.Ds(e,c,n,u)}))})))}ps(e,n,r,s){return m0(n)||s.isEqual(X.min())?F.resolve(null):this.fs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ss(n,o,r,s)?F.resolve(null):(Vs()<=re.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Os(n)),this.Ds(e,o,n,kA(s,ua)).next(l=>l))})}bs(e,n){let r=new ze(ox(e));return n.forEach((s,i)=>{vc(e,i)&&(r=r.add(i))}),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,n,r){return Vs()<=re.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Os(n)),this.fs.getDocumentsMatchingQuery(e,n,jr.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="LocalStore",dC=3e8;class fC{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new Se(se),this.Fs=new Rs(i=>jp(i),Vp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tC(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function pC(t,e,n,r){return new fC(t,e,n,r)}async function kx(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=ie();for(const c of s){o.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of i){l.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(c=>({Ns:c,removedBatchIds:o,addedBatchIds:l}))})})}function mC(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(l,u,c,d){const p=c.batch,g=p.keys();let T=F.resolve();return g.forEach(b=>{T=T.next(()=>d.getEntry(u,b)).next(k=>{const N=c.docVersions.get(b);ce(N!==null,48541),k.version.compareTo(N)<0&&(p.applyToRemoteDocument(k,c),k.isValidDocument()&&(k.setReadTime(c.commitVersion),d.addEntry(k)))})}),T.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ie();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Cx(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function gC(t,e){const n=Z(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const l=[];e.targetChanges.forEach((d,p)=>{const g=s.get(p);if(!g)return;l.push(n.li.removeMatchingKeys(i,d.removedDocuments,p).next(()=>n.li.addMatchingKeys(i,d.addedDocuments,p)));let T=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?T=T.withResumeToken(Ye.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):d.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(d.resumeToken,r)),s=s.insert(p,T),function(k,N,_){return k.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=dC?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(g,T,d)&&l.push(n.li.updateTargetData(i,T))});let u=Bn(),c=ie();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(yC(i,o,e.documentUpdates).next(d=>{u=d.Bs,c=d.Ls})),!r.isEqual(X.min())){const d=n.li.getLastRemoteSnapshotVersion(i).next(p=>n.li.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(d)}return F.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,c)).next(()=>u)}).then(i=>(n.vs=s,i))}function yC(t,e,n){let r=ie(),s=ie();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Bn();return n.forEach((l,u)=>{const c=i.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):W(Wp,"Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Bs:o,Ls:s}})}function vC(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Cp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _C(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.li.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.li.allocateTargetId(r).next(o=>(s=new mr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function lf(t,e,n){const r=Z(t),s=r.vs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Li(o))throw o;W(Wp,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function b0(t,e,n){const r=Z(t);let s=X.min(),i=ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,d){const p=Z(u),g=p.Fs.get(d);return g!==void 0?F.resolve(p.vs.get(g)):p.li.getTargetData(c,d)}(r,o,vn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:X.min(),n?i:ie())).next(l=>(wC(r,ik(e),l),{documents:l,ks:i})))}function wC(t,e,n){let r=t.Ms.get(e)||X.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ms.set(e,r)}class A0{constructor(){this.activeTargetIds=hk()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xC{constructor(){this.vo=new A0,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new A0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0="ConnectivityMonitor";class C0{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){W(k0,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){W(k0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tl=null;function uf(){return Tl===null?Tl=function(){return 268435456+Math.round(2147483648*Math.random())}():Tl++,"0x"+Tl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh="RestConnection",TC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class IC{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===bu?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=uf(),l=this.Qo(e,n.toUriEncodedString());W(jh,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,s,i);const{host:c}=new URL(l),d=Ss(c);return this.zo(e,l,u,r,d).then(p=>(W(jh,`Received RPC '${e}' ${o}: `,p),p),p=>{throw ws(jh,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",r),p})}jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Oi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Qo(e,n){const r=TC[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st="WebChannelConnection",mo=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(s){setTimeout(()=>{throw s},0)}})};class li extends IC{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!li.c_){const e=jw();mo(e,Dw.STAT_EVENT,n=>{n.stat===Qd.PROXY?W(st,"STAT_EVENT: detected buffering proxy"):n.stat===Qd.NOPROXY&&W(st,"STAT_EVENT: detected no buffering proxy")}),li.c_=!0}}zo(e,n,r,s,i){const o=uf();return new Promise((l,u)=>{const c=new Cw;c.setWithCredentials(!0),c.listenOnce(Pw.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case $l.NO_ERROR:const p=c.getResponseJson();W(st,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case $l.TIMEOUT:W(st,`RPC '${e}' ${o} timed out`),u(new B(M.DEADLINE_EXCEEDED,"Request time out"));break;case $l.HTTP_ERROR:const g=c.getStatus();if(W(st,`RPC '${e}' ${o} failed with status:`,g,"response text:",c.getResponseText()),g>0){let T=c.getResponseJson();Array.isArray(T)&&(T=T[0]);const b=T==null?void 0:T.error;if(b&&b.status&&b.message){const k=function(_){const y=_.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(y)>=0?y:M.UNKNOWN}(b.status);u(new B(k,b.message))}else u(new B(M.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new B(M.UNAVAILABLE,"Connection failed."));break;default:Y(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{W(st,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);W(st,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",d,r,15)})}T_(e,n,r){const s=uf(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=i.join("");W(st,`Creating RPC '${e}' stream ${s}: ${c}`,l);const d=o.createWebChannel(c,l);this.I_(d);let p=!1,g=!1;const T=new SC({Ho:b=>{g?W(st,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(p||(W(st,`Opening RPC '${e}' stream ${s} transport.`),d.open(),p=!0),W(st,`RPC '${e}' stream ${s} sending:`,b),d.send(b))},Jo:()=>d.close()});return mo(d,wo.EventType.OPEN,()=>{g||(W(st,`RPC '${e}' stream ${s} transport opened.`),T.i_())}),mo(d,wo.EventType.CLOSE,()=>{g||(g=!0,W(st,`RPC '${e}' stream ${s} transport closed`),T.o_(),this.E_(d))}),mo(d,wo.EventType.ERROR,b=>{g||(g=!0,ws(st,`RPC '${e}' stream ${s} transport errored. Name:`,b.name,"Message:",b.message),T.o_(new B(M.UNAVAILABLE,"The operation could not be completed")))}),mo(d,wo.EventType.MESSAGE,b=>{var k;if(!g){const N=b.data[0];ce(!!N,16349);const _=N,y=(_==null?void 0:_.error)||((k=_[0])==null?void 0:k.error);if(y){W(st,`RPC '${e}' stream ${s} received error:`,y);const x=y.status;let C=function(E){const v=je[E];if(v!==void 0)return yx(v)}(x),V=y.message;C===void 0&&(C=M.INTERNAL,V="Unknown error status: "+x+" with message "+y.message),g=!0,T.o_(new B(C,V)),d.close()}else W(st,`RPC '${e}' stream ${s} received:`,N),T.__(N)}}),li.u_(),setTimeout(()=>{T.s_()},0),T}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Vw()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(t){return new li(t)}function Vh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(t){return new kk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */li.c_=!1;class Px{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&W("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="PersistentStream";class Dx{constructor(e,n,r,s,i,o,l,u){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Px(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?($n(n.toString()),$n("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new B(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return W(P0,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(W(P0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class RC extends Dx{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Dk(this.serializer,e),r=function(i){if(!("targetChange"in i))return X.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?X.min():o.readTime?_n(o.readTime):X.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=af(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=ef(u)?{documents:Ok(i,u)}:{query:Mk(i,u).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=wx(i,o.resumeToken);const c=rf(i,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(X.min())>0){l.readTime=Du(i,o.snapshotVersion.toTimestamp());const c=rf(i,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const r=Fk(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=af(this.serializer),n.removeTarget=e,this.K_(n)}}class bC extends Dx{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Vk(e.writeResults,e.commitTime),r=_n(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=af(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>jk(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{}class kC extends AC{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new B(M.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,sf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new B(M.UNKNOWN,i.toString())})}jo(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.jo(e,sf(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(M.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function CC(t,e,n,r){return new kC(t,e,n,r)}class PC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?($n(n),this.aa=!1):W("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs="RemoteStore";class DC{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{bs(this)&&(W(xs,"Restarting streams for network reachability change."),await async function(u){const c=Z(u);c.Ea.add(4),await Pa(c),c.Va.set("Unknown"),c.Ea.delete(4),await Ic(c)}(this))})}),this.Va=new PC(r,s)}}async function Ic(t){if(bs(t))for(const e of t.Ra)await e(!0)}async function Pa(t){for(const e of t.Ra)await e(!1)}function jx(t,e){const n=Z(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Kp(n)?Gp(n):Ui(n).O_()&&qp(n,e))}function Hp(t,e){const n=Z(t),r=Ui(n);n.Ia.delete(e),r.O_()&&Vx(n,e),n.Ia.size===0&&(r.O_()?r.L_():bs(n)&&n.Va.set("Unknown"))}function qp(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ui(t).Z_(e)}function Vx(t,e){t.da.$e(e),Ui(t).X_(e)}function Gp(t){t.da=new Nk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ui(t).start(),t.Va.ua()}function Kp(t){return bs(t)&&!Ui(t).x_()&&t.Ia.size>0}function bs(t){return Z(t).Ea.size===0}function Ox(t){t.da=void 0}async function jC(t){t.Va.set("Online")}async function VC(t){t.Ia.forEach((e,n)=>{qp(t,e)})}async function OC(t,e){Ox(t),Kp(t)?(t.Va.ha(e),Gp(t)):t.Va.set("Unknown")}async function MC(t,e,n){if(t.Va.set("Online"),e instanceof _x&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.da.removeTarget(l))}(t,e)}catch(r){W(xs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vu(t,r)}else if(e instanceof ql?t.da.Xe(e):e instanceof vx?t.da.st(e):t.da.tt(e),!n.isEqual(X.min()))try{const r=await Cx(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.da.Tt(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const d=i.Ia.get(c);d&&i.Ia.set(c,d.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const d=i.Ia.get(u);if(!d)return;i.Ia.set(u,d.withResumeToken(Ye.EMPTY_BYTE_STRING,d.snapshotVersion)),Vx(i,u);const p=new mr(d.target,u,c,d.sequenceNumber);qp(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){W(xs,"Failed to raise snapshot:",r),await Vu(t,r)}}async function Vu(t,e,n){if(!Li(e))throw e;t.Ea.add(1),await Pa(t),t.Va.set("Offline"),n||(n=()=>Cx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W(xs,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ic(t)})}function Mx(t,e){return e().catch(n=>Vu(t,n,e))}async function Sc(t){const e=Z(t),n=Lr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Cp;for(;LC(e);)try{const s=await vC(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,FC(e,s)}catch(s){await Vu(e,s)}Lx(e)&&Fx(e)}function LC(t){return bs(t)&&t.Ta.length<10}function FC(t,e){t.Ta.push(e);const n=Lr(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function Lx(t){return bs(t)&&!Lr(t).x_()&&t.Ta.length>0}function Fx(t){Lr(t).start()}async function UC(t){Lr(t).ra()}async function zC(t){const e=Lr(t);for(const n of t.Ta)e.ea(n.mutations)}async function $C(t,e,n){const r=t.Ta.shift(),s=Lp.from(r,e,n);await Mx(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Sc(t)}async function BC(t,e){e&&Lr(t).Y_&&await async function(r,s){if(function(o){return Tk(o)&&o!==M.ABORTED}(s.code)){const i=r.Ta.shift();Lr(r).B_(),await Mx(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Sc(r)}}(t,e),Lx(t)&&Fx(t)}async function D0(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),W(xs,"RemoteStore received new credentials");const r=bs(n);n.Ea.add(3),await Pa(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ic(n)}async function WC(t,e){const n=Z(t);e?(n.Ea.delete(2),await Ic(n)):e||(n.Ea.add(2),await Pa(n),n.Va.set("Unknown"))}function Ui(t){return t.ma||(t.ma=function(n,r,s){const i=Z(n);return i.sa(),new RC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:jC.bind(null,t),Yo:VC.bind(null,t),t_:OC.bind(null,t),J_:MC.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),Kp(t)?Gp(t):t.Va.set("Unknown")):(await t.ma.stop(),Ox(t))})),t.ma}function Lr(t){return t.fa||(t.fa=function(n,r,s){const i=Z(n);return i.sa(),new bC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:UC.bind(null,t),t_:BC.bind(null,t),ta:zC.bind(null,t),na:$C.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await Sc(t)):(await t.fa.stop(),t.Ta.length>0&&(W(xs,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Qp(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yp(t,e){if($n("AsyncQueue",`${e}: ${t}`),Li(t))return new B(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{static emptySet(e){return new ui(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=xo(),this.sortedSet=new Se(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ui)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ui;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(){this.ga=new Se(G.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Y(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ni{constructor(e,n,r,s,i,o,l,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Ni(e,n,ui.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class qC{constructor(){this.queries=V0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Z(n),i=s.queries;s.queries=V0(),i.forEach((o,l)=>{for(const u of l.ba)u.onError(r)})})(this,new B(M.ABORTED,"Firestore shutting down"))}}function V0(){return new Rs(t=>ix(t),yc)}async function Ux(t,e){const n=Z(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new HC,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Yp(o,`Initialization of query '${Os(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.ba.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Jp(n)}async function zx(t,e){const n=Z(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.ba.indexOf(e);o>=0&&(i.ba.splice(o,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function GC(t,e){const n=Z(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.ba)l.Fa(s)&&(r=!0);o.wa=s}}r&&Jp(n)}function KC(t,e,n){const r=Z(t),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(n);r.queries.delete(e)}function Jp(t){t.Ca.forEach(e=>{e.next()})}var cf,O0;(O0=cf||(cf={})).Ma="default",O0.Cache="cache";class $x{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ni(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ni.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==cf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e){this.key=e}}class Wx{constructor(e){this.key=e}}class QC{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ie(),this.mutatedKeys=ie(),this.eu=ox(e),this.tu=new ui(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new j0,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,p)=>{const g=s.get(d),T=vc(this.query,p)?p:null,b=!!g&&this.mutatedKeys.has(g.key),k=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let N=!1;g&&T?g.data.isEqual(T.data)?b!==k&&(r.track({type:3,doc:T}),N=!0):this.su(g,T)||(r.track({type:2,doc:T}),N=!0,(u&&this.eu(T,u)>0||c&&this.eu(T,c)<0)&&(l=!0)):!g&&T?(r.track({type:0,doc:T}),N=!0):g&&!T&&(r.track({type:1,doc:g}),N=!0,(u||c)&&(l=!0)),N&&(T?(o=o.add(T),i=k?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Ss:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,p)=>function(T,b){const k=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y(20277,{Vt:N})}};return k(T)-k(b)}(d.type,p.type)||this.eu(d.doc,p.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],u=this.Ya.size===0&&this.current&&!s?1:0,c=u!==this.Xa;return this.Xa=u,o.length!==0||c?{snapshot:new Ni(this.query,e.tu,i,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new j0,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ie(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new Wx(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new Bx(r))}),n}cu(e){this.Za=e.ks,this.Ya=ie();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ni.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Xp="SyncEngine";class YC{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class JC{constructor(e){this.key=e,this.hu=!1}}class XC{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Rs(l=>ix(l),yc),this.Iu=new Map,this.Eu=new Set,this.Ru=new Se(G.comparator),this.Au=new Map,this.Vu=new zp,this.du={},this.mu=new Map,this.fu=Si.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ZC(t,e,n=!0){const r=Yx(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await Hx(r,e,n,!0),s}async function eP(t,e){const n=Yx(t);await Hx(n,e,!0,!1)}async function Hx(t,e,n,r){const s=await _C(t.localStore,vn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await tP(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&jx(t.remoteStore,s),l}async function tP(t,e,n,r,s){t.pu=(p,g,T)=>async function(k,N,_,y){let x=N.view.ru(_);x.Ss&&(x=await b0(k.localStore,N.query,!1).then(({documents:E})=>N.view.ru(E,x)));const C=y&&y.targetChanges.get(N.targetId),V=y&&y.targetMismatches.get(N.targetId)!=null,P=N.view.applyChanges(x,k.isPrimaryClient,C,V);return L0(k,N.targetId,P.au),P.snapshot}(t,p,g,T);const i=await b0(t.localStore,e,!0),o=new QC(e,i.ks),l=o.ru(i.documents),u=Ca.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(l,t.isPrimaryClient,u);L0(t,n,c.au);const d=new YC(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function nP(t,e,n){const r=Z(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!yc(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await lf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Hp(r.remoteStore,s.targetId),hf(r,s.targetId)}).catch(Mi)):(hf(r,s.targetId),await lf(r.localStore,s.targetId,!0))}async function rP(t,e){const n=Z(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Hp(n.remoteStore,r.targetId))}async function sP(t,e,n){const r=hP(t);try{const s=await function(o,l){const u=Z(o),c=me.now(),d=l.reduce((T,b)=>T.add(b.key),ie());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",T=>{let b=Bn(),k=ie();return u.xs.getEntries(T,d).next(N=>{b=N,b.forEach((_,y)=>{y.isValidDocument()||(k=k.add(_))})}).next(()=>u.localDocuments.getOverlayedDocuments(T,b)).next(N=>{p=N;const _=[];for(const y of l){const x=vk(y,p.get(y.key).overlayedDocument);x!=null&&_.push(new Hr(y.key,x,Jw(x.value.mapValue),Nt.exists(!0)))}return u.mutationQueue.addMutationBatch(T,c,_,l)}).next(N=>{g=N;const _=N.applyToLocalDocumentSet(p,k);return u.documentOverlayCache.saveOverlays(T,N.batchId,_)})}).then(()=>({batchId:g.batchId,changes:lx(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let c=o.du[o.currentUser.toKey()];c||(c=new Se(se)),c=c.insert(l,u),o.du[o.currentUser.toKey()]=c}(r,s.batchId,n),await Da(r,s.changes),await Sc(r.remoteStore)}catch(s){const i=Yp(s,"Failed to persist write");n.reject(i)}}async function qx(t,e){const n=Z(t);try{const r=await gC(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?ce(o.hu,14607):s.removedDocuments.size>0&&(ce(o.hu,42227),o.hu=!1))}),await Da(n,r,e)}catch(r){await Mi(r)}}function M0(t,e,n){const r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=Z(o);u.onlineState=l;let c=!1;u.queries.forEach((d,p)=>{for(const g of p.ba)g.va(l)&&(c=!0)}),c&&Jp(u)}(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function iP(t,e,n){const r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Se(G.comparator);o=o.insert(i,at.newNoDocument(i,X.min()));const l=ie().add(i),u=new Ec(X.min(),new Map,new Se(se),o,l);await qx(r,u),r.Ru=r.Ru.remove(i),r.Au.delete(e),Zp(r)}else await lf(r.localStore,e,!1).then(()=>hf(r,e,n)).catch(Mi)}async function oP(t,e){const n=Z(t),r=e.batch.batchId;try{const s=await mC(n.localStore,e);Kx(n,r,null),Gx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Da(n,s)}catch(s){await Mi(s)}}async function aP(t,e,n){const r=Z(t);try{const s=await function(o,l){const u=Z(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return u.mutationQueue.lookupMutationBatch(c,l).next(p=>(ce(p!==null,37113),d=p.keys(),u.mutationQueue.removeMutationBatch(c,p))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>u.localDocuments.getDocuments(c,d))})}(r.localStore,e);Kx(r,e,n),Gx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Da(r,s)}catch(s){await Mi(s)}}function Gx(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Kx(t,e,n){const r=Z(t);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function hf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||Qx(t,r)})}function Qx(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(Hp(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),Zp(t))}function L0(t,e,n){for(const r of n)r instanceof Bx?(t.Vu.addReference(r.key,e),lP(t,r)):r instanceof Wx?(W(Xp,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||Qx(t,r.key)):Y(19791,{wu:r})}function lP(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(W(Xp,"New document in limbo: "+n),t.Eu.add(r),Zp(t))}function Zp(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new G(pe.fromString(e)),r=t.fu.next();t.Au.set(r,new JC(n)),t.Ru=t.Ru.insert(n,r),jx(t.remoteStore,new mr(vn(Op(n.path)),r,"TargetPurposeLimboResolution",pc.ce))}}async function Da(t,e,n){const r=Z(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{o.push(r.pu(u,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const p=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(c){s.push(c);const p=Bp.Es(u.targetId,c);i.push(p)}}))}),await Promise.all(o),r.Pu.J_(s),await async function(u,c){const d=Z(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(c,g=>F.forEach(g.Ts,T=>d.persistence.referenceDelegate.addReference(p,g.targetId,T)).next(()=>F.forEach(g.Is,T=>d.persistence.referenceDelegate.removeReference(p,g.targetId,T)))))}catch(p){if(!Li(p))throw p;W(Wp,"Failed to update sequence numbers: "+p)}for(const p of c){const g=p.targetId;if(!p.fromCache){const T=d.vs.get(g),b=T.snapshotVersion,k=T.withLastLimboFreeSnapshotVersion(b);d.vs=d.vs.insert(g,k)}}}(r.localStore,i))}async function uP(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){W(Xp,"User change. New user:",e.toKey());const r=await kx(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(u=>{u.reject(new B(M.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Da(n,r.Ns)}}function cP(t,e){const n=Z(t),r=n.Au.get(e);if(r&&r.hu)return ie().add(r.key);{let s=ie();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function Yx(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=qx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iP.bind(null,e),e.Pu.J_=GC.bind(null,e.eventManager),e.Pu.yu=KC.bind(null,e.eventManager),e}function hP(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aP.bind(null,e),e}class Ou{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return pC(this.persistence,new hC,e.initialUser,this.serializer)}Cu(e){return new Ax($p.Vi,this.serializer)}Du(e){return new xC}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ou.provider={build:()=>new Ou};class dP extends Ou{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ce(this.persistence.referenceDelegate instanceof ju,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Yk(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?_t.withCacheSize(this.cacheSizeBytes):_t.DEFAULT;return new Ax(r=>ju.Vi(r,n),this.serializer)}}class df{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>M0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=uP.bind(null,this.syncEngine),await WC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new qC}()}createDatastore(e){const n=Tc(e.databaseInfo.databaseId),r=NC(e.databaseInfo);return CC(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new DC(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>M0(this.syncEngine,n,0),function(){return C0.v()?new C0:new EC}())}createSyncEngine(e,n){return function(s,i,o,l,u,c,d){const p=new XC(s,i,o,l,u,c);return d&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Z(s);W(xs,"RemoteStore shutting down."),i.Ea.add(5),await Pa(i),i.Aa.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}df.provider={build:()=>new df};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):$n("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr="FirestoreClient";class fP{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=it.UNAUTHENTICATED,this.clientId=dc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{W(Fr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W(Fr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Yp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Oh(t,e){t.asyncQueue.verifyOperationInProgress(),W(Fr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await kx(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function F0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await pP(t);W(Fr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>D0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>D0(e.remoteStore,s)),t._onlineComponents=e}async function pP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W(Fr,"Using user provided OfflineComponentProvider");try{await Oh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===M.FAILED_PRECONDITION||s.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ws("Error using user provided cache. Falling back to memory cache: "+n),await Oh(t,new Ou)}}else W(Fr,"Using default OfflineComponentProvider"),await Oh(t,new dP(void 0));return t._offlineComponents}async function Xx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W(Fr,"Using user provided OnlineComponentProvider"),await F0(t,t._uninitializedComponentsProvider._online)):(W(Fr,"Using default OnlineComponentProvider"),await F0(t,new df))),t._onlineComponents}function mP(t){return Xx(t).then(e=>e.syncEngine)}async function ff(t){const e=await Xx(t),n=e.eventManager;return n.onListen=ZC.bind(null,e.syncEngine),n.onUnlisten=nP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=eP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=rP.bind(null,e.syncEngine),n}function gP(t,e,n,r){const s=new Jx(r),i=new $x(e,s,n);return t.asyncQueue.enqueueAndForget(async()=>Ux(await ff(t),i)),()=>{s.Nu(),t.asyncQueue.enqueueAndForget(async()=>zx(await ff(t),i))}}function yP(t,e,n={}){const r=new br;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,c){const d=new Jx({next:g=>{d.Nu(),o.enqueueAndForget(()=>zx(i,p)),g.fromCache&&u.source==="server"?c.reject(new B(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new $x(l,d,{includeMetadataChanges:!0,Ka:!0});return Ux(i,p)}(await ff(t),t.asyncQueue,e,n,r)),r.promise}function vP(t,e){const n=new br;return t.asyncQueue.enqueueAndForget(async()=>sP(await mP(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P="ComponentProvider",U0=new Map;function wP(t,e,n,r,s){return new UA(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,Zx(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="firestore.googleapis.com",z0=!0;class $0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new B(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=eE,this.ssl=z0}else this.host=e.host,this.ssl=e.ssl??z0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=bx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Kk)throw new B(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Uw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Zx(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Lw;switch(r.type){case"firstParty":return new IA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=U0.get(n);r&&(W(_P,"Removing Datastore"),U0.delete(n),r.terminate())}(this),Promise.resolve()}}function tE(t,e,n,r={}){var c;t=$t(t,Nc);const s=Ss(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(mp(`https://${l}`),gp("Firestore",!0)),i.host!==eE&&i.host!==l&&ws("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:l,ssl:s,emulatorOptions:r};if(!gs(u,o)&&(t._setSettings(u),r.mockUserToken)){let d,p;if(typeof r.mockUserToken=="string")d=r.mockUserToken,p=it.MOCK_USER;else{d=H1(r.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new B(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new it(g)}t._authCredentials=new xA(new Mw(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Kn(this.firestore,e,this._query)}}class Ce{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ce(this.firestore,e,this._key)}toJSON(){return{type:Ce._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Aa(n,Ce._jsonSchema))return new Ce(e,r||null,new G(pe.fromString(n.referencePath)))}}Ce._jsonSchemaVersion="firestore/documentReference/1.0",Ce._jsonSchema={type:Me("string",Ce._jsonSchemaVersion),referencePath:Me("string")};class Vn extends Kn{constructor(e,n,r){super(e,n,Op(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ce(this.firestore,null,new G(e))}withConverter(e){return new Vn(this.firestore,e,this._path)}}function cs(t,e,...n){if(t=De(t),Fw("collection","path",e),t instanceof Nc){const r=pe.fromString(e,...n);return t0(r),new Vn(t,null,r)}{if(!(t instanceof Ce||t instanceof Vn))throw new B(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pe.fromString(e,...n));return t0(r),new Vn(t.firestore,null,r)}}function Wn(t,e,...n){if(t=De(t),arguments.length===1&&(e=dc.newId()),Fw("doc","path",e),t instanceof Nc){const r=pe.fromString(e,...n);return e0(r),new Ce(t,null,new G(r))}{if(!(t instanceof Ce||t instanceof Vn))throw new B(M.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pe.fromString(e,...n));return e0(r),new Ce(t.firestore,t instanceof Vn?t.converter:null,new G(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="AsyncQueue";class W0{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Px(this,"async_queue_retry"),this._c=()=>{const r=Vh();r&&W(B0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Vh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Vh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new br;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Li(e))throw e;W(B0,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,$n("INTERNAL UNHANDLED ERROR: ",H0(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Qp.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&Y(47125,{Pc:H0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function H0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Hn extends Nc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new W0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new W0(e),this._firestoreClient=void 0,await e}}}function nE(t,e){const n=typeof t=="object"?t:_p(),r=typeof t=="string"?t:bu,s=lc(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=$1("firestore");i&&tE(s,...i)}return s}function ja(t){if(t._terminated)throw new B(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||xP(t),t._firestoreClient}function xP(t){var r,s,i,o;const e=t._freezeSettings(),n=wP(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(s=t._app)==null?void 0:s.options.apiKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new fP(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kt(Ye.fromBase64String(e))}catch(n){throw new B(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new kt(Ye.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:kt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Aa(e,kt._jsonSchema))return kt.fromBase64String(e.bytes)}}kt._jsonSchemaVersion="firestore/bytes/1.0",kt._jsonSchema={type:Me("string",kt._jsonSchemaVersion),bytes:Me("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ge(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:rn._jsonSchemaVersion}}static fromJSON(e){if(Aa(e,rn._jsonSchema))return new rn(e.latitude,e.longitude)}}rn._jsonSchemaVersion="firestore/geoPoint/1.0",rn._jsonSchema={type:Me("string",rn._jsonSchemaVersion),latitude:Me("number"),longitude:Me("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Bt._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Aa(e,Bt._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Bt(e.vectorValues);throw new B(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Bt._jsonSchemaVersion="firestore/vectorValue/1.0",Bt._jsonSchema={type:Me("string",Bt._jsonSchemaVersion),vectorValues:Me("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=/^__.*__$/;class TP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Hr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ka(e,this.data,n,this.fieldTransforms)}}class rE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Hr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function sE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y(40011,{dataSource:t})}}class em{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new em({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Mu(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(sE(this.dataSource)&&EP.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class IP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Tc(e)}createContext(e,n,r,s=!1){return new em({dataSource:e,methodName:n,targetDoc:r,path:Ge.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bc(t){const e=t._freezeSettings(),n=Tc(t._databaseId);return new IP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function iE(t,e,n,r,s,i={}){const o=t.createContext(i.merge||i.mergeFields?2:0,e,n,s);tm("Data must be an object, but it was:",o,r);const l=lE(r,o);let u,c;if(i.merge)u=new Pt(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const p of i.mergeFields){const g=Es(e,p,n);if(!o.contains(g))throw new B(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);hE(d,g)||d.push(g)}u=new Pt(d),c=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,c=o.fieldTransforms;return new TP(new xt(l),u,c)}class Ac extends Rc{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ac}}function oE(t,e,n,r){const s=t.createContext(1,e,n);tm("Data must be an object, but it was:",s,r);const i=[],o=xt.empty();Wr(r,(u,c)=>{const d=cE(e,u,n);c=De(c);const p=s.childContextForFieldPath(d);if(c instanceof Ac)i.push(d);else{const g=Oa(c,p);g!=null&&(i.push(d),o.set(d,g))}});const l=new Pt(i);return new rE(o,l,s.fieldTransforms)}function aE(t,e,n,r,s,i){const o=t.createContext(1,e,n),l=[Es(e,r,n)],u=[s];if(i.length%2!=0)throw new B(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(Es(e,i[g])),u.push(i[g+1]);const c=[],d=xt.empty();for(let g=l.length-1;g>=0;--g)if(!hE(c,l[g])){const T=l[g];let b=u[g];b=De(b);const k=o.childContextForFieldPath(T);if(b instanceof Ac)c.push(T);else{const N=Oa(b,k);N!=null&&(c.push(T),d.set(T,N))}}const p=new Pt(c);return new rE(d,p,o.fieldTransforms)}function SP(t,e,n,r=!1){return Oa(n,t.createContext(r?4:3,e))}function Oa(t,e){if(uE(t=De(t)))return tm("Unsupported field value:",e,t),lE(t,e);if(t instanceof Rc)return function(r,s){if(!sE(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=Oa(l,s.childContextForArray(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=De(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return dk(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=me.fromDate(r);return{timestampValue:Du(s.serializer,i)}}if(r instanceof me){const i=new me(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Du(s.serializer,i)}}if(r instanceof rn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof kt)return{bytesValue:wx(s.serializer,r._byteString)};if(r instanceof Ce){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Up(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Bt)return function(o,l){const u=o instanceof Bt?o.toArray():o;return{mapValue:{fields:{[Qw]:{stringValue:Yw},[Au]:{arrayValue:{values:u.map(d=>{if(typeof d!="number")throw l.createError("VectorValues must only contain numeric values.");return Mp(l.serializer,d)})}}}}}}(r,s);if(Rx(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${fc(r)}`)}(t,e)}function lE(t,e){const n={};return Bw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wr(t,(r,s)=>{const i=Oa(s,e.childContextForField(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function uE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof me||t instanceof rn||t instanceof kt||t instanceof Ce||t instanceof Rc||t instanceof Bt||Rx(t))}function tm(t,e,n){if(!uE(n)||!zw(n)){const r=fc(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Es(t,e,n){if((e=De(e))instanceof Va)return e._internalPath;if(typeof e=="string")return cE(t,e);throw Mu("Field path arguments must be of type string or ",t,!1,void 0,n)}const NP=new RegExp("[~\\*/\\[\\]]");function cE(t,e,n){if(e.search(NP)>=0)throw Mu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Va(...e.split("."))._internalPath}catch{throw Mu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Mu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new B(M.INVALID_ARGUMENT,l+t+u)}function hE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{convertValue(e,n="none"){switch(Mr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ae(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Or(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Wr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Au].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Ae(o.doubleValue));return new Bt(n)}convertGeoPoint(e){return new rn(Ae(e.latitude),Ae(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=gc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ca(e));default:return null}}convertTimestamp(e){const n=Vr(e);return new me(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=pe.fromString(e);ce(Nx(r),9688,{name:e});const s=new Ei(r.get(1),r.get(3)),i=new G(r.popFirst(5));return s.isEqual(n)||$n(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm extends dE{constructor(e){super(),this.firestore=e}convertBytes(e){return new kt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ce(this.firestore,null,n)}}const q0="@firebase/firestore",G0="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ce(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new RP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(Es("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class RP extends fE{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rm{}class sm extends rm{}function Lo(t,e,...n){let r=[];e instanceof rm&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof kc).length,l=i.filter(u=>u instanceof Ma).length;if(o>1||o>0&&l>0)throw new B(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Ma extends sm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ma(e,n,r)}_apply(e){const n=this._parse(e);return yE(e._query,n),new Kn(e.firestore,e.converter,tf(e._query,n))}_parse(e){const n=bc(e.firestore);return function(i,o,l,u,c,d,p){let g;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new B(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Y0(p,d);const b=[];for(const k of p)b.push(Q0(u,i,k));g={arrayValue:{values:b}}}else g=Q0(u,i,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Y0(p,d),g=SP(l,o,p,d==="in"||d==="not-in");return Oe.create(c,d,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function mE(t,e,n){const r=e,s=Es("where",t);return Ma._create(s,r,n)}class kc extends rm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new kc(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:on.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)yE(o,u),o=tf(o,u)}(e._query,n),new Kn(e.firestore,e.converter,tf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Cc extends sm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Cc(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new B(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new B(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new da(i,o)}(e._query,this._field,this._direction);return new Kn(e.firestore,e.converter,sk(e._query,n))}}function gE(t,e="asc"){const n=e,r=Es("orderBy",t);return Cc._create(r,n)}function Q0(t,e,n){if(typeof(n=De(n))=="string"){if(n==="")throw new B(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sx(e)&&n.indexOf("/")!==-1)throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(pe.fromString(n));if(!G.isDocumentKey(r))throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return u0(t,new G(r))}if(n instanceof Ce)return u0(t,n._key);throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fc(n)}.`)}function Y0(t,e){if(!Array.isArray(t)||t.length===0)throw new B(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yE(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new B(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function vE(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Js{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ar extends fE{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Fo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Es("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new B(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ar._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ar._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ar._jsonSchema={type:Me("string",Ar._jsonSchemaVersion),bundleSource:Me("string","DocumentSnapshot"),bundleName:Me("string"),bundle:Me("string")};class Fo extends Ar{data(e={}){return super.data(e)}}class kr{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Js(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Fo(this._firestore,this._userDataWriter,r.key,r,new Js(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new Fo(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Js(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new Fo(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Js(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:bP(l.type),doc:u,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new B(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=kr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=dc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function bP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kr._jsonSchemaVersion="firestore/querySnapshot/1.0",kr._jsonSchema={type:Me("string",kr._jsonSchemaVersion),bundleSource:Me("string","QuerySnapshot"),bundleName:Me("string"),bundle:Me("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=bc(e)}set(e,n,r){this._verifyNotCommitted();const s=Mh(e,this._firestore),i=vE(s.converter,n,r),o=iE(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Nt.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Mh(e,this._firestore);let o;return o=typeof(n=De(n))=="string"||n instanceof Va?aE(this._dataReader,"WriteBatch.update",i._key,n,r,s):oE(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,Nt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Mh(e,this._firestore);return this._mutations=this._mutations.concat(new xc(n._key,Nt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new B(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Mh(t,e){if((t=De(t)).firestore!==e)throw new B(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function im(t){t=$t(t,Kn);const e=$t(t.firestore,Hn),n=ja(e),r=new nm(e);return pE(t._query),yP(n,t._query).then(s=>new kr(e,r,t,s))}function Ri(t,e,n,...r){t=$t(t,Ce);const s=$t(t.firestore,Hn),i=bc(s);let o;return o=typeof(e=De(e))=="string"||e instanceof Va?aE(i,"updateDoc",t._key,e,n,r):oE(i,"updateDoc",t._key,e),La(s,[o.toMutation(t._key,Nt.exists(!0))])}function AP(t){return La($t(t.firestore,Hn),[new xc(t._key,Nt.none())])}function kP(t,e){const n=$t(t.firestore,Hn),r=Wn(t),s=vE(t.converter,e),i=bc(t.firestore);return La(n,[iE(i,"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Nt.exists(!1))]).then(()=>r)}function Gl(t,...e){var c,d,p;t=De(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||K0(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(K0(e[r])){const g=e[r];e[r]=(c=g.next)==null?void 0:c.bind(g),e[r+1]=(d=g.error)==null?void 0:d.bind(g),e[r+2]=(p=g.complete)==null?void 0:p.bind(g)}let i,o,l;if(t instanceof Ce)o=$t(t.firestore,Hn),l=Op(t._key.path),i={next:g=>{e[r]&&e[r](CP(o,t,g))},error:e[r+1],complete:e[r+2]};else{const g=$t(t,Kn);o=$t(g.firestore,Hn),l=g._query;const T=new nm(o);i={next:b=>{e[r]&&e[r](new kr(o,T,g,b))},error:e[r+1],complete:e[r+2]},pE(t._query)}const u=ja(o);return gP(u,l,s,i)}function La(t,e){const n=ja(t);return vP(n,e)}function CP(t,e,n){const r=n.docs.get(e._key),s=new nm(t);return new Ar(t,s,e._key,r,new Js(n.hasPendingWrites,n.fromCache),e.converter)}function pf(t){return t=$t(t,Hn),ja(t),new _E(t,e=>La(t,e))}(function(e,n=!0){wA(Ns),ys(new Dr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Hn(new EA(r.getProvider("auth-internal")),new SA(o,r.getProvider("app-check-internal")),zA(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),gn(q0,G0,e),gn(q0,G0,"esm2020")})();const Lh=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:dE,Bytes:kt,CollectionReference:Vn,DocumentReference:Ce,DocumentSnapshot:Ar,FieldPath:Va,FieldValue:Rc,Firestore:Hn,FirestoreError:B,GeoPoint:rn,Query:Kn,QueryCompositeFilterConstraint:kc,QueryConstraint:sm,QueryDocumentSnapshot:Fo,QueryFieldFilterConstraint:Ma,QueryOrderByConstraint:Cc,QuerySnapshot:kr,SnapshotMetadata:Js,Timestamp:me,VectorValue:Bt,WriteBatch:_E,_AutoId:dc,_ByteString:Ye,_DatabaseId:Ei,_DocumentKey:G,_EmptyAuthCredentialsProvider:Lw,_FieldPath:Ge,_cast:$t,_logWarn:ws,_validateIsNotUsedTogether:Uw,addDoc:kP,collection:cs,connectFirestoreEmulator:tE,deleteDoc:AP,doc:Wn,ensureFirestoreConfigured:ja,executeWrite:La,getDocs:im,getFirestore:nE,onSnapshot:Gl,orderBy:gE,query:Lo,updateDoc:Ri,where:mE,writeBatch:pf},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="firebasestorage.googleapis.com",PP="storageBucket",DP=2*60*1e3,jP=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn extends In{constructor(e,n,r=0){super(Fh(e),`Firebase Storage: ${n} (${Fh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Sn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Fh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var En;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(En||(En={}));function Fh(t){return"storage/"+t}function VP(){const t="An unknown error occurred, please check the error payload for server response.";return new Sn(En.UNKNOWN,t)}function OP(){return new Sn(En.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function MP(){return new Sn(En.CANCELED,"User canceled the upload/download.")}function LP(t){return new Sn(En.INVALID_URL,"Invalid URL '"+t+"'.")}function FP(t){return new Sn(En.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function J0(t){return new Sn(En.INVALID_ARGUMENT,t)}function xE(){return new Sn(En.APP_DELETED,"The Firebase app was deleted.")}function UP(t){return new Sn(En.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Zt.makeFromUrl(e,n)}catch{return new Zt(e,"")}if(r.path==="")return r;throw FP(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function c(C){C.path_=decodeURIComponent(C.path)}const d="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",T=new RegExp(`^https?://${p}/${d}/b/${s}/o${g}`,"i"),b={bucket:1,path:3},k=n===wE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,N="([^?#]*)",_=new RegExp(`^https?://${k}/${s}/${N}`,"i"),x=[{regex:l,indices:u,postModify:i},{regex:T,indices:b,postModify:c},{regex:_,indices:{bucket:1,path:2},postModify:c}];for(let C=0;C<x.length;C++){const V=x[C],P=V.regex.exec(e);if(P){const E=P[V.indices.bucket];let v=P[V.indices.path];v||(v=""),r=new Zt(E,v),V.postModify(r);break}}if(r==null)throw LP(e);return r}}class zP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function u(){return l===2}let c=!1;function d(...N){c||(c=!0,e.apply(null,N))}function p(N){s=setTimeout(()=>{s=null,t(T,u())},N)}function g(){i&&clearTimeout(i)}function T(N,..._){if(c){g();return}if(N){g(),d.call(null,N,..._);return}if(u()||o){g(),d.call(null,N,..._);return}r<64&&(r*=2);let x;l===1?(l=2,x=0):x=(r+Math.random())*1e3,p(x)}let b=!1;function k(N){b||(b=!0,g(),!c&&(s!==null?(N||(l=2),clearTimeout(s),p(0)):N||(l=1)))}return p(0),i=setTimeout(()=>{o=!0,k(!0)},n),k}function BP(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(t){return t!==void 0}function X0(t,e,n,r){if(r<e)throw J0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw J0(`Invalid value for '${t}'. Expected ${n} or less.`)}function HP(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Lu;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Lu||(Lu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qP(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e,n,r,s,i,o,l,u,c,d,p,g=!0,T=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=p,this.retry=g,this.isUsingEmulator=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,k)=>{this.resolve_=b,this.reject_=k,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Il(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const u=l.loaded,c=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===Lu.NO_ERROR,u=i.getStatus();if(!l||qP(u,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===Lu.ABORT;r(!1,new Il(!1,null,d));return}const c=this.successCodes_.indexOf(u)!==-1;r(!0,new Il(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());WP(u)?i(u):i()}catch(u){o(u)}else if(l!==null){const u=VP();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(s.canceled){const u=this.appDelete_?xE():MP();o(u)}else{const u=OP();o(u)}};this.canceled_?n(!1,new Il(!1,null,!0)):this.backoffId_=$P(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&BP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Il{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function KP(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function QP(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function YP(t,e){e&&(t["X-Firebase-GMPID"]=e)}function JP(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function XP(t,e,n,r,s,i,o=!0,l=!1){const u=HP(t.urlParams),c=t.url+u,d=Object.assign({},t.headers);return YP(d,e),KP(d,n),QP(d,i),JP(d,r),new GP(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function e4(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,n){this._service=e,n instanceof Zt?this._location=n:this._location=Zt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Fu(e,n)}get root(){const e=new Zt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return e4(this._location.path)}get storage(){return this._service}get parent(){const e=ZP(this._location.path);if(e===null)return null;const n=new Zt(this._location.bucket,e);return new Fu(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw UP(e)}}function Z0(t,e){const n=e==null?void 0:e[PP];return n==null?null:Zt.makeFromBucketSpec(n,t)}function t4(t,e,n,r={}){t.host=`${e}:${n}`;const s=Ss(e);s&&(mp(`https://${t.host}/b`),gp("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:H1(i,t.app.options.projectId))}class n4{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=wE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=DP,this._maxUploadRetryTime=jP,this._requests=new Set,s!=null?this._bucket=Zt.makeFromBucketSpec(s,this._host):this._bucket=Z0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Zt.makeFromBucketSpec(this._url,e):this._bucket=Z0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){X0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){X0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Ft(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Fu(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new zP(xE());{const o=XP(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const ev="@firebase/storage",tv="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="storage";function r4(t=_p(),e){t=De(t);const r=lc(t,EE).getImmediate({identifier:e}),s=$1("storage");return s&&s4(r,...s),r}function s4(t,e,n,r={}){t4(t,e,n,r)}function i4(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new n4(n,r,s,e,Ns)}function o4(){ys(new Dr(EE,i4,"PUBLIC").setMultipleInstances(!0)),gn(ev,tv,""),gn(ev,tv,"esm2020")}o4();const a4={apiKey:"AIzaSyCH2Q18CquL9IGi9t6KovkSqQj3DYnXf9g",authDomain:"munirathnam-illam.firebaseapp.com",projectId:"munirathnam-illam",storageBucket:"munirathnam-illam.firebasestorage.app",messagingSenderId:"852272424128",appId:"1:852272424128:web:e5400d3d2f512d7e477925"},om=K1(a4),ci=gA(om),qe=nE(om);r4(om);const TE=new An,IE=L.createContext();function am(){return L.useContext(IE)}function l4({children:t}){const[e,n]=L.useState(null),[r,s]=L.useState(!0);function i(){return bw(ci,TE)}function o(){return yw(ci)}L.useEffect(()=>{const u=gw(ci,d=>{n(d),s(!1)}),c=setTimeout(()=>{s(d=>d&&(console.warn("Auth initialization timed out. Defaulting to unauthenticated."),!1))},5e3);return()=>{u(),clearTimeout(c)}},[]);const l={currentUser:e,loginWithGoogle:i,logout:o,loading:r};return h.jsx(IE.Provider,{value:l,children:!r&&t})}const u4="modulepreload",c4=function(t){return"/"+t},nv={},Uh=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=c4(u),u in nv)return;nv[u]=!0;const c=u.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":u4,c||(p.as="script"),p.crossOrigin="",p.href=u,l&&p.setAttribute("nonce",l),document.head.appendChild(p),c)return new Promise((g,T)=>{p.addEventListener("load",g),p.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},Ke={"01":{roomNo:"01",roomId:"G01",keyNo:"124",ebServNo:"19781",ebAcNo:"5097784"},"02":{roomNo:"02",roomId:"G02",keyNo:"153",ebServNo:"19778",ebAcNo:"5097781"},"04":{roomNo:"04",roomId:"102",keyNo:"76",ebServNo:"19780",ebAcNo:"5097783"},"05":{roomNo:"05",roomId:"201",keyNo:"151",ebServNo:"19779",ebAcNo:"5097782"},"06":{roomNo:"06",roomId:"202",keyNo:"185",ebServNo:"19782",ebAcNo:"5097785"},"07":{roomNo:"07",roomId:"203",keyNo:"101",ebServNo:"19783",ebAcNo:"5097786"},"08":{roomNo:"08",roomId:"301",keyNo:"403",ebServNo:"19784",ebAcNo:"5097787"},"09":{roomNo:"09",roomId:"302",keyNo:"249",ebServNo:"19785",ebAcNo:"5097788"},10:{roomNo:"10",roomId:"303",keyNo:"123",ebServNo:"19789",ebAcNo:"5097792"},11:{roomNo:"11",roomId:"401",keyNo:"35",ebServNo:"19788",ebAcNo:"5097791"},12:{roomNo:"12",roomId:"402",keyNo:"144",ebServNo:"19787",ebAcNo:"5097790"},13:{roomNo:"13",roomId:"403",keyNo:"120",ebServNo:"19786",ebAcNo:"5097789"}},h4=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ma=.25,d4=.2,f4=["11","12","13"],Uo=10,lm=60,Jt=h4;function Tn(t,e){return`${t}-${Jt[e]}`}function bi(t,e){return`${Jt[e]} ${t}`}function ga(t,e,n=new Date){const r=n.getFullYear(),s=n.getMonth();return t>r||t===r&&e>s}function lt(t,e){return!t||!e?null:(Array.isArray(t)?t:Object.values(t)).find(r=>String(r.roomId||"").trim()===String(e||"").trim()||String(r.roomNo||"").trim()===String(e||"").trim())||null}function ya(t){return t?String(t.status||"").trim()==="Occupied":!1}function Pc(t,e,n){if(!t||!t.isEvictionConfirmed||!t.evictionNoticeDate)return!1;const r=new Date(t.evictionNoticeDate),s=new Date(e,n,1),i=new Date(r.getFullYear(),r.getMonth(),1);return s>=i}function Uu(t,e,n){if(!t||Pc(t,e,n))return 0;let r=Number(t.rent)||0;if(t.lastRevision){const s=new Date(t.lastRevision),i=new Date(e,n,1),o=new Date(s.getFullYear(),s.getMonth(),1);i<o&&(r=Number(t.lastRent)||r)}return r}function p4(t,e,n,r){const s=Tn(n,r);let i=0;return Object.keys(Ke).forEach(o=>{const l=Ke[o],u=lt(t,l.roomId);if(!u||Pc(u,n,r))return;const d=(u.paymentHistory||{})[s]||null,p=u.archivedTenant||null,g=(p==null?void 0:p.paymentHistory)||{},T=(g==null?void 0:g[s])||null,b=(!d||d==="None")&&T;if((b?T:d)!=="Paid")return;const _=Uu(b?p:u,n,r);i+=_}),i}function SE(t,e,n,r){const s=Tn(n,r);let i=0;return Object.keys(Ke).forEach(o=>{const l=Ke[o],u=lt(t,l.roomId);if(!u||Pc(u,n,r))return;const d=(u.paymentHistory||{})[s]||null,p=u.archivedTenant||null,g=(p==null?void 0:p.paymentHistory)||{},T=(g==null?void 0:g[s])||null,b=(!d||d==="None")&&T;if((b?T:d)!=="Pending")return;i+=Uu(b?p:u,n,r)}),i}function m4(t,e,n,r){const s=Tn(n,r);let i={rent:0,water:0,total:0,pending:0};return Object.keys(Ke).forEach(o=>{const l=Ke[o],u=lt(t,l.roomId);if(!u||Pc(u,n,r))return;const c=u.paymentHistory||{};u.paymentTotals;const d=c[s]||null,p=u.archivedTenant||null,g=(p==null?void 0:p.paymentHistory)||{};p!=null&&p.paymentTotals;const T=(g==null?void 0:g[s])||null,b=(!d||d==="None")&&T,k=b?T:d,N=b?p:u;if(k==="Pending"){i.pending+=Uu(N,n,r);return}if(k!=="Paid")return;const _=Uu(N,n,r),y=b?(p==null?void 0:p.waterRate)||ma:(u==null?void 0:u.waterRate)||ma,V=(Dc(N,n,r,y).amount||0)+lm;i.rent+=_,i.water+=V,i.total+=_+V}),i}function g4(t,e,n){const r=Tn(e,n);return!t||!Array.isArray(t)?0:t.filter(s=>String((s==null?void 0:s.monthKey)||"")===String(r)).reduce((s,i)=>s+(Number(i==null?void 0:i.amount)||0),0)}function zu(t){const e=String(t||"").trim();return f4.includes(e)?d4:ma}function zo(t,e){return`${t}-${Jt[e]}`}function hi(t,e){return e>0?{year:t,monthIndex:e-1}:{year:t-1,monthIndex:11}}function Dc(t,e,n,r){const s=(t==null?void 0:t.waterReadings)||{},i=(t==null?void 0:t.waterMeterReset)||{},o=zo(e,n),l=hi(e,n),u=zo(l.year,l.monthIndex),c=s==null?void 0:s[o],d=s==null?void 0:s[u],p=c!=null&&c!=="",g=d!=null&&d!=="",T=p?Number(c):NaN,b=g?Number(d):NaN;if(!!(i!=null&&i[o])){if(!Number.isFinite(T))return{currentReading:null,units:null,amount:null,meterReset:!0};const x=T*Uo,C=Number.isFinite(r)?r:ma,V=Math.round(x*C);return{currentReading:T,units:x,amount:V,meterReset:!0}}if(!Number.isFinite(T)||!Number.isFinite(b))return{currentReading:Number.isFinite(T)?T:null,units:null,amount:null,meterReset:!1};const N=(T-b)*Uo,_=Number.isFinite(r)?r:ma,y=Math.round(N*_);return{currentReading:T,units:N,amount:y,meterReset:!1}}const y4=15;function NE(t,e=new Date){if(!t)return{isDue:!1};const n=!!(t!=null&&t.noRevision),r=!!(t!=null&&t.isEvictionConfirmed);if(n||r)return{isDue:!1,reason:r?"Eviction in progress":"Disabled"};const s=t==null?void 0:t.lastRevision,i=t==null?void 0:t.joinDate,o=N=>N?new Date(N):null,l=o(s),u=o(i),c=l||u;if(!c)return{isDue:!1,reason:"No date available"};const d=new Date(c);d.setFullYear(d.getFullYear()+1);const p=new Date(e.getFullYear(),e.getMonth(),e.getDate()),T=new Date(d.getFullYear(),d.getMonth(),d.getDate())-p,b=Math.ceil(T/(1e3*60*60*24));return{isDue:b<=y4,daysRemaining:b,nextDue:d,baseDate:c,isOverdue:b<0}}const RE=L.createContext();function zi(){return L.useContext(RE)}function v4({children:t}){const[e,n]=L.useState([]),[r,s]=L.useState([]),[i,o]=L.useState(!0),[l,u]=L.useState(Ke);L.useEffect(()=>{const N=Lo(cs(qe,"properties")),_=Gl(N,P=>{const E={};P.forEach(v=>{E[v.id]={id:v.id,...v.data()}}),n(E)},P=>{console.error("Error fetching tenants:",P)}),y=Lo(cs(qe,"expenses"),gE("date","desc")),x=Gl(y,P=>{const E=[];P.forEach(v=>{E.push({id:v.id,...v.data()})}),s(E)},P=>{console.error("Error fetching expenses:",P)}),C=Lo(cs(qe,"rooms")),V=Gl(C,P=>{if(P.empty)console.warn("Rooms collection empty. Using hardcoded fallback."),u(Ke);else{const E={...Ke};P.forEach(R=>{E[R.id]?E[R.id]={...E[R.id],...R.data()}:E[R.id]=R.data()});const v=Object.keys(E).sort(),I={};v.forEach(R=>I[R]=E[R]),u(I)}o(!1)},P=>{console.error("Error fetching rooms:",P),u(Ke),o(!1)});return()=>{_(),x(),V()}},[]);const c=async(N,_,y,x,C,V)=>{let P="Pending";y==="Pending"?P="Rent Only":y==="Rent Only"?P="Paid":y==="Paid"&&(P="None");const E={};if(P==="Paid"){const v=Number(x==null?void 0:x.rent)||0,I=(x==null?void 0:x.waterRate)!==null&&(x==null?void 0:x.waterRate)!==void 0&&String(x==null?void 0:x.waterRate).trim()!==""?Number(x==null?void 0:x.waterRate):zu(x==null?void 0:x.roomNo),R=Dc(x,C,V,I);if(!Number.isFinite(R==null?void 0:R.amount))throw new Error("Please enter water readings for this month AND previous month (Water Bill screen) before marking Paid.");if(Number(R==null?void 0:R.units)<0)throw new Error("Water units cannot be negative. Please check readings.");const A=Math.round((v+Number(R.amount)+lm)*100)/100;E[`paymentHistory.${_}`]="Paid",E[`paymentTotals.${_}`]=A}else P==="None"?(E[`paymentHistory.${_}`]=null,E[`paymentTotals.${_}`]=null):(E[`paymentHistory.${_}`]=P,E[`paymentTotals.${_}`]=null);if(!(x!=null&&x.id))throw new Error("Tenant ID missing");await Ri(Wn(qe,"properties",x.id),E)},d=async N=>{const{addDoc:_,collection:y}=await Uh(async()=>{const{addDoc:x,collection:C}=await Promise.resolve().then(()=>Lh);return{addDoc:x,collection:C}},void 0);await _(y(qe,"expenses"),N)},p=async N=>{const{deleteDoc:_,doc:y}=await Uh(async()=>{const{deleteDoc:x,doc:C}=await Promise.resolve().then(()=>Lh);return{deleteDoc:x,doc:C}},void 0);await _(y(qe,"expenses",N))},g=async(N,_)=>{await Ri(Wn(qe,"properties",N),_)},[T,b]=L.useState(new Date().getFullYear()),k={tenants:e,expenses:r,rooms:l,loading:i,globalYear:T,setGlobalYear:b,updateRentStatus:c,addExpense:d,deleteExpense:p,addExpense:d,deleteExpense:p,updateTenant:g,createTenant:async N=>{const{addDoc:_,collection:y}=await Uh(async()=>{const{addDoc:x,collection:C}=await Promise.resolve().then(()=>Lh);return{addDoc:x,collection:C}},void 0);await _(y(qe,"properties"),N)}};return h.jsx(RE.Provider,{value:k,children:t})}/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),te=(t,e)=>{const n=L.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:u,...c},d)=>L.createElement("svg",{ref:d,..._4,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${w4(t)}`,l].join(" "),...c},[...e.map(([p,g])=>L.createElement(p,g)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=te("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=te("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=te("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=te("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=te("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=te("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=te("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=te("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=te("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=te("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=te("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=te("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=te("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=te("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AE=te("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=te("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=te("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=te("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=te("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=te("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=te("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=te("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=te("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=te("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=te("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=te("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=te("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mf=te("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=te("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=te("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PE=te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=te("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bu=te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),jE=L.createContext();function Fa(){return L.useContext(jE)}function O4({children:t}){const[e,n]=L.useState([]),[r,s]=L.useState({isOpen:!1,title:"",message:"",confirmText:"Confirm",cancelText:"Cancel",type:"confirm",resolve:null}),i=L.useCallback((d,p="info")=>{const g=Date.now();n(T=>[...T,{id:g,message:d,type:p}]),setTimeout(()=>{n(T=>T.filter(b=>b.id!==g))},3e3)},[]),o=d=>{n(p=>p.filter(g=>g.id!==d))},l=L.useCallback(({title:d,message:p,confirmText:g="Confirm",cancelText:T="Cancel",type:b="confirm"})=>new Promise(k=>{s({isOpen:!0,title:d,message:p,confirmText:g,cancelText:T,type:b,resolve:k})}),[]),u=()=>{r.resolve&&r.resolve(!0),s(d=>({...d,isOpen:!1}))},c=()=>{r.resolve&&r.resolve(!1),s(d=>({...d,isOpen:!1}))};return h.jsxs(jE.Provider,{value:{showToast:i,confirm:l},children:[t,h.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-[100] flex flex-col items-center gap-2 pointer-events-none",children:e.map(d=>h.jsxs("div",{className:`pointer-events-auto flex items-center gap-3 px-6 py-3 rounded-2xl shadow-xl border animate-in slide-in-from-bottom-5 fade-in duration-300 min-w-[300px] justify-between ${d.type==="error"?"bg-rose-50 border-rose-100 text-rose-700":d.type==="success"?"bg-emerald-50 border-emerald-100 text-emerald-700":d.type==="warning"?"bg-amber-50 border-amber-100 text-amber-700":"bg-slate-50 border-slate-200 text-slate-700"}`,children:[h.jsxs("div",{className:"flex items-center gap-3",children:[d.type==="error"&&h.jsx(di,{size:20}),d.type==="success"&&h.jsx(T4,{size:20}),d.type==="warning"&&h.jsx(di,{size:20}),d.type==="info"&&h.jsx(k4,{size:20}),h.jsx("span",{className:"font-bold text-sm",children:d.message})]}),h.jsx("button",{onClick:()=>o(d.id),className:"opacity-50 hover:opacity-100",children:h.jsx(Bu,{size:16})})]},d.id))}),r.isOpen&&h.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:h.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-[400px] overflow-hidden animate-in zoom-in-95 duration-200",children:[h.jsxs("div",{className:"p-8 text-center space-y-4",children:[h.jsx("div",{className:`mx-auto size-16 rounded-full flex items-center justify-center mb-2 ${r.type==="danger"?"bg-rose-100 text-rose-600":"bg-blue-100 text-blue-600"}`,children:r.type==="danger"?h.jsx(di,{size:32}):h.jsx(b4,{size:32})}),h.jsx("h3",{className:"text-xl font-extrabold text-slate-900 leading-tight",children:r.title}),h.jsx("p",{className:"text-slate-500 font-medium",children:r.message})]}),h.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-100 flex gap-3",children:[h.jsx("button",{onClick:c,className:"flex-1 py-3 px-4 rounded-xl font-bold text-slate-600 hover:bg-slate-200 transition-colors",children:r.cancelText}),h.jsx("button",{onClick:u,className:`flex-1 py-3 px-4 rounded-xl font-bold text-white shadow-lg transition-all hover:scale-105 active:scale-95 ${r.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-200":"bg-blue-600 hover:bg-blue-700 shadow-blue-200"}`,children:r.confirmText})]})]})})]})}function Ds({children:t}){const{currentUser:e,logout:n}=am(),r=ji(),s=o=>r.pathname===o,i=({to:o,icon:l,label:u,mobile:c=!1})=>h.jsxs(M1,{to:o,className:`flex items-center gap-3 px-4 py-3 rounded-2xl transition-all ${s(o)?"bg-emerald-100 text-emerald-900 font-bold shadow-sm ring-1 ring-emerald-200":"text-slate-500 hover:text-slate-900 hover:bg-slate-50"} ${c?"flex-col text-[10px] gap-1 px-1 py-1 rounded-none bg-transparent hover:bg-transparent ring-0 shadow-none":"text-sm"}`,children:[h.jsx("div",{className:`p-2 rounded-xl transition-colors ${s(o)&&!c?"bg-emerald-200/50 text-emerald-800":"bg-transparent"}`,children:h.jsx(l,{size:c?20:18})}),h.jsx("span",{children:u})]});return h.jsxs("div",{className:"min-h-screen bg-white md:bg-stone-50/30 flex flex-col md:flex-row",children:[h.jsxs("aside",{className:"hidden md:flex flex-col w-64 shrink-0 h-screen sticky top-0 bg-white border-r border-stone-100 p-6 z-40",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-10 px-2",children:[h.jsx("span",{className:"inline-flex size-10 items-center justify-center rounded-2xl bg-emerald-100/70 border border-emerald-200/60 text-emerald-800 shadow-sm",children:h.jsx(sv,{size:20})}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-lg font-extrabold tracking-tight text-slate-900 leading-tight",children:"Munirathnam"}),h.jsx("p",{className:"text-xs font-bold text-emerald-600 tracking-wide uppercase",children:"Illam Manager"})]})]}),h.jsxs("nav",{className:"space-y-2 flex-1",children:[h.jsx("div",{className:"px-4 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Menu"}),h.jsx(i,{to:"/",icon:lv,label:"Dashboard"}),h.jsx(i,{to:"/rooms",icon:va,label:"Room Details"}),h.jsx(i,{to:"/rent",icon:cv,label:"Rent Status"}),h.jsx(i,{to:"/water",icon:av,label:"Water Bill"}),h.jsx(i,{to:"/expenses",icon:dv,label:"Expenses"}),h.jsx("div",{className:"h-px bg-stone-100 my-2"}),h.jsx(i,{to:"/admin/migrate",icon:R4,label:"Migration"})]}),h.jsx("div",{className:"pt-6 border-t border-stone-100",children:h.jsx("div",{className:"flex items-center gap-3 px-2 py-2",children:e&&h.jsxs(h.Fragment,{children:[h.jsx("img",{src:e.photoURL,alt:"User",className:"w-9 h-9 rounded-full border border-stone-200 bg-stone-50",onError:o=>{o.target.style.display="none"}}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:"text-sm font-bold text-slate-700 truncate",children:e.displayName}),h.jsx("p",{className:"text-[10px] font-medium text-slate-400 truncate",children:"Admin Access"})]}),h.jsx("button",{onClick:n,className:"p-2 rounded-xl text-slate-400 hover:text-rose-600 hover:bg-rose-50 transition-colors",title:"Sign Out",children:h.jsx(CE,{size:16})})]})})})]}),h.jsxs("div",{className:"flex-1 min-w-0 flex flex-col min-h-screen",children:[h.jsxs("header",{className:"md:hidden bg-white border-b border-stone-100 sticky top-0 z-30 px-4 py-3 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"inline-flex size-8 items-center justify-center rounded-xl bg-emerald-100/70 text-emerald-800",children:h.jsx(sv,{size:16})}),h.jsx("span",{className:"font-extrabold text-slate-900",children:"Munirathnam Illam"})]}),h.jsx("div",{className:"flex items-center gap-2",children:e&&h.jsx("img",{src:e.photoURL,className:"w-8 h-8 rounded-full border border-stone-100"})})]}),h.jsx("main",{className:"p-4 md:p-8 lg:p-10 max-w-7xl w-full mx-auto pb-24 md:pb-10",children:t})]}),h.jsx("div",{className:"fixed bottom-0 inset-x-0 z-50 md:hidden bg-white border-t border-stone-100 pb-safe",children:h.jsxs("div",{className:"grid grid-cols-5 gap-1 p-2",children:[h.jsx(i,{to:"/",icon:lv,label:"Dash",mobile:!0}),h.jsx(i,{to:"/rooms",icon:va,label:"Rooms",mobile:!0}),h.jsx(i,{to:"/rent",icon:cv,label:"Rent",mobile:!0}),h.jsx(i,{to:"/water",icon:av,label:"Water",mobile:!0}),h.jsx(i,{to:"/expenses",icon:dv,label:"Expenses",mobile:!0})]})})]})}function M4(){const{tenants:t,expenses:e,rooms:n,loading:r,globalYear:s,setGlobalYear:i}=zi(),o=s;if(r)return h.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading data..."});const l=d=>i(p=>p+d),u=[];for(let d=0;d<12;d++){const p=ga(o,d),g=m4(t,n,o,d);u.push({label:bi(o,d),rent:p?0:g.rent,water:p?0:g.water,total:p?0:g.total,expenses:g4(e,o,d),pending:p?0:g.pending,locked:p})}new Date().getMonth(),new Date().getFullYear(),ga(o,11)||SE(t,n,o,new Date().getMonth());const c=[];return Object.keys(Ke).forEach(d=>{const p=n[d];if(!p)return;const g=lt(t,p.roomId);if(g&&g.status==="Occupied"){const T=NE(g);T.isDue&&c.push({roomNo:p.roomNo,tenantName:g.tenant,days:T.daysRemaining,date:T.nextDue})}}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[h.jsx("h2",{className:"text-2xl sm:text-3xl font-extrabold tracking-tight text-slate-900",children:"Dashboard"}),h.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700",children:[h.jsx("span",{className:"font-semibold",children:"Year"}),h.jsxs("div",{className:"inline-flex items-center gap-1 rounded-full bg-stone-50 border border-black/5 shadow-sm px-2 py-1.5",children:[h.jsx("button",{onClick:()=>l(-1),className:"p-1 hover:bg-stone-200 rounded-full",children:h.jsx(I4,{size:16})}),h.jsx("span",{className:"min-w-[4rem] text-center font-extrabold text-emerald-800",children:o}),h.jsx("button",{onClick:()=>l(1),className:"p-1 hover:bg-stone-200 rounded-full",children:h.jsx(iv,{size:16})})]})]})]}),(c.length>0||u.some(d=>d.pending>0))&&h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 animate-in slide-in-from-top-4",children:[c.length>0&&h.jsxs("div",{className:"bg-amber-50 rounded-3xl p-5 border border-amber-100 shadow-sm relative overflow-hidden group",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition",children:h.jsx(ov,{size:80,className:"text-amber-600"})}),h.jsxs("div",{className:"relative z-10",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("div",{className:"p-2 bg-amber-100 rounded-xl text-amber-700",children:h.jsx(ov,{size:20})}),h.jsx("h3",{className:"text-base font-bold text-amber-900",children:"Annual Revision Due"}),h.jsx("span",{className:"bg-amber-200 text-amber-800 text-xs font-bold px-2 py-0.5 rounded-full",children:c.length})]}),h.jsx("div",{className:"space-y-2 mt-3 max-h-32 overflow-y-auto custom-scrollbar",children:c.map((d,p)=>h.jsxs("div",{className:"flex justify-between items-center bg-white/60 p-2 rounded-lg text-sm",children:[h.jsxs("div",{children:[h.jsxs("span",{className:"font-bold text-slate-800",children:["Room ",d.roomNo]}),h.jsxs("span",{className:"text-slate-500 text-xs ml-2",children:["(",d.tenantName,")"]})]}),h.jsx("div",{className:`text-xs font-bold ${d.days<0?"text-rose-600":"text-amber-600"}`,children:d.days<0?`${Math.abs(d.days)} days overdue`:`Due in ${d.days} days`})]},p))})]})]}),u.reduce((d,p)=>d+p.pending,0)>0&&h.jsxs("div",{className:"bg-rose-50 rounded-3xl p-5 border border-rose-100 shadow-sm relative overflow-hidden group",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition",children:h.jsx(rv,{size:80,className:"text-rose-600"})}),h.jsxs("div",{className:"relative z-10",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("div",{className:"p-2 bg-rose-100 rounded-xl text-rose-700",children:h.jsx(rv,{size:20})}),h.jsx("h3",{className:"text-base font-bold text-rose-900",children:"Pending Payments"}),h.jsxs("span",{className:"bg-rose-200/50 text-rose-800 text-xs font-bold px-2 py-0.5 rounded-full",children:["",u.reduce((d,p)=>d+p.pending,0).toLocaleString("en-IN")]})]}),h.jsx("p",{className:"text-sm text-rose-800/80 mt-1 font-medium",children:"Action required for unpaid rents. Check the Rent Details page for breakdown."}),h.jsxs(M1,{to:"/rent",className:"inline-flex items-center gap-2 mt-3 text-xs font-bold text-rose-700 hover:text-rose-900 transition",children:["View details ",h.jsx(iv,{size:14})]})]})]})]}),h.jsx("div",{className:"bg-stone-50 rounded-3xl shadow-sm border border-black/5 overflow-hidden",children:h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-sm text-left",children:[h.jsx("thead",{className:"bg-emerald-100/60 text-slate-700",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-5 py-4 font-semibold",children:"Month"}),h.jsx("th",{className:"px-5 py-4 text-right font-semibold",children:"Rent (Only)"}),h.jsx("th",{className:"px-5 py-4 text-right font-semibold",children:"Water Charges"}),h.jsx("th",{className:"px-5 py-4 text-right font-semibold",children:"Total Revenue"}),h.jsx("th",{className:"px-5 py-4 text-right font-semibold",children:"Expenses"}),h.jsx("th",{className:"px-5 py-4 text-right font-semibold",children:"Pending Rent"})]})}),h.jsx("tbody",{className:"divide-y divide-slate-100",children:u.map((d,p)=>h.jsxs("tr",{className:d.locked?"bg-stone-100/50 text-slate-400":"hover:bg-emerald-50/30 transition",children:[h.jsx("td",{className:"px-5 py-4 font-bold text-slate-800",children:d.label}),h.jsx("td",{className:"px-5 py-4 text-right font-medium text-emerald-700",children:d.locked?"":`${d.rent.toLocaleString("en-IN")}`}),h.jsx("td",{className:"px-5 py-4 text-right font-medium text-blue-600",children:d.locked?"":`${d.water.toLocaleString("en-IN")}`}),h.jsx("td",{className:"px-5 py-4 text-right font-bold text-slate-900 bg-stone-50/50",children:d.locked?"":`${d.total.toLocaleString("en-IN")}`}),h.jsx("td",{className:"px-5 py-4 text-right font-medium text-rose-700",children:`${d.expenses.toLocaleString("en-IN")}`}),h.jsx("td",{className:"px-5 py-4 text-right font-medium text-amber-800",children:d.locked?"":`${d.pending.toLocaleString("en-IN")}`})]},p))})]})})})]})}function $h({roomNo:t,roomData:e,tenantData:n,rentStatus:r,onClick:s,isPlaceholder:i=!1}){if(i||!e)return h.jsx("div",{className:"h-[200px] rounded-t-xl mx-2 border-b-0 border-2 border-dashed border-slate-200 bg-slate-50/30 flex items-center justify-center",children:h.jsx("span",{className:"text-slate-200 font-bold text-xs uppercase tracking-widest",children:"Empty"})});const o=(n==null?void 0:n.status)==="Occupied",l=!!(n!=null&&n.evictionConfirmed),u=o?(n==null?void 0:n.tenant)||"Unknown":"Vacant",d=NE(n).isDue,p=o?l?"bg-rose-50 border-rose-200":"bg-white border-slate-200":"bg-slate-100 border-slate-200",g=o?l?"border-rose-900 bg-rose-900":"border-slate-800 bg-slate-800":"border-slate-400 bg-slate-400",T=o?"bg-amber-400 shadow-sm":"bg-slate-300",b=()=>{if(!o||!r||r==="None")return null;const k=r==="Adjusted"?"Adjusted":r,N={Paid:"bg-emerald-500 text-white border-emerald-600",Pending:"bg-rose-500 text-white border-rose-600 animate-pulse","Rent Only":"bg-purple-500 text-white border-purple-600",Adjusted:"bg-blue-500 text-white border-blue-600"},_={Paid:"PAID",Pending:"DUE","Rent Only":"PARTIAL",Adjusted:"ADJ (SD)"},y=N[k]||"bg-slate-500 text-white",x=_[k]||k;return h.jsx("div",{className:`mt-2 px-1.5 py-0.5 text-[8px] font-bold rounded shadow-sm border ${y} tracking-wider`,children:x})};return h.jsxs("div",{onClick:s,className:"group relative flex flex-col items-center justify-end h-[220px] cursor-pointer",title:`Room ${t}`,children:[h.jsx("div",{className:`relative w-full h-full rounded-t-2xl border-x-8 border-t-8 ${g} shadow-xl overflow-hidden transition-transform transform group-hover:-translate-y-1`,children:h.jsxs("div",{className:`absolute inset-0 top-0.5 mx-0.5 mb-0 rounded-t-xl ${p} border-x border-t shadow-inner flex flex-col items-center pt-6`,children:[h.jsx("div",{className:"bg-gradient-to-br from-amber-100 to-amber-200 border border-amber-300 px-3 py-1 rounded shadow text-amber-900 font-bold text-lg font-mono",children:t}),o&&h.jsx("div",{className:"text-[9px] text-slate-400 mt-1 font-mono",children:e.roomId}),h.jsx("div",{className:"mt-2",children:l?h.jsx("div",{className:"w-3 h-3 rounded-full bg-rose-500 shadow-lg shadow-rose-500/50 animate-pulse"}):o?h.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 shadow-lg shadow-emerald-500/50"}):h.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-300"})}),b(),o&&d&&h.jsx("div",{className:"absolute top-10 right-2 bg-yellow-300 text-yellow-900 text-[8px] font-bold px-1.5 py-0.5 rounded-sm shadow-sm rotate-[-12deg] border border-yellow-400 z-10",children:"REV DUE"}),h.jsx("div",{className:`absolute right-3 top-1/2 w-3 h-3 rounded-full ${T} border border-black/10`}),h.jsx("div",{className:"mt-auto mb-8 w-3/4 text-center",children:h.jsx("div",{className:`py-1 px-2 rounded border ${o?"bg-white border-slate-200 shadow-sm":"bg-transparent border-transparent"}`,children:h.jsx("div",{className:`text-xs font-bold truncate ${o?"text-slate-700":"text-slate-400 italic"}`,children:u})})})]})}),h.jsx("div",{className:"absolute -bottom-2 w-[90%] h-2 bg-black/10 rounded-full blur-sm"})]})}function L4({room:t,tenant:e,onClose:n}){if(!t)return null;const{updateTenant:r,createTenant:s}=zi(),{showToast:i}=Fa(),o=(e==null?void 0:e.status)||"Vacant",[l,u]=L.useState(o),c=l==="Occupied";Xs.useEffect(()=>{u((e==null?void 0:e.status)||"Vacant")},[e]),Xs.useEffect(()=>{const K=oe=>{oe.key==="Escape"&&n()};return window.addEventListener("keydown",K),()=>window.removeEventListener("keydown",K)},[n]);const[d,p]=L.useState("tenant"),[g,T]=L.useState(!1),[b,k]=L.useState({}),N=K=>{const oe=K.target.value;u(oe),oe==="Occupied"&&!e&&(T(!0),k({tenant:"",phone:"",email:"",rent:"",waterRate:"0.25",advance:"",lastRevision:"",joinDate:new Date().toISOString().split("T")[0],status:"Occupied",roomNo:t.roomNo,roomId:t.roomId}),p("tenant"))},_=()=>{k({tenant:(e==null?void 0:e.tenant)??"",phone:(e==null?void 0:e.phone)??"",email:(e==null?void 0:e.email)??"",rent:(e==null?void 0:e.rent)??"",waterRate:(e==null?void 0:e.waterRate)??"0.25",advance:(e==null?void 0:e.advance)??"",lastRevision:(e==null?void 0:e.lastRevision)??"",joinDate:(e==null?void 0:e.joinDate)??""}),T(!0),p("tenant")},[y,x]=L.useState(!1),C=async()=>{x(!0);try{const K={...b,status:l,isEvictionConfirmed:V,noRevision:E,evictionNoticeDate:V?I:null,evictionDate:V?A:null};if(e!=null&&e.rent&&String(e.rent)!==String(K.rent)&&(K.lastRent=e.rent),(K.waterRate===void 0||K.waterRate==="")&&(K.waterRate="0.25"),e!=null&&e.id)await r(e.id,K),i("Tenant details updated successfully","success");else{if(!t.roomId)throw new Error("Room ID missing");await s({...K,status:"Occupied",roomId:t.roomId,roomNo:t.roomNo}),i("New tenant created successfully","success")}T(!1),e!=null&&e.id||n()}catch(K){console.error("Failed to update/create tenant:",K),i("Failed to save: "+K.message,"error")}finally{x(!1)}},[V,P]=L.useState(!1),[E,v]=L.useState(!1);Xs.useEffect(()=>{e?(P(!!e.isEvictionConfirmed),v(!!e.noRevision),R(e.evictionNoticeDate||""),D(e.evictionDate||"")):(P(!1),v(!1),R(""),D(""))},[e]);const[I,R]=L.useState(""),[A,D]=L.useState(""),S=L.useMemo(()=>{if(!c||!I||!A)return null;const K=new Date(I),oe=new Date(A),z=Number(e.rent||0),q=Number(e.advance||0),Q=[];let ae=new Date(K.getFullYear(),K.getMonth(),1);const fe=new Date(oe.getFullYear(),oe.getMonth(),1);for(;ae<=fe;)Q.push({year:ae.getFullYear(),monthIndex:ae.getMonth(),label:bi(ae.getFullYear(),ae.getMonth())}),ae.setMonth(ae.getMonth()+1);const yt=Q.length,$e=yt*z,an=z,Rt=zu(t.roomNo);let qt=0;const Qn=60;let Ua=yt*Qn;const za=Q.map(Yn=>{const Bi=Dc(e,Yn.year,Yn.monthIndex,Rt),qr=Bi.amount||0;qt+=qr;let Gr="";return Bi.units!==null?Gr=`${Bi.units} units + ${Qn}`:Gr=`Water data missing + ${Qn}`,{...Yn,rent:z,waterCost:qr,totalWater:qr+Qn,notes:Gr}}),$a=qt+Ua,$i=$e+an+$a-q;return{monthsCount:yt,rentDeduction:$e,mandatoryRent:an,waterAndServiceTotal:$a,deposit:q,balance:$i,monthDetails:za,isWaterComplete:za.every(Yn=>!Yn.notes.includes("missing"))}},[c,I,A,e,t.roomNo]),we=K=>{p(oe=>oe===K?null:K)},Ne=(K,oe)=>{if(K==="phone"){const z=oe.replace(/\D/g,"");if(z.length>10)return;k(q=>({...q,[K]:z}));return}k(z=>({...z,[K]:oe}))};return h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-in fade-in duration-200",children:h.jsxs("div",{className:"bg-stone-50 rounded-[2rem] shadow-2xl w-full max-w-lg h-[90vh] md:h-auto md:max-h-[90vh] overflow-y-auto flex flex-col",children:[h.jsxs("div",{className:"flex justify-between items-start p-6 pb-2 bg-stone-50 sticky top-0 z-10",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[h.jsxs("h3",{className:"text-2xl font-extrabold text-slate-900",children:["Room ",t.roomNo]}),c&&h.jsx("span",{className:"bg-emerald-100 text-emerald-700 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase tracking-wide border border-emerald-200/50",children:"Occupied"})]}),h.jsxs("p",{className:"text-xs font-bold text-slate-400",children:["ID: ",t.roomId]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[c&&!g&&h.jsx("button",{onClick:_,className:"p-2 bg-white rounded-full hover:bg-stone-200 transition text-slate-400 border border-stone-100 shadow-sm",title:"Edit Tenant Details",children:h.jsx(P4,{size:18})}),g&&h.jsxs("button",{onClick:C,disabled:y,className:"px-4 py-2 bg-emerald-600 text-white rounded-xl hover:bg-emerald-700 transition shadow-sm flex items-center gap-2 text-xs font-bold disabled:opacity-50",children:[h.jsx(mf,{size:16})," ",y?"Saving...":"Save"]}),h.jsx("button",{onClick:()=>{T(!1),n()},className:"p-2 bg-white rounded-full hover:bg-stone-200 transition text-slate-400 border border-stone-100 shadow-sm",children:h.jsx(Bu,{size:20})})]})]}),h.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto custom-scrollbar",children:[h.jsxs("div",{className:"bg-white p-4 rounded-3xl border border-stone-200 shadow-sm",children:[h.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-2 block ml-1",children:"Room Status"}),h.jsxs("div",{className:"relative",children:[h.jsxs("select",{className:"w-full appearance-none bg-stone-50 border border-stone-200 text-slate-700 text-sm font-bold rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-emerald-500/20",value:l,onChange:N,children:[h.jsx("option",{value:"Occupied",children:"Occupied - Tenant Present"}),h.jsx("option",{value:"Vacant",children:"Vacant - Ready for Tenant"}),h.jsx("option",{value:"Maintenance",children:"Maintenance - Not Available"})]}),h.jsx(um,{className:"absolute right-4 top-3.5 text-slate-400 pointer-events-none",size:16})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx(Bh,{id:"tenant",title:"Tenant Information",icon:DE,badge:c?"Occupied":null,expandedSection:d,onToggle:we,children:c?h.jsxs("div",{className:"grid grid-cols-2 gap-y-5 gap-x-4",children:[h.jsx(vt,{label:"Tenant Name",value:e.tenant,fieldKey:"tenant",isEditing:g,editForm:b,onChange:Ne}),h.jsx(vt,{label:"Phone",value:e.phone,fieldKey:"phone",type:"tel",isEditing:g,editForm:b,onChange:Ne,maxLength:10}),h.jsx(vt,{label:"Email",value:e.email,fieldKey:"email",type:"email",isEditing:g,editForm:b,onChange:Ne}),h.jsx(vt,{label:"Move-in Date",value:e.joinDate,fieldKey:"joinDate",type:"date",isEditing:g,editForm:b,onChange:Ne}),h.jsx(vt,{label:"Room ID",value:t.roomId})]}):h.jsx("div",{className:"text-center py-4 text-slate-400 text-sm",children:"No tenant assigned."})}),h.jsx(Bh,{id:"financial",title:"Financial Details",icon:N4,badge:(()=>{var Q;if(!c)return null;if(V)return"Adjusted in SD";const K=new Date,oe=hi(K.getFullYear(),K.getMonth()),z=Tn(oe.year,oe.monthIndex);return((Q=e==null?void 0:e.paymentHistory)==null?void 0:Q[z])==="Paid"?"Paid":"Pending"})(),expandedSection:d,onToggle:we,children:c?h.jsxs("div",{className:"grid grid-cols-2 gap-y-5 gap-x-4",children:[h.jsx(vt,{label:"Monthly Rent",value:`${Number(e.rent||0).toLocaleString("en-IN")}`,fieldKey:"rent",type:"number",isEditing:g,editForm:b,onChange:Ne}),h.jsx(vt,{label:"Water Rate (/Unit)",value:e.waterRate||"0.25",fieldKey:"waterRate",type:"number",step:"0.01",isEditing:g,editForm:b,onChange:Ne}),h.jsx(vt,{label:`Payment Status (${(()=>{const K=new Date,oe=hi(K.getFullYear(),K.getMonth());return bi(oe.year,oe.monthIndex)})()})`,value:(()=>{var Q;if(V)return"Adjusted in SD";if(!e)return"Pending";const K=new Date,oe=hi(K.getFullYear(),K.getMonth()),z=Tn(oe.year,oe.monthIndex);return((Q=e.paymentHistory)==null?void 0:Q[z])==="Paid"?"Paid":"Pending"})()}),h.jsx(vt,{label:"Advance Amount",value:`${Number(e.advance||0).toLocaleString("en-IN")}`,fieldKey:"advance",type:"number",isEditing:g,editForm:b,onChange:Ne}),h.jsx(vt,{label:"Advance Balance",value:`${Number(e.advance||0).toLocaleString("en-IN")}`}),h.jsx(vt,{label:"Last Rent Revision",value:e.lastRevision||"N/A",fieldKey:"lastRevision",type:"date",isEditing:g,editForm:b,onChange:Ne}),e.lastRent&&h.jsx(vt,{label:"Last Recorded Rent",value:`${Number(e.lastRent).toLocaleString("en-IN")}`})]}):h.jsx("div",{className:"text-center py-4 text-slate-400 text-sm",children:"No financial data."})}),h.jsx(U4,{tenant:e,updateTenant:r,showToast:i}),h.jsx(Bh,{id:"room",title:"Room Details",icon:va,badge:null,expandedSection:d,onToggle:we,children:h.jsxs("div",{className:"grid grid-cols-1 gap-y-4",children:[h.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:V?h.jsx("span",{className:"px-2 py-1 rounded-md bg-rose-50 text-rose-600 text-[10px] font-bold uppercase border border-rose-100",children:"Eviction: Pending"}):h.jsx("span",{className:"px-2 py-1 rounded-md bg-emerald-100 text-emerald-800 text-[10px] font-bold uppercase",children:"Paid"})}),h.jsx(vt,{label:"Room Number",value:t.roomNo}),h.jsx(vt,{label:"EB Service No",value:t.ebServNo})]})})]}),h.jsxs("div",{className:"space-y-3 pt-2",children:[h.jsx(F4,{isOccupied:c,isEvictionConfirmed:V,setIsEvictionConfirmed:P,noRevision:E,setNoRevision:v}),V&&c&&h.jsxs("div",{className:"bg-stone-50 rounded-3xl p-6 border border-stone-200 mt-4 animate-in slide-in-from-top-4",children:[h.jsxs("div",{className:"mb-8",children:[h.jsx("h4",{className:"font-bold text-slate-800 text-sm mb-4",children:"Eviction dates"}),h.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-4",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Eviction notice date"}),h.jsx("input",{type:"date",value:I,onChange:K=>R(K.target.value),className:"w-full bg-white border border-stone-200 rounded-xl px-3 py-2 text-sm font-bold text-slate-800 focus:outline-none focus:ring-2 focus:ring-emerald-500/20"})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Eviction date"}),h.jsx("input",{type:"date",value:A,onChange:K=>D(K.target.value),className:"w-full bg-white border border-stone-200 rounded-xl px-3 py-2 text-sm font-bold text-slate-800 focus:outline-none focus:ring-2 focus:ring-emerald-500/20"})]})]}),h.jsx("p",{className:"text-[10px] text-slate-400 mt-3 font-medium",children:"Step 1: Set Notice  Step 2: Set Eviction. When eviction date is reached, scheduler auto-vacates."})]}),S&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"bg-white rounded-2xl p-5 border border-stone-200 shadow-sm mb-6",children:[h.jsx("h4",{className:"font-bold text-slate-800 text-sm mb-1",children:"Eviction Settlement (from deposit)"}),h.jsx("p",{className:"text-[10px] text-slate-400 font-medium mb-4",children:"Deduct rent + water + 60 service (full months), plus mandatory 1 month rent."}),h.jsxs("div",{className:"grid grid-cols-2 gap-y-6 gap-x-4",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Months (Notice  Vacate)"}),h.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:S.monthsCount})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Mandatory 1 Month Rent"}),h.jsxs("div",{className:"text-xl font-bold text-slate-900",children:["",S.mandatoryRent.toLocaleString("en-IN")]})]}),h.jsxs("div",{children:[h.jsxs("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:["Rent Deduction (",S.monthsCount," months)"]}),h.jsxs("div",{className:"text-xl font-bold text-slate-900",children:["",S.rentDeduction.toLocaleString("en-IN")]})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Water + Service (known)"}),h.jsxs("div",{className:"text-xl font-bold text-slate-900",children:["",S.waterAndServiceTotal.toLocaleString("en-IN")]})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Security Deposit"}),h.jsxs("div",{className:"text-xl font-bold text-slate-900",children:["",S.deposit.toLocaleString("en-IN")]})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Result (known)"}),h.jsxs("div",{className:`text-xl font-extrabold ${S.balance>0?"text-rose-600":"text-emerald-600"}`,children:[S.balance>0?"Tenant owes":"Refund",": ",Math.abs(S.balance).toLocaleString("en-IN")]})]})]}),h.jsxs("div",{className:"mt-6 bg-rose-50/50 rounded-xl overflow-hidden border border-rose-100",children:[h.jsx("div",{className:"px-4 py-2 bg-rose-100/50 border-b border-rose-100",children:h.jsx("h5",{className:"text-xs font-bold text-rose-800",children:"Month-wise deduction"})}),h.jsxs("table",{className:"w-full text-xs text-left",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"text-slate-500 border-b border-rose-100/50",children:[h.jsx("th",{className:"px-4 py-2 font-bold",children:"Month"}),h.jsx("th",{className:"px-4 py-2 text-right font-bold",children:"Rent"}),h.jsx("th",{className:"px-4 py-2 text-right font-bold",children:"Water"}),h.jsx("th",{className:"px-4 py-2 font-bold",children:"Notes"})]})}),h.jsx("tbody",{className:"divide-y divide-rose-100/50",children:S.monthDetails.map((K,oe)=>h.jsxs("tr",{className:"bg-white",children:[h.jsx("td",{className:"px-4 py-2 font-bold text-slate-800",children:K.label}),h.jsxs("td",{className:"px-4 py-2 text-right font-medium text-slate-600",children:["",K.rent.toLocaleString("en-IN")]}),h.jsxs("td",{className:"px-4 py-2 text-right font-medium text-slate-600",children:["",K.waterCost.toLocaleString("en-IN")]}),h.jsx("td",{className:"px-4 py-2 text-slate-500",children:K.notes})]},oe))})]})]})]}),h.jsx("p",{className:"text-[11px] text-slate-400 font-medium mb-4",children:S.isWaterComplete?"All required water readings are available for the selected months.":" Some water readings are missing. Please update them in Water Bill section."}),h.jsx("button",{className:"w-full py-3 bg-rose-600 hover:bg-rose-700 text-white font-bold rounded-xl shadow-sm shadow-rose-200 transition",children:"Finalize Settlement & Mark Vacant"})]})]})]}),h.jsxs("div",{className:"mt-8 flex items-center justify-end gap-3 pt-6 border-t border-stone-100",children:[h.jsx("button",{className:"px-5 py-2.5 bg-amber-500 hover:bg-amber-600 text-white text-sm font-bold rounded-xl shadow-sm shadow-amber-200 transition",children:"Mark Rent Revised"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{className:"px-5 py-2.5 bg-rose-600 hover:bg-rose-700 text-white text-sm font-bold rounded-xl shadow-sm shadow-rose-200 transition",children:"Mark Vacant"}),h.jsx("button",{onClick:C,disabled:y,className:"p-2.5 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl shadow-sm shadow-emerald-200 transition disabled:opacity-50",title:"Save Changes",children:h.jsx(mf,{size:20})})]}),h.jsx("button",{onClick:n,className:"p-2.5 bg-stone-100 hover:bg-stone-200 text-slate-600 rounded-xl transition",children:h.jsx(Bu,{size:18})})]})]})]})})}function F4({isOccupied:t,isEvictionConfirmed:e,setIsEvictionConfirmed:n,noRevision:r,setNoRevision:s}){return h.jsxs(h.Fragment,{children:[h.jsxs("label",{className:`flex items-start gap-3 p-1 cursor-pointer group ${t?"":"opacity-50 pointer-events-none"}`,children:[h.jsxs("div",{className:"relative flex items-center",children:[h.jsx("input",{type:"checkbox",checked:e,onChange:i=>n(i.target.checked),className:"peer size-5 appearance-none rounded-md border-2 border-slate-300 checked:bg-emerald-500 checked:border-emerald-500 transition cursor-pointer"}),h.jsx("svg",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-3.5 h-3.5 text-white opacity-0 peer-checked:opacity-100 pointer-events-none transition",viewBox:"0 0 14 14",fill:"none",children:h.jsx("path",{d:"M11.6666 3.5L5.24992 9.91667L2.33325 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-bold text-slate-700 group-hover:text-slate-900 transition flex items-center gap-2",children:"Tenant confirmed eviction"}),h.jsx("p",{className:"text-[11px] text-slate-400 font-medium leading-relaxed mt-0.5",children:"Enable eviction notice/date and deposit settlement controls."})]})]}),h.jsxs("label",{className:"flex items-start gap-3 p-1 cursor-pointer group",children:[h.jsxs("div",{className:"relative flex items-center",children:[h.jsx("input",{type:"checkbox",checked:r,onChange:i=>s(i.target.checked),className:"peer size-5 appearance-none rounded-md border-2 border-slate-300 checked:bg-emerald-500 checked:border-emerald-500 transition cursor-pointer"}),h.jsx("svg",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-3.5 h-3.5 text-white opacity-0 peer-checked:opacity-100 pointer-events-none transition",viewBox:"0 0 14 14",fill:"none",children:h.jsx("path",{d:"M11.6666 3.5L5.24992 9.91667L2.33325 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-bold text-slate-700 group-hover:text-slate-900 transition",children:"No annual revision"}),h.jsx("p",{className:"text-[11px] text-slate-400 font-medium leading-relaxed mt-0.5",children:"Exclude from Rent Revision Due Soon list."})]})]})]})}const Bh=({id:t,title:e,icon:n,badge:r,expandedSection:s,onToggle:i,children:o})=>{const l=s===t;return h.jsxs("div",{className:`bg-white rounded-3xl border transition-all duration-200 overflow-hidden ${l?"border-emerald-500 shadow-md ring-1 ring-emerald-100":"border-stone-200"}`,children:[h.jsxs("button",{onClick:()=>i(t),className:"w-full flex items-center justify-between p-4 bg-white",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`p-2 rounded-xl ${l?"bg-emerald-100 text-emerald-700":"bg-stone-100 text-slate-500"}`,children:h.jsx(n,{size:18})}),h.jsxs("div",{className:"text-left",children:[h.jsx("h4",{className:"font-bold text-slate-800 text-sm",children:e}),h.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Hover (or tap) to expand"})]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[r&&h.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-0.5 rounded-md ${r==="Occupied"||r==="Paid"?"bg-emerald-100 text-emerald-700":"bg-stone-100 text-slate-500"}`,children:r}),l?h.jsx(bE,{size:16,className:"text-slate-400"}):h.jsx(um,{size:16,className:"text-slate-400"})]})]}),l&&h.jsxs("div",{className:"px-4 pb-5 pt-0 animate-in slide-in-from-top-2 duration-200",children:[h.jsx("div",{className:"h-px bg-stone-100 mb-4 mx-2"}),o]})]})};function U4({tenant:t,updateTenant:e,showToast:n}){const[r,s]=L.useState(!1),i=(t==null?void 0:t.documents)||{},o=async()=>{const d=crypto.randomUUID();try{await e(t.id,{uploadToken:d,uploadTokenCreatedAt:new Date().toISOString()}),n("Secure upload link generated","success")}catch{n("Failed to generate link","error")}},l=()=>{const d=`${window.location.origin}/upload/${t.uploadToken}`;navigator.clipboard.writeText(d),n("Link copied to clipboard","success")},u=()=>{const d=`${window.location.origin}/upload/${t.uploadToken}`,p=`Document Upload Link for Room ${t.roomNo}`,g=`Hi ${t.tenant},

Please use the following secure link to upload your documents (Aadhar, ID Proof, Agreement, Photo) for Room ${t.roomNo}.

${d}

This link is valid for 24 hours.

Regards,
Munirathnam Illam`;window.open(`mailto:${t.email||""}?subject=${encodeURIComponent(p)}&body=${encodeURIComponent(g)}`)},c=async d=>{const p={...i};delete p[d];try{await e(t.id,{documents:p}),n("Document removed","success")}catch{n("Failed to remove document","error")}};return h.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 overflow-hidden",children:[h.jsxs("button",{onClick:()=>s(!r),className:"w-full flex items-center justify-between p-6 bg-slate-50/50 hover:bg-slate-50 transition",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"bg-blue-100 p-3 rounded-2xl text-blue-600",children:h.jsx(C4,{size:24})}),h.jsxs("div",{className:"text-left",children:[h.jsx("h3",{className:"font-bold text-slate-900",children:"Document Vault"}),h.jsx("p",{className:"text-xs text-slate-500",children:"Manage tenant documents"})]})]}),r?h.jsx(bE,{size:20,className:"text-slate-400"}):h.jsx(um,{size:20,className:"text-slate-400"})]}),r&&h.jsxs("div",{className:"p-6 border-t border-slate-100 animate-in slide-in-from-top-2",children:[h.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-4 mb-6",children:[h.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Secure Upload Link"}),t!=null&&t.uploadToken?h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("div",{className:"flex-1 bg-white border border-slate-200 rounded-lg px-3 py-2 text-sm text-slate-600 truncate font-mono",children:[window.location.origin,"/upload/",t.uploadToken]}),h.jsx("button",{onClick:l,className:"p-2 bg-slate-200 hover:bg-slate-300 text-slate-700 rounded-lg transition",title:"Copy Link",children:h.jsx(S4,{size:18})}),h.jsx("button",{onClick:u,className:"p-2 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-lg transition",title:"Share via Email",children:h.jsx(AE,{size:18})})]}):h.jsx("button",{onClick:o,className:"w-full py-2 bg-blue-600 text-white rounded-lg font-bold text-sm hover:bg-blue-700 transition",children:"Generate Link"}),h.jsx("p",{className:"text-[10px] text-slate-400 mt-2",children:"Link expires in 24 hours. Tenant needs Google Sign-in to access."})]}),h.jsxs("div",{className:"space-y-3",children:[t.familyMembers&&h.jsxs("div",{className:"bg-amber-50 border border-amber-100 rounded-xl p-4 mb-4",children:[h.jsx("h4",{className:"text-xs font-bold text-amber-800 uppercase mb-1",children:"Family Contacts"}),h.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:t.familyMembers})]}),h.jsx(Sl,{title:"Tenant Photo",docUrl:i.photo,onDelete:()=>c("photo")}),h.jsx(Sl,{title:"Aadhar Card",docUrl:i.aadhar,onDelete:()=>c("aadhar")}),h.jsx(Sl,{title:"ID Proof",docUrl:i.pan,onDelete:()=>c("pan")}),h.jsx(Sl,{title:"Rental Agreement",docUrl:i.agreement,onDelete:()=>c("agreement")})]})]})]})}function Sl({title:t,docUrl:e,onDelete:n}){return h.jsxs("div",{className:"flex items-center justify-between p-3 border border-slate-100 rounded-xl hover:bg-slate-50 transition",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`p-2 rounded-lg ${e?"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-400"}`,children:e?h.jsx($u,{size:16}):h.jsx(DE,{size:16})}),h.jsxs("div",{children:[h.jsx("div",{className:"font-bold text-sm text-slate-700",children:t}),h.jsx("div",{className:"text-[10px] text-slate-400",children:e?"Uploaded":"Pending"})]})]}),e&&h.jsxs("div",{className:"flex gap-2",children:[h.jsx("a",{href:e,target:"_blank",rel:"noreferrer",className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition",title:"View Document",children:h.jsx(AE,{size:16})}),h.jsx("button",{onClick:n,className:"p-2 text-rose-500 hover:bg-rose-50 rounded-lg transition",title:"Remove Document",children:h.jsx(PE,{size:16})})]})]})}const vt=({label:t,value:e,fieldKey:n,type:r="text",step:s,isEditing:i,editForm:o,onChange:l,maxLength:u})=>h.jsxs("div",{children:[h.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1",children:t}),i&&n?h.jsx("input",{type:r,step:s,maxLength:u,value:o[n]||"",onChange:c=>l(n,c.target.value),className:"w-full bg-white border border-stone-200 rounded-lg px-3 py-2 text-sm font-bold text-slate-800 focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none"}):h.jsx("div",{className:"text-sm font-bold text-slate-800 break-words",children:e||"N/A"})]});function z4(){const{rooms:t,tenants:e,loading:n}=zi(),[r,s]=Xs.useState(null);if(n)return h.jsx("div",{className:"p-12 text-center text-slate-400",children:"Loading rooms..."});const i=12,o=[{name:"Ground Floor",rooms:["01","02"]},{name:"1st Floor",rooms:["04"]},{name:"2nd Floor",rooms:["05","06","07"]},{name:"3rd Floor",rooms:["08","09","10"]},{name:"4th Floor",rooms:["11","12","13"]}];let l=0;o.forEach(y=>{y.rooms.forEach(x=>{const C=t[x];if(C){const V=lt(e,C.roomId);ya(V)&&l++}})});const u=i-l,c=({label:y,mainValue:x,subValue:C,icon:V,bgClass:P,iconClass:E})=>h.jsx("div",{className:`p-6 rounded-3xl ${P} flex flex-col justify-between h-40 relative overflow-hidden`,children:h.jsxs("div",{className:"flex justify-between items-start z-10",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-semibold text-slate-600 mb-1",children:y}),h.jsx("h3",{className:"text-4xl font-extrabold text-slate-900",children:x}),C&&h.jsx("p",{className:"text-xs text-slate-500 mt-2",children:C})]}),h.jsx("div",{className:`p-2 rounded-full ${E}`,children:h.jsx(V,{size:24})})]})}),d=(y,x)=>{s({room:y,tenant:x})},p=new Date().getFullYear(),g=new Date().getMonth(),T=hi(p,g),b=Tn(T.year,T.monthIndex),k=p4(e,t,T.year,T.monthIndex),N=SE(e,t,T.year,T.monthIndex),_=[];return Object.keys(Ke).forEach(y=>{var V;const x=t[y]||Ke[y],C=lt(e,x.roomId);C&&C.status==="Occupied"&&!C.isEvictionConfirmed&&((V=C.paymentHistory)==null?void 0:V[b])==="Pending"&&_.push({roomNo:x.roomNo,amount:C.rent,tenantName:C.tenant})}),h.jsxs("div",{className:"space-y-8 pb-12",children:[h.jsx("h2",{className:"text-3xl font-extrabold text-slate-900",children:"Room Details"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[h.jsx(c,{label:"Occupied Rooms",mainValue:l,subValue:`Out of ${i}`,icon:va,bgClass:"bg-stone-50 border border-stone-100",iconClass:"bg-emerald-100 text-emerald-700"}),h.jsx(c,{label:"Vacant Rooms",mainValue:u,subValue:"Available",icon:va,bgClass:"bg-stone-50 border border-stone-100",iconClass:"bg-slate-200 text-slate-600"}),h.jsx(c,{label:"Rent Received",mainValue:`${k.toLocaleString("en-IN")}`,subValue:`Month of ${bi(T.year,T.monthIndex)}`,icon:E4,bgClass:"bg-stone-50 border border-stone-100",iconClass:"bg-emerald-100 text-emerald-700"}),h.jsx(c,{label:"Pending Rent",mainValue:`${N.toLocaleString("en-IN")}`,subValue:`Month of ${bi(T.year,T.monthIndex)}`,icon:di,bgClass:"bg-stone-50 border border-stone-100",iconClass:"bg-amber-100 text-amber-600"})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[h.jsx("div",{className:"lg:col-span-2 space-y-8 bg-stone-50/50 p-6 rounded-3xl border border-stone-100",children:o.map(y=>h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[h.jsx("div",{className:"md:col-span-1 flex items-center",children:h.jsx("span",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:y.name})}),h.jsxs("div",{className:"md:col-span-3 grid grid-cols-1 sm:grid-cols-3 gap-4",children:[y.rooms.map(x=>{var E;const C=t[x],V=lt(e,C==null?void 0:C.roomId);let P=null;return V&&V.status==="Occupied"&&(V.isEvictionConfirmed?P="Adjusted":P=((E=V.paymentHistory)==null?void 0:E[b])||"Pending"),h.jsx($h,{roomNo:x,roomData:C,tenantData:V,rentStatus:P,isPlaceholder:!C,onClick:()=>d(C,V)},x)}),y.name==="1st Floor"?h.jsx("div",{className:"sm:col-span-2",children:h.jsx($h,{roomNo:"Owner",roomData:{roomId:"Flat"},tenantData:{status:"Occupied",tenant:"Munirathnam",evictionConfirmed:!1},rentStatus:"Paid",onClick:()=>{}})}):Array.from({length:3-y.rooms.length}).map((x,C)=>h.jsx($h,{isPlaceholder:!0},`placeholder-${C}`))]})]},y.name))}),h.jsx("div",{className:"lg:col-span-1",children:h.jsxs("div",{className:"bg-stone-50 rounded-3xl border border-stone-100 p-6",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsx("h3",{className:"font-bold text-slate-800",children:"Last Month Pending"}),h.jsx("span",{className:"bg-amber-100 text-amber-800 text-xs font-bold px-2 py-1 rounded-full",children:_.length})]}),h.jsxs("div",{className:"space-y-3",children:[_.length>0?_.map((y,x)=>h.jsxs("div",{className:"bg-white p-4 rounded-xl border border-stone-100 shadow-sm cursor-pointer hover:border-rose-200 transition",onClick:()=>{const C=t[y.roomNo],V=lt(e,C==null?void 0:C.roomId);C&&V&&d(C,V)},children:[h.jsxs("div",{className:"flex justify-between mb-1",children:[h.jsxs("span",{className:"font-bold text-slate-700",children:["Room ",y.roomNo]}),h.jsxs("span",{className:"font-bold text-rose-600",children:["",Number(y.amount).toLocaleString()]})]}),h.jsx("div",{className:"text-xs text-slate-500",children:y.tenantName})]},x)):h.jsx("div",{className:"text-center py-8 text-slate-400 text-sm",children:"No pending payments from last month."}),h.jsx("p",{className:"text-xs text-slate-400 mt-4 text-center",children:"Click a row to open Rent Details."})]})]})})]}),r&&h.jsx(L4,{room:r.room,tenant:lt(e,r.room.roomId),onClose:()=>s(null)})]})}function $4(){const{rooms:t,tenants:e,loading:n,updateRentStatus:r,globalYear:s}=zi(),{showToast:i}=Fa(),o=s;if(n)return h.jsx("div",{className:"p-12 text-center text-slate-400",children:"Loading rent details..."});const l=Object.keys(Ke).map(c=>t[c]||Ke[c]).sort((c,d)=>String(c.roomNo).localeCompare(String(d.roomNo),void 0,{numeric:!0})),u=async(c,d,p)=>{const g=lt(e,c.roomId);if(!ya(g))return;const T=Tn(o,d),b=new Date;if(!(ga(o,d)||o===b.getFullYear()&&d===b.getMonth()))try{await r(c.roomId,T,p,g,o,d)}catch(N){i(N.message,"error")}};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[h.jsx("h2",{className:"text-3xl font-extrabold text-slate-900",children:"Rent Status"}),h.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[h.jsxs("span",{className:"font-semibold",children:["Year: ",o]}),h.jsx("span",{className:"text-xs text-slate-400",children:"(Change in Dashboard)"})]})]}),h.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden",children:h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-base text-left whitespace-nowrap",children:[h.jsx("thead",{className:"bg-slate-50 text-slate-700 font-semibold border-b border-slate-200",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-2 py-4 border-r border-slate-200 sticky left-0 bg-slate-50 z-10 w-20 text-center",children:"Room ID"}),h.jsx("th",{className:"px-2 py-4 border-r border-slate-200 w-20 text-center",children:"Room No"}),h.jsx("th",{className:"px-4 py-4 border-r border-slate-200 w-40",children:"Tenant"}),Jt.map(c=>h.jsx("th",{className:"px-1 py-4 text-center w-12",children:c},c))]})}),h.jsx("tbody",{className:"divide-y divide-slate-100",children:l.map(c=>{const d=lt(e,c.roomId),p=ya(d),g=p?(d==null?void 0:d.tenant)||"Unknown":"Vacant",T=(d==null?void 0:d.paymentHistory)||{};return h.jsxs("tr",{className:p?"hover:bg-slate-50":"bg-slate-50/50",children:[h.jsx("td",{className:"px-2 py-4 border-r border-slate-100 font-bold text-blue-600 sticky left-0 bg-white z-10 text-center",children:c.roomId}),h.jsx("td",{className:"px-2 py-4 border-r border-slate-100 font-medium text-center",children:c.roomNo}),h.jsx("td",{className:`px-4 py-4 border-r border-slate-100 font-medium truncate max-w-[160px] ${p?"text-slate-800":"text-slate-400 italic"}`,title:g,children:g}),Jt.map((b,k)=>{const N=Tn(o,k),_=T[N]||"None",y=new Date,x=o===y.getFullYear()&&k===y.getMonth(),C=ga(o,k)||x;let V=h.jsx(zh,{size:14,className:"mx-auto text-slate-300"}),P="cursor-not-allowed bg-slate-100/50";if(p)if(C)V=h.jsx(zh,{size:14,className:"mx-auto text-slate-300"}),P="cursor-not-allowed bg-slate-50";else{let E=!1;if(d.isEvictionConfirmed)if(d.evictionNoticeDate){const v=new Date(d.evictionNoticeDate),I=new Date(v.getFullYear(),v.getMonth(),1);new Date(o,k,1)>=I&&(E=!0)}else E=!0;E?(V=h.jsx("span",{className:"text-[10px] font-black text-cyan-600",children:"SD"}),P="cursor-not-allowed bg-cyan-50"):_==="Paid"?(V=h.jsx($u,{size:16,className:"mx-auto text-green-600",strokeWidth:3}),P="cursor-pointer bg-green-50 hover:bg-green-100"):_==="Pending"?(V=h.jsx(Bu,{size:16,className:"mx-auto text-amber-600",strokeWidth:3}),P="cursor-pointer bg-amber-50 hover:bg-amber-100"):_==="Rent Only"?(V=h.jsx($u,{size:16,className:"mx-auto text-purple-600",strokeWidth:3}),P="cursor-pointer bg-purple-50 hover:bg-purple-100"):(V=h.jsx(zh,{size:14,className:"mx-auto text-slate-400"}),P="cursor-pointer bg-white hover:bg-slate-50")}return h.jsx("td",{className:`px-1 py-4 border-r border-slate-100 text-center transition-colors ${P}`,onClick:()=>u(c,k,_),title:p?C?"Locked":_:"Vacant",children:V},N)})]},c.roomId)})})]})})}),h.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden mt-8",children:[h.jsxs("div",{className:"p-6 border-b border-slate-100 bg-emerald-50/50",children:[h.jsx("h3",{className:"text-xl font-bold text-emerald-900",children:"Rent and Water"}),h.jsx("p",{className:"text-sm text-emerald-700 mt-1",children:"Rent and Water Details (Water Calculation Disabled Temporarily for Debugging)"})]}),h.jsx("div",{className:"overflow-x-auto text-sm",children:h.jsxs("table",{className:"w-full text-left whitespace-nowrap",children:[h.jsx("thead",{className:"bg-emerald-100 text-emerald-900 font-bold",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-2 py-4 sticky left-0 bg-emerald-100 z-10 w-20 text-center",children:"Room ID"}),h.jsx("th",{className:"px-2 py-4 border-r border-emerald-200/50 w-20 text-center",children:"Room No"}),h.jsx("th",{className:"px-4 py-4 border-r border-emerald-200/50 w-40",children:"Tenant Name"}),Array.from({length:12}).map((c,d)=>h.jsx("th",{className:"px-1 py-4 text-center min-w-[70px]",children:bi(o,d).split(" ")[0]},d))]})}),h.jsx("tbody",{className:"divide-y divide-emerald-50",children:l.map(c=>{const d=lt(e,c.roomId),p=d&&d.status==="Occupied";return h.jsxs("tr",{className:"hover:bg-slate-50 transition",children:[h.jsx("td",{className:"px-2 py-4 font-bold text-blue-600 sticky left-0 bg-white shadow-[1px_0_5px_-2px_rgba(0,0,0,0.1)] text-center",children:c.roomId}),h.jsx("td",{className:"px-2 py-4 border-r border-slate-100 font-medium text-slate-700 text-center",children:c.roomNo}),h.jsx("td",{className:"px-4 py-4 border-r border-slate-100 font-medium text-slate-900 truncate max-w-[160px]",title:p?d.tenant:"Vacant",children:p?d.tenant:h.jsx("span",{className:"text-slate-400 italic",children:"Vacant"})}),Array.from({length:12}).map((g,T)=>{const b=`${o}-${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][T]}`;let k="-",N="text-slate-300";if(d){const _=d.paymentHistory||{},y=d.paymentTotals||{},x=_[b];let C=Number(d.rent);if(d.lastRevision){const E=new Date(d.lastRevision),v=new Date(o,T,1),I=new Date(E.getFullYear(),E.getMonth(),1);v<I&&(C=Number(d.lastRent)||C)}const V=lm;let P=!1;if(d.isEvictionConfirmed&&d.evictionNoticeDate){const E=new Date(d.evictionNoticeDate),v=new Date(o,T,1),I=new Date(E.getFullYear(),E.getMonth(),1);v>=I&&(P=!0,C=0)}if(x==="Paid")if(P)k="0",N="text-slate-900 font-bold";else{const E=y[b];Number.isFinite(E)?(k=E.toLocaleString("en-IN"),N="text-slate-900 font-bold"):(k=(C+V).toLocaleString("en-IN"),N="text-slate-900 font-bold")}}return h.jsx("td",{className:`px-1 py-4 text-center ${N} border-r border-slate-50`,children:k},T)})]},c.roomId)})})]})})]})]})}const B4=({size:t=24,className:e=""})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"currentColor",className:e,children:h.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})});function W4(){const{rooms:t,tenants:e,loading:n,globalYear:r}=zi(),{showToast:s,confirm:i}=Fa(),o=r,[l,u]=L.useState(null),[c,d]=L.useState(""),[p,g]=L.useState(!1);if(n)return h.jsx("div",{className:"p-12 text-center text-slate-400",children:"Loading water details..."});const T=Object.keys(Ke).map(N=>t[N]||Ke[N]).sort((N,_)=>String(N.roomNo).localeCompare(String(_.roomNo),void 0,{numeric:!0})),b=(N,_,y,x,C,V,P)=>{!x&&!ya(lt(e,N.roomId))||y||(u({room:N,monthIndex:_,currentVal:C,prevVal:P,existingReset:V}),d(C??""),g(!!V))},k=async()=>{if(!l)return;const{room:N,monthIndex:_}=l;try{const y=lt(e,N.roomId);if(!y||!y.id)throw new Error("Tenant record not found");const x=Number(c);if(c!==""&&(!Number.isFinite(x)||x<0)){s("Please enter a valid non-negative reading","warning");return}const C=zo(o,_);!p&&c!==""&&Number.isFinite(l.prevVal)&&x<l.prevVal&&await i({title:"Potential Meter Reset?",message:`Reading (${x}) is lower than previous (${l.prevVal}).

Is this a meter reset/replacement?`,confirmText:"Yes, Meter Reset",cancelText:"No, Save Anyway",type:"danger"})&&g(!0);const V={[`waterReadings.${C}`]:c===""?null:x,[`waterMeterReset.${C}`]:!!p};await Ri(Wn(qe,"properties",y.id),V),u(null),s("Water reading saved successfully","success")}catch(y){console.error(y),s("Error saving reading: "+y.message,"error")}};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[h.jsx("h2",{className:"text-3xl font-extrabold text-slate-900",children:"Water Bill"}),h.jsx("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:h.jsxs("span",{className:"font-semibold",children:["Year: ",o]})})]}),h.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden",children:h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-sm text-center whitespace-nowrap",children:[h.jsx("thead",{className:"bg-slate-50 text-slate-700 font-semibold border-b border-slate-200",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-4 py-3 border-r border-slate-200 sticky left-0 bg-slate-50 z-10 text-left min-w-[100px]",children:"Room"}),Jt.map(N=>h.jsx("th",{className:"px-2 py-3 w-24",children:N},N))]})}),h.jsx("tbody",{className:"divide-y divide-slate-100",children:T.map(N=>{var P;const _=lt(e,N.roomId),y=ya(_),x=(_==null?void 0:_.waterReadings)&&Object.keys(_.waterReadings).length>0,C=((P=_==null?void 0:_.archivedTenant)==null?void 0:P.tenant)||"",V=y?(_==null?void 0:_.tenant)||"Unknown":C?`${C} (Vacated)`:"Vacant";return h.jsxs("tr",{className:"hover:bg-slate-50/50",children:[h.jsxs("td",{className:"px-4 py-3 border-r border-slate-100 sticky left-0 bg-white z-10 text-left",children:[h.jsx("div",{className:"font-bold text-blue-600",children:N.roomNo}),h.jsx("div",{className:"text-xs text-slate-500 truncate max-w-[120px]",children:V})]}),Jt.map((E,v)=>{var fe,yt;const I=ga(o,v),R=y||x,A=Number(_==null?void 0:_.waterRate),D=Number.isFinite(A)?A:zu(N.roomNo),S=Dc(_,o,v,D),we=zo(o,v),Ne=(fe=_==null?void 0:_.waterReadings)==null?void 0:fe[we],K=((_==null?void 0:_.waterMeterReset)||{})[we];let oe=h.jsx("span",{className:"text-slate-300",children:"-"}),z="bg-slate-50 text-slate-400 cursor-not-allowed";if(R)if(I&&y)oe=h.jsx("span",{className:"text-slate-300",children:"-"}),z="bg-slate-100 text-slate-400 cursor-not-allowed";else if(z="cursor-pointer bg-white hover:bg-blue-50 transition-colors",S.units!==null&&S.amount!==null){const $e=S.units<0;oe=h.jsxs("div",{className:"flex flex-col items-center leading-tight",children:[h.jsxs("span",{className:"font-extrabold text-blue-700",children:["",S.amount]}),h.jsxs("span",{className:`text-[10px] ${$e?"text-red-600 font-bold":"text-slate-500"}`,children:["Units: ",S.units]}),K&&h.jsxs("span",{className:"text-[9px] text-amber-600 font-bold flex items-center gap-0.5",children:[h.jsx(j4,{size:8})," Reset"]})]}),$e&&(z+=" bg-red-50 hover:bg-red-100")}else Number.isFinite(Number(Ne))?oe=h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("span",{className:"font-semibold text-slate-700",children:Ne}),h.jsx("span",{className:"text-[9px] text-slate-400",children:"reading"})]}):oe=h.jsx("span",{className:"text-slate-200",children:""});const q=hi(o,v),Q=zo(q.year,q.monthIndex),ae=Number((yt=_==null?void 0:_.waterReadings)==null?void 0:yt[Q]);return h.jsx("td",{className:`px-1 py-2 border-r border-slate-100 h-16 align-middle ${z}`,onClick:()=>b(N,v,R&&I&&y,R,Ne,K,ae),children:oe},v)})]},N.roomId)})})]})})}),l&&h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:h.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-[340px] overflow-hidden animate-in zoom-in-95 duration-200",children:[h.jsxs("div",{className:"bg-white px-6 pt-6 pb-2",children:[h.jsx("h3",{className:"text-xl font-extrabold text-slate-800 tracking-tight",children:"Water meter reading"}),h.jsxs("p",{className:"text-sm font-medium text-slate-400 mt-1",children:["Room ",l.room.roomNo,"  ",Jt[l.monthIndex]," ",o]})]}),h.jsxs("div",{className:"p-6 space-y-5",children:[h.jsxs("div",{className:"space-y-1",children:[h.jsxs("label",{className:"block text-xs font-bold text-slate-400 uppercase tracking-wider",children:["Previous month reading (",Jt[(l.monthIndex-1+12)%12]," ",l.monthIndex===0?o-1:o,")"]}),h.jsx("div",{className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-600 font-mono font-bold text-lg",children:Number.isFinite(l.prevVal)?l.prevVal:"N/A"})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-1",children:[h.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Units multiplier"}),h.jsxs("div",{className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-600 font-bold",children:["",Uo]})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Meter reset?"}),h.jsxs("select",{className:"w-full px-3 py-3 bg-white border border-slate-200 rounded-xl text-slate-700 font-bold focus:outline-none focus:ring-2 focus:ring-blue-500/20 appearance-none",value:p?"Yes":"No",onChange:N=>g(N.target.value==="Yes"),children:[h.jsx("option",{value:"No",children:"No"}),h.jsx("option",{value:"Yes",children:"Yes"})]})]})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx("label",{className:"block text-sm font-bold text-blue-900",children:"Enter the current meter reading"}),h.jsx("div",{className:"relative",children:h.jsx("input",{type:"number",autoFocus:!0,className:"w-full px-4 py-3 rounded-xl border-2 border-blue-100 bg-blue-50/50 focus:bg-white focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 outline-none text-2xl font-mono font-bold text-blue-900 placeholder:text-blue-200 transition-all",placeholder:"000",value:c,onChange:N=>d(N.target.value),onKeyDown:N=>N.key==="Enter"&&k()})})]})]}),h.jsxs("div",{className:"px-6 pb-6 flex items-center justify-end gap-3",children:[h.jsx("button",{onClick:()=>u(null),className:"size-12 rounded-2xl flex items-center justify-center bg-slate-100 text-slate-400 hover:bg-slate-200 hover:text-slate-600 transition-all",title:"Close",children:h.jsx("span",{className:"text-2xl leading-none",children:""})}),(()=>{const N=lt(e,l.room.roomId),_=N==null?void 0:N.phone,y=Number(c);let x="#",C=!1;if(_){if(c!==""&&Number.isFinite(y)){Number.isFinite(l.prevVal)&&l.prevVal;const V=p;let P=null;if(V?P=y*Uo:Number.isFinite(l.prevVal)&&(P=(y-l.prevVal)*Uo),P!==null&&P>=0){const E=Number(N==null?void 0:N.waterRate),v=Number.isFinite(E)?E:zu(l.room.roomNo),I=Math.round(P*v),A=`Water Bill - ${`${Jt[l.monthIndex]} ${o}`}
No of Ltrs - ${P}
Amnt.        - ${I}`;x=`https://wa.me/91${_}?text=${encodeURIComponent(A)}`,C=!0}}}return!C&&_&&(x=`https://wa.me/91${_}?text=Hi, please send the water meter reading for ${Jt[l.monthIndex]} ${o}.`),h.jsx("a",{href:_?x:void 0,onClick:V=>!_&&alert("No phone number for tenant"),target:"_blank",rel:"noreferrer",className:"size-12 rounded-2xl flex items-center justify-center bg-emerald-100 text-emerald-600 hover:bg-emerald-500 hover:text-white transition-all border border-emerald-200",title:C?"Send Bill on WhatsApp":"Request Reading on WhatsApp",children:h.jsx(B4,{})})})(),h.jsx("button",{onClick:k,className:"size-12 rounded-2xl flex items-center justify-center bg-blue-600 text-white hover:bg-blue-700 hover:scale-105 active:scale-95 transition-all shadow-lg shadow-blue-200",title:"Save Recording",children:h.jsx(mf,{size:24})})]})]})})]})}const Wh=["House Keeping Salary","Electricity Bill","Internet Bill","Painting","Room Maintenance","Other"];function H4(){const{expenses:t,addExpense:e,deleteExpense:n,loading:r,globalYear:s}=zi(),{showToast:i,confirm:o}=Fa(),l=s,[u,c]=L.useState(new Date().toISOString().split("T")[0]),[d,p]=L.useState(Wh[0]),[g,T]=L.useState(""),[b,k]=L.useState(""),[N,_]=L.useState(!1),y=async P=>{if(P.preventDefault(),!u||!d||!g||Number(g)<=0){i("Please fill in all required fields with valid values.","warning");return}_(!0);try{const E=new Date(u),v=Tn(E.getFullYear(),E.getMonth());await e({date:u,category:d,amount:Number(g),note:b.trim(),monthKey:v,createdAt:new Date().toISOString()}),T(""),k(""),p(Wh[0]),i("Expense added successfully","success")}catch(E){console.error(E),i("Failed to add expense: "+E.message,"error")}finally{_(!1)}},x=async P=>{if(await o({title:"Delete Expense?",message:"Are you sure you want to delete this expense? This action cannot be undone.",type:"danger",confirmText:"Delete"}))try{await n(P),i("Expense deleted successfully","success")}catch(v){i("Failed to delete: "+v.message,"error")}};if(r)return h.jsx("div",{className:"p-12 text-center text-slate-400",children:"Loading expenses..."});const C=t.filter(P=>P.date?new Date(P.date).getFullYear()===l:!1),V=C.reduce((P,E)=>P+(Number(E.amount)||0),0);return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[h.jsx("h2",{className:"text-3xl font-extrabold text-slate-900",children:"Expenses"}),h.jsx("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:h.jsxs("span",{className:"font-semibold",children:["Year: ",l]})})]}),h.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-rose-600 rounded-3xl p-6 text-white shadow-lg shadow-rose-200",children:[h.jsxs("div",{className:"text-white/80 font-medium mb-1",children:["Total Expenses (",l,")"]}),h.jsxs("div",{className:"text-4xl font-extrabold tracking-tight",children:["",V.toLocaleString("en-IN")]})]}),h.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 p-6",children:[h.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[h.jsx(D4,{className:"text-blue-600",size:20})," New Expense"]}),h.jsxs("form",{onSubmit:y,className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-end",children:[h.jsxs("div",{className:"md:col-span-2",children:[h.jsx("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"Date"}),h.jsxs("div",{className:"relative",children:[h.jsx(x4,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),h.jsx("input",{type:"date",required:!0,value:u,onChange:P=>c(P.target.value),className:"w-full pl-9 pr-3 py-2.5 rounded-xl border border-slate-200 bg-slate-50 focus:ring-2 focus:ring-blue-500 outline-none font-medium text-slate-700"})]})]}),h.jsxs("div",{className:"md:col-span-3",children:[h.jsx("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"Category"}),h.jsxs("div",{className:"relative",children:[h.jsx(V4,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),h.jsx("select",{required:!0,value:d,onChange:P=>p(P.target.value),className:"w-full pl-9 pr-3 py-2.5 rounded-xl border border-slate-200 bg-slate-50 focus:ring-2 focus:ring-blue-500 outline-none font-medium text-slate-700 appearance-none",children:Wh.map(P=>h.jsx("option",{value:P,children:P},P))})]})]}),h.jsxs("div",{className:"md:col-span-3",children:[h.jsx("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"Note (Optional)"}),h.jsxs("div",{className:"relative",children:[h.jsx(kE,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),h.jsx("input",{type:"text",placeholder:"Details...",value:b,onChange:P=>k(P.target.value),className:"w-full pl-9 pr-3 py-2.5 rounded-xl border border-slate-200 bg-slate-50 focus:ring-2 focus:ring-blue-500 outline-none font-medium text-slate-700"})]})]}),h.jsxs("div",{className:"md:col-span-2",children:[h.jsx("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"Amount"}),h.jsxs("div",{className:"relative",children:[h.jsx(A4,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),h.jsx("input",{type:"number",required:!0,min:"0",step:"any",placeholder:"0.00",value:g,onChange:P=>T(P.target.value),className:"w-full pl-9 pr-3 py-2.5 rounded-xl border border-slate-200 bg-slate-50 focus:ring-2 focus:ring-blue-500 outline-none font-bold text-slate-900"})]})]}),h.jsx("div",{className:"md:col-span-2",children:h.jsx("button",{type:"submit",disabled:N,className:"w-full py-2.5 bg-slate-900 text-white rounded-xl font-bold hover:bg-black transition-colors disabled:opacity-50",children:N?"Adding...":"Add"})})]})]}),h.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden",children:h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-sm text-left",children:[h.jsx("thead",{className:"bg-slate-50 text-slate-500 font-semibold border-b border-slate-200",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-4 w-32",children:"Date"}),h.jsx("th",{className:"px-6 py-4 w-48",children:"Category"}),h.jsx("th",{className:"px-6 py-4",children:"Note"}),h.jsx("th",{className:"px-6 py-4 w-32 text-right",children:"Amount"}),h.jsx("th",{className:"px-6 py-4 w-16"})]})}),h.jsx("tbody",{className:"divide-y divide-slate-100",children:C.length===0?h.jsx("tr",{children:h.jsxs("td",{colspan:"5",className:"px-6 py-12 text-center text-slate-400 italic",children:["No expenses recorded for ",l,"."]})}):C.map(P=>h.jsxs("tr",{className:"hover:bg-slate-50 group",children:[h.jsx("td",{className:"px-6 py-4 font-medium text-slate-600 whitespace-nowrap",children:P.date}),h.jsx("td",{className:"px-6 py-4 font-medium text-slate-900",children:h.jsx("span",{className:"inline-block px-2 py-1 bg-slate-100 rounded-lg text-xs border border-slate-200",children:P.category})}),h.jsx("td",{className:"px-6 py-4 text-slate-500",children:P.note||h.jsx("span",{className:"text-slate-300",children:"-"})}),h.jsxs("td",{className:"px-6 py-4 text-right font-bold text-slate-900",children:["",Number(P.amount).toLocaleString("en-IN")]}),h.jsx("td",{className:"px-6 py-4 text-right",children:h.jsx("button",{onClick:()=>x(P.id),className:"p-2 text-slate-300 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors opacity-0 group-hover:opacity-100",title:"Delete Expense",children:h.jsx(PE,{size:16})})})]},P.id))})]})})})]})}const q4=[{roomNo:"01",roomId:"G01",tenant:"Remish",rent:5200,advance:15e3,join:"15-Oct-2024",rev:"15-Oct-2024",phone:"8526487895"},{roomNo:"02",roomId:"G02",tenant:"Anil (L)",rent:500,advance:65e4,join:"24-Aug-2022",rev:"24-Aug-2022",phone:"8073256471"},{roomNo:"04",roomId:"102",tenant:"Venkatesh(L)",rent:500,advance:45e4,join:"24-Nov-2021",rev:"24-Nov-2021",phone:"9513072188"},{roomNo:"05",roomId:"201",tenant:"Prem",rent:8800,advance:3e4,join:"1-Feb-2024",rev:"1-Feb-2024",phone:"8639384523"},{roomNo:"06",roomId:"202",tenant:"Aravind",rent:8800,advance:35e3,join:"1-Aug-2025",rev:"",phone:"8147161034"},{roomNo:"07",roomId:"203",tenant:"Panduranga",rent:8800,advance:28e3,join:"23-Nov-2024",rev:"23-Nov-2024",phone:"9742392131"},{roomNo:"08",roomId:"301",tenant:"Nirmal Raj",rent:8800,advance:3e4,join:"1-Nov-2024",rev:"1-Nov-2024",phone:"6382702408"},{roomNo:"09",roomId:"302",tenant:"Logesh",rent:8300,advance:25e3,join:"26-Feb-2023",rev:"26-Feb-2024",phone:"7010250108"},{roomNo:"10",roomId:"303",tenant:"Prasanth Patil",rent:8800,advance:25e3,join:"01-Jan-2023",rev:"1-Jan-2024",phone:"9880662547"},{roomNo:"11",roomId:"401",tenant:"Mastan",rent:8e3,advance:25e3,join:"31-Jul-2023",rev:"31-Jul-2024",phone:"9902217031"},{roomNo:"12",roomId:"402",tenant:"Sudha / Bharath",rent:8e3,advance:25e3,join:"31-Jul-2023",rev:"31-Jul-2024",phone:"9100770982"},{roomNo:"13",roomId:"403",tenant:"Siri/Vamsi",rent:8e3,advance:25e3,join:"31-Jul-2023",rev:"31-Jul-2024",phone:"6303596330"}],G4={"01":[67,125,191,316,534,584,723,967,1129,1389,1503,1813,1944,2180,2379,2550,2649,2768,2865,3174,3314],"02":[270,1005,1377,1892,2407,2959,3498,3797,4309,4803,5264,6150,7065,7302,7880,8594,9148,10088,10957,11449,11456],"04":[211,572,861,1228,1528,1793,2025,2263,2579,3030,3361,4278,4771,5476,6008,6461,6902,7382,7886,8313,8684],"05":[79,158,502,956,1360,1734,1900,2422,2953,3112,3673,4347,4885,5262,5649,5914,6174,6430,6569,6816,6986],"06":[213,242,640,1078,1306,1643,2095,2572,2842,3207,3710,4182,4404,4637,4811,4855,5113,5465,5678,5991,6299],"07":[609,1375,2635,3621,3621,4378,4624,4738,5068,5441,5865,6428,6781,7162,7411,8186,8983,9800,10339,10972,11814],"08":[0,0,137,578,1007,1007,1007,1007,1007,494,1223,1769,2216,2258,2403,2439,3039,3039,3039,3039,3039],"09":[137,359,500,700,847,1058,1240,1419,1586,1683,1858,2154,2464,2674,2888,3092,3141,3342,3446,3595,3708],10:[101,275,540,673,1227,1412,1527,1642,1807,1951,2278,2472,3084,4500,5511,6628,7066,8161,9391,10388,11723],11:[150,303,524,756,932,1087,1240,1451,1625,1802,1953,2181,2426,2719,2945,3189,3474,3734,3986,4184,4400],12:[88,169,345,471,728,1037,1260,1621,2047,2112,2500,2821,3097,3341,3503,3934,4245,4577,4915,5144,5331],13:[214,488,754,1152,1606,2048,2409,2888,3387,3791,4255,4676,4887,5154,5575,6516,6710,7293,7509,7757,8005]},fv=t=>{if(!t)return"";const e={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"},n=t.split("-");if(n.length!==3)return"";const r=n[0].padStart(2,"0"),s=e[n[1]],i=n[2];return s?`${i}-${s}-${r}`:""};function K4(){const[t,e]=L.useState(""),[n,r]=L.useState(!1),{confirm:s,showToast:i}=Fa(),o=async()=>{if(await s({title:"Migrate Rooms?",message:"This will overwrite/create room data in 'rooms' collection. Continue?"})){r(!0),e("Starting migration...");try{const c=pf(qe),d=cs(qe,"rooms");let p=0;Object.entries(Ke).forEach(([T,b])=>{const k=Wn(qe,"rooms",T);c.set(k,{...b,sortOrder:parseInt(T)}),p++}),await c.commit();const g=`Successfully migrated ${p} rooms to Firestore.`;e(g),i(g,"success")}catch(c){console.error(c);const d="Error: "+c.message;e(d),i(d,"error")}finally{r(!1)}}},l=async()=>{if(await s({title:"Seed Tenant Data?",message:`This will CREATE new tenant records in 'properties'.
Warning: This clears existing data and overwrites it. Continue?`,type:"danger",confirmText:"Yes, Overwrite"})){r(!0),e("Seeding tenants...");try{const c=pf(qe),d=cs(qe,"properties");(await im(d)).forEach(g=>{c.delete(g.ref)}),q4.forEach(g=>{const T=Wn(qe,"properties",`tenant_room_${g.roomNo}`),b=fv(g.join),k=fv(g.rev),N={},_={},y=G4[g.roomNo]||[],x=["Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];let V=0,P=0;x.forEach(E=>{const v=`2024-${E}`,I=y[V];I!=null&&(N[v]=I,V>0&&I<P&&(_[v]=!0,console.log(`Reset detected for Room ${g.roomNo} at ${v}: ${P} -> ${I}`)),P=I),V++}),C.forEach(E=>{const v=`2025-${E}`,I=y[V];I!=null&&(N[v]=I,I<P&&(_[v]=!0,console.log(`Reset detected for Room ${g.roomNo} at ${v}: ${P} -> ${I}`)),P=I),V++}),c.set(T,{tenant:g.tenant,roomNo:g.roomNo,roomId:g.roomId,rent:String(g.rent),advance:String(g.advance),joinDate:b,lastRevision:k,status:"Occupied",phone:g.phone||"",email:"",waterRate:"0.25",waterReadings:N,waterMeterReset:_,paymentHistory:{},paymentTotals:{}})}),await c.commit(),e("Successfully seeded tenants.")}catch(c){console.error(c),e("Error seeding: "+c.message)}finally{r(!1)}}};return h.jsxs("div",{className:"p-8 bg-white rounded-3xl shadow-sm border border-slate-200",children:[h.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Data Migration Admin"}),h.jsxs("div",{className:"mb-6",children:[h.jsx("h3",{className:"font-semibold mb-2",children:"Migrate Rooms"}),h.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Uploads the hardcoded IMMUTABLE_ROOMS_DATA to Firestore 'rooms' collection."}),h.jsx("button",{onClick:o,disabled:n,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:n?"Migrating...":"Start Migration"})]}),h.jsxs("div",{className:"mb-6 border-t pt-6",children:[h.jsx("h3",{className:"font-semibold mb-2",children:"Seed Tenant Data"}),h.jsxs("p",{className:"text-sm text-slate-500 mb-4",children:["Populates 'properties' collection with data from screenshot (Remish, Anil, etc.).",h.jsx("br",{}),h.jsx("span",{className:"text-amber-600 font-bold",children:"Warning:"})," Clears/Overwrites if ID 'tenant_room_XX' exists."]}),h.jsx("button",{onClick:l,disabled:n,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50",children:n?"Seeding...":"Seed Tenants"})]}),t&&h.jsx("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-lg text-sm font-mono whitespace-pre-wrap",children:t})]})}const Q4="dhze5ifcf",Y4="mi_unsigned_preset",J4=async t=>{var n;const e=new FormData;e.append("file",t),e.append("upload_preset",Y4);try{const r=await fetch(`https://api.cloudinary.com/v1_1/${Q4}/auto/upload`,{method:"POST",body:e});if(!r.ok){const i=await r.json();throw new Error(((n=i.error)==null?void 0:n.message)||"Cloudinary Upload Failed")}return(await r.json()).secure_url}catch(r){throw console.error("Cloudinary Service Error:",r),r}};function X4(){const{token:t}=dS(),[e,n]=L.useState("verifying"),[r,s]=L.useState(null),[i,o]=L.useState(null),[l,u]=L.useState({}),[c,d]=L.useState({});L.useEffect(()=>{const N=gw(ci,_=>{s(_),_?T():n("login_required")});return()=>N()},[t]);const p=async()=>{try{await bw(ci,TE)}catch(N){console.error("Login failed",N),alert("Login failed. Please try again.")}},g=()=>{yw(ci),o(null),n("login_required")},T=async()=>{n("verifying");try{const N=Lo(cs(qe,"properties"),mE("uploadToken","==",t)),_=await im(N);if(_.empty){n("invalid");return}const y=_.docs[0],x=y.data();o({id:y.id,...x}),d(x.documents||{}),n("valid")}catch(N){console.error("Link validation failed:",N),n("error")}},b=async(N,_)=>{if(!(!N||!i)){if(N.size>10*1024*1024){alert("File is too large. Max 10MB.");return}u(y=>({...y,[_]:!0}));try{const y=await J4(N),x={...c,[_]:y};await Ri(Wn(qe,"properties",i.id),{documents:x,[`meta_${_}_uploadedBy`]:r.email,[`meta_${_}_uploadedAt`]:new Date().toISOString()}),d(x)}catch(y){console.error("Upload Error Details:",y),alert(`Upload failed: ${y.message}`)}finally{u(y=>({...y,[_]:!1}))}}};if(e==="verifying")return h.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 text-slate-400",children:[h.jsx(uv,{className:"animate-spin mb-2",size:32}),h.jsx("p",{children:"Verifying Access..."})]});if(e==="login_required")return h.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 p-6",children:h.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-slate-200 w-full max-w-md text-center",children:[h.jsx(hv,{className:"mx-auto text-blue-600 mb-4",size:48}),h.jsx("h1",{className:"text-xl font-bold text-slate-900 mb-2",children:"Secure Upload Portal"}),h.jsx("p",{className:"text-slate-500 mb-8",children:"Please sign in with Google to verify your identity and access the document vault."}),h.jsxs("button",{onClick:p,className:"w-full py-3 bg-black text-white rounded-xl font-bold hover:bg-slate-800 transition flex items-center justify-center gap-2",children:[h.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[h.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),h.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),h.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),h.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign in with Google"]}),h.jsx("p",{className:"text-xs text-slate-400 mt-4",children:"Munirathnam Illam Secure Cloud"})]})});if(e==="invalid")return h.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 p-6 text-center",children:h.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-slate-200 w-full max-w-md",children:[h.jsx(di,{className:"mx-auto text-rose-500 mb-4",size:48}),h.jsx("h1",{className:"text-xl font-bold text-slate-900 mb-2",children:"Invalid Link"}),h.jsx("p",{className:"text-slate-500",children:"This link does not exist. Please request a new one."})]})});if(e==="expired")return h.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 p-6 text-center",children:h.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-slate-200 w-full max-w-md",children:[h.jsx("div",{className:"bg-amber-100 p-4 rounded-full inline-block mb-4 text-amber-600",children:h.jsx(hv,{size:32})}),h.jsx("h1",{className:"text-xl font-bold text-slate-900 mb-2",children:"Link Expired"}),h.jsx("p",{className:"text-slate-500 mb-4",children:"This secure upload link has expired (valid for 24h only)."}),h.jsx("p",{className:"text-sm font-bold text-slate-400",children:"Please request a new link from the Admin."})]})});if(e==="error")return h.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 p-6 text-center",children:h.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-slate-200 w-full max-w-md",children:[h.jsx(di,{className:"mx-auto text-rose-500 mb-4",size:48}),h.jsx("h1",{className:"text-xl font-bold text-slate-900 mb-2",children:"An Error Occurred"}),h.jsx("p",{className:"text-slate-500",children:"Please try again later or contact support."})]})});const k=({title:N,type:_,description:y})=>{const x=!!c[_],C=l[_];return h.jsxs("div",{className:`relative overflow-hidden rounded-2xl border transition-all ${x?"bg-emerald-50 border-emerald-200":"bg-white border-slate-200 shadow-sm"}`,children:[h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex items-start justify-between mb-4",children:[h.jsx("div",{className:`p-3 rounded-xl ${x?"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-600"}`,children:x?h.jsx($u,{size:24,strokeWidth:3}):h.jsx(kE,{size:24})}),x&&h.jsx("span",{className:"text-xs font-bold text-emerald-600 bg-white px-2 py-1 rounded-full shadow-sm",children:"UPLOADED"})]}),h.jsx("h3",{className:"font-bold text-slate-900 mb-1",children:N}),h.jsx("p",{className:"text-sm text-slate-500 mb-6",children:y}),h.jsxs("label",{className:`block w-full text-center py-3 rounded-xl font-bold cursor-pointer transition-colors ${x?"bg-white text-emerald-600 border-2 border-emerald-100 hover:border-emerald-200":"bg-black text-white hover:bg-slate-800"}`,children:[C?"Uploading...":x?"Replace File":"Select File",h.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",disabled:C,onChange:V=>b(V.target.files[0],_)})]})]}),C&&h.jsx("div",{className:"absolute inset-0 bg-white/80 flex items-center justify-center",children:h.jsx(uv,{className:"animate-spin text-black",size:32})})]})};return h.jsx("div",{className:"min-h-screen bg-slate-50 p-6 md:p-12",children:h.jsxs("div",{className:"max-w-xl mx-auto",children:[h.jsxs("div",{className:"flex justify-between items-center mb-8",children:[h.jsx("div",{className:"inline-block px-4 py-1.5 bg-blue-100 text-blue-700 rounded-full text-xs font-bold tracking-wide uppercase",children:"Secure Upload Portal"}),h.jsxs("button",{onClick:g,className:"text-slate-400 hover:text-slate-600 flex items-center gap-1 text-sm font-bold",children:[h.jsx(CE,{size:16})," Sign Out"]})]}),h.jsxs("div",{className:"text-center mb-10",children:[h.jsxs("h1",{className:"text-3xl font-extrabold text-slate-900 mb-2",children:["Hello, ",i.tenant,"!"]}),h.jsxs("p",{className:"text-slate-500",children:["Room ",i.roomNo," (",i.roomId,")"]}),h.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["Logged in as ",r.email]})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[h.jsx("label",{className:"block text-sm font-bold text-slate-900 mb-2",children:"Family Member Contact Numbers"}),h.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Please provide contact details for your family members (Name & Phone)."}),h.jsx("textarea",{className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm font-medium focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition",rows:3,placeholder:"e.g. Spouse: 9876543210, Father: 9123456780",defaultValue:i.familyMembers||"",onBlur:N=>{Ri(Wn(qe,"properties",i.id),{familyMembers:N.target.value})}})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx(k,{title:"Tenant Photo",type:"photo",description:"Recent passport size photo."}),h.jsx(k,{title:"Aadhar Card",type:"aadhar",description:"Front and back photo or PDF."}),h.jsx(k,{title:"ID Proof",type:"pan",description:"Any valid government ID (PAN/Voter)."}),h.jsx(k,{title:"Rental Agreement",type:"agreement",description:"Signed copy of the agreement."})]})]}),h.jsx("div",{className:"mt-12 text-center text-xs text-slate-400",children:h.jsx("p",{children:"Files are securely stored in Munirathnam Illam Cloud."})})]})})}const Z4=()=>{const{loginWithGoogle:t,currentUser:e}=am();return e?h.jsx(O1,{to:"/"}):h.jsx("div",{className:"h-screen flex items-center justify-center bg-stone-50",children:h.jsx("button",{onClick:t,className:"px-6 py-3 bg-white border rounded-xl shadow-sm font-semibold",children:"Sign in with Google"})})};function js({children:t}){const{currentUser:e,loading:n}=am();return n?h.jsx("div",{children:"Loading..."}):e?t:h.jsx(O1,{to:"/login"})}function eD(){return h.jsx(l4,{children:h.jsx(O4,{children:h.jsx(v4,{children:h.jsx(VS,{children:h.jsxs(bS,{children:[h.jsx(Nn,{path:"/login",element:h.jsx(Z4,{})}),h.jsx(Nn,{path:"/upload/:token",element:h.jsx(X4,{})}),h.jsx(Nn,{path:"/",element:h.jsx(js,{children:h.jsx(Ds,{children:h.jsx(M4,{})})})}),h.jsx(Nn,{path:"/rooms",element:h.jsx(js,{children:h.jsx(Ds,{children:h.jsx(z4,{})})})}),h.jsx(Nn,{path:"/rent",element:h.jsx(js,{children:h.jsx(Ds,{children:h.jsx($4,{})})})}),h.jsx(Nn,{path:"/water",element:h.jsx(js,{children:h.jsx(Ds,{children:h.jsx(W4,{})})})}),h.jsx(Nn,{path:"/expenses",element:h.jsx(js,{children:h.jsx(Ds,{children:h.jsx(H4,{})})})}),h.jsx(Nn,{path:"/admin/migrate",element:h.jsx(js,{children:h.jsx(Ds,{children:h.jsx(K4,{})})})})]})})})})})}Hh.createRoot(document.getElementById("root")).render(h.jsx(Xs.StrictMode,{children:h.jsx(eD,{})}));
