function gT(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function yT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var f_={exports:{}},_u={},p_={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qa=Symbol.for("react.element"),vT=Symbol.for("react.portal"),_T=Symbol.for("react.fragment"),wT=Symbol.for("react.strict_mode"),xT=Symbol.for("react.profiler"),ET=Symbol.for("react.provider"),IT=Symbol.for("react.context"),TT=Symbol.for("react.forward_ref"),bT=Symbol.for("react.suspense"),ST=Symbol.for("react.memo"),NT=Symbol.for("react.lazy"),Wg=Symbol.iterator;function RT(t){return t===null||typeof t!="object"?null:(t=Wg&&t[Wg]||t["@@iterator"],typeof t=="function"?t:null)}var m_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g_=Object.assign,y_={};function Hi(t,e,n){this.props=t,this.context=e,this.refs=y_,this.updater=n||m_}Hi.prototype.isReactComponent={};Hi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Hi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function v_(){}v_.prototype=Hi.prototype;function np(t,e,n){this.props=t,this.context=e,this.refs=y_,this.updater=n||m_}var rp=np.prototype=new v_;rp.constructor=np;g_(rp,Hi.prototype);rp.isPureReactComponent=!0;var Hg=Array.isArray,__=Object.prototype.hasOwnProperty,sp={current:null},w_={key:!0,ref:!0,__self:!0,__source:!0};function x_(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)__.call(e,r)&&!w_.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:qa,type:t,key:i,ref:o,props:s,_owner:sp.current}}function kT(t,e){return{$$typeof:qa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ip(t){return typeof t=="object"&&t!==null&&t.$$typeof===qa}function CT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var qg=/\/+/g;function Od(t,e){return typeof t=="object"&&t!==null&&t.key!=null?CT(""+t.key):e.toString(36)}function Jl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case qa:case vT:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Od(o,0):r,Hg(s)?(n="",t!=null&&(n=t.replace(qg,"$&/")+"/"),Jl(s,e,n,"",function(d){return d})):s!=null&&(ip(s)&&(s=kT(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(qg,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Hg(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Od(i,l);o+=Jl(i,e,n,c,s)}else if(c=RT(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Od(i,l++),o+=Jl(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Nl(t,e,n){if(t==null)return t;var r=[],s=0;return Jl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function AT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Et={current:null},Xl={transition:null},PT={ReactCurrentDispatcher:Et,ReactCurrentBatchConfig:Xl,ReactCurrentOwner:sp};function E_(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:Nl,forEach:function(t,e,n){Nl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Nl(t,function(){e++}),e},toArray:function(t){return Nl(t,function(e){return e})||[]},only:function(t){if(!ip(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Component=Hi;oe.Fragment=_T;oe.Profiler=xT;oe.PureComponent=np;oe.StrictMode=wT;oe.Suspense=bT;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PT;oe.act=E_;oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=g_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=sp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)__.call(e,c)&&!w_.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:qa,type:t.type,key:s,ref:i,props:r,_owner:o}};oe.createContext=function(t){return t={$$typeof:IT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ET,_context:t},t.Consumer=t};oe.createElement=x_;oe.createFactory=function(t){var e=x_.bind(null,t);return e.type=t,e};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:TT,render:t}};oe.isValidElement=ip;oe.lazy=function(t){return{$$typeof:NT,_payload:{_status:-1,_result:t},_init:AT}};oe.memo=function(t,e){return{$$typeof:ST,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=Xl.transition;Xl.transition={};try{t()}finally{Xl.transition=e}};oe.unstable_act=E_;oe.useCallback=function(t,e){return Et.current.useCallback(t,e)};oe.useContext=function(t){return Et.current.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t){return Et.current.useDeferredValue(t)};oe.useEffect=function(t,e){return Et.current.useEffect(t,e)};oe.useId=function(){return Et.current.useId()};oe.useImperativeHandle=function(t,e,n){return Et.current.useImperativeHandle(t,e,n)};oe.useInsertionEffect=function(t,e){return Et.current.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return Et.current.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return Et.current.useMemo(t,e)};oe.useReducer=function(t,e,n){return Et.current.useReducer(t,e,n)};oe.useRef=function(t){return Et.current.useRef(t)};oe.useState=function(t){return Et.current.useState(t)};oe.useSyncExternalStore=function(t,e,n){return Et.current.useSyncExternalStore(t,e,n)};oe.useTransition=function(){return Et.current.useTransition()};oe.version="18.3.1";p_.exports=oe;var V=p_.exports;const pi=yT(V),DT=gT({__proto__:null,default:pi},[V]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jT=V,OT=Symbol.for("react.element"),LT=Symbol.for("react.fragment"),VT=Object.prototype.hasOwnProperty,MT=jT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FT={key:!0,ref:!0,__self:!0,__source:!0};function I_(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)VT.call(e,r)&&!FT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:OT,type:t,key:i,ref:o,props:s,_owner:MT.current}}_u.Fragment=LT;_u.jsx=I_;_u.jsxs=I_;f_.exports=_u;var u=f_.exports,kh={},T_={exports:{}},Bt={},b_={exports:{}},S_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,K){var Y=z.length;z.push(K);e:for(;0<Y;){var se=Y-1>>>1,me=z[se];if(0<s(me,K))z[se]=K,z[Y]=me,Y=se;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var K=z[0],Y=z.pop();if(Y!==K){z[0]=Y;e:for(var se=0,me=z.length,Tt=me>>>1;se<Tt;){var nt=2*(se+1)-1,Ht=z[nt],at=nt+1,bt=z[at];if(0>s(Ht,Y))at<me&&0>s(bt,Ht)?(z[se]=bt,z[at]=Y,se=at):(z[se]=Ht,z[nt]=Y,se=nt);else if(at<me&&0>s(bt,Y))z[se]=bt,z[at]=Y,se=at;else break e}}return K}function s(z,K){var Y=z.sortIndex-K.sortIndex;return Y!==0?Y:z.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],h=1,p=null,m=3,w=!1,R=!1,C=!1,P=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(z){for(var K=n(d);K!==null;){if(K.callback===null)r(d);else if(K.startTime<=z)r(d),K.sortIndex=K.expirationTime,e(c,K);else break;K=n(d)}}function N(z){if(C=!1,T(z),!R)if(n(c)!==null)R=!0,G(A);else{var K=n(d);K!==null&&ie(N,K.startTime-z)}}function A(z,K){R=!1,C&&(C=!1,I(y),y=-1),w=!0;var Y=m;try{for(T(K),p=n(c);p!==null&&(!(p.expirationTime>K)||z&&!k());){var se=p.callback;if(typeof se=="function"){p.callback=null,m=p.priorityLevel;var me=se(p.expirationTime<=K);K=t.unstable_now(),typeof me=="function"?p.callback=me:p===n(c)&&r(c),T(K)}else r(c);p=n(c)}if(p!==null)var Tt=!0;else{var nt=n(d);nt!==null&&ie(N,nt.startTime-K),Tt=!1}return Tt}finally{p=null,m=Y,w=!1}}var D=!1,v=null,y=-1,x=5,b=-1;function k(){return!(t.unstable_now()-b<x)}function j(){if(v!==null){var z=t.unstable_now();b=z;var K=!0;try{K=v(!0,z)}finally{K?S():(D=!1,v=null)}}else D=!1}var S;if(typeof _=="function")S=function(){_(j)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,he=te.port2;te.port1.onmessage=j,S=function(){he.postMessage(null)}}else S=function(){P(j,0)};function G(z){v=z,D||(D=!0,S())}function ie(z,K){y=P(function(){z(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){R||w||(R=!0,G(A))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(z){switch(m){case 1:case 2:case 3:var K=3;break;default:K=m}var Y=m;m=K;try{return z()}finally{m=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,K){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Y=m;m=z;try{return K()}finally{m=Y}},t.unstable_scheduleCallback=function(z,K,Y){var se=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?se+Y:se):Y=se,z){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=Y+me,z={id:h++,callback:K,priorityLevel:z,startTime:Y,expirationTime:me,sortIndex:-1},Y>se?(z.sortIndex=Y,e(d,z),n(c)===null&&z===n(d)&&(C?(I(y),y=-1):C=!0,ie(N,Y-se))):(z.sortIndex=me,e(c,z),R||w||(R=!0,G(A))),z},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(z){var K=m;return function(){var Y=m;m=K;try{return z.apply(this,arguments)}finally{m=Y}}}})(S_);b_.exports=S_;var UT=b_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zT=V,$t=UT;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var N_=new Set,ma={};function Us(t,e){ki(t,e),ki(t+"Capture",e)}function ki(t,e){for(ma[t]=e,t=0;t<e.length;t++)N_.add(e[t])}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ch=Object.prototype.hasOwnProperty,$T=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gg={},Kg={};function BT(t){return Ch.call(Kg,t)?!0:Ch.call(Gg,t)?!1:$T.test(t)?Kg[t]=!0:(Gg[t]=!0,!1)}function WT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function HT(t,e,n,r){if(e===null||typeof e>"u"||WT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function It(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ot[t]=new It(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ot[e]=new It(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ot[t]=new It(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ot[t]=new It(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ot[t]=new It(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ot[t]=new It(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ot[t]=new It(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ot[t]=new It(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ot[t]=new It(t,5,!1,t.toLowerCase(),null,!1,!1)});var op=/[\-:]([a-z])/g;function ap(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(op,ap);ot[e]=new It(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(op,ap);ot[e]=new It(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(op,ap);ot[e]=new It(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ot[t]=new It(t,1,!1,t.toLowerCase(),null,!1,!1)});ot.xlinkHref=new It("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ot[t]=new It(t,1,!1,t.toLowerCase(),null,!0,!0)});function lp(t,e,n,r){var s=ot.hasOwnProperty(e)?ot[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(HT(e,n,s,r)&&(n=null),r||s===null?BT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var nr=zT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rl=Symbol.for("react.element"),ti=Symbol.for("react.portal"),ni=Symbol.for("react.fragment"),cp=Symbol.for("react.strict_mode"),Ah=Symbol.for("react.profiler"),R_=Symbol.for("react.provider"),k_=Symbol.for("react.context"),up=Symbol.for("react.forward_ref"),Ph=Symbol.for("react.suspense"),Dh=Symbol.for("react.suspense_list"),dp=Symbol.for("react.memo"),gr=Symbol.for("react.lazy"),C_=Symbol.for("react.offscreen"),Qg=Symbol.iterator;function No(t){return t===null||typeof t!="object"?null:(t=Qg&&t[Qg]||t["@@iterator"],typeof t=="function"?t:null)}var Se=Object.assign,Ld;function Vo(t){if(Ld===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ld=e&&e[1]||""}return`
`+Ld+t}var Vd=!1;function Md(t,e){if(!t||Vd)return"";Vd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Vd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vo(t):""}function qT(t){switch(t.tag){case 5:return Vo(t.type);case 16:return Vo("Lazy");case 13:return Vo("Suspense");case 19:return Vo("SuspenseList");case 0:case 2:case 15:return t=Md(t.type,!1),t;case 11:return t=Md(t.type.render,!1),t;case 1:return t=Md(t.type,!0),t;default:return""}}function jh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ni:return"Fragment";case ti:return"Portal";case Ah:return"Profiler";case cp:return"StrictMode";case Ph:return"Suspense";case Dh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case k_:return(t.displayName||"Context")+".Consumer";case R_:return(t._context.displayName||"Context")+".Provider";case up:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case dp:return e=t.displayName||null,e!==null?e:jh(t.type)||"Memo";case gr:e=t._payload,t=t._init;try{return jh(t(e))}catch{}}return null}function GT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jh(e);case 8:return e===cp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Wr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function A_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function KT(t){var e=A_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function kl(t){t._valueTracker||(t._valueTracker=KT(t))}function P_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=A_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function wc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Oh(t,e){var n=e.checked;return Se({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Yg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Wr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function D_(t,e){e=e.checked,e!=null&&lp(t,"checked",e,!1)}function Lh(t,e){D_(t,e);var n=Wr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Vh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Vh(t,e.type,Wr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Jg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Vh(t,e,n){(e!=="number"||wc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Mo=Array.isArray;function mi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Wr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Mh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Se({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Xg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Mo(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Wr(n)}}function j_(t,e){var n=Wr(e.value),r=Wr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Zg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function O_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?O_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Cl,L_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Cl=Cl||document.createElement("div"),Cl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Cl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ga(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Go={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},QT=["Webkit","ms","Moz","O"];Object.keys(Go).forEach(function(t){QT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Go[e]=Go[t]})});function V_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Go.hasOwnProperty(t)&&Go[t]?(""+e).trim():e+"px"}function M_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=V_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var YT=Se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Uh(t,e){if(e){if(YT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function zh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $h=null;function hp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bh=null,gi=null,yi=null;function ey(t){if(t=Qa(t)){if(typeof Bh!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Tu(e),Bh(t.stateNode,t.type,e))}}function F_(t){gi?yi?yi.push(t):yi=[t]:gi=t}function U_(){if(gi){var t=gi,e=yi;if(yi=gi=null,ey(t),e)for(t=0;t<e.length;t++)ey(e[t])}}function z_(t,e){return t(e)}function $_(){}var Fd=!1;function B_(t,e,n){if(Fd)return t(e,n);Fd=!0;try{return z_(t,e,n)}finally{Fd=!1,(gi!==null||yi!==null)&&($_(),U_())}}function ya(t,e){var n=t.stateNode;if(n===null)return null;var r=Tu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Wh=!1;if(qn)try{var Ro={};Object.defineProperty(Ro,"passive",{get:function(){Wh=!0}}),window.addEventListener("test",Ro,Ro),window.removeEventListener("test",Ro,Ro)}catch{Wh=!1}function JT(t,e,n,r,s,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var Ko=!1,xc=null,Ec=!1,Hh=null,XT={onError:function(t){Ko=!0,xc=t}};function ZT(t,e,n,r,s,i,o,l,c){Ko=!1,xc=null,JT.apply(XT,arguments)}function e2(t,e,n,r,s,i,o,l,c){if(ZT.apply(this,arguments),Ko){if(Ko){var d=xc;Ko=!1,xc=null}else throw Error(U(198));Ec||(Ec=!0,Hh=d)}}function zs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function W_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ty(t){if(zs(t)!==t)throw Error(U(188))}function t2(t){var e=t.alternate;if(!e){if(e=zs(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ty(s),t;if(i===r)return ty(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function H_(t){return t=t2(t),t!==null?q_(t):null}function q_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=q_(t);if(e!==null)return e;t=t.sibling}return null}var G_=$t.unstable_scheduleCallback,ny=$t.unstable_cancelCallback,n2=$t.unstable_shouldYield,r2=$t.unstable_requestPaint,Pe=$t.unstable_now,s2=$t.unstable_getCurrentPriorityLevel,fp=$t.unstable_ImmediatePriority,K_=$t.unstable_UserBlockingPriority,Ic=$t.unstable_NormalPriority,i2=$t.unstable_LowPriority,Q_=$t.unstable_IdlePriority,wu=null,bn=null;function o2(t){if(bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(wu,t,void 0,(t.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:c2,a2=Math.log,l2=Math.LN2;function c2(t){return t>>>=0,t===0?32:31-(a2(t)/l2|0)|0}var Al=64,Pl=4194304;function Fo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Tc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Fo(l):(i&=o,i!==0&&(r=Fo(i)))}else o=n&~s,o!==0?r=Fo(o):i!==0&&(r=Fo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-hn(e),s=1<<n,r|=t[n],e&=~s;return r}function u2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function d2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-hn(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=u2(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function qh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Y_(){var t=Al;return Al<<=1,!(Al&4194240)&&(Al=64),t}function Ud(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ga(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-hn(e),t[e]=n}function h2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-hn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function pp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-hn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var pe=0;function J_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var X_,mp,Z_,ew,tw,Gh=!1,Dl=[],Rr=null,kr=null,Cr=null,va=new Map,_a=new Map,vr=[],f2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ry(t,e){switch(t){case"focusin":case"focusout":Rr=null;break;case"dragenter":case"dragleave":kr=null;break;case"mouseover":case"mouseout":Cr=null;break;case"pointerover":case"pointerout":va.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_a.delete(e.pointerId)}}function ko(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Qa(e),e!==null&&mp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function p2(t,e,n,r,s){switch(e){case"focusin":return Rr=ko(Rr,t,e,n,r,s),!0;case"dragenter":return kr=ko(kr,t,e,n,r,s),!0;case"mouseover":return Cr=ko(Cr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return va.set(i,ko(va.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,_a.set(i,ko(_a.get(i)||null,t,e,n,r,s)),!0}return!1}function nw(t){var e=_s(t.target);if(e!==null){var n=zs(e);if(n!==null){if(e=n.tag,e===13){if(e=W_(n),e!==null){t.blockedOn=e,tw(t.priority,function(){Z_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Kh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);$h=r,n.target.dispatchEvent(r),$h=null}else return e=Qa(n),e!==null&&mp(e),t.blockedOn=n,!1;e.shift()}return!0}function sy(t,e,n){Zl(t)&&n.delete(e)}function m2(){Gh=!1,Rr!==null&&Zl(Rr)&&(Rr=null),kr!==null&&Zl(kr)&&(kr=null),Cr!==null&&Zl(Cr)&&(Cr=null),va.forEach(sy),_a.forEach(sy)}function Co(t,e){t.blockedOn===e&&(t.blockedOn=null,Gh||(Gh=!0,$t.unstable_scheduleCallback($t.unstable_NormalPriority,m2)))}function wa(t){function e(s){return Co(s,t)}if(0<Dl.length){Co(Dl[0],t);for(var n=1;n<Dl.length;n++){var r=Dl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Rr!==null&&Co(Rr,t),kr!==null&&Co(kr,t),Cr!==null&&Co(Cr,t),va.forEach(e),_a.forEach(e),n=0;n<vr.length;n++)r=vr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<vr.length&&(n=vr[0],n.blockedOn===null);)nw(n),n.blockedOn===null&&vr.shift()}var vi=nr.ReactCurrentBatchConfig,bc=!0;function g2(t,e,n,r){var s=pe,i=vi.transition;vi.transition=null;try{pe=1,gp(t,e,n,r)}finally{pe=s,vi.transition=i}}function y2(t,e,n,r){var s=pe,i=vi.transition;vi.transition=null;try{pe=4,gp(t,e,n,r)}finally{pe=s,vi.transition=i}}function gp(t,e,n,r){if(bc){var s=Kh(t,e,n,r);if(s===null)Yd(t,e,r,Sc,n),ry(t,r);else if(p2(s,t,e,n,r))r.stopPropagation();else if(ry(t,r),e&4&&-1<f2.indexOf(t)){for(;s!==null;){var i=Qa(s);if(i!==null&&X_(i),i=Kh(t,e,n,r),i===null&&Yd(t,e,r,Sc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Yd(t,e,r,null,n)}}var Sc=null;function Kh(t,e,n,r){if(Sc=null,t=hp(r),t=_s(t),t!==null)if(e=zs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=W_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Sc=t,null}function rw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(s2()){case fp:return 1;case K_:return 4;case Ic:case i2:return 16;case Q_:return 536870912;default:return 16}default:return 16}}var Ir=null,yp=null,ec=null;function sw(){if(ec)return ec;var t,e=yp,n=e.length,r,s="value"in Ir?Ir.value:Ir.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ec=s.slice(t,1<r?1-r:void 0)}function tc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jl(){return!0}function iy(){return!1}function Wt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?jl:iy,this.isPropagationStopped=iy,this}return Se(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jl)},persist:function(){},isPersistent:jl}),e}var qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vp=Wt(qi),Ka=Se({},qi,{view:0,detail:0}),v2=Wt(Ka),zd,$d,Ao,xu=Se({},Ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_p,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ao&&(Ao&&t.type==="mousemove"?(zd=t.screenX-Ao.screenX,$d=t.screenY-Ao.screenY):$d=zd=0,Ao=t),zd)},movementY:function(t){return"movementY"in t?t.movementY:$d}}),oy=Wt(xu),_2=Se({},xu,{dataTransfer:0}),w2=Wt(_2),x2=Se({},Ka,{relatedTarget:0}),Bd=Wt(x2),E2=Se({},qi,{animationName:0,elapsedTime:0,pseudoElement:0}),I2=Wt(E2),T2=Se({},qi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),b2=Wt(T2),S2=Se({},qi,{data:0}),ay=Wt(S2),N2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},R2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},k2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function C2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=k2[t])?!!e[t]:!1}function _p(){return C2}var A2=Se({},Ka,{key:function(t){if(t.key){var e=N2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=tc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?R2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_p,charCode:function(t){return t.type==="keypress"?tc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?tc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),P2=Wt(A2),D2=Se({},xu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ly=Wt(D2),j2=Se({},Ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_p}),O2=Wt(j2),L2=Se({},qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),V2=Wt(L2),M2=Se({},xu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),F2=Wt(M2),U2=[9,13,27,32],wp=qn&&"CompositionEvent"in window,Qo=null;qn&&"documentMode"in document&&(Qo=document.documentMode);var z2=qn&&"TextEvent"in window&&!Qo,iw=qn&&(!wp||Qo&&8<Qo&&11>=Qo),cy=" ",uy=!1;function ow(t,e){switch(t){case"keyup":return U2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ri=!1;function $2(t,e){switch(t){case"compositionend":return aw(e);case"keypress":return e.which!==32?null:(uy=!0,cy);case"textInput":return t=e.data,t===cy&&uy?null:t;default:return null}}function B2(t,e){if(ri)return t==="compositionend"||!wp&&ow(t,e)?(t=sw(),ec=yp=Ir=null,ri=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return iw&&e.locale!=="ko"?null:e.data;default:return null}}var W2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!W2[t.type]:e==="textarea"}function lw(t,e,n,r){F_(r),e=Nc(e,"onChange"),0<e.length&&(n=new vp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Yo=null,xa=null;function H2(t){_w(t,0)}function Eu(t){var e=oi(t);if(P_(e))return t}function q2(t,e){if(t==="change")return e}var cw=!1;if(qn){var Wd;if(qn){var Hd="oninput"in document;if(!Hd){var hy=document.createElement("div");hy.setAttribute("oninput","return;"),Hd=typeof hy.oninput=="function"}Wd=Hd}else Wd=!1;cw=Wd&&(!document.documentMode||9<document.documentMode)}function fy(){Yo&&(Yo.detachEvent("onpropertychange",uw),xa=Yo=null)}function uw(t){if(t.propertyName==="value"&&Eu(xa)){var e=[];lw(e,xa,t,hp(t)),B_(H2,e)}}function G2(t,e,n){t==="focusin"?(fy(),Yo=e,xa=n,Yo.attachEvent("onpropertychange",uw)):t==="focusout"&&fy()}function K2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Eu(xa)}function Q2(t,e){if(t==="click")return Eu(e)}function Y2(t,e){if(t==="input"||t==="change")return Eu(e)}function J2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mn=typeof Object.is=="function"?Object.is:J2;function Ea(t,e){if(mn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ch.call(e,s)||!mn(t[s],e[s]))return!1}return!0}function py(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function my(t,e){var n=py(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=py(n)}}function dw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?dw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function hw(){for(var t=window,e=wc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=wc(t.document)}return e}function xp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function X2(t){var e=hw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&dw(n.ownerDocument.documentElement,n)){if(r!==null&&xp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=my(n,i);var o=my(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Z2=qn&&"documentMode"in document&&11>=document.documentMode,si=null,Qh=null,Jo=null,Yh=!1;function gy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Yh||si==null||si!==wc(r)||(r=si,"selectionStart"in r&&xp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Jo&&Ea(Jo,r)||(Jo=r,r=Nc(Qh,"onSelect"),0<r.length&&(e=new vp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=si)))}function Ol(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ii={animationend:Ol("Animation","AnimationEnd"),animationiteration:Ol("Animation","AnimationIteration"),animationstart:Ol("Animation","AnimationStart"),transitionend:Ol("Transition","TransitionEnd")},qd={},fw={};qn&&(fw=document.createElement("div").style,"AnimationEvent"in window||(delete ii.animationend.animation,delete ii.animationiteration.animation,delete ii.animationstart.animation),"TransitionEvent"in window||delete ii.transitionend.transition);function Iu(t){if(qd[t])return qd[t];if(!ii[t])return t;var e=ii[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in fw)return qd[t]=e[n];return t}var pw=Iu("animationend"),mw=Iu("animationiteration"),gw=Iu("animationstart"),yw=Iu("transitionend"),vw=new Map,yy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function es(t,e){vw.set(t,e),Us(e,[t])}for(var Gd=0;Gd<yy.length;Gd++){var Kd=yy[Gd],eb=Kd.toLowerCase(),tb=Kd[0].toUpperCase()+Kd.slice(1);es(eb,"on"+tb)}es(pw,"onAnimationEnd");es(mw,"onAnimationIteration");es(gw,"onAnimationStart");es("dblclick","onDoubleClick");es("focusin","onFocus");es("focusout","onBlur");es(yw,"onTransitionEnd");ki("onMouseEnter",["mouseout","mouseover"]);ki("onMouseLeave",["mouseout","mouseover"]);ki("onPointerEnter",["pointerout","pointerover"]);ki("onPointerLeave",["pointerout","pointerover"]);Us("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Us("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Us("onBeforeInput",["compositionend","keypress","textInput","paste"]);Us("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Us("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Us("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uo));function vy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,e2(r,e,void 0,t),t.currentTarget=null}function _w(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;vy(s,l,d),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;vy(s,l,d),i=c}}}if(Ec)throw t=Hh,Ec=!1,Hh=null,t}function xe(t,e){var n=e[tf];n===void 0&&(n=e[tf]=new Set);var r=t+"__bubble";n.has(r)||(ww(e,t,2,!1),n.add(r))}function Qd(t,e,n){var r=0;e&&(r|=4),ww(n,t,r,e)}var Ll="_reactListening"+Math.random().toString(36).slice(2);function Ia(t){if(!t[Ll]){t[Ll]=!0,N_.forEach(function(n){n!=="selectionchange"&&(nb.has(n)||Qd(n,!1,t),Qd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ll]||(e[Ll]=!0,Qd("selectionchange",!1,e))}}function ww(t,e,n,r){switch(rw(e)){case 1:var s=g2;break;case 4:s=y2;break;default:s=gp}n=s.bind(null,e,n,t),s=void 0,!Wh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Yd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=_s(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}B_(function(){var d=i,h=hp(n),p=[];e:{var m=vw.get(t);if(m!==void 0){var w=vp,R=t;switch(t){case"keypress":if(tc(n)===0)break e;case"keydown":case"keyup":w=P2;break;case"focusin":R="focus",w=Bd;break;case"focusout":R="blur",w=Bd;break;case"beforeblur":case"afterblur":w=Bd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=oy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=w2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=O2;break;case pw:case mw:case gw:w=I2;break;case yw:w=V2;break;case"scroll":w=v2;break;case"wheel":w=F2;break;case"copy":case"cut":case"paste":w=b2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=ly}var C=(e&4)!==0,P=!C&&t==="scroll",I=C?m!==null?m+"Capture":null:m;C=[];for(var _=d,T;_!==null;){T=_;var N=T.stateNode;if(T.tag===5&&N!==null&&(T=N,I!==null&&(N=ya(_,I),N!=null&&C.push(Ta(_,N,T)))),P)break;_=_.return}0<C.length&&(m=new w(m,R,null,n,h),p.push({event:m,listeners:C}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",m&&n!==$h&&(R=n.relatedTarget||n.fromElement)&&(_s(R)||R[Gn]))break e;if((w||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,w?(R=n.relatedTarget||n.toElement,w=d,R=R?_s(R):null,R!==null&&(P=zs(R),R!==P||R.tag!==5&&R.tag!==6)&&(R=null)):(w=null,R=d),w!==R)){if(C=oy,N="onMouseLeave",I="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(C=ly,N="onPointerLeave",I="onPointerEnter",_="pointer"),P=w==null?m:oi(w),T=R==null?m:oi(R),m=new C(N,_+"leave",w,n,h),m.target=P,m.relatedTarget=T,N=null,_s(h)===d&&(C=new C(I,_+"enter",R,n,h),C.target=T,C.relatedTarget=P,N=C),P=N,w&&R)t:{for(C=w,I=R,_=0,T=C;T;T=Ys(T))_++;for(T=0,N=I;N;N=Ys(N))T++;for(;0<_-T;)C=Ys(C),_--;for(;0<T-_;)I=Ys(I),T--;for(;_--;){if(C===I||I!==null&&C===I.alternate)break t;C=Ys(C),I=Ys(I)}C=null}else C=null;w!==null&&_y(p,m,w,C,!1),R!==null&&P!==null&&_y(p,P,R,C,!0)}}e:{if(m=d?oi(d):window,w=m.nodeName&&m.nodeName.toLowerCase(),w==="select"||w==="input"&&m.type==="file")var A=q2;else if(dy(m))if(cw)A=Y2;else{A=K2;var D=G2}else(w=m.nodeName)&&w.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(A=Q2);if(A&&(A=A(t,d))){lw(p,A,n,h);break e}D&&D(t,m,d),t==="focusout"&&(D=m._wrapperState)&&D.controlled&&m.type==="number"&&Vh(m,"number",m.value)}switch(D=d?oi(d):window,t){case"focusin":(dy(D)||D.contentEditable==="true")&&(si=D,Qh=d,Jo=null);break;case"focusout":Jo=Qh=si=null;break;case"mousedown":Yh=!0;break;case"contextmenu":case"mouseup":case"dragend":Yh=!1,gy(p,n,h);break;case"selectionchange":if(Z2)break;case"keydown":case"keyup":gy(p,n,h)}var v;if(wp)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else ri?ow(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(iw&&n.locale!=="ko"&&(ri||y!=="onCompositionStart"?y==="onCompositionEnd"&&ri&&(v=sw()):(Ir=h,yp="value"in Ir?Ir.value:Ir.textContent,ri=!0)),D=Nc(d,y),0<D.length&&(y=new ay(y,t,null,n,h),p.push({event:y,listeners:D}),v?y.data=v:(v=aw(n),v!==null&&(y.data=v)))),(v=z2?$2(t,n):B2(t,n))&&(d=Nc(d,"onBeforeInput"),0<d.length&&(h=new ay("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:d}),h.data=v))}_w(p,e)})}function Ta(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Nc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ya(t,n),i!=null&&r.unshift(Ta(t,i,s)),i=ya(t,e),i!=null&&r.push(Ta(t,i,s))),t=t.return}return r}function Ys(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function _y(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=ya(n,i),c!=null&&o.unshift(Ta(n,c,l))):s||(c=ya(n,i),c!=null&&o.push(Ta(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var rb=/\r\n?/g,sb=/\u0000|\uFFFD/g;function wy(t){return(typeof t=="string"?t:""+t).replace(rb,`
`).replace(sb,"")}function Vl(t,e,n){if(e=wy(e),wy(t)!==e&&n)throw Error(U(425))}function Rc(){}var Jh=null,Xh=null;function Zh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ef=typeof setTimeout=="function"?setTimeout:void 0,ib=typeof clearTimeout=="function"?clearTimeout:void 0,xy=typeof Promise=="function"?Promise:void 0,ob=typeof queueMicrotask=="function"?queueMicrotask:typeof xy<"u"?function(t){return xy.resolve(null).then(t).catch(ab)}:ef;function ab(t){setTimeout(function(){throw t})}function Jd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),wa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);wa(e)}function Ar(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ey(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Gi=Math.random().toString(36).slice(2),In="__reactFiber$"+Gi,ba="__reactProps$"+Gi,Gn="__reactContainer$"+Gi,tf="__reactEvents$"+Gi,lb="__reactListeners$"+Gi,cb="__reactHandles$"+Gi;function _s(t){var e=t[In];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Gn]||n[In]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ey(t);t!==null;){if(n=t[In])return n;t=Ey(t)}return e}t=n,n=t.parentNode}return null}function Qa(t){return t=t[In]||t[Gn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function oi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Tu(t){return t[ba]||null}var nf=[],ai=-1;function ts(t){return{current:t}}function Ee(t){0>ai||(t.current=nf[ai],nf[ai]=null,ai--)}function _e(t,e){ai++,nf[ai]=t.current,t.current=e}var Hr={},mt=ts(Hr),At=ts(!1),Rs=Hr;function Ci(t,e){var n=t.type.contextTypes;if(!n)return Hr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Pt(t){return t=t.childContextTypes,t!=null}function kc(){Ee(At),Ee(mt)}function Iy(t,e,n){if(mt.current!==Hr)throw Error(U(168));_e(mt,e),_e(At,n)}function xw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,GT(t)||"Unknown",s));return Se({},n,r)}function Cc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hr,Rs=mt.current,_e(mt,t),_e(At,At.current),!0}function Ty(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=xw(t,e,Rs),r.__reactInternalMemoizedMergedChildContext=t,Ee(At),Ee(mt),_e(mt,t)):Ee(At),_e(At,n)}var Vn=null,bu=!1,Xd=!1;function Ew(t){Vn===null?Vn=[t]:Vn.push(t)}function ub(t){bu=!0,Ew(t)}function ns(){if(!Xd&&Vn!==null){Xd=!0;var t=0,e=pe;try{var n=Vn;for(pe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Vn=null,bu=!1}catch(s){throw Vn!==null&&(Vn=Vn.slice(t+1)),G_(fp,ns),s}finally{pe=e,Xd=!1}}return null}var li=[],ci=0,Ac=null,Pc=0,qt=[],Gt=0,ks=null,Fn=1,Un="";function ms(t,e){li[ci++]=Pc,li[ci++]=Ac,Ac=t,Pc=e}function Iw(t,e,n){qt[Gt++]=Fn,qt[Gt++]=Un,qt[Gt++]=ks,ks=t;var r=Fn;t=Un;var s=32-hn(r)-1;r&=~(1<<s),n+=1;var i=32-hn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Fn=1<<32-hn(e)+s|n<<s|r,Un=i+t}else Fn=1<<i|n<<s|r,Un=t}function Ep(t){t.return!==null&&(ms(t,1),Iw(t,1,0))}function Ip(t){for(;t===Ac;)Ac=li[--ci],li[ci]=null,Pc=li[--ci],li[ci]=null;for(;t===ks;)ks=qt[--Gt],qt[Gt]=null,Un=qt[--Gt],qt[Gt]=null,Fn=qt[--Gt],qt[Gt]=null}var zt=null,Ft=null,Ie=!1,an=null;function Tw(t,e){var n=Kt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function by(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zt=t,Ft=Ar(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zt=t,Ft=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ks!==null?{id:Fn,overflow:Un}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Kt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,zt=t,Ft=null,!0):!1;default:return!1}}function rf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sf(t){if(Ie){var e=Ft;if(e){var n=e;if(!by(t,e)){if(rf(t))throw Error(U(418));e=Ar(n.nextSibling);var r=zt;e&&by(t,e)?Tw(r,n):(t.flags=t.flags&-4097|2,Ie=!1,zt=t)}}else{if(rf(t))throw Error(U(418));t.flags=t.flags&-4097|2,Ie=!1,zt=t}}}function Sy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zt=t}function Ml(t){if(t!==zt)return!1;if(!Ie)return Sy(t),Ie=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Zh(t.type,t.memoizedProps)),e&&(e=Ft)){if(rf(t))throw bw(),Error(U(418));for(;e;)Tw(t,e),e=Ar(e.nextSibling)}if(Sy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ft=Ar(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ft=null}}else Ft=zt?Ar(t.stateNode.nextSibling):null;return!0}function bw(){for(var t=Ft;t;)t=Ar(t.nextSibling)}function Ai(){Ft=zt=null,Ie=!1}function Tp(t){an===null?an=[t]:an.push(t)}var db=nr.ReactCurrentBatchConfig;function Po(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Fl(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ny(t){var e=t._init;return e(t._payload)}function Sw(t){function e(I,_){if(t){var T=I.deletions;T===null?(I.deletions=[_],I.flags|=16):T.push(_)}}function n(I,_){if(!t)return null;for(;_!==null;)e(I,_),_=_.sibling;return null}function r(I,_){for(I=new Map;_!==null;)_.key!==null?I.set(_.key,_):I.set(_.index,_),_=_.sibling;return I}function s(I,_){return I=Or(I,_),I.index=0,I.sibling=null,I}function i(I,_,T){return I.index=T,t?(T=I.alternate,T!==null?(T=T.index,T<_?(I.flags|=2,_):T):(I.flags|=2,_)):(I.flags|=1048576,_)}function o(I){return t&&I.alternate===null&&(I.flags|=2),I}function l(I,_,T,N){return _===null||_.tag!==6?(_=ih(T,I.mode,N),_.return=I,_):(_=s(_,T),_.return=I,_)}function c(I,_,T,N){var A=T.type;return A===ni?h(I,_,T.props.children,N,T.key):_!==null&&(_.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===gr&&Ny(A)===_.type)?(N=s(_,T.props),N.ref=Po(I,_,T),N.return=I,N):(N=lc(T.type,T.key,T.props,null,I.mode,N),N.ref=Po(I,_,T),N.return=I,N)}function d(I,_,T,N){return _===null||_.tag!==4||_.stateNode.containerInfo!==T.containerInfo||_.stateNode.implementation!==T.implementation?(_=oh(T,I.mode,N),_.return=I,_):(_=s(_,T.children||[]),_.return=I,_)}function h(I,_,T,N,A){return _===null||_.tag!==7?(_=Ts(T,I.mode,N,A),_.return=I,_):(_=s(_,T),_.return=I,_)}function p(I,_,T){if(typeof _=="string"&&_!==""||typeof _=="number")return _=ih(""+_,I.mode,T),_.return=I,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Rl:return T=lc(_.type,_.key,_.props,null,I.mode,T),T.ref=Po(I,null,_),T.return=I,T;case ti:return _=oh(_,I.mode,T),_.return=I,_;case gr:var N=_._init;return p(I,N(_._payload),T)}if(Mo(_)||No(_))return _=Ts(_,I.mode,T,null),_.return=I,_;Fl(I,_)}return null}function m(I,_,T,N){var A=_!==null?_.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return A!==null?null:l(I,_,""+T,N);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Rl:return T.key===A?c(I,_,T,N):null;case ti:return T.key===A?d(I,_,T,N):null;case gr:return A=T._init,m(I,_,A(T._payload),N)}if(Mo(T)||No(T))return A!==null?null:h(I,_,T,N,null);Fl(I,T)}return null}function w(I,_,T,N,A){if(typeof N=="string"&&N!==""||typeof N=="number")return I=I.get(T)||null,l(_,I,""+N,A);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Rl:return I=I.get(N.key===null?T:N.key)||null,c(_,I,N,A);case ti:return I=I.get(N.key===null?T:N.key)||null,d(_,I,N,A);case gr:var D=N._init;return w(I,_,T,D(N._payload),A)}if(Mo(N)||No(N))return I=I.get(T)||null,h(_,I,N,A,null);Fl(_,N)}return null}function R(I,_,T,N){for(var A=null,D=null,v=_,y=_=0,x=null;v!==null&&y<T.length;y++){v.index>y?(x=v,v=null):x=v.sibling;var b=m(I,v,T[y],N);if(b===null){v===null&&(v=x);break}t&&v&&b.alternate===null&&e(I,v),_=i(b,_,y),D===null?A=b:D.sibling=b,D=b,v=x}if(y===T.length)return n(I,v),Ie&&ms(I,y),A;if(v===null){for(;y<T.length;y++)v=p(I,T[y],N),v!==null&&(_=i(v,_,y),D===null?A=v:D.sibling=v,D=v);return Ie&&ms(I,y),A}for(v=r(I,v);y<T.length;y++)x=w(v,I,y,T[y],N),x!==null&&(t&&x.alternate!==null&&v.delete(x.key===null?y:x.key),_=i(x,_,y),D===null?A=x:D.sibling=x,D=x);return t&&v.forEach(function(k){return e(I,k)}),Ie&&ms(I,y),A}function C(I,_,T,N){var A=No(T);if(typeof A!="function")throw Error(U(150));if(T=A.call(T),T==null)throw Error(U(151));for(var D=A=null,v=_,y=_=0,x=null,b=T.next();v!==null&&!b.done;y++,b=T.next()){v.index>y?(x=v,v=null):x=v.sibling;var k=m(I,v,b.value,N);if(k===null){v===null&&(v=x);break}t&&v&&k.alternate===null&&e(I,v),_=i(k,_,y),D===null?A=k:D.sibling=k,D=k,v=x}if(b.done)return n(I,v),Ie&&ms(I,y),A;if(v===null){for(;!b.done;y++,b=T.next())b=p(I,b.value,N),b!==null&&(_=i(b,_,y),D===null?A=b:D.sibling=b,D=b);return Ie&&ms(I,y),A}for(v=r(I,v);!b.done;y++,b=T.next())b=w(v,I,y,b.value,N),b!==null&&(t&&b.alternate!==null&&v.delete(b.key===null?y:b.key),_=i(b,_,y),D===null?A=b:D.sibling=b,D=b);return t&&v.forEach(function(j){return e(I,j)}),Ie&&ms(I,y),A}function P(I,_,T,N){if(typeof T=="object"&&T!==null&&T.type===ni&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Rl:e:{for(var A=T.key,D=_;D!==null;){if(D.key===A){if(A=T.type,A===ni){if(D.tag===7){n(I,D.sibling),_=s(D,T.props.children),_.return=I,I=_;break e}}else if(D.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===gr&&Ny(A)===D.type){n(I,D.sibling),_=s(D,T.props),_.ref=Po(I,D,T),_.return=I,I=_;break e}n(I,D);break}else e(I,D);D=D.sibling}T.type===ni?(_=Ts(T.props.children,I.mode,N,T.key),_.return=I,I=_):(N=lc(T.type,T.key,T.props,null,I.mode,N),N.ref=Po(I,_,T),N.return=I,I=N)}return o(I);case ti:e:{for(D=T.key;_!==null;){if(_.key===D)if(_.tag===4&&_.stateNode.containerInfo===T.containerInfo&&_.stateNode.implementation===T.implementation){n(I,_.sibling),_=s(_,T.children||[]),_.return=I,I=_;break e}else{n(I,_);break}else e(I,_);_=_.sibling}_=oh(T,I.mode,N),_.return=I,I=_}return o(I);case gr:return D=T._init,P(I,_,D(T._payload),N)}if(Mo(T))return R(I,_,T,N);if(No(T))return C(I,_,T,N);Fl(I,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,_!==null&&_.tag===6?(n(I,_.sibling),_=s(_,T),_.return=I,I=_):(n(I,_),_=ih(T,I.mode,N),_.return=I,I=_),o(I)):n(I,_)}return P}var Pi=Sw(!0),Nw=Sw(!1),Dc=ts(null),jc=null,ui=null,bp=null;function Sp(){bp=ui=jc=null}function Np(t){var e=Dc.current;Ee(Dc),t._currentValue=e}function of(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function _i(t,e){jc=t,bp=ui=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ct=!0),t.firstContext=null)}function Zt(t){var e=t._currentValue;if(bp!==t)if(t={context:t,memoizedValue:e,next:null},ui===null){if(jc===null)throw Error(U(308));ui=t,jc.dependencies={lanes:0,firstContext:t}}else ui=ui.next=t;return e}var ws=null;function Rp(t){ws===null?ws=[t]:ws.push(t)}function Rw(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Rp(e)):(n.next=s.next,s.next=n),e.interleaved=n,Kn(t,r)}function Kn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var yr=!1;function kp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Pr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,de&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Kn(t,n)}return s=r.interleaved,s===null?(e.next=e,Rp(r)):(e.next=s.next,s.next=e),r.interleaved=e,Kn(t,n)}function nc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,pp(t,n)}}function Ry(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Oc(t,e,n,r){var s=t.updateQueue;yr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(i!==null){var p=s.baseState;o=0,h=d=c=null,l=i;do{var m=l.lane,w=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var R=t,C=l;switch(m=e,w=n,C.tag){case 1:if(R=C.payload,typeof R=="function"){p=R.call(w,p,m);break e}p=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=C.payload,m=typeof R=="function"?R.call(w,p,m):R,m==null)break e;p=Se({},p,m);break e;case 2:yr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else w={eventTime:w,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=w,c=p):h=h.next=w,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=p),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);As|=o,t.lanes=o,t.memoizedState=p}}function ky(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var Ya={},Sn=ts(Ya),Sa=ts(Ya),Na=ts(Ya);function xs(t){if(t===Ya)throw Error(U(174));return t}function Cp(t,e){switch(_e(Na,e),_e(Sa,t),_e(Sn,Ya),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Fh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Fh(e,t)}Ee(Sn),_e(Sn,e)}function Di(){Ee(Sn),Ee(Sa),Ee(Na)}function Cw(t){xs(Na.current);var e=xs(Sn.current),n=Fh(e,t.type);e!==n&&(_e(Sa,t),_e(Sn,n))}function Ap(t){Sa.current===t&&(Ee(Sn),Ee(Sa))}var Te=ts(0);function Lc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Zd=[];function Pp(){for(var t=0;t<Zd.length;t++)Zd[t]._workInProgressVersionPrimary=null;Zd.length=0}var rc=nr.ReactCurrentDispatcher,eh=nr.ReactCurrentBatchConfig,Cs=0,be=null,$e=null,Ye=null,Vc=!1,Xo=!1,Ra=0,hb=0;function ct(){throw Error(U(321))}function Dp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!mn(t[n],e[n]))return!1;return!0}function jp(t,e,n,r,s,i){if(Cs=i,be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,rc.current=t===null||t.memoizedState===null?gb:yb,t=n(r,s),Xo){i=0;do{if(Xo=!1,Ra=0,25<=i)throw Error(U(301));i+=1,Ye=$e=null,e.updateQueue=null,rc.current=vb,t=n(r,s)}while(Xo)}if(rc.current=Mc,e=$e!==null&&$e.next!==null,Cs=0,Ye=$e=be=null,Vc=!1,e)throw Error(U(300));return t}function Op(){var t=Ra!==0;return Ra=0,t}function xn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?be.memoizedState=Ye=t:Ye=Ye.next=t,Ye}function en(){if($e===null){var t=be.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var e=Ye===null?be.memoizedState:Ye.next;if(e!==null)Ye=e,$e=t;else{if(t===null)throw Error(U(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Ye===null?be.memoizedState=Ye=t:Ye=Ye.next=t}return Ye}function ka(t,e){return typeof e=="function"?e(t):e}function th(t){var e=en(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=$e,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,d=i;do{var h=d.lane;if((Cs&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=p,o=r):c=c.next=p,be.lanes|=h,As|=h}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=l,mn(r,e.memoizedState)||(Ct=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,be.lanes|=i,As|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function nh(t){var e=en(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);mn(i,e.memoizedState)||(Ct=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Aw(){}function Pw(t,e){var n=be,r=en(),s=e(),i=!mn(r.memoizedState,s);if(i&&(r.memoizedState=s,Ct=!0),r=r.queue,Lp(Ow.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ye!==null&&Ye.memoizedState.tag&1){if(n.flags|=2048,Ca(9,jw.bind(null,n,r,s,e),void 0,null),Ze===null)throw Error(U(349));Cs&30||Dw(n,e,s)}return s}function Dw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function jw(t,e,n,r){e.value=n,e.getSnapshot=r,Lw(e)&&Vw(t)}function Ow(t,e,n){return n(function(){Lw(e)&&Vw(t)})}function Lw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mn(t,n)}catch{return!0}}function Vw(t){var e=Kn(t,1);e!==null&&fn(e,t,1,-1)}function Cy(t){var e=xn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ka,lastRenderedState:t},e.queue=t,t=t.dispatch=mb.bind(null,be,t),[e.memoizedState,t]}function Ca(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Mw(){return en().memoizedState}function sc(t,e,n,r){var s=xn();be.flags|=t,s.memoizedState=Ca(1|e,n,void 0,r===void 0?null:r)}function Su(t,e,n,r){var s=en();r=r===void 0?null:r;var i=void 0;if($e!==null){var o=$e.memoizedState;if(i=o.destroy,r!==null&&Dp(r,o.deps)){s.memoizedState=Ca(e,n,i,r);return}}be.flags|=t,s.memoizedState=Ca(1|e,n,i,r)}function Ay(t,e){return sc(8390656,8,t,e)}function Lp(t,e){return Su(2048,8,t,e)}function Fw(t,e){return Su(4,2,t,e)}function Uw(t,e){return Su(4,4,t,e)}function zw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function $w(t,e,n){return n=n!=null?n.concat([t]):null,Su(4,4,zw.bind(null,e,t),n)}function Vp(){}function Bw(t,e){var n=en();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Dp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ww(t,e){var n=en();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Dp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Hw(t,e,n){return Cs&21?(mn(n,e)||(n=Y_(),be.lanes|=n,As|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ct=!0),t.memoizedState=n)}function fb(t,e){var n=pe;pe=n!==0&&4>n?n:4,t(!0);var r=eh.transition;eh.transition={};try{t(!1),e()}finally{pe=n,eh.transition=r}}function qw(){return en().memoizedState}function pb(t,e,n){var r=jr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Gw(t))Kw(e,n);else if(n=Rw(t,e,n,r),n!==null){var s=wt();fn(n,t,r,s),Qw(n,e,r)}}function mb(t,e,n){var r=jr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gw(t))Kw(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,mn(l,o)){var c=e.interleaved;c===null?(s.next=s,Rp(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=Rw(t,e,s,r),n!==null&&(s=wt(),fn(n,t,r,s),Qw(n,e,r))}}function Gw(t){var e=t.alternate;return t===be||e!==null&&e===be}function Kw(t,e){Xo=Vc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Qw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,pp(t,n)}}var Mc={readContext:Zt,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},gb={readContext:Zt,useCallback:function(t,e){return xn().memoizedState=[t,e===void 0?null:e],t},useContext:Zt,useEffect:Ay,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,sc(4194308,4,zw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return sc(4194308,4,t,e)},useInsertionEffect:function(t,e){return sc(4,2,t,e)},useMemo:function(t,e){var n=xn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=xn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=pb.bind(null,be,t),[r.memoizedState,t]},useRef:function(t){var e=xn();return t={current:t},e.memoizedState=t},useState:Cy,useDebugValue:Vp,useDeferredValue:function(t){return xn().memoizedState=t},useTransition:function(){var t=Cy(!1),e=t[0];return t=fb.bind(null,t[1]),xn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=be,s=xn();if(Ie){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Ze===null)throw Error(U(349));Cs&30||Dw(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Ay(Ow.bind(null,r,i,t),[t]),r.flags|=2048,Ca(9,jw.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=xn(),e=Ze.identifierPrefix;if(Ie){var n=Un,r=Fn;n=(r&~(1<<32-hn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ra++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=hb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},yb={readContext:Zt,useCallback:Bw,useContext:Zt,useEffect:Lp,useImperativeHandle:$w,useInsertionEffect:Fw,useLayoutEffect:Uw,useMemo:Ww,useReducer:th,useRef:Mw,useState:function(){return th(ka)},useDebugValue:Vp,useDeferredValue:function(t){var e=en();return Hw(e,$e.memoizedState,t)},useTransition:function(){var t=th(ka)[0],e=en().memoizedState;return[t,e]},useMutableSource:Aw,useSyncExternalStore:Pw,useId:qw,unstable_isNewReconciler:!1},vb={readContext:Zt,useCallback:Bw,useContext:Zt,useEffect:Lp,useImperativeHandle:$w,useInsertionEffect:Fw,useLayoutEffect:Uw,useMemo:Ww,useReducer:nh,useRef:Mw,useState:function(){return nh(ka)},useDebugValue:Vp,useDeferredValue:function(t){var e=en();return $e===null?e.memoizedState=t:Hw(e,$e.memoizedState,t)},useTransition:function(){var t=nh(ka)[0],e=en().memoizedState;return[t,e]},useMutableSource:Aw,useSyncExternalStore:Pw,useId:qw,unstable_isNewReconciler:!1};function sn(t,e){if(t&&t.defaultProps){e=Se({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function af(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Se({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Nu={isMounted:function(t){return(t=t._reactInternals)?zs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=wt(),s=jr(t),i=Wn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Pr(t,i,s),e!==null&&(fn(e,t,s,r),nc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=wt(),s=jr(t),i=Wn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Pr(t,i,s),e!==null&&(fn(e,t,s,r),nc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=wt(),r=jr(t),s=Wn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Pr(t,s,r),e!==null&&(fn(e,t,r,n),nc(e,t,r))}};function Py(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ea(n,r)||!Ea(s,i):!0}function Yw(t,e,n){var r=!1,s=Hr,i=e.contextType;return typeof i=="object"&&i!==null?i=Zt(i):(s=Pt(e)?Rs:mt.current,r=e.contextTypes,i=(r=r!=null)?Ci(t,s):Hr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Nu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Dy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Nu.enqueueReplaceState(e,e.state,null)}function lf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},kp(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Zt(i):(i=Pt(e)?Rs:mt.current,s.context=Ci(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(af(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Nu.enqueueReplaceState(s,s.state,null),Oc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ji(t,e){try{var n="",r=e;do n+=qT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function rh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function cf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var _b=typeof WeakMap=="function"?WeakMap:Map;function Jw(t,e,n){n=Wn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Uc||(Uc=!0,_f=r),cf(t,e)},n}function Xw(t,e,n){n=Wn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){cf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){cf(t,e),typeof r!="function"&&(Dr===null?Dr=new Set([this]):Dr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function jy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new _b;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Db.bind(null,t,e,n),e.then(t,t))}function Oy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ly(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Wn(-1,1),e.tag=2,Pr(n,e,1))),n.lanes|=1),t)}var wb=nr.ReactCurrentOwner,Ct=!1;function _t(t,e,n,r){e.child=t===null?Nw(e,null,n,r):Pi(e,t.child,n,r)}function Vy(t,e,n,r,s){n=n.render;var i=e.ref;return _i(e,s),r=jp(t,e,n,r,i,s),n=Op(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Qn(t,e,s)):(Ie&&n&&Ep(e),e.flags|=1,_t(t,e,r,s),e.child)}function My(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Hp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Zw(t,e,i,r,s)):(t=lc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ea,n(o,r)&&t.ref===e.ref)return Qn(t,e,s)}return e.flags|=1,t=Or(i,r),t.ref=e.ref,t.return=e,e.child=t}function Zw(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ea(i,r)&&t.ref===e.ref)if(Ct=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ct=!0);else return e.lanes=t.lanes,Qn(t,e,s)}return uf(t,e,n,r,s)}function ex(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(hi,Vt),Vt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_e(hi,Vt),Vt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,_e(hi,Vt),Vt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,_e(hi,Vt),Vt|=r;return _t(t,e,s,n),e.child}function tx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function uf(t,e,n,r,s){var i=Pt(n)?Rs:mt.current;return i=Ci(e,i),_i(e,s),n=jp(t,e,n,r,i,s),r=Op(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Qn(t,e,s)):(Ie&&r&&Ep(e),e.flags|=1,_t(t,e,n,s),e.child)}function Fy(t,e,n,r,s){if(Pt(n)){var i=!0;Cc(e)}else i=!1;if(_i(e,s),e.stateNode===null)ic(t,e),Yw(e,n,r),lf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Zt(d):(d=Pt(n)?Rs:mt.current,d=Ci(e,d));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&Dy(e,o,r,d),yr=!1;var m=e.memoizedState;o.state=m,Oc(e,r,o,s),c=e.memoizedState,l!==r||m!==c||At.current||yr?(typeof h=="function"&&(af(e,n,h,r),c=e.memoizedState),(l=yr||Py(e,n,l,r,m,c,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,kw(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:sn(e.type,l),o.props=d,p=e.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Zt(c):(c=Pt(n)?Rs:mt.current,c=Ci(e,c));var w=n.getDerivedStateFromProps;(h=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||m!==c)&&Dy(e,o,r,c),yr=!1,m=e.memoizedState,o.state=m,Oc(e,r,o,s);var R=e.memoizedState;l!==p||m!==R||At.current||yr?(typeof w=="function"&&(af(e,n,w,r),R=e.memoizedState),(d=yr||Py(e,n,d,r,m,R,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,R,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,R,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=R),o.props=r,o.state=R,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return df(t,e,n,r,i,s)}function df(t,e,n,r,s,i){tx(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Ty(e,n,!1),Qn(t,e,i);r=e.stateNode,wb.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Pi(e,t.child,null,i),e.child=Pi(e,null,l,i)):_t(t,e,l,i),e.memoizedState=r.state,s&&Ty(e,n,!0),e.child}function nx(t){var e=t.stateNode;e.pendingContext?Iy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Iy(t,e.context,!1),Cp(t,e.containerInfo)}function Uy(t,e,n,r,s){return Ai(),Tp(s),e.flags|=256,_t(t,e,n,r),e.child}var hf={dehydrated:null,treeContext:null,retryLane:0};function ff(t){return{baseLanes:t,cachePool:null,transitions:null}}function rx(t,e,n){var r=e.pendingProps,s=Te.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),_e(Te,s&1),t===null)return sf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Cu(o,r,0,null),t=Ts(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=ff(n),e.memoizedState=hf,t):Mp(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return xb(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Or(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Or(l,i):(i=Ts(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?ff(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=hf,r}return i=t.child,t=i.sibling,r=Or(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Mp(t,e){return e=Cu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ul(t,e,n,r){return r!==null&&Tp(r),Pi(e,t.child,null,n),t=Mp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xb(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=rh(Error(U(422))),Ul(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Cu({mode:"visible",children:r.children},s,0,null),i=Ts(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Pi(e,t.child,null,o),e.child.memoizedState=ff(o),e.memoizedState=hf,i);if(!(e.mode&1))return Ul(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(U(419)),r=rh(i,r,void 0),Ul(t,e,o,r)}if(l=(o&t.childLanes)!==0,Ct||l){if(r=Ze,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Kn(t,s),fn(r,t,s,-1))}return Wp(),r=rh(Error(U(421))),Ul(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=jb.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ft=Ar(s.nextSibling),zt=e,Ie=!0,an=null,t!==null&&(qt[Gt++]=Fn,qt[Gt++]=Un,qt[Gt++]=ks,Fn=t.id,Un=t.overflow,ks=e),e=Mp(e,r.children),e.flags|=4096,e)}function zy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),of(t.return,e,n)}function sh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function sx(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(_t(t,e,r.children,n),r=Te.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&zy(t,n,e);else if(t.tag===19)zy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(_e(Te,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Lc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),sh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Lc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}sh(e,!0,n,null,i);break;case"together":sh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ic(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),As|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Or(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Or(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Eb(t,e,n){switch(e.tag){case 3:nx(e),Ai();break;case 5:Cw(e);break;case 1:Pt(e.type)&&Cc(e);break;case 4:Cp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;_e(Dc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(_e(Te,Te.current&1),e.flags|=128,null):n&e.child.childLanes?rx(t,e,n):(_e(Te,Te.current&1),t=Qn(t,e,n),t!==null?t.sibling:null);_e(Te,Te.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return sx(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),_e(Te,Te.current),r)break;return null;case 22:case 23:return e.lanes=0,ex(t,e,n)}return Qn(t,e,n)}var ix,pf,ox,ax;ix=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pf=function(){};ox=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,xs(Sn.current);var i=null;switch(n){case"input":s=Oh(t,s),r=Oh(t,r),i=[];break;case"select":s=Se({},s,{value:void 0}),r=Se({},r,{value:void 0}),i=[];break;case"textarea":s=Mh(t,s),r=Mh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Rc)}Uh(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ma.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ma.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&xe("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};ax=function(t,e,n,r){n!==r&&(e.flags|=4)};function Do(t,e){if(!Ie)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Ib(t,e,n){var r=e.pendingProps;switch(Ip(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(e),null;case 1:return Pt(e.type)&&kc(),ut(e),null;case 3:return r=e.stateNode,Di(),Ee(At),Ee(mt),Pp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ml(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,an!==null&&(Ef(an),an=null))),pf(t,e),ut(e),null;case 5:Ap(e);var s=xs(Na.current);if(n=e.type,t!==null&&e.stateNode!=null)ox(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return ut(e),null}if(t=xs(Sn.current),Ml(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[In]=e,r[ba]=i,t=(e.mode&1)!==0,n){case"dialog":xe("cancel",r),xe("close",r);break;case"iframe":case"object":case"embed":xe("load",r);break;case"video":case"audio":for(s=0;s<Uo.length;s++)xe(Uo[s],r);break;case"source":xe("error",r);break;case"img":case"image":case"link":xe("error",r),xe("load",r);break;case"details":xe("toggle",r);break;case"input":Yg(r,i),xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},xe("invalid",r);break;case"textarea":Xg(r,i),xe("invalid",r)}Uh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Vl(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Vl(r.textContent,l,t),s=["children",""+l]):ma.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&xe("scroll",r)}switch(n){case"input":kl(r),Jg(r,i,!0);break;case"textarea":kl(r),Zg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Rc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=O_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[In]=e,t[ba]=r,ix(t,e,!1,!1),e.stateNode=t;e:{switch(o=zh(n,r),n){case"dialog":xe("cancel",t),xe("close",t),s=r;break;case"iframe":case"object":case"embed":xe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Uo.length;s++)xe(Uo[s],t);s=r;break;case"source":xe("error",t),s=r;break;case"img":case"image":case"link":xe("error",t),xe("load",t),s=r;break;case"details":xe("toggle",t),s=r;break;case"input":Yg(t,r),s=Oh(t,r),xe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Se({},r,{value:void 0}),xe("invalid",t);break;case"textarea":Xg(t,r),s=Mh(t,r),xe("invalid",t);break;default:s=r}Uh(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?M_(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&L_(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ga(t,c):typeof c=="number"&&ga(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ma.hasOwnProperty(i)?c!=null&&i==="onScroll"&&xe("scroll",t):c!=null&&lp(t,i,c,o))}switch(n){case"input":kl(t),Jg(t,r,!1);break;case"textarea":kl(t),Zg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Wr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?mi(t,!!r.multiple,i,!1):r.defaultValue!=null&&mi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Rc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ut(e),null;case 6:if(t&&e.stateNode!=null)ax(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=xs(Na.current),xs(Sn.current),Ml(e)){if(r=e.stateNode,n=e.memoizedProps,r[In]=e,(i=r.nodeValue!==n)&&(t=zt,t!==null))switch(t.tag){case 3:Vl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Vl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[In]=e,e.stateNode=r}return ut(e),null;case 13:if(Ee(Te),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ie&&Ft!==null&&e.mode&1&&!(e.flags&128))bw(),Ai(),e.flags|=98560,i=!1;else if(i=Ml(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[In]=e}else Ai(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ut(e),i=!1}else an!==null&&(Ef(an),an=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Te.current&1?We===0&&(We=3):Wp())),e.updateQueue!==null&&(e.flags|=4),ut(e),null);case 4:return Di(),pf(t,e),t===null&&Ia(e.stateNode.containerInfo),ut(e),null;case 10:return Np(e.type._context),ut(e),null;case 17:return Pt(e.type)&&kc(),ut(e),null;case 19:if(Ee(Te),i=e.memoizedState,i===null)return ut(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Do(i,!1);else{if(We!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Lc(t),o!==null){for(e.flags|=128,Do(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _e(Te,Te.current&1|2),e.child}t=t.sibling}i.tail!==null&&Pe()>Oi&&(e.flags|=128,r=!0,Do(i,!1),e.lanes=4194304)}else{if(!r)if(t=Lc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Do(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ie)return ut(e),null}else 2*Pe()-i.renderingStartTime>Oi&&n!==1073741824&&(e.flags|=128,r=!0,Do(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Pe(),e.sibling=null,n=Te.current,_e(Te,r?n&1|2:n&1),e):(ut(e),null);case 22:case 23:return Bp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Vt&1073741824&&(ut(e),e.subtreeFlags&6&&(e.flags|=8192)):ut(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function Tb(t,e){switch(Ip(e),e.tag){case 1:return Pt(e.type)&&kc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Di(),Ee(At),Ee(mt),Pp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ap(e),null;case 13:if(Ee(Te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Ai()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ee(Te),null;case 4:return Di(),null;case 10:return Np(e.type._context),null;case 22:case 23:return Bp(),null;case 24:return null;default:return null}}var zl=!1,ft=!1,bb=typeof WeakSet=="function"?WeakSet:Set,q=null;function di(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ke(t,e,r)}else n.current=null}function mf(t,e,n){try{n()}catch(r){ke(t,e,r)}}var $y=!1;function Sb(t,e){if(Jh=bc,t=hw(),xp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,h=0,p=t,m=null;t:for(;;){for(var w;p!==n||s!==0&&p.nodeType!==3||(l=o+s),p!==i||r!==0&&p.nodeType!==3||(c=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(w=p.firstChild)!==null;)m=p,p=w;for(;;){if(p===t)break t;if(m===n&&++d===s&&(l=o),m===i&&++h===r&&(c=o),(w=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=w}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xh={focusedElem:t,selectionRange:n},bc=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var R=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var C=R.memoizedProps,P=R.memoizedState,I=e.stateNode,_=I.getSnapshotBeforeUpdate(e.elementType===e.type?C:sn(e.type,C),P);I.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(N){ke(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return R=$y,$y=!1,R}function Zo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&mf(e,n,i)}s=s.next}while(s!==r)}}function Ru(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function gf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function lx(t){var e=t.alternate;e!==null&&(t.alternate=null,lx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[In],delete e[ba],delete e[tf],delete e[lb],delete e[cb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function cx(t){return t.tag===5||t.tag===3||t.tag===4}function By(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||cx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Rc));else if(r!==4&&(t=t.child,t!==null))for(yf(t,e,n),t=t.sibling;t!==null;)yf(t,e,n),t=t.sibling}function vf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(vf(t,e,n),t=t.sibling;t!==null;)vf(t,e,n),t=t.sibling}var rt=null,on=!1;function fr(t,e,n){for(n=n.child;n!==null;)ux(t,e,n),n=n.sibling}function ux(t,e,n){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(wu,n)}catch{}switch(n.tag){case 5:ft||di(n,e);case 6:var r=rt,s=on;rt=null,fr(t,e,n),rt=r,on=s,rt!==null&&(on?(t=rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):rt.removeChild(n.stateNode));break;case 18:rt!==null&&(on?(t=rt,n=n.stateNode,t.nodeType===8?Jd(t.parentNode,n):t.nodeType===1&&Jd(t,n),wa(t)):Jd(rt,n.stateNode));break;case 4:r=rt,s=on,rt=n.stateNode.containerInfo,on=!0,fr(t,e,n),rt=r,on=s;break;case 0:case 11:case 14:case 15:if(!ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&mf(n,e,o),s=s.next}while(s!==r)}fr(t,e,n);break;case 1:if(!ft&&(di(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ke(n,e,l)}fr(t,e,n);break;case 21:fr(t,e,n);break;case 22:n.mode&1?(ft=(r=ft)||n.memoizedState!==null,fr(t,e,n),ft=r):fr(t,e,n);break;default:fr(t,e,n)}}function Wy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new bb),e.forEach(function(r){var s=Ob.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function rn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:rt=l.stateNode,on=!1;break e;case 3:rt=l.stateNode.containerInfo,on=!0;break e;case 4:rt=l.stateNode.containerInfo,on=!0;break e}l=l.return}if(rt===null)throw Error(U(160));ux(i,o,s),rt=null,on=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){ke(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dx(e,t),e=e.sibling}function dx(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(rn(e,t),_n(t),r&4){try{Zo(3,t,t.return),Ru(3,t)}catch(C){ke(t,t.return,C)}try{Zo(5,t,t.return)}catch(C){ke(t,t.return,C)}}break;case 1:rn(e,t),_n(t),r&512&&n!==null&&di(n,n.return);break;case 5:if(rn(e,t),_n(t),r&512&&n!==null&&di(n,n.return),t.flags&32){var s=t.stateNode;try{ga(s,"")}catch(C){ke(t,t.return,C)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&D_(s,i),zh(l,o);var d=zh(l,i);for(o=0;o<c.length;o+=2){var h=c[o],p=c[o+1];h==="style"?M_(s,p):h==="dangerouslySetInnerHTML"?L_(s,p):h==="children"?ga(s,p):lp(s,h,p,d)}switch(l){case"input":Lh(s,i);break;case"textarea":j_(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?mi(s,!!i.multiple,w,!1):m!==!!i.multiple&&(i.defaultValue!=null?mi(s,!!i.multiple,i.defaultValue,!0):mi(s,!!i.multiple,i.multiple?[]:"",!1))}s[ba]=i}catch(C){ke(t,t.return,C)}}break;case 6:if(rn(e,t),_n(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(C){ke(t,t.return,C)}}break;case 3:if(rn(e,t),_n(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wa(e.containerInfo)}catch(C){ke(t,t.return,C)}break;case 4:rn(e,t),_n(t);break;case 13:rn(e,t),_n(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(zp=Pe())),r&4&&Wy(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(ft=(d=ft)||h,rn(e,t),ft=d):rn(e,t),_n(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(q=t,h=t.child;h!==null;){for(p=q=h;q!==null;){switch(m=q,w=m.child,m.tag){case 0:case 11:case 14:case 15:Zo(4,m,m.return);break;case 1:di(m,m.return);var R=m.stateNode;if(typeof R.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,R.props=e.memoizedProps,R.state=e.memoizedState,R.componentWillUnmount()}catch(C){ke(r,n,C)}}break;case 5:di(m,m.return);break;case 22:if(m.memoizedState!==null){qy(p);continue}}w!==null?(w.return=m,q=w):qy(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=V_("display",o))}catch(C){ke(t,t.return,C)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(C){ke(t,t.return,C)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:rn(e,t),_n(t),r&4&&Wy(t);break;case 21:break;default:rn(e,t),_n(t)}}function _n(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(cx(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ga(s,""),r.flags&=-33);var i=By(t);vf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=By(t);yf(t,l,o);break;default:throw Error(U(161))}}catch(c){ke(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Nb(t,e,n){q=t,hx(t)}function hx(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var s=q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||zl;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||ft;l=zl;var d=ft;if(zl=o,(ft=c)&&!d)for(q=s;q!==null;)o=q,c=o.child,o.tag===22&&o.memoizedState!==null?Gy(s):c!==null?(c.return=o,q=c):Gy(s);for(;i!==null;)q=i,hx(i),i=i.sibling;q=s,zl=l,ft=d}Hy(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,q=i):Hy(t)}}function Hy(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ft||Ru(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ft)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:sn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&ky(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ky(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&wa(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}ft||e.flags&512&&gf(e)}catch(m){ke(e,e.return,m)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function qy(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function Gy(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ru(4,e)}catch(c){ke(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){ke(e,s,c)}}var i=e.return;try{gf(e)}catch(c){ke(e,i,c)}break;case 5:var o=e.return;try{gf(e)}catch(c){ke(e,o,c)}}}catch(c){ke(e,e.return,c)}if(e===t){q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,q=l;break}q=e.return}}var Rb=Math.ceil,Fc=nr.ReactCurrentDispatcher,Fp=nr.ReactCurrentOwner,Yt=nr.ReactCurrentBatchConfig,de=0,Ze=null,Ve=null,it=0,Vt=0,hi=ts(0),We=0,Aa=null,As=0,ku=0,Up=0,ea=null,Rt=null,zp=0,Oi=1/0,Ln=null,Uc=!1,_f=null,Dr=null,$l=!1,Tr=null,zc=0,ta=0,wf=null,oc=-1,ac=0;function wt(){return de&6?Pe():oc!==-1?oc:oc=Pe()}function jr(t){return t.mode&1?de&2&&it!==0?it&-it:db.transition!==null?(ac===0&&(ac=Y_()),ac):(t=pe,t!==0||(t=window.event,t=t===void 0?16:rw(t.type)),t):1}function fn(t,e,n,r){if(50<ta)throw ta=0,wf=null,Error(U(185));Ga(t,n,r),(!(de&2)||t!==Ze)&&(t===Ze&&(!(de&2)&&(ku|=n),We===4&&_r(t,it)),Dt(t,r),n===1&&de===0&&!(e.mode&1)&&(Oi=Pe()+500,bu&&ns()))}function Dt(t,e){var n=t.callbackNode;d2(t,e);var r=Tc(t,t===Ze?it:0);if(r===0)n!==null&&ny(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ny(n),e===1)t.tag===0?ub(Ky.bind(null,t)):Ew(Ky.bind(null,t)),ob(function(){!(de&6)&&ns()}),n=null;else{switch(J_(r)){case 1:n=fp;break;case 4:n=K_;break;case 16:n=Ic;break;case 536870912:n=Q_;break;default:n=Ic}n=wx(n,fx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function fx(t,e){if(oc=-1,ac=0,de&6)throw Error(U(327));var n=t.callbackNode;if(wi()&&t.callbackNode!==n)return null;var r=Tc(t,t===Ze?it:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=$c(t,r);else{e=r;var s=de;de|=2;var i=mx();(Ze!==t||it!==e)&&(Ln=null,Oi=Pe()+500,Is(t,e));do try{Ab();break}catch(l){px(t,l)}while(!0);Sp(),Fc.current=i,de=s,Ve!==null?e=0:(Ze=null,it=0,e=We)}if(e!==0){if(e===2&&(s=qh(t),s!==0&&(r=s,e=xf(t,s))),e===1)throw n=Aa,Is(t,0),_r(t,r),Dt(t,Pe()),n;if(e===6)_r(t,r);else{if(s=t.current.alternate,!(r&30)&&!kb(s)&&(e=$c(t,r),e===2&&(i=qh(t),i!==0&&(r=i,e=xf(t,i))),e===1))throw n=Aa,Is(t,0),_r(t,r),Dt(t,Pe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:gs(t,Rt,Ln);break;case 3:if(_r(t,r),(r&130023424)===r&&(e=zp+500-Pe(),10<e)){if(Tc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){wt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ef(gs.bind(null,t,Rt,Ln),e);break}gs(t,Rt,Ln);break;case 4:if(_r(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-hn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Pe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Rb(r/1960))-r,10<r){t.timeoutHandle=ef(gs.bind(null,t,Rt,Ln),r);break}gs(t,Rt,Ln);break;case 5:gs(t,Rt,Ln);break;default:throw Error(U(329))}}}return Dt(t,Pe()),t.callbackNode===n?fx.bind(null,t):null}function xf(t,e){var n=ea;return t.current.memoizedState.isDehydrated&&(Is(t,e).flags|=256),t=$c(t,e),t!==2&&(e=Rt,Rt=n,e!==null&&Ef(e)),t}function Ef(t){Rt===null?Rt=t:Rt.push.apply(Rt,t)}function kb(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!mn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _r(t,e){for(e&=~Up,e&=~ku,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-hn(e),r=1<<n;t[n]=-1,e&=~r}}function Ky(t){if(de&6)throw Error(U(327));wi();var e=Tc(t,0);if(!(e&1))return Dt(t,Pe()),null;var n=$c(t,e);if(t.tag!==0&&n===2){var r=qh(t);r!==0&&(e=r,n=xf(t,r))}if(n===1)throw n=Aa,Is(t,0),_r(t,e),Dt(t,Pe()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,gs(t,Rt,Ln),Dt(t,Pe()),null}function $p(t,e){var n=de;de|=1;try{return t(e)}finally{de=n,de===0&&(Oi=Pe()+500,bu&&ns())}}function Ps(t){Tr!==null&&Tr.tag===0&&!(de&6)&&wi();var e=de;de|=1;var n=Yt.transition,r=pe;try{if(Yt.transition=null,pe=1,t)return t()}finally{pe=r,Yt.transition=n,de=e,!(de&6)&&ns()}}function Bp(){Vt=hi.current,Ee(hi)}function Is(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ib(n)),Ve!==null)for(n=Ve.return;n!==null;){var r=n;switch(Ip(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kc();break;case 3:Di(),Ee(At),Ee(mt),Pp();break;case 5:Ap(r);break;case 4:Di();break;case 13:Ee(Te);break;case 19:Ee(Te);break;case 10:Np(r.type._context);break;case 22:case 23:Bp()}n=n.return}if(Ze=t,Ve=t=Or(t.current,null),it=Vt=e,We=0,Aa=null,Up=ku=As=0,Rt=ea=null,ws!==null){for(e=0;e<ws.length;e++)if(n=ws[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ws=null}return t}function px(t,e){do{var n=Ve;try{if(Sp(),rc.current=Mc,Vc){for(var r=be.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Vc=!1}if(Cs=0,Ye=$e=be=null,Xo=!1,Ra=0,Fp.current=null,n===null||n.return===null){We=1,Aa=e,Ve=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=it,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var w=Oy(o);if(w!==null){w.flags&=-257,Ly(w,o,l,i,e),w.mode&1&&jy(i,d,e),e=w,c=d;var R=e.updateQueue;if(R===null){var C=new Set;C.add(c),e.updateQueue=C}else R.add(c);break e}else{if(!(e&1)){jy(i,d,e),Wp();break e}c=Error(U(426))}}else if(Ie&&l.mode&1){var P=Oy(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),Ly(P,o,l,i,e),Tp(ji(c,l));break e}}i=c=ji(c,l),We!==4&&(We=2),ea===null?ea=[i]:ea.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var I=Jw(i,c,e);Ry(i,I);break e;case 1:l=c;var _=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Dr===null||!Dr.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var N=Xw(i,l,e);Ry(i,N);break e}}i=i.return}while(i!==null)}yx(n)}catch(A){e=A,Ve===n&&n!==null&&(Ve=n=n.return);continue}break}while(!0)}function mx(){var t=Fc.current;return Fc.current=Mc,t===null?Mc:t}function Wp(){(We===0||We===3||We===2)&&(We=4),Ze===null||!(As&268435455)&&!(ku&268435455)||_r(Ze,it)}function $c(t,e){var n=de;de|=2;var r=mx();(Ze!==t||it!==e)&&(Ln=null,Is(t,e));do try{Cb();break}catch(s){px(t,s)}while(!0);if(Sp(),de=n,Fc.current=r,Ve!==null)throw Error(U(261));return Ze=null,it=0,We}function Cb(){for(;Ve!==null;)gx(Ve)}function Ab(){for(;Ve!==null&&!n2();)gx(Ve)}function gx(t){var e=_x(t.alternate,t,Vt);t.memoizedProps=t.pendingProps,e===null?yx(t):Ve=e,Fp.current=null}function yx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Tb(n,e),n!==null){n.flags&=32767,Ve=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{We=6,Ve=null;return}}else if(n=Ib(n,e,Vt),n!==null){Ve=n;return}if(e=e.sibling,e!==null){Ve=e;return}Ve=e=t}while(e!==null);We===0&&(We=5)}function gs(t,e,n){var r=pe,s=Yt.transition;try{Yt.transition=null,pe=1,Pb(t,e,n,r)}finally{Yt.transition=s,pe=r}return null}function Pb(t,e,n,r){do wi();while(Tr!==null);if(de&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(h2(t,i),t===Ze&&(Ve=Ze=null,it=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$l||($l=!0,wx(Ic,function(){return wi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Yt.transition,Yt.transition=null;var o=pe;pe=1;var l=de;de|=4,Fp.current=null,Sb(t,n),dx(n,t),X2(Xh),bc=!!Jh,Xh=Jh=null,t.current=n,Nb(n),r2(),de=l,pe=o,Yt.transition=i}else t.current=n;if($l&&($l=!1,Tr=t,zc=s),i=t.pendingLanes,i===0&&(Dr=null),o2(n.stateNode),Dt(t,Pe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Uc)throw Uc=!1,t=_f,_f=null,t;return zc&1&&t.tag!==0&&wi(),i=t.pendingLanes,i&1?t===wf?ta++:(ta=0,wf=t):ta=0,ns(),null}function wi(){if(Tr!==null){var t=J_(zc),e=Yt.transition,n=pe;try{if(Yt.transition=null,pe=16>t?16:t,Tr===null)var r=!1;else{if(t=Tr,Tr=null,zc=0,de&6)throw Error(U(331));var s=de;for(de|=4,q=t.current;q!==null;){var i=q,o=i.child;if(q.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(q=d;q!==null;){var h=q;switch(h.tag){case 0:case 11:case 15:Zo(8,h,i)}var p=h.child;if(p!==null)p.return=h,q=p;else for(;q!==null;){h=q;var m=h.sibling,w=h.return;if(lx(h),h===d){q=null;break}if(m!==null){m.return=w,q=m;break}q=w}}}var R=i.alternate;if(R!==null){var C=R.child;if(C!==null){R.child=null;do{var P=C.sibling;C.sibling=null,C=P}while(C!==null)}}q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,q=o;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Zo(9,i,i.return)}var I=i.sibling;if(I!==null){I.return=i.return,q=I;break e}q=i.return}}var _=t.current;for(q=_;q!==null;){o=q;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,q=T;else e:for(o=_;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ru(9,l)}}catch(A){ke(l,l.return,A)}if(l===o){q=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,q=N;break e}q=l.return}}if(de=s,ns(),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(wu,t)}catch{}r=!0}return r}finally{pe=n,Yt.transition=e}}return!1}function Qy(t,e,n){e=ji(n,e),e=Jw(t,e,1),t=Pr(t,e,1),e=wt(),t!==null&&(Ga(t,1,e),Dt(t,e))}function ke(t,e,n){if(t.tag===3)Qy(t,t,n);else for(;e!==null;){if(e.tag===3){Qy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Dr===null||!Dr.has(r))){t=ji(n,t),t=Xw(e,t,1),e=Pr(e,t,1),t=wt(),e!==null&&(Ga(e,1,t),Dt(e,t));break}}e=e.return}}function Db(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=wt(),t.pingedLanes|=t.suspendedLanes&n,Ze===t&&(it&n)===n&&(We===4||We===3&&(it&130023424)===it&&500>Pe()-zp?Is(t,0):Up|=n),Dt(t,e)}function vx(t,e){e===0&&(t.mode&1?(e=Pl,Pl<<=1,!(Pl&130023424)&&(Pl=4194304)):e=1);var n=wt();t=Kn(t,e),t!==null&&(Ga(t,e,n),Dt(t,n))}function jb(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),vx(t,n)}function Ob(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),vx(t,n)}var _x;_x=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||At.current)Ct=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ct=!1,Eb(t,e,n);Ct=!!(t.flags&131072)}else Ct=!1,Ie&&e.flags&1048576&&Iw(e,Pc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ic(t,e),t=e.pendingProps;var s=Ci(e,mt.current);_i(e,n),s=jp(null,e,r,t,s,n);var i=Op();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pt(r)?(i=!0,Cc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,kp(e),s.updater=Nu,e.stateNode=s,s._reactInternals=e,lf(e,r,t,n),e=df(null,e,r,!0,i,n)):(e.tag=0,Ie&&i&&Ep(e),_t(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ic(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Vb(r),t=sn(r,t),s){case 0:e=uf(null,e,r,t,n);break e;case 1:e=Fy(null,e,r,t,n);break e;case 11:e=Vy(null,e,r,t,n);break e;case 14:e=My(null,e,r,sn(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:sn(r,s),uf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:sn(r,s),Fy(t,e,r,s,n);case 3:e:{if(nx(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,kw(t,e),Oc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ji(Error(U(423)),e),e=Uy(t,e,r,n,s);break e}else if(r!==s){s=ji(Error(U(424)),e),e=Uy(t,e,r,n,s);break e}else for(Ft=Ar(e.stateNode.containerInfo.firstChild),zt=e,Ie=!0,an=null,n=Nw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ai(),r===s){e=Qn(t,e,n);break e}_t(t,e,r,n)}e=e.child}return e;case 5:return Cw(e),t===null&&sf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Zh(r,s)?o=null:i!==null&&Zh(r,i)&&(e.flags|=32),tx(t,e),_t(t,e,o,n),e.child;case 6:return t===null&&sf(e),null;case 13:return rx(t,e,n);case 4:return Cp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Pi(e,null,r,n):_t(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:sn(r,s),Vy(t,e,r,s,n);case 7:return _t(t,e,e.pendingProps,n),e.child;case 8:return _t(t,e,e.pendingProps.children,n),e.child;case 12:return _t(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,_e(Dc,r._currentValue),r._currentValue=o,i!==null)if(mn(i.value,o)){if(i.children===s.children&&!At.current){e=Qn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Wn(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),of(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),of(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}_t(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,_i(e,n),s=Zt(s),r=r(s),e.flags|=1,_t(t,e,r,n),e.child;case 14:return r=e.type,s=sn(r,e.pendingProps),s=sn(r.type,s),My(t,e,r,s,n);case 15:return Zw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:sn(r,s),ic(t,e),e.tag=1,Pt(r)?(t=!0,Cc(e)):t=!1,_i(e,n),Yw(e,r,s),lf(e,r,s,n),df(null,e,r,!0,t,n);case 19:return sx(t,e,n);case 22:return ex(t,e,n)}throw Error(U(156,e.tag))};function wx(t,e){return G_(t,e)}function Lb(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(t,e,n,r){return new Lb(t,e,n,r)}function Hp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Vb(t){if(typeof t=="function")return Hp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===up)return 11;if(t===dp)return 14}return 2}function Or(t,e){var n=t.alternate;return n===null?(n=Kt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function lc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Hp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ni:return Ts(n.children,s,i,e);case cp:o=8,s|=8;break;case Ah:return t=Kt(12,n,e,s|2),t.elementType=Ah,t.lanes=i,t;case Ph:return t=Kt(13,n,e,s),t.elementType=Ph,t.lanes=i,t;case Dh:return t=Kt(19,n,e,s),t.elementType=Dh,t.lanes=i,t;case C_:return Cu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case R_:o=10;break e;case k_:o=9;break e;case up:o=11;break e;case dp:o=14;break e;case gr:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Kt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ts(t,e,n,r){return t=Kt(7,t,r,e),t.lanes=n,t}function Cu(t,e,n,r){return t=Kt(22,t,r,e),t.elementType=C_,t.lanes=n,t.stateNode={isHidden:!1},t}function ih(t,e,n){return t=Kt(6,t,null,e),t.lanes=n,t}function oh(t,e,n){return e=Kt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Mb(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ud(0),this.expirationTimes=Ud(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ud(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function qp(t,e,n,r,s,i,o,l,c){return t=new Mb(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Kt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},kp(i),t}function Fb(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ti,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function xx(t){if(!t)return Hr;t=t._reactInternals;e:{if(zs(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Pt(n))return xw(t,n,e)}return e}function Ex(t,e,n,r,s,i,o,l,c){return t=qp(n,r,!0,t,s,i,o,l,c),t.context=xx(null),n=t.current,r=wt(),s=jr(n),i=Wn(r,s),i.callback=e??null,Pr(n,i,s),t.current.lanes=s,Ga(t,s,r),Dt(t,r),t}function Au(t,e,n,r){var s=e.current,i=wt(),o=jr(s);return n=xx(n),e.context===null?e.context=n:e.pendingContext=n,e=Wn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Pr(s,e,o),t!==null&&(fn(t,s,o,i),nc(t,s,o)),o}function Bc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Yy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Gp(t,e){Yy(t,e),(t=t.alternate)&&Yy(t,e)}function Ub(){return null}var Ix=typeof reportError=="function"?reportError:function(t){console.error(t)};function Kp(t){this._internalRoot=t}Pu.prototype.render=Kp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Au(t,e,null,null)};Pu.prototype.unmount=Kp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ps(function(){Au(null,t,null,null)}),e[Gn]=null}};function Pu(t){this._internalRoot=t}Pu.prototype.unstable_scheduleHydration=function(t){if(t){var e=ew();t={blockedOn:null,target:t,priority:e};for(var n=0;n<vr.length&&e!==0&&e<vr[n].priority;n++);vr.splice(n,0,t),n===0&&nw(t)}};function Qp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Du(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Jy(){}function zb(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Bc(o);i.call(d)}}var o=Ex(e,r,t,0,null,!1,!1,"",Jy);return t._reactRootContainer=o,t[Gn]=o.current,Ia(t.nodeType===8?t.parentNode:t),Ps(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Bc(c);l.call(d)}}var c=qp(t,0,!1,null,null,!1,!1,"",Jy);return t._reactRootContainer=c,t[Gn]=c.current,Ia(t.nodeType===8?t.parentNode:t),Ps(function(){Au(e,c,n,r)}),c}function ju(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Bc(o);l.call(c)}}Au(e,o,t,s)}else o=zb(n,e,t,s,r);return Bc(o)}X_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Fo(e.pendingLanes);n!==0&&(pp(e,n|1),Dt(e,Pe()),!(de&6)&&(Oi=Pe()+500,ns()))}break;case 13:Ps(function(){var r=Kn(t,1);if(r!==null){var s=wt();fn(r,t,1,s)}}),Gp(t,1)}};mp=function(t){if(t.tag===13){var e=Kn(t,134217728);if(e!==null){var n=wt();fn(e,t,134217728,n)}Gp(t,134217728)}};Z_=function(t){if(t.tag===13){var e=jr(t),n=Kn(t,e);if(n!==null){var r=wt();fn(n,t,e,r)}Gp(t,e)}};ew=function(){return pe};tw=function(t,e){var n=pe;try{return pe=t,e()}finally{pe=n}};Bh=function(t,e,n){switch(e){case"input":if(Lh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Tu(r);if(!s)throw Error(U(90));P_(r),Lh(r,s)}}}break;case"textarea":j_(t,n);break;case"select":e=n.value,e!=null&&mi(t,!!n.multiple,e,!1)}};z_=$p;$_=Ps;var $b={usingClientEntryPoint:!1,Events:[Qa,oi,Tu,F_,U_,$p]},jo={findFiberByHostInstance:_s,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Bb={bundleType:jo.bundleType,version:jo.version,rendererPackageName:jo.rendererPackageName,rendererConfig:jo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=H_(t),t===null?null:t.stateNode},findFiberByHostInstance:jo.findFiberByHostInstance||Ub,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bl.isDisabled&&Bl.supportsFiber)try{wu=Bl.inject(Bb),bn=Bl}catch{}}Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$b;Bt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qp(e))throw Error(U(200));return Fb(t,e,null,n)};Bt.createRoot=function(t,e){if(!Qp(t))throw Error(U(299));var n=!1,r="",s=Ix;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=qp(t,1,!1,null,null,n,!1,r,s),t[Gn]=e.current,Ia(t.nodeType===8?t.parentNode:t),new Kp(e)};Bt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=H_(e),t=t===null?null:t.stateNode,t};Bt.flushSync=function(t){return Ps(t)};Bt.hydrate=function(t,e,n){if(!Du(e))throw Error(U(200));return ju(null,t,e,!0,n)};Bt.hydrateRoot=function(t,e,n){if(!Qp(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Ix;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Ex(e,null,t,1,n??null,s,!1,i,o),t[Gn]=e.current,Ia(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Pu(e)};Bt.render=function(t,e,n){if(!Du(e))throw Error(U(200));return ju(null,t,e,!1,n)};Bt.unmountComponentAtNode=function(t){if(!Du(t))throw Error(U(40));return t._reactRootContainer?(Ps(function(){ju(null,null,t,!1,function(){t._reactRootContainer=null,t[Gn]=null})}),!0):!1};Bt.unstable_batchedUpdates=$p;Bt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Du(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return ju(t,e,n,!1,r)};Bt.version="18.3.1-next-f1338f8080-20240426";function Tx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Tx)}catch(t){console.error(t)}}Tx(),T_.exports=Bt;var Wb=T_.exports,Xy=Wb;kh.createRoot=Xy.createRoot,kh.hydrateRoot=Xy.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pa(){return Pa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pa.apply(this,arguments)}var br;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(br||(br={}));const Zy="popstate";function Hb(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return If("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Wc(s)}return Gb(e,n,null,t)}function je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Yp(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qb(){return Math.random().toString(36).substr(2,8)}function e0(t,e){return{usr:t.state,key:t.key,idx:e}}function If(t,e,n,r){return n===void 0&&(n=null),Pa({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ki(e):e,{state:n,key:e&&e.key||r||qb()})}function Wc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ki(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Gb(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=br.Pop,c=null,d=h();d==null&&(d=0,o.replaceState(Pa({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function p(){l=br.Pop;let P=h(),I=P==null?null:P-d;d=P,c&&c({action:l,location:C.location,delta:I})}function m(P,I){l=br.Push;let _=If(C.location,P,I);d=h()+1;let T=e0(_,d),N=C.createHref(_);try{o.pushState(T,"",N)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;s.location.assign(N)}i&&c&&c({action:l,location:C.location,delta:1})}function w(P,I){l=br.Replace;let _=If(C.location,P,I);d=h();let T=e0(_,d),N=C.createHref(_);o.replaceState(T,"",N),i&&c&&c({action:l,location:C.location,delta:0})}function R(P){let I=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof P=="string"?P:Wc(P);return _=_.replace(/ $/,"%20"),je(I,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,I)}let C={get action(){return l},get location(){return t(s,o)},listen(P){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Zy,p),c=P,()=>{s.removeEventListener(Zy,p),c=null}},createHref(P){return e(s,P)},createURL:R,encodeLocation(P){let I=R(P);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:m,replace:w,go(P){return o.go(P)}};return C}var t0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(t0||(t0={}));function Kb(t,e,n){return n===void 0&&(n="/"),Qb(t,e,n)}function Qb(t,e,n,r){let s=typeof e=="string"?Ki(e):e,i=Jp(s.pathname||"/",n);if(i==null)return null;let o=bx(t);Yb(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=lS(i);l=iS(o[c],d)}return l}function bx(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(je(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Lr([r,c.relativePath]),h=n.concat(c);i.children&&i.children.length>0&&(je(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),bx(i.children,e,h,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:rS(d,i.index),routesMeta:h})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of Sx(i.path))s(i,o,c)}),e}function Sx(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Sx(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function Yb(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:sS(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Jb=/^:[\w-]+$/,Xb=3,Zb=2,eS=1,tS=10,nS=-2,n0=t=>t==="*";function rS(t,e){let n=t.split("/"),r=n.length;return n.some(n0)&&(r+=nS),e&&(r+=Zb),n.filter(s=>!n0(s)).reduce((s,i)=>s+(Jb.test(i)?Xb:i===""?eS:tS),r)}function sS(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function iS(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",p=oS({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),m=c.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:Lr([i,p.pathname]),pathnameBase:fS(Lr([i,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(i=Lr([i,p.pathnameBase]))}return o}function oS(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=aS(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,h,p)=>{let{paramName:m,isOptional:w}=h;if(m==="*"){let C=l[p]||"";o=i.slice(0,i.length-C.length).replace(/(.)\/+$/,"$1")}const R=l[p];return w&&!R?d[m]=void 0:d[m]=(R||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function aS(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Yp(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function lS(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yp(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Jp(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const cS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uS=t=>cS.test(t);function dS(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ki(t):t,i;if(n)if(uS(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Yp(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=r0(n.substring(1),"/"):i=r0(n,e)}else i=e;return{pathname:i,search:pS(r),hash:mS(s)}}function r0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function ah(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function hS(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Xp(t,e){let n=hS(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Zp(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ki(t):(s=Pa({},t),je(!s.pathname||!s.pathname.includes("?"),ah("?","pathname","search",s)),je(!s.pathname||!s.pathname.includes("#"),ah("#","pathname","hash",s)),je(!s.search||!s.search.includes("#"),ah("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;s.pathname=m.join("/")}l=p>=0?e[p]:"/"}let c=dS(s,l),d=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const Lr=t=>t.join("/").replace(/\/\/+/g,"/"),fS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),pS=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,mS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function gS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Nx=["post","put","patch","delete"];new Set(Nx);const yS=["get",...Nx];new Set(yS);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Da(){return Da=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Da.apply(this,arguments)}const em=V.createContext(null),vS=V.createContext(null),rs=V.createContext(null),Ou=V.createContext(null),rr=V.createContext({outlet:null,matches:[],isDataRoute:!1}),Rx=V.createContext(null);function _S(t,e){let{relative:n}=e===void 0?{}:e;Qi()||je(!1);let{basename:r,navigator:s}=V.useContext(rs),{hash:i,pathname:o,search:l}=Ax(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Lr([r,o])),s.createHref({pathname:c,search:l,hash:i})}function Qi(){return V.useContext(Ou)!=null}function Yi(){return Qi()||je(!1),V.useContext(Ou).location}function kx(t){V.useContext(rs).static||V.useLayoutEffect(t)}function Cx(){let{isDataRoute:t}=V.useContext(rr);return t?DS():wS()}function wS(){Qi()||je(!1);let t=V.useContext(em),{basename:e,future:n,navigator:r}=V.useContext(rs),{matches:s}=V.useContext(rr),{pathname:i}=Yi(),o=JSON.stringify(Xp(s,n.v7_relativeSplatPath)),l=V.useRef(!1);return kx(()=>{l.current=!0}),V.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let p=Zp(d,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Lr([e,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[e,r,o,i,t])}function xS(){let{matches:t}=V.useContext(rr),e=t[t.length-1];return e?e.params:{}}function Ax(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=V.useContext(rs),{matches:s}=V.useContext(rr),{pathname:i}=Yi(),o=JSON.stringify(Xp(s,r.v7_relativeSplatPath));return V.useMemo(()=>Zp(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function ES(t,e){return IS(t,e)}function IS(t,e,n,r){Qi()||je(!1);let{navigator:s}=V.useContext(rs),{matches:i}=V.useContext(rr),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Yi(),h;if(e){var p;let P=typeof e=="string"?Ki(e):e;c==="/"||(p=P.pathname)!=null&&p.startsWith(c)||je(!1),h=P}else h=d;let m=h.pathname||"/",w=m;if(c!=="/"){let P=c.replace(/^\//,"").split("/");w="/"+m.replace(/^\//,"").split("/").slice(P.length).join("/")}let R=Kb(t,{pathname:w}),C=RS(R&&R.map(P=>Object.assign({},P,{params:Object.assign({},l,P.params),pathname:Lr([c,s.encodeLocation?s.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?c:Lr([c,s.encodeLocation?s.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),i,n,r);return e&&C?V.createElement(Ou.Provider,{value:{location:Da({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:br.Pop}},C):C}function TS(){let t=PS(),e=gS(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),n?V.createElement("pre",{style:s},n):null,null)}const bS=V.createElement(TS,null);class SS extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?V.createElement(rr.Provider,{value:this.props.routeContext},V.createElement(Rx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function NS(t){let{routeContext:e,match:n,children:r}=t,s=V.useContext(em);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),V.createElement(rr.Provider,{value:e},r)}function RS(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let h=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);h>=0||je(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=h),p.route.id){let{loaderData:m,errors:w}=n,R=p.route.loader&&m[p.route.id]===void 0&&(!w||w[p.route.id]===void 0);if(p.route.lazy||R){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,p,m)=>{let w,R=!1,C=null,P=null;n&&(w=l&&p.route.id?l[p.route.id]:void 0,C=p.route.errorElement||bS,c&&(d<0&&m===0?(jS("route-fallback"),R=!0,P=null):d===m&&(R=!0,P=p.route.hydrateFallbackElement||null)));let I=e.concat(o.slice(0,m+1)),_=()=>{let T;return w?T=C:R?T=P:p.route.Component?T=V.createElement(p.route.Component,null):p.route.element?T=p.route.element:T=h,V.createElement(NS,{match:p,routeContext:{outlet:h,matches:I,isDataRoute:n!=null},children:T})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?V.createElement(SS,{location:n.location,revalidation:n.revalidation,component:C,error:w,children:_(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):_()},null)}var Px=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Px||{}),Dx=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Dx||{});function kS(t){let e=V.useContext(em);return e||je(!1),e}function CS(t){let e=V.useContext(vS);return e||je(!1),e}function AS(t){let e=V.useContext(rr);return e||je(!1),e}function jx(t){let e=AS(),n=e.matches[e.matches.length-1];return n.route.id||je(!1),n.route.id}function PS(){var t;let e=V.useContext(Rx),n=CS(),r=jx();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function DS(){let{router:t}=kS(Px.UseNavigateStable),e=jx(Dx.UseNavigateStable),n=V.useRef(!1);return kx(()=>{n.current=!0}),V.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Da({fromRouteId:e},i)))},[t,e])}const s0={};function jS(t,e,n){s0[t]||(s0[t]=!0)}function OS(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Ox(t){let{to:e,replace:n,state:r,relative:s}=t;Qi()||je(!1);let{future:i,static:o}=V.useContext(rs),{matches:l}=V.useContext(rr),{pathname:c}=Yi(),d=Cx(),h=Zp(e,Xp(l,i.v7_relativeSplatPath),c,s==="path"),p=JSON.stringify(h);return V.useEffect(()=>d(JSON.parse(p),{replace:n,state:r,relative:s}),[d,p,s,n,r]),null}function wn(t){je(!1)}function LS(t){let{basename:e="/",children:n=null,location:r,navigationType:s=br.Pop,navigator:i,static:o=!1,future:l}=t;Qi()&&je(!1);let c=e.replace(/^\/*/,"/"),d=V.useMemo(()=>({basename:c,navigator:i,static:o,future:Da({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=Ki(r));let{pathname:h="/",search:p="",hash:m="",state:w=null,key:R="default"}=r,C=V.useMemo(()=>{let P=Jp(h,c);return P==null?null:{location:{pathname:P,search:p,hash:m,state:w,key:R},navigationType:s}},[c,h,p,m,w,R,s]);return C==null?null:V.createElement(rs.Provider,{value:d},V.createElement(Ou.Provider,{children:n,value:C}))}function VS(t){let{children:e,location:n}=t;return ES(Tf(e),n)}new Promise(()=>{});function Tf(t,e){e===void 0&&(e=[]);let n=[];return V.Children.forEach(t,(r,s)=>{if(!V.isValidElement(r))return;let i=[...e,s];if(r.type===V.Fragment){n.push.apply(n,Tf(r.props.children,i));return}r.type!==wn&&je(!1),!r.props.index||!r.props.children||je(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Tf(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bf(){return bf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bf.apply(this,arguments)}function MS(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function FS(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function US(t,e){return t.button===0&&(!e||e==="_self")&&!FS(t)}const zS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],$S="6";try{window.__reactRouterVersion=$S}catch{}const BS="startTransition",i0=DT[BS];function WS(t){let{basename:e,children:n,future:r,window:s}=t,i=V.useRef();i.current==null&&(i.current=Hb({window:s,v5Compat:!0}));let o=i.current,[l,c]=V.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},h=V.useCallback(p=>{d&&i0?i0(()=>c(p)):c(p)},[c,d]);return V.useLayoutEffect(()=>o.listen(h),[o,h]),V.useEffect(()=>OS(r),[r]),V.createElement(LS,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const HS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Lx=V.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:h,viewTransition:p}=e,m=MS(e,zS),{basename:w}=V.useContext(rs),R,C=!1;if(typeof d=="string"&&qS.test(d)&&(R=d,HS))try{let T=new URL(window.location.href),N=d.startsWith("//")?new URL(T.protocol+d):new URL(d),A=Jp(N.pathname,w);N.origin===T.origin&&A!=null?d=A+N.search+N.hash:C=!0}catch{}let P=_S(d,{relative:s}),I=GS(d,{replace:o,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:p});function _(T){r&&r(T),T.defaultPrevented||I(T)}return V.createElement("a",bf({},m,{href:R||P,onClick:C||i?r:_,ref:n,target:c}))});var o0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(o0||(o0={}));var a0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(a0||(a0={}));function GS(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,c=Cx(),d=Yi(),h=Ax(t,{relative:o});return V.useCallback(p=>{if(US(p,n)){p.preventDefault();let m=r!==void 0?r:Wc(d)===Wc(h);c(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,h,r,s,n,t,i,o,l])}const KS=()=>{};var l0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},QS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Mx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,h=i>>2,p=(i&3)<<4|l>>4;let m=(l&15)<<2|d>>6,w=d&63;c||(w=64,o||(m=64)),r.push(n[h],n[p],n[m],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Vx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):QS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||p==null)throw new YS;const m=i<<2|l>>4;if(r.push(m),d!==64){const w=l<<4&240|d>>2;if(r.push(w),p!==64){const R=d<<6&192|p;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class YS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JS=function(t){const e=Vx(t);return Mx.encodeByteArray(e,!0)},Hc=function(t){return JS(t).replace(/\./g,"")},Fx=function(t){try{return Mx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS=()=>XS().__FIREBASE_DEFAULTS__,eN=()=>{if(typeof process>"u"||typeof l0>"u")return;const t=l0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},tN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Fx(t[1]);return e&&JSON.parse(e)},Lu=()=>{try{return KS()||ZS()||eN()||tN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ux=t=>{var e,n;return(n=(e=Lu())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},zx=t=>{const e=Ux(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},$x=()=>{var t;return(t=Lu())==null?void 0:t.config},Bx=t=>{var e;return(e=Lu())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function tm(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Hc(JSON.stringify(n)),Hc(JSON.stringify(o)),""].join(".")}const na={};function rN(){const t={prod:[],emulator:[]};for(const e of Object.keys(na))na[e]?t.emulator.push(e):t.prod.push(e);return t}function sN(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let c0=!1;function nm(t,e){if(typeof window>"u"||typeof document>"u"||!$s(window.location.host)||na[t]===e||na[t]||c0)return;na[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=rN().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,w){m.setAttribute("width","24"),m.setAttribute("id",w),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{c0=!0,o()},m}function h(m,w){m.setAttribute("id",w),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=sN(r),w=n("text"),R=document.getElementById(w)||document.createElement("span"),C=n("learnmore"),P=document.getElementById(C)||document.createElement("a"),I=n("preprendIcon"),_=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const T=m.element;l(T),h(P,C);const N=d();c(_,I),T.append(_,R,P,N),document.body.appendChild(T)}i?(R.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gt())}function oN(){var e;const t=(e=Lu())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function cN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uN(){const t=gt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function dN(){return!oN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hN(){try{return typeof indexedDB=="object"}catch{return!1}}function fN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN="FirebaseError";class jn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=pN,Object.setPrototypeOf(this,jn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ja.prototype.create)}}class Ja{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?mN(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new jn(s,l,r)}}function mN(t,e){return t.replace(gN,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const gN=/\{\$([^}]+)}/g;function yN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ds(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(u0(i)&&u0(o)){if(!Ds(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function u0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ji(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function zo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function $o(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function vN(t,e){const n=new _N(t,e);return n.subscribe.bind(n)}class _N{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");wN(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=lh),s.error===void 0&&(s.error=lh),s.complete===void 0&&(s.complete=lh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function lh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(t){return t&&t._delegate?t._delegate:t}class qr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new nN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IN(e))try{this.getOrInitializeService({instanceIdentifier:ys})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ys){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ys){return this.instances.has(e)}getOptions(e=ys){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:EN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ys){return this.component?this.component.multipleInstances?e:ys:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function EN(t){return t===ys?void 0:t}function IN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new xN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const bN={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},SN=ae.INFO,NN={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},RN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=NN[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rm{constructor(e){this.name=e,this._logLevel=SN,this._logHandler=RN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const kN=(t,e)=>e.some(n=>t instanceof n);let d0,h0;function CN(){return d0||(d0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AN(){return h0||(h0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Hx=new WeakMap,Sf=new WeakMap,qx=new WeakMap,ch=new WeakMap,sm=new WeakMap;function PN(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Vr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Hx.set(n,t)}).catch(()=>{}),sm.set(e,t),e}function DN(t){if(Sf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Sf.set(t,e)}let Nf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Sf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function jN(t){Nf=t(Nf)}function ON(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(uh(this),e,...n);return qx.set(r,e.sort?e.sort():[e]),Vr(r)}:AN().includes(t)?function(...e){return t.apply(uh(this),e),Vr(Hx.get(this))}:function(...e){return Vr(t.apply(uh(this),e))}}function LN(t){return typeof t=="function"?ON(t):(t instanceof IDBTransaction&&DN(t),kN(t,CN())?new Proxy(t,Nf):t)}function Vr(t){if(t instanceof IDBRequest)return PN(t);if(ch.has(t))return ch.get(t);const e=LN(t);return e!==t&&(ch.set(t,e),sm.set(e,t)),e}const uh=t=>sm.get(t);function VN(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Vr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Vr(o.result),c.oldVersion,c.newVersion,Vr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const MN=["get","getKey","getAll","getAllKeys","count"],FN=["put","add","delete","clear"],dh=new Map;function f0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(dh.get(e))return dh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=FN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||MN.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&c.done]))[0]};return dh.set(e,i),i}jN(t=>({...t,get:(e,n,r)=>f0(e,n)||t.get(e,n,r),has:(e,n)=>!!f0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(zN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function zN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Rf="@firebase/app",p0="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yn=new rm("@firebase/app"),$N="@firebase/app-compat",BN="@firebase/analytics-compat",WN="@firebase/analytics",HN="@firebase/app-check-compat",qN="@firebase/app-check",GN="@firebase/auth",KN="@firebase/auth-compat",QN="@firebase/database",YN="@firebase/data-connect",JN="@firebase/database-compat",XN="@firebase/functions",ZN="@firebase/functions-compat",eR="@firebase/installations",tR="@firebase/installations-compat",nR="@firebase/messaging",rR="@firebase/messaging-compat",sR="@firebase/performance",iR="@firebase/performance-compat",oR="@firebase/remote-config",aR="@firebase/remote-config-compat",lR="@firebase/storage",cR="@firebase/storage-compat",uR="@firebase/firestore",dR="@firebase/ai",hR="@firebase/firestore-compat",fR="firebase",pR="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf="[DEFAULT]",mR={[Rf]:"fire-core",[$N]:"fire-core-compat",[WN]:"fire-analytics",[BN]:"fire-analytics-compat",[qN]:"fire-app-check",[HN]:"fire-app-check-compat",[GN]:"fire-auth",[KN]:"fire-auth-compat",[QN]:"fire-rtdb",[YN]:"fire-data-connect",[JN]:"fire-rtdb-compat",[XN]:"fire-fn",[ZN]:"fire-fn-compat",[eR]:"fire-iid",[tR]:"fire-iid-compat",[nR]:"fire-fcm",[rR]:"fire-fcm-compat",[sR]:"fire-perf",[iR]:"fire-perf-compat",[oR]:"fire-rc",[aR]:"fire-rc-compat",[lR]:"fire-gcs",[cR]:"fire-gcs-compat",[uR]:"fire-fst",[hR]:"fire-fst-compat",[dR]:"fire-vertex","fire-js":"fire-js",[fR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc=new Map,gR=new Map,Cf=new Map;function m0(t,e){try{t.container.addComponent(e)}catch(n){Yn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function js(t){const e=t.name;if(Cf.has(e))return Yn.debug(`There were multiple attempts to register component ${e}.`),!1;Cf.set(e,t);for(const n of qc.values())m0(n,t);for(const n of gR.values())m0(n,t);return!0}function Vu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Me(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mr=new Ja("app","Firebase",yR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs=pR;function Gx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:kf,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Mr.create("bad-app-name",{appName:String(s)});if(n||(n=$x()),!n)throw Mr.create("no-options");const i=qc.get(s);if(i){if(Ds(n,i.options)&&Ds(r,i.config))return i;throw Mr.create("duplicate-app",{appName:s})}const o=new TN(s);for(const c of Cf.values())o.addComponent(c);const l=new vR(n,r,o);return qc.set(s,l),l}function im(t=kf){const e=qc.get(t);if(!e&&t===kf&&$x())return Gx();if(!e)throw Mr.create("no-app",{appName:t});return e}function Nn(t,e,n){let r=mR[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yn.warn(o.join(" "));return}js(new qr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R="firebase-heartbeat-database",wR=1,ja="firebase-heartbeat-store";let hh=null;function Kx(){return hh||(hh=VN(_R,wR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ja)}catch(n){console.warn(n)}}}}).catch(t=>{throw Mr.create("idb-open",{originalErrorMessage:t.message})})),hh}async function xR(t){try{const n=(await Kx()).transaction(ja),r=await n.objectStore(ja).get(Qx(t));return await n.done,r}catch(e){if(e instanceof jn)Yn.warn(e.message);else{const n=Mr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yn.warn(n.message)}}}async function g0(t,e){try{const r=(await Kx()).transaction(ja,"readwrite");await r.objectStore(ja).put(e,Qx(t)),await r.done}catch(n){if(n instanceof jn)Yn.warn(n.message);else{const r=Mr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Yn.warn(r.message)}}}function Qx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=1024,IR=30;class TR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new SR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=y0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>IR){const o=NR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Yn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=y0(),{heartbeatsToSend:r,unsentEntries:s}=bR(this._heartbeatsCache.heartbeats),i=Hc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Yn.warn(n),""}}}function y0(){return new Date().toISOString().substring(0,10)}function bR(t,e=ER){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),v0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),v0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class SR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hN()?fN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await xR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return g0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return g0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function v0(t){return Hc(JSON.stringify({version:2,heartbeats:t})).length}function NR(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(t){js(new qr("platform-logger",e=>new UN(e),"PRIVATE")),js(new qr("heartbeat",e=>new TR(e),"PRIVATE")),Nn(Rf,p0,t),Nn(Rf,p0,"esm2020"),Nn("fire-js","")}RR("");function Yx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kR=Yx,Jx=new Ja("auth","Firebase",Yx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc=new rm("@firebase/auth");function CR(t,...e){Gc.logLevel<=ae.WARN&&Gc.warn(`Auth (${Bs}): ${t}`,...e)}function cc(t,...e){Gc.logLevel<=ae.ERROR&&Gc.error(`Auth (${Bs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(t,...e){throw am(t,...e)}function jt(t,...e){return am(t,...e)}function om(t,e,n){const r={...kR(),[e]:n};return new Ja("auth","Firebase",r).create(e,{appName:t.name})}function xt(t){return om(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mu(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&tn(t,"argument-error"),om(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function am(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Jx.create(t,...e)}function B(t,e,...n){if(!t)throw am(e,...n)}function zn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw cc(e),new Error(e)}function Jn(t,e){t||zn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oa(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function lm(){return _0()==="http:"||_0()==="https:"}function _0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lm()||lN()||"connection"in navigator)?navigator.onLine:!0}function PR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,n){this.shortDelay=e,this.longDelay=n,Jn(n>e,"Short delay should be less than long delay!"),this.isMobile=iN()||cN()}get(){return AR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(t,e){Jn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],OR=new Xa(3e4,6e4);function qe(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ge(t,e,n,r,s={}){return Zx(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Ji({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...i};return aN()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&$s(t.emulatorConfig.host)&&(d.credentials="include"),Xx.fetch()(await e1(t,t.config.apiHost,n,l),d)})}async function Zx(t,e,n){t._canInitEmulator=!1;const r={...DR,...e};try{const s=new VR(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Bo(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bo(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Bo(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Bo(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw om(t,h,d);tn(t,h)}}catch(s){if(s instanceof jn)throw s;tn(t,"network-request-failed",{message:String(s)})}}async function sr(t,e,n,r,s={}){const i=await Ge(t,e,n,r,s);return"mfaPendingCredential"in i&&tn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function e1(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?cm(t.config,s):`${t.config.apiScheme}://${s}`;return jR.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function LR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class VR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(jt(this.auth,"network-request-failed")),OR.get())})}}function Bo(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=jt(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0(t){return t!==void 0&&t.getResponse!==void 0}function x0(t){return t!==void 0&&t.enterprise!==void 0}class t1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return LR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MR(t){return(await Ge(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function n1(t,e){return Ge(t,"GET","/v2/recaptchaConfig",qe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FR(t,e){return Ge(t,"POST","/v1/accounts:delete",e)}async function UR(t,e){return Ge(t,"POST","/v1/accounts:update",e)}async function Kc(t,e){return Ge(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function zR(t,e=!1){const n=re(t),r=await n.getIdToken(e),s=Fu(r);B(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ra(fh(s.auth_time)),issuedAtTime:ra(fh(s.iat)),expirationTime:ra(fh(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function fh(t){return Number(t)*1e3}function Fu(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return cc("JWT malformed, contained fewer than 3 sections"),null;try{const s=Fx(n);return s?JSON.parse(s):(cc("Failed to decode base64 JWT payload"),null)}catch(s){return cc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function E0(t){const e=Fu(t);return B(e,"internal-error"),B(typeof e.exp<"u","internal-error"),B(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Os(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof jn&&$R(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function $R({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ra(this.lastLoginAt),this.creationTime=ra(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function La(t){var p;const e=t.auth,n=await t.getIdToken(),r=await Os(t,Kc(e,{idToken:n}));B(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(p=s.providerUserInfo)!=null&&p.length?r1(s.providerUserInfo):[],o=HR(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Af(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function WR(t){const e=re(t);await La(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function HR(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function r1(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qR(t,e){const n=await Zx(t,{},async()=>{const r=Ji({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await e1(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&$s(t.emulatorConfig.host)&&(c.credentials="include"),Xx.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function GR(t,e){return Ge(t,"POST","/v2/accounts:revokeToken",qe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){B(e.idToken,"internal-error"),B(typeof e.idToken<"u","internal-error"),B(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):E0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){B(e.length!==0,"internal-error");const n=E0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(B(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await qR(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new xi;return r&&(B(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(B(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(B(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xi,this.toJSON())}_performRefresh(){return zn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(t,e){B(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class un{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new BR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Af(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Os(this,this.stsTokenManager.getToken(this.auth,e));return B(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return zR(this,e)}reload(){return WR(this)}_assign(e){this!==e&&(B(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new un({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await La(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Me(this.auth.app))return Promise.reject(xt(this.auth));const e=await this.getIdToken();return await Os(this,FR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:w,providerData:R,stsTokenManager:C}=n;B(p&&C,e,"internal-error");const P=xi.fromJSON(this.name,C);B(typeof p=="string",e,"internal-error"),pr(r,e.name),pr(s,e.name),B(typeof m=="boolean",e,"internal-error"),B(typeof w=="boolean",e,"internal-error"),pr(i,e.name),pr(o,e.name),pr(l,e.name),pr(c,e.name),pr(d,e.name),pr(h,e.name);const I=new un({uid:p,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:w,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:P,createdAt:d,lastLoginAt:h});return R&&Array.isArray(R)&&(I.providerData=R.map(_=>({..._}))),c&&(I._redirectEventId=c),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new xi;s.updateFromServerResponse(n);const i=new un({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await La(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];B(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?r1(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new xi;l.updateFromIdToken(r);const c=new un({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Af(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0=new Map;function $n(t){Jn(t instanceof Function,"Expected a class definition");let e=I0.get(t);return e?(Jn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,I0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}s1.type="NONE";const T0=s1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(t,e,n){return`firebase:${t}:${e}:${n}`}class Ei{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=uc(this.userKey,s.apiKey,i),this.fullPersistenceKey=uc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Kc(this.auth,{idToken:e}).catch(()=>{});return n?un._fromGetAccountInfoResponse(this.auth,n,e):null}return un._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ei($n(T0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||$n(T0);const o=uc(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const h=await d._get(o);if(h){let p;if(typeof h=="string"){const m=await Kc(e,{idToken:h}).catch(()=>{});if(!m)break;p=await un._fromGetAccountInfoResponse(e,m,h)}else p=un._fromJSON(e,h);d!==i&&(l=p),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Ei(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Ei(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(l1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(i1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(u1(e))return"Blackberry";if(d1(e))return"Webos";if(o1(e))return"Safari";if((e.includes("chrome/")||a1(e))&&!e.includes("edge/"))return"Chrome";if(c1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function i1(t=gt()){return/firefox\//i.test(t)}function o1(t=gt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function a1(t=gt()){return/crios\//i.test(t)}function l1(t=gt()){return/iemobile/i.test(t)}function c1(t=gt()){return/android/i.test(t)}function u1(t=gt()){return/blackberry/i.test(t)}function d1(t=gt()){return/webos/i.test(t)}function um(t=gt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function KR(t=gt()){var e;return um(t)&&!!((e=window.navigator)!=null&&e.standalone)}function QR(){return uN()&&document.documentMode===10}function h1(t=gt()){return um(t)||c1(t)||d1(t)||u1(t)||/windows phone/i.test(t)||l1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(t,e=[]){let n;switch(t){case"Browser":n=b0(gt());break;case"Worker":n=`${b0(gt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Bs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JR(t,e={}){return Ge(t,"GET","/v2/passwordPolicy",qe(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=6;class ZR{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??XR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new S0(this),this.idTokenSubscription=new S0(this),this.beforeStateQueue=new YR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=$n(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Ei.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Kc(this,{idToken:e}),r=await un._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Me(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return B(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await La(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=PR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Me(this.app))return Promise.reject(xt(this));const n=e?re(e):null;return n&&B(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&B(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Me(this.app)?Promise.reject(xt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Me(this.app)?Promise.reject(xt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($n(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JR(this),n=new ZR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ja("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await GR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&$n(e)||this._popupRedirectResolver;B(n,this,"argument-error"),this.redirectPersistenceManager=await Ei.create(this,[$n(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(B(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=f1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Me(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&CR(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function tt(t){return re(t)}class S0{constructor(e){this.auth=e,this.observer=null,this.addObserver=vN(n=>this.observer=n)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Za={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tk(t){Za=t}function dm(t){return Za.loadJS(t)}function nk(){return Za.recaptchaV2Script}function rk(){return Za.recaptchaEnterpriseScript}function sk(){return Za.gapiScript}function p1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik=500,ok=6e4,Wl=1e12;class ak{constructor(e){this.auth=e,this.counter=Wl,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new uk(e,this.auth.name,n||{})),this.counter++,r}reset(e){var r;const n=e||Wl;(r=this._widgets.get(n))==null||r.delete(),this._widgets.delete(n)}getResponse(e){var r;const n=e||Wl;return((r=this._widgets.get(n))==null?void 0:r.getResponse())||""}async execute(e){var r;const n=e||Wl;return(r=this._widgets.get(n))==null||r.execute(),""}}class lk{constructor(){this.enterprise=new ck}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class ck{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class uk{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;B(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=dk(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},ok)},ik))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function dk(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const hk="recaptcha-enterprise",sa="NO_RECAPTCHA";class m1{constructor(e){this.type=hk,this.auth=tt(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{n1(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new t1(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(c=>{l(c)})})}function s(i,o,l){const c=window.grecaptcha;x0(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(sa)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new lk().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&x0(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=rk();c.length!==0&&(c+=l),dm(c).then(()=>{s(l,i,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function Oo(t,e,n,r=!1,s=!1){const i=new m1(t);let o;if(s)o=sa;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Fr(t,e,n,r,s){var i,o;if(s==="EMAIL_PASSWORD_PROVIDER")if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Oo(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Oo(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(l)});else if(s==="PHONE_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const l=await Oo(t,e,n);return r(t,l).catch(async c=>{var d;if(((d=t._getRecaptchaConfig())==null?void 0:d.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const h=await Oo(t,e,n,!1,!0);return r(t,h)}return Promise.reject(c)})}else{const l=await Oo(t,e,n,!1,!0);return r(t,l)}else return Promise.reject(s+" provider is not supported.")}async function fk(t){const e=tt(t),n=await n1(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new t1(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new m1(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(t,e){const n=Vu(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ds(i,e??{}))return s;tn(s,"already-initialized")}return n.initialize({options:e})}function pk(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map($n);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function mk(t,e,n){const r=tt(t);B(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=y1(e),{host:o,port:l}=gk(e),c=l===null?"":`:${l}`,d={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){B(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),B(Ds(d,r.config.emulator)&&Ds(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,$s(o)?(tm(`${i}//${o}${c}`),nm("Auth",!0)):yk()}function y1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function gk(t){const e=y1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:N0(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:N0(o)}}}function N0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function yk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return zn("not implemented")}_getIdTokenResponse(e){return zn("not implemented")}_linkToIdToken(e,n){return zn("not implemented")}_getReauthenticationResolver(e){return zn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vk(t,e){return Ge(t,"POST","/v1/accounts:resetPassword",qe(t,e))}async function _k(t,e){return Ge(t,"POST","/v1/accounts:update",e)}async function wk(t,e){return Ge(t,"POST","/v1/accounts:signUp",e)}async function xk(t,e){return Ge(t,"POST","/v1/accounts:update",qe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ek(t,e){return sr(t,"POST","/v1/accounts:signInWithPassword",qe(t,e))}async function zu(t,e){return Ge(t,"POST","/v1/accounts:sendOobCode",qe(t,e))}async function Ik(t,e){return zu(t,e)}async function Tk(t,e){return zu(t,e)}async function bk(t,e){return zu(t,e)}async function Sk(t,e){return zu(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nk(t,e){return sr(t,"POST","/v1/accounts:signInWithEmailLink",qe(t,e))}async function Rk(t,e){return sr(t,"POST","/v1/accounts:signInWithEmailLink",qe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va extends Uu{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Va(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Va(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fr(e,n,"signInWithPassword",Ek,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Nk(e,{email:this._email,oobCode:this._password});default:tn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fr(e,r,"signUpPassword",wk,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Rk(e,{idToken:n,email:this._email,oobCode:this._password});default:tn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ii(t,e){return sr(t,"POST","/v1/accounts:signInWithIdp",qe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk="http://localhost";class Xn extends Uu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Xn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):tn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new Xn(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ii(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ii(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ii(e,n)}buildRequest(){const e={requestUri:kk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ji(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R0(t,e){return Ge(t,"POST","/v1/accounts:sendVerificationCode",qe(t,e))}async function Ck(t,e){return sr(t,"POST","/v1/accounts:signInWithPhoneNumber",qe(t,e))}async function Ak(t,e){const n=await sr(t,"POST","/v1/accounts:signInWithPhoneNumber",qe(t,e));if(n.temporaryProof)throw Bo(t,"account-exists-with-different-credential",n);return n}const Pk={USER_NOT_FOUND:"user-not-found"};async function Dk(t,e){const n={...e,operation:"REAUTH"};return sr(t,"POST","/v1/accounts:signInWithPhoneNumber",qe(t,n),Pk)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia extends Uu{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new ia({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new ia({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return Ck(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return Ak(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return Dk(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i}=e;return!r&&!n&&!s&&!i?null:new ia({verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Ok(t){const e=zo($o(t)).link,n=e?zo($o(e)).deep_link_id:null,r=zo($o(t)).deep_link_id;return(r?zo($o(r)).link:null)||r||n||e||t}class $u{constructor(e){const n=zo($o(e)),r=n.apiKey??null,s=n.oobCode??null,i=jk(n.mode??null);B(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Ok(e);try{return new $u(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(){this.providerId=Ws.PROVIDER_ID}static credential(e,n){return Va._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=$u.parseLink(n);return B(r,"argument-error"),Va._fromEmailAndCode(e,r.code,r.tenantId)}}Ws.PROVIDER_ID="password";Ws.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ws.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends Xi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class dc extends Zi{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return B("providerId"in n&&"signInMethod"in n,"argument-error"),Xn._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return B(e.idToken||e.accessToken,"argument-error"),Xn._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return dc.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return dc.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:s,pendingToken:i,nonce:o,providerId:l}=e;if(!r&&!s&&!n&&!i||!l)return null;try{return new dc(l)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:i})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends Zi{constructor(){super("facebook.com")}static credential(e){return Xn._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wr.credential(e.oauthAccessToken)}catch{return null}}}wr.FACEBOOK_SIGN_IN_METHOD="facebook.com";wr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn extends Zi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Xn._fromParams({providerId:Tn.PROVIDER_ID,signInMethod:Tn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Tn.credentialFromTaggedObject(e)}static credentialFromError(e){return Tn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Tn.credential(n,r)}catch{return null}}}Tn.GOOGLE_SIGN_IN_METHOD="google.com";Tn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends Zi{constructor(){super("github.com")}static credential(e){return Xn._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xr.credential(e.oauthAccessToken)}catch{return null}}}xr.GITHUB_SIGN_IN_METHOD="github.com";xr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends Zi{constructor(){super("twitter.com")}static credential(e,n){return Xn._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Er.credential(n,r)}catch{return null}}}Er.TWITTER_SIGN_IN_METHOD="twitter.com";Er.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v1(t,e){return sr(t,"POST","/v1/accounts:signUp",qe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await un._fromIdTokenResponse(e,r,s),o=k0(r);return new Cn({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=k0(r);return new Cn({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function k0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _O(t){var s;if(Me(t.app))return Promise.reject(xt(t));const e=tt(t);if(await e._initializationPromise,(s=e.currentUser)!=null&&s.isAnonymous)return new Cn({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await v1(e,{returnSecureToken:!0}),r=await Cn._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc extends jn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Qc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Qc(e,n,r,s)}}function _1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Qc._fromErrorAndOperation(t,i,e,r):i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wO(t,e){const n=re(t);await Bu(!0,n,e);const{providerUserInfo:r}=await UR(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),s=w1(r||[]);return n.providerData=n.providerData.filter(i=>s.has(i.providerId)),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function x1(t,e,n=!1){const r=await Os(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Cn._forOperation(t,"link",r)}async function Bu(t,e,n){await La(e);const r=w1(e.providerData),s=t===!1?"provider-already-linked":"no-such-provider";B(r.has(n)===t,e.auth,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lk(t,e,n=!1){const{auth:r}=t;if(Me(r.app))return Promise.reject(xt(r));const s="reauthenticate";try{const i=await Os(t,_1(r,s,e,t),n);B(i.idToken,r,"internal-error");const o=Fu(i.idToken);B(o,r,"internal-error");const{sub:l}=o;return B(t.uid===l,r,"user-mismatch"),Cn._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&tn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E1(t,e,n=!1){if(Me(t.app))return Promise.reject(xt(t));const r="signIn",s=await _1(t,r,e),i=await Cn._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Wu(t,e){return E1(tt(t),e)}async function Vk(t,e){const n=re(t);return await Bu(!1,n,e.providerId),x1(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mk(t,e){return sr(t,"POST","/v1/accounts:signInWithCustomToken",qe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xO(t,e){if(Me(t.app))return Promise.reject(xt(t));const n=tt(t),r=await Mk(n,{token:e,returnSecureToken:!0}),s=await Cn._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(t,e,n){var r;B(((r=n.url)==null?void 0:r.length)>0,t,"invalid-continue-uri"),B(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),B(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(B(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(B(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hm(t){const e=tt(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function EO(t,e,n){const r=tt(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&Hu(r,s,n),await Fr(r,s,"getOobCode",Tk,"EMAIL_PASSWORD_PROVIDER")}async function IO(t,e,n){await vk(re(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&hm(t),r})}async function TO(t,e){await xk(re(t),{oobCode:e})}async function bO(t,e,n){if(Me(t.app))return Promise.reject(xt(t));const r=tt(t),o=await Fr(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",v1,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&hm(t),c}),l=await Cn._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function SO(t,e,n){return Me(t.app)?Promise.reject(xt(t)):Wu(re(t),Ws.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&hm(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NO(t,e,n){const r=tt(t),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function i(o,l){B(l.handleCodeInApp,r,"argument-error"),l&&Hu(r,o,l)}i(s,n),await Fr(r,s,"getOobCode",bk,"EMAIL_PASSWORD_PROVIDER")}function RO(t,e){const n=$u.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function kO(t,e,n){if(Me(t.app))return Promise.reject(xt(t));const r=re(t),s=Ws.credentialWithLink(e,n||Oa());return B(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Wu(r,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fk(t,e){return Ge(t,"POST","/v1/accounts:createAuthUri",qe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CO(t,e){const n=lm()?Oa():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await Fk(re(t),r);return s||[]}async function AO(t,e){const n=re(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Hu(n.auth,s,e);const{email:i}=await Ik(n.auth,s);i!==t.email&&await t.reload()}async function PO(t,e,n){const r=re(t),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Hu(r.auth,i,n);const{email:o}=await Sk(r.auth,i);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uk(t,e){return Ge(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DO(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=re(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Os(r,Uk(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function jO(t,e){const n=re(t);return Me(n.auth.app)?Promise.reject(xt(n.auth)):I1(n,e,null)}function OO(t,e){return I1(re(t),null,e)}async function I1(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(i.email=e),n&&(i.password=n);const o=await Os(t,_k(r,i));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zk(t){var s,i;if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},r=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(t!=null&&t.idToken)){const o=(i=(s=Fu(t.idToken))==null?void 0:s.firebase)==null?void 0:i.sign_in_provider;if(o){const l=o!=="anonymous"&&o!=="custom"?o:null;return new Ti(r,l)}}if(!e)return null;switch(e){case"facebook.com":return new $k(r,n);case"github.com":return new Bk(r,n);case"google.com":return new Wk(r,n);case"twitter.com":return new Hk(r,n,t.screenName||null);case"custom":case"anonymous":return new Ti(r,null);default:return new Ti(r,e,n)}}class Ti{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class T1 extends Ti{constructor(e,n,r,s){super(e,n,r),this.username=s}}class $k extends Ti{constructor(e,n){super(e,"facebook.com",n)}}class Bk extends T1{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class Wk extends Ti{constructor(e,n){super(e,"google.com",n)}}class Hk extends T1{constructor(e,n,r){super(e,"twitter.com",n,r)}}function LO(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:zk(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VO(t,e){return re(t).setPersistence(e)}function qk(t,e,n,r){return re(t).onIdTokenChanged(e,n,r)}function Gk(t,e,n){return re(t).beforeAuthStateChanged(e,n)}function b1(t,e,n,r){return re(t).onAuthStateChanged(e,n,r)}function Pf(t){return re(t).signOut()}function MO(t,e){return tt(t).revokeAccessToken(e)}async function FO(t){return re(t).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(t,e){return Ge(t,"POST","/v2/accounts/mfaEnrollment:start",qe(t,e))}const Yc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Yc,"1"),this.storage.removeItem(Yc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=1e3,Qk=10;class N1 extends S1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=h1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);QR()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Qk):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Kk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}N1.type="LOCAL";const R1=N1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1 extends S1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}k1.type="SESSION";const C1=k1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new qu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),c=await Yk(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const d=Gu("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const m=p;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(){return window}function Xk(t){Le().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(){return typeof Le().WorkerGlobalScope<"u"&&typeof Le().importScripts=="function"}async function Zk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function tC(){return fm()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1="firebaseLocalStorageDb",nC=1,Jc="firebaseLocalStorage",P1="fbase_key";class el{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ku(t,e){return t.transaction([Jc],e?"readwrite":"readonly").objectStore(Jc)}function rC(){const t=indexedDB.deleteDatabase(A1);return new el(t).toPromise()}function Df(){const t=indexedDB.open(A1,nC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Jc,{keyPath:P1})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Jc)?e(r):(r.close(),await rC(),e(await Df()))})})}async function A0(t,e,n){const r=Ku(t,!0).put({[P1]:e,value:n});return new el(r).toPromise()}async function sC(t,e){const n=Ku(t,!1).get(e),r=await new el(n).toPromise();return r===void 0?null:r.value}function P0(t,e){const n=Ku(t,!0).delete(e);return new el(n).toPromise()}const iC=800,oC=3;class D1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Df(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>oC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fm()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qu._getInstance(tC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Zk(),!this.activeServiceWorker)return;this.sender=new Jk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Df();return await A0(e,Yc,"1"),await P0(e,Yc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>A0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>sC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>P0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Ku(s,!1).getAll();return new el(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}D1.type="LOCAL";const aC=D1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(t,e){return Ge(t,"POST","/v2/accounts/mfaSignIn:start",qe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph=p1("rcb"),lC=new Xa(3e4,6e4);class cC{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=Le().grecaptcha)!=null&&e.render)}load(e,n=""){return B(uC(n),e,"argument-error"),this.shouldResolveImmediately(n)&&w0(Le().grecaptcha)?Promise.resolve(Le().grecaptcha):new Promise((r,s)=>{const i=Le().setTimeout(()=>{s(jt(e,"network-request-failed"))},lC.get());Le()[ph]=()=>{Le().clearTimeout(i),delete Le()[ph];const l=Le().grecaptcha;if(!l||!w0(l)){s(jt(e,"internal-error"));return}const c=l.render;l.render=(d,h)=>{const p=c(d,h);return this.counter++,p},this.hostLanguage=n,r(l)};const o=`${nk()}?${Ji({onload:ph,render:"explicit",hl:n})}`;dm(o).catch(()=>{clearTimeout(i),s(jt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=Le().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function uC(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class dC{async load(e){return new ak(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa="recaptcha",hC={theme:"light",type:"image"};class UO{constructor(e,n,r={...hC}){this.parameters=r,this.type=oa,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=tt(e),this.isInvisible=this.parameters.size==="invisible",B(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof n=="string"?document.getElementById(n):n;B(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new dC:new cC,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(s=>{const i=o=>{o&&(this.tokenChangeListeners.delete(i),s(o))};this.tokenChangeListeners.add(i),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){B(!this.parameters.sitekey,this.auth,"argument-error"),B(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),B(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Le()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){B(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){B(lm()&&!fm(),this.auth,"internal-error"),await fC(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await MR(this.auth);B(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return B(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function fC(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=ia._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function zO(t,e,n){if(Me(t.app))return Promise.reject(xt(t));const r=tt(t),s=await O1(r,e,re(n));return new j1(s,i=>Wu(r,i))}async function $O(t,e,n){const r=re(t);await Bu(!1,r,"phone");const s=await O1(r.auth,e,re(n));return new j1(s,i=>Vk(r,i))}async function O1(t,e,n){var r;if(!t._getRecaptchaConfig())try{await fk(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const i=s.session;if("phoneNumber"in s){B(i.type==="enroll",t,"internal-error");const o={idToken:i.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Fr(t,o,"mfaSmsEnrollment",async(h,p)=>{if(p.phoneEnrollmentInfo.captchaResponse===sa){B((n==null?void 0:n.type)===oa,h,"argument-error");const m=await mh(h,p,n);return C0(h,m)}return C0(h,p)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneSessionInfo.sessionInfo}else{B(i.type==="signin",t,"internal-error");const o=((r=s.multiFactorHint)==null?void 0:r.uid)||s.multiFactorUid;B(o,t,"missing-multi-factor-info");const l={mfaPendingCredential:i.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Fr(t,l,"mfaSmsSignIn",async(p,m)=>{if(m.phoneSignInInfo.captchaResponse===sa){B((n==null?void 0:n.type)===oa,p,"argument-error");const w=await mh(p,m,n);return D0(p,w)}return D0(p,m)},"PHONE_PROVIDER").catch(p=>Promise.reject(p))).phoneResponseInfo.sessionInfo}}else{const i={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Fr(t,i,"sendVerificationCode",async(d,h)=>{if(h.captchaResponse===sa){B((n==null?void 0:n.type)===oa,d,"argument-error");const p=await mh(d,h,n);return R0(d,p)}return R0(d,h)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).sessionInfo}}finally{n==null||n._reset()}}async function mh(t,e,n){B(n.type===oa,t,"argument-error");const r=await n.verify();B(typeof r=="string",t,"argument-error");const s={...e};if("phoneEnrollmentInfo"in s){const i=s.phoneEnrollmentInfo.phoneNumber,o=s.phoneEnrollmentInfo.captchaResponse,l=s.phoneEnrollmentInfo.clientType,c=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:i,recaptchaToken:r,captchaResponse:o,clientType:l,recaptchaVersion:c}}),s}else if("phoneSignInInfo"in s){const i=s.phoneSignInInfo.captchaResponse,o=s.phoneSignInInfo.clientType,l=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:i,clientType:o,recaptchaVersion:l}}),s}else return Object.assign(s,{recaptchaToken:r}),s}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(t,e){return e?$n(e):(B(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm extends Uu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ii(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ii(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ii(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function pC(t){return E1(t.auth,new pm(t),t.bypassAuthState)}function mC(t){const{auth:e,user:n}=t;return B(n,e,"internal-error"),Lk(n,new pm(t),t.bypassAuthState)}async function gC(t){const{auth:e,user:n}=t;return B(n,e,"internal-error"),x1(n,new pm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pC;case"linkViaPopup":case"linkViaRedirect":return gC;case"reauthViaPopup":case"reauthViaRedirect":return mC;default:tn(this.auth,"internal-error")}}resolve(e){Jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=new Xa(2e3,1e4);async function V1(t,e,n){if(Me(t.app))return Promise.reject(jt(t,"operation-not-supported-in-this-environment"));const r=tt(t);Mu(t,e,Xi);const s=tl(r,n);return new Sr(r,"signInViaPopup",e,s).executeNotNull()}async function BO(t,e,n){const r=re(t);Mu(r.auth,e,Xi);const s=tl(r.auth,n);return new Sr(r.auth,"linkViaPopup",e,s,r).executeNotNull()}class Sr extends L1{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Sr.currentPopupAction&&Sr.currentPopupAction.cancel(),Sr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return B(e,this.auth,"internal-error"),e}async onExecution(){Jn(this.filter.length===1,"Popup operations only handle one event");const e=Gu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(jt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(jt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Sr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yC.get())};e()}}Sr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC="pendingRedirect",hc=new Map;class _C extends L1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=hc.get(this.auth._key());if(!e){try{const r=await wC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}hc.set(this.auth._key(),e)}return this.bypassAuthState||hc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wC(t,e){const n=U1(e),r=F1(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function M1(t,e){return F1(t)._set(U1(e),"true")}function xC(t,e){hc.set(t._key(),e)}function F1(t){return $n(t._redirectPersistence)}function U1(t){return uc(vC,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(t,e,n){return EC(t,e,n)}async function EC(t,e,n){if(Me(t.app))return Promise.reject(xt(t));const r=tt(t);Mu(t,e,Xi),await r._initializationPromise;const s=tl(r,n);return await M1(s,r),s._openRedirect(r,e,"signInViaRedirect")}function HO(t,e,n){return IC(t,e,n)}async function IC(t,e,n){const r=re(t);Mu(r.auth,e,Xi),await r.auth._initializationPromise;const s=tl(r.auth,n);await Bu(!1,r,e.providerId),await M1(s,r.auth);const i=await TC(r);return s._openRedirect(r.auth,e,"linkViaRedirect",i)}async function qO(t,e){return await tt(t)._initializationPromise,z1(t,e,!1)}async function z1(t,e,n=!1){if(Me(t.app))return Promise.reject(xt(t));const r=tt(t),s=tl(r,e),o=await new _C(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function TC(t){const e=Gu(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=10*60*1e3;class SC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!NC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!$1(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(jt(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=bC&&this.cachedEventUids.clear(),this.cachedEventUids.has(j0(e))}saveEventToCache(e){this.cachedEventUids.add(j0(e)),this.lastProcessedEventTime=Date.now()}}function j0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function $1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function NC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RC(t,e={}){return Ge(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CC=/^https?/;async function AC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await RC(t);for(const n of e)try{if(PC(n))return}catch{}tn(t,"unauthorized-domain")}function PC(t){const e=Oa(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!CC.test(n))return!1;if(kC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=new Xa(3e4,6e4);function O0(){const t=Le().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function jC(t){return new Promise((e,n)=>{var s,i,o;function r(){O0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{O0(),n(jt(t,"network-request-failed"))},timeout:DC.get()})}if((i=(s=Le().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Le().gapi)!=null&&o.load)r();else{const l=p1("iframefcb");return Le()[l]=()=>{gapi.load?r():n(jt(t,"network-request-failed"))},dm(`${sk()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw fc=null,e})}let fc=null;function OC(t){return fc=fc||jC(t),fc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=new Xa(5e3,15e3),VC="__/auth/iframe",MC="emulator/auth/iframe",FC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zC(t){const e=t.config;B(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?cm(e,MC):`https://${t.config.authDomain}/${VC}`,r={apiKey:e.apiKey,appName:t.name,v:Bs},s=UC.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ji(r).slice(1)}`}async function $C(t){const e=await OC(t),n=Le().gapi;return B(n,t,"internal-error"),e.open({where:document.body,url:zC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:FC,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=jt(t,"network-request-failed"),l=Le().setTimeout(()=>{i(o)},LC.get());function c(){Le().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WC=500,HC=600,qC="_blank",GC="http://localhost";class L0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function KC(t,e,n,r=WC,s=HC){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...BC,width:r.toString(),height:s.toString(),top:i,left:o},d=gt().toLowerCase();n&&(l=a1(d)?qC:n),i1(d)&&(e=e||GC,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[w,R])=>`${m}${w}=${R},`,"");if(KR(d)&&l!=="_self")return QC(e||"",l),new L0(null);const p=window.open(e||"",l,h);B(p,t,"popup-blocked");try{p.focus()}catch{}return new L0(p)}function QC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC="__/auth/handler",JC="emulator/auth/handler",XC=encodeURIComponent("fac");async function V0(t,e,n,r,s,i){B(t.config.authDomain,t,"auth-domain-config-required"),B(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Bs,eventId:s};if(e instanceof Xi){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",yN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))o[h]=p}if(e instanceof Zi){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),d=c?`#${XC}=${encodeURIComponent(c)}`:"";return`${ZC(t)}?${Ji(l).slice(1)}${d}`}function ZC({config:t}){return t.emulator?cm(t,JC):`https://${t.authDomain}/${YC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh="webStorageSupport";class eA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=C1,this._completeRedirectFn=z1,this._overrideRedirectResult=xC}async _openPopup(e,n,r,s){var o;Jn((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await V0(e,n,r,Oa(),s);return KC(e,i,Gu())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await V0(e,n,r,Oa(),s);return Xk(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Jn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await $C(e),r=new SC(e);return n.register("authEvent",s=>(B(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(gh,{type:gh},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[gh];i!==void 0&&n(!!i),tn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=AC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return h1()||o1()||um()}}const tA=eA;var M0="@firebase/auth",F0="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sA(t){js(new qr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;B(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:f1(t)},d=new ek(r,s,i,c);return pk(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),js(new qr("auth-internal",e=>{const n=tt(e.getProvider("auth").getImmediate());return(r=>new nA(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Nn(M0,F0,rA(t)),Nn(M0,F0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=5*60,oA=Bx("authIdTokenMaxAge")||iA;let U0=null;const aA=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>oA)return;const s=n==null?void 0:n.token;U0!==s&&(U0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function lA(t=im()){const e=Vu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=g1(t,{popupRedirectResolver:tA,persistence:[aC,R1,C1]}),r=Bx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=aA(i.toString());Gk(n,o,()=>o(n.currentUser)),qk(n,l=>o(l))}}const s=Ux("auth");return s&&mk(n,`http://${s}`),n}function cA(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}tk({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=jt("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",cA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sA("Browser");var uA="firebase",dA="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn(uA,dA,"app");var z0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ur,B1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,y){function x(){}x.prototype=y.prototype,v.F=y.prototype,v.prototype=new x,v.prototype.constructor=v,v.D=function(b,k,j){for(var S=Array(arguments.length-2),te=2;te<arguments.length;te++)S[te-2]=arguments[te];return y.prototype[k].apply(b,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(v,y,x){x||(x=0);const b=Array(16);if(typeof y=="string")for(var k=0;k<16;++k)b[k]=y.charCodeAt(x++)|y.charCodeAt(x++)<<8|y.charCodeAt(x++)<<16|y.charCodeAt(x++)<<24;else for(k=0;k<16;++k)b[k]=y[x++]|y[x++]<<8|y[x++]<<16|y[x++]<<24;y=v.g[0],x=v.g[1],k=v.g[2];let j=v.g[3],S;S=y+(j^x&(k^j))+b[0]+3614090360&4294967295,y=x+(S<<7&4294967295|S>>>25),S=j+(k^y&(x^k))+b[1]+3905402710&4294967295,j=y+(S<<12&4294967295|S>>>20),S=k+(x^j&(y^x))+b[2]+606105819&4294967295,k=j+(S<<17&4294967295|S>>>15),S=x+(y^k&(j^y))+b[3]+3250441966&4294967295,x=k+(S<<22&4294967295|S>>>10),S=y+(j^x&(k^j))+b[4]+4118548399&4294967295,y=x+(S<<7&4294967295|S>>>25),S=j+(k^y&(x^k))+b[5]+1200080426&4294967295,j=y+(S<<12&4294967295|S>>>20),S=k+(x^j&(y^x))+b[6]+2821735955&4294967295,k=j+(S<<17&4294967295|S>>>15),S=x+(y^k&(j^y))+b[7]+4249261313&4294967295,x=k+(S<<22&4294967295|S>>>10),S=y+(j^x&(k^j))+b[8]+1770035416&4294967295,y=x+(S<<7&4294967295|S>>>25),S=j+(k^y&(x^k))+b[9]+2336552879&4294967295,j=y+(S<<12&4294967295|S>>>20),S=k+(x^j&(y^x))+b[10]+4294925233&4294967295,k=j+(S<<17&4294967295|S>>>15),S=x+(y^k&(j^y))+b[11]+2304563134&4294967295,x=k+(S<<22&4294967295|S>>>10),S=y+(j^x&(k^j))+b[12]+1804603682&4294967295,y=x+(S<<7&4294967295|S>>>25),S=j+(k^y&(x^k))+b[13]+4254626195&4294967295,j=y+(S<<12&4294967295|S>>>20),S=k+(x^j&(y^x))+b[14]+2792965006&4294967295,k=j+(S<<17&4294967295|S>>>15),S=x+(y^k&(j^y))+b[15]+1236535329&4294967295,x=k+(S<<22&4294967295|S>>>10),S=y+(k^j&(x^k))+b[1]+4129170786&4294967295,y=x+(S<<5&4294967295|S>>>27),S=j+(x^k&(y^x))+b[6]+3225465664&4294967295,j=y+(S<<9&4294967295|S>>>23),S=k+(y^x&(j^y))+b[11]+643717713&4294967295,k=j+(S<<14&4294967295|S>>>18),S=x+(j^y&(k^j))+b[0]+3921069994&4294967295,x=k+(S<<20&4294967295|S>>>12),S=y+(k^j&(x^k))+b[5]+3593408605&4294967295,y=x+(S<<5&4294967295|S>>>27),S=j+(x^k&(y^x))+b[10]+38016083&4294967295,j=y+(S<<9&4294967295|S>>>23),S=k+(y^x&(j^y))+b[15]+3634488961&4294967295,k=j+(S<<14&4294967295|S>>>18),S=x+(j^y&(k^j))+b[4]+3889429448&4294967295,x=k+(S<<20&4294967295|S>>>12),S=y+(k^j&(x^k))+b[9]+568446438&4294967295,y=x+(S<<5&4294967295|S>>>27),S=j+(x^k&(y^x))+b[14]+3275163606&4294967295,j=y+(S<<9&4294967295|S>>>23),S=k+(y^x&(j^y))+b[3]+4107603335&4294967295,k=j+(S<<14&4294967295|S>>>18),S=x+(j^y&(k^j))+b[8]+1163531501&4294967295,x=k+(S<<20&4294967295|S>>>12),S=y+(k^j&(x^k))+b[13]+2850285829&4294967295,y=x+(S<<5&4294967295|S>>>27),S=j+(x^k&(y^x))+b[2]+4243563512&4294967295,j=y+(S<<9&4294967295|S>>>23),S=k+(y^x&(j^y))+b[7]+1735328473&4294967295,k=j+(S<<14&4294967295|S>>>18),S=x+(j^y&(k^j))+b[12]+2368359562&4294967295,x=k+(S<<20&4294967295|S>>>12),S=y+(x^k^j)+b[5]+4294588738&4294967295,y=x+(S<<4&4294967295|S>>>28),S=j+(y^x^k)+b[8]+2272392833&4294967295,j=y+(S<<11&4294967295|S>>>21),S=k+(j^y^x)+b[11]+1839030562&4294967295,k=j+(S<<16&4294967295|S>>>16),S=x+(k^j^y)+b[14]+4259657740&4294967295,x=k+(S<<23&4294967295|S>>>9),S=y+(x^k^j)+b[1]+2763975236&4294967295,y=x+(S<<4&4294967295|S>>>28),S=j+(y^x^k)+b[4]+1272893353&4294967295,j=y+(S<<11&4294967295|S>>>21),S=k+(j^y^x)+b[7]+4139469664&4294967295,k=j+(S<<16&4294967295|S>>>16),S=x+(k^j^y)+b[10]+3200236656&4294967295,x=k+(S<<23&4294967295|S>>>9),S=y+(x^k^j)+b[13]+681279174&4294967295,y=x+(S<<4&4294967295|S>>>28),S=j+(y^x^k)+b[0]+3936430074&4294967295,j=y+(S<<11&4294967295|S>>>21),S=k+(j^y^x)+b[3]+3572445317&4294967295,k=j+(S<<16&4294967295|S>>>16),S=x+(k^j^y)+b[6]+76029189&4294967295,x=k+(S<<23&4294967295|S>>>9),S=y+(x^k^j)+b[9]+3654602809&4294967295,y=x+(S<<4&4294967295|S>>>28),S=j+(y^x^k)+b[12]+3873151461&4294967295,j=y+(S<<11&4294967295|S>>>21),S=k+(j^y^x)+b[15]+530742520&4294967295,k=j+(S<<16&4294967295|S>>>16),S=x+(k^j^y)+b[2]+3299628645&4294967295,x=k+(S<<23&4294967295|S>>>9),S=y+(k^(x|~j))+b[0]+4096336452&4294967295,y=x+(S<<6&4294967295|S>>>26),S=j+(x^(y|~k))+b[7]+1126891415&4294967295,j=y+(S<<10&4294967295|S>>>22),S=k+(y^(j|~x))+b[14]+2878612391&4294967295,k=j+(S<<15&4294967295|S>>>17),S=x+(j^(k|~y))+b[5]+4237533241&4294967295,x=k+(S<<21&4294967295|S>>>11),S=y+(k^(x|~j))+b[12]+1700485571&4294967295,y=x+(S<<6&4294967295|S>>>26),S=j+(x^(y|~k))+b[3]+2399980690&4294967295,j=y+(S<<10&4294967295|S>>>22),S=k+(y^(j|~x))+b[10]+4293915773&4294967295,k=j+(S<<15&4294967295|S>>>17),S=x+(j^(k|~y))+b[1]+2240044497&4294967295,x=k+(S<<21&4294967295|S>>>11),S=y+(k^(x|~j))+b[8]+1873313359&4294967295,y=x+(S<<6&4294967295|S>>>26),S=j+(x^(y|~k))+b[15]+4264355552&4294967295,j=y+(S<<10&4294967295|S>>>22),S=k+(y^(j|~x))+b[6]+2734768916&4294967295,k=j+(S<<15&4294967295|S>>>17),S=x+(j^(k|~y))+b[13]+1309151649&4294967295,x=k+(S<<21&4294967295|S>>>11),S=y+(k^(x|~j))+b[4]+4149444226&4294967295,y=x+(S<<6&4294967295|S>>>26),S=j+(x^(y|~k))+b[11]+3174756917&4294967295,j=y+(S<<10&4294967295|S>>>22),S=k+(y^(j|~x))+b[2]+718787259&4294967295,k=j+(S<<15&4294967295|S>>>17),S=x+(j^(k|~y))+b[9]+3951481745&4294967295,v.g[0]=v.g[0]+y&4294967295,v.g[1]=v.g[1]+(k+(S<<21&4294967295|S>>>11))&4294967295,v.g[2]=v.g[2]+k&4294967295,v.g[3]=v.g[3]+j&4294967295}r.prototype.v=function(v,y){y===void 0&&(y=v.length);const x=y-this.blockSize,b=this.C;let k=this.h,j=0;for(;j<y;){if(k==0)for(;j<=x;)s(this,v,j),j+=this.blockSize;if(typeof v=="string"){for(;j<y;)if(b[k++]=v.charCodeAt(j++),k==this.blockSize){s(this,b),k=0;break}}else for(;j<y;)if(b[k++]=v[j++],k==this.blockSize){s(this,b),k=0;break}}this.h=k,this.o+=y},r.prototype.A=function(){var v=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);v[0]=128;for(var y=1;y<v.length-8;++y)v[y]=0;y=this.o*8;for(var x=v.length-8;x<v.length;++x)v[x]=y&255,y/=256;for(this.v(v),v=Array(16),y=0,x=0;x<4;++x)for(let b=0;b<32;b+=8)v[y++]=this.g[x]>>>b&255;return v};function i(v,y){var x=l;return Object.prototype.hasOwnProperty.call(x,v)?x[v]:x[v]=y(v)}function o(v,y){this.h=y;const x=[];let b=!0;for(let k=v.length-1;k>=0;k--){const j=v[k]|0;b&&j==y||(x[k]=j,b=!1)}this.g=x}var l={};function c(v){return-128<=v&&v<128?i(v,function(y){return new o([y|0],y<0?-1:0)}):new o([v|0],v<0?-1:0)}function d(v){if(isNaN(v)||!isFinite(v))return p;if(v<0)return P(d(-v));const y=[];let x=1;for(let b=0;v>=x;b++)y[b]=v/x|0,x*=4294967296;return new o(y,0)}function h(v,y){if(v.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(v.charAt(0)=="-")return P(h(v.substring(1),y));if(v.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=d(Math.pow(y,8));let b=p;for(let j=0;j<v.length;j+=8){var k=Math.min(8,v.length-j);const S=parseInt(v.substring(j,j+k),y);k<8?(k=d(Math.pow(y,k)),b=b.j(k).add(d(S))):(b=b.j(x),b=b.add(d(S)))}return b}var p=c(0),m=c(1),w=c(16777216);t=o.prototype,t.m=function(){if(C(this))return-P(this).m();let v=0,y=1;for(let x=0;x<this.g.length;x++){const b=this.i(x);v+=(b>=0?b:4294967296+b)*y,y*=4294967296}return v},t.toString=function(v){if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(R(this))return"0";if(C(this))return"-"+P(this).toString(v);const y=d(Math.pow(v,6));var x=this;let b="";for(;;){const k=N(x,y).g;x=I(x,k.j(y));let j=((x.g.length>0?x.g[0]:x.h)>>>0).toString(v);if(x=k,R(x))return j+b;for(;j.length<6;)j="0"+j;b=j+b}},t.i=function(v){return v<0?0:v<this.g.length?this.g[v]:this.h};function R(v){if(v.h!=0)return!1;for(let y=0;y<v.g.length;y++)if(v.g[y]!=0)return!1;return!0}function C(v){return v.h==-1}t.l=function(v){return v=I(this,v),C(v)?-1:R(v)?0:1};function P(v){const y=v.g.length,x=[];for(let b=0;b<y;b++)x[b]=~v.g[b];return new o(x,~v.h).add(m)}t.abs=function(){return C(this)?P(this):this},t.add=function(v){const y=Math.max(this.g.length,v.g.length),x=[];let b=0;for(let k=0;k<=y;k++){let j=b+(this.i(k)&65535)+(v.i(k)&65535),S=(j>>>16)+(this.i(k)>>>16)+(v.i(k)>>>16);b=S>>>16,j&=65535,S&=65535,x[k]=S<<16|j}return new o(x,x[x.length-1]&-2147483648?-1:0)};function I(v,y){return v.add(P(y))}t.j=function(v){if(R(this)||R(v))return p;if(C(this))return C(v)?P(this).j(P(v)):P(P(this).j(v));if(C(v))return P(this.j(P(v)));if(this.l(w)<0&&v.l(w)<0)return d(this.m()*v.m());const y=this.g.length+v.g.length,x=[];for(var b=0;b<2*y;b++)x[b]=0;for(b=0;b<this.g.length;b++)for(let k=0;k<v.g.length;k++){const j=this.i(b)>>>16,S=this.i(b)&65535,te=v.i(k)>>>16,he=v.i(k)&65535;x[2*b+2*k]+=S*he,_(x,2*b+2*k),x[2*b+2*k+1]+=j*he,_(x,2*b+2*k+1),x[2*b+2*k+1]+=S*te,_(x,2*b+2*k+1),x[2*b+2*k+2]+=j*te,_(x,2*b+2*k+2)}for(v=0;v<y;v++)x[v]=x[2*v+1]<<16|x[2*v];for(v=y;v<2*y;v++)x[v]=0;return new o(x,0)};function _(v,y){for(;(v[y]&65535)!=v[y];)v[y+1]+=v[y]>>>16,v[y]&=65535,y++}function T(v,y){this.g=v,this.h=y}function N(v,y){if(R(y))throw Error("division by zero");if(R(v))return new T(p,p);if(C(v))return y=N(P(v),y),new T(P(y.g),P(y.h));if(C(y))return y=N(v,P(y)),new T(P(y.g),y.h);if(v.g.length>30){if(C(v)||C(y))throw Error("slowDivide_ only works with positive integers.");for(var x=m,b=y;b.l(v)<=0;)x=A(x),b=A(b);var k=D(x,1),j=D(b,1);for(b=D(b,2),x=D(x,2);!R(b);){var S=j.add(b);S.l(v)<=0&&(k=k.add(x),j=S),b=D(b,1),x=D(x,1)}return y=I(v,k.j(y)),new T(k,y)}for(k=p;v.l(y)>=0;){for(x=Math.max(1,Math.floor(v.m()/y.m())),b=Math.ceil(Math.log(x)/Math.LN2),b=b<=48?1:Math.pow(2,b-48),j=d(x),S=j.j(y);C(S)||S.l(v)>0;)x-=b,j=d(x),S=j.j(y);R(j)&&(j=m),k=k.add(j),v=I(v,S)}return new T(k,v)}t.B=function(v){return N(this,v).h},t.and=function(v){const y=Math.max(this.g.length,v.g.length),x=[];for(let b=0;b<y;b++)x[b]=this.i(b)&v.i(b);return new o(x,this.h&v.h)},t.or=function(v){const y=Math.max(this.g.length,v.g.length),x=[];for(let b=0;b<y;b++)x[b]=this.i(b)|v.i(b);return new o(x,this.h|v.h)},t.xor=function(v){const y=Math.max(this.g.length,v.g.length),x=[];for(let b=0;b<y;b++)x[b]=this.i(b)^v.i(b);return new o(x,this.h^v.h)};function A(v){const y=v.g.length+1,x=[];for(let b=0;b<y;b++)x[b]=v.i(b)<<1|v.i(b-1)>>>31;return new o(x,v.h)}function D(v,y){const x=y>>5;y%=32;const b=v.g.length-x,k=[];for(let j=0;j<b;j++)k[j]=y>0?v.i(j+x)>>>y|v.i(j+x+1)<<32-y:v.i(j+x);return new o(k,v.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,B1=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Ur=o}).apply(typeof z0<"u"?z0:typeof self<"u"?self:typeof window<"u"?window:{});var Hl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var W1,Wo,H1,pc,jf,q1,G1,K1;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hl=="object"&&Hl];for(var f=0;f<a.length;++f){var g=a[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(a,f){if(f)e:{var g=r;a=a.split(".");for(var E=0;E<a.length-1;E++){var O=a[E];if(!(O in g))break e;g=g[O]}a=a[a.length-1],E=g[a],f=f(E),f!=E&&f!=null&&e(g,a,{configurable:!0,writable:!0,value:f})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(f){var g=[],E;for(E in f)Object.prototype.hasOwnProperty.call(f,E)&&g.push([E,f[E]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(a){var f=typeof a;return f=="object"&&a!=null||f=="function"}function c(a,f,g){return a.call.apply(a.bind,arguments)}function d(a,f,g){return d=c,d.apply(null,arguments)}function h(a,f){var g=Array.prototype.slice.call(arguments,1);return function(){var E=g.slice();return E.push.apply(E,arguments),a.apply(this,E)}}function p(a,f){function g(){}g.prototype=f.prototype,a.Z=f.prototype,a.prototype=new g,a.prototype.constructor=a,a.Ob=function(E,O,L){for(var $=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)$[ne-2]=arguments[ne];return f.prototype[O].apply(E,$)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function w(a){const f=a.length;if(f>0){const g=Array(f);for(let E=0;E<f;E++)g[E]=a[E];return g}return[]}function R(a,f){for(let E=1;E<arguments.length;E++){const O=arguments[E];var g=typeof O;if(g=g!="object"?g:O?Array.isArray(O)?"array":g:"null",g=="array"||g=="object"&&typeof O.length=="number"){g=a.length||0;const L=O.length||0;a.length=g+L;for(let $=0;$<L;$++)a[g+$]=O[$]}else a.push(O)}}class C{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function P(a){o.setTimeout(()=>{throw a},0)}function I(){var a=v;let f=null;return a.g&&(f=a.g,a.g=a.g.next,a.g||(a.h=null),f.next=null),f}class _{constructor(){this.h=this.g=null}add(f,g){const E=T.get();E.set(f,g),this.h?this.h.next=E:this.g=E,this.h=E}}var T=new C(()=>new N,a=>a.reset());class N{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let A,D=!1,v=new _,y=()=>{const a=Promise.resolve(void 0);A=()=>{a.then(x)}};function x(){for(var a;a=I();){try{a.h.call(a.g)}catch(g){P(g)}var f=T;f.j(a),f.h<100&&(f.h++,a.next=f.g,f.g=a)}D=!1}function b(){this.u=this.u,this.C=this.C}b.prototype.u=!1,b.prototype.dispose=function(){this.u||(this.u=!0,this.N())},b.prototype[Symbol.dispose]=function(){this.dispose()},b.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(a,f){this.type=a,this.g=this.target=f,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var j=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,f=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const g=()=>{};o.addEventListener("test",g,f),o.removeEventListener("test",g,f)}catch{}return a}();function S(a){return/^[\s\xa0]*$/.test(a)}function te(a,f){k.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,f)}p(te,k),te.prototype.init=function(a,f){const g=this.type=a.type,E=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=f,f=a.relatedTarget,f||(g=="mouseover"?f=a.fromElement:g=="mouseout"&&(f=a.toElement)),this.relatedTarget=f,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&te.Z.h.call(this)},te.prototype.h=function(){te.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var he="closure_listenable_"+(Math.random()*1e6|0),G=0;function ie(a,f,g,E,O){this.listener=a,this.proxy=null,this.src=f,this.type=g,this.capture=!!E,this.ha=O,this.key=++G,this.da=this.fa=!1}function z(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function K(a,f,g){for(const E in a)f.call(g,a[E],E,a)}function Y(a,f){for(const g in a)f.call(void 0,a[g],g,a)}function se(a){const f={};for(const g in a)f[g]=a[g];return f}const me="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Tt(a,f){let g,E;for(let O=1;O<arguments.length;O++){E=arguments[O];for(g in E)a[g]=E[g];for(let L=0;L<me.length;L++)g=me[L],Object.prototype.hasOwnProperty.call(E,g)&&(a[g]=E[g])}}function nt(a){this.src=a,this.g={},this.h=0}nt.prototype.add=function(a,f,g,E,O){const L=a.toString();a=this.g[L],a||(a=this.g[L]=[],this.h++);const $=at(a,f,E,O);return $>-1?(f=a[$],g||(f.fa=!1)):(f=new ie(f,this.src,L,!!E,O),f.fa=g,a.push(f)),f};function Ht(a,f){const g=f.type;if(g in a.g){var E=a.g[g],O=Array.prototype.indexOf.call(E,f,void 0),L;(L=O>=0)&&Array.prototype.splice.call(E,O,1),L&&(z(f),a.g[g].length==0&&(delete a.g[g],a.h--))}}function at(a,f,g,E){for(let O=0;O<a.length;++O){const L=a[O];if(!L.da&&L.listener==f&&L.capture==!!g&&L.ha==E)return O}return-1}var bt="closure_lm_"+(Math.random()*1e6|0),nn={};function hl(a,f,g,E,O){if(Array.isArray(f)){for(let L=0;L<f.length;L++)hl(a,f[L],g,E,O);return null}return g=Qm(g),a&&a[he]?a.J(f,g,l(E)?!!E.capture:!1,O):fl(a,f,g,!1,E,O)}function fl(a,f,g,E,O,L){if(!f)throw Error("Invalid event type");const $=l(O)?!!O.capture:!!O;let ne=os(a);if(ne||(a[bt]=ne=new nt(a)),g=ne.add(f,g,E,$,L),g.proxy)return g;if(E=pl(),g.proxy=E,E.src=a,E.listener=g,a.addEventListener)j||(O=$),O===void 0&&(O=!1),a.addEventListener(f.toString(),E,O);else if(a.attachEvent)a.attachEvent(or(f.toString()),E);else if(a.addListener&&a.removeListener)a.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return g}function pl(){function a(g){return f.call(a.src,a.listener,g)}const f=co;return a}function yd(a,f,g,E,O){if(Array.isArray(f))for(var L=0;L<f.length;L++)yd(a,f[L],g,E,O);else E=l(E)?!!E.capture:!!E,g=Qm(g),a&&a[he]?(a=a.i,L=String(f).toString(),L in a.g&&(f=a.g[L],g=at(f,g,E,O),g>-1&&(z(f[g]),Array.prototype.splice.call(f,g,1),f.length==0&&(delete a.g[L],a.h--)))):a&&(a=os(a))&&(f=a.g[f.toString()],a=-1,f&&(a=at(f,g,E,O)),(g=a>-1?f[a]:null)&&lo(g))}function lo(a){if(typeof a!="number"&&a&&!a.da){var f=a.src;if(f&&f[he])Ht(f.i,a);else{var g=a.type,E=a.proxy;f.removeEventListener?f.removeEventListener(g,E,a.capture):f.detachEvent?f.detachEvent(or(g),E):f.addListener&&f.removeListener&&f.removeListener(E),(g=os(f))?(Ht(g,a),g.h==0&&(g.src=null,f[bt]=null)):z(a)}}}function or(a){return a in nn?nn[a]:nn[a]="on"+a}function co(a,f){if(a.da)a=!0;else{f=new te(f,this);const g=a.listener,E=a.ha||a.src;a.fa&&lo(a),a=g.call(E,f)}return a}function os(a){return a=a[bt],a instanceof nt?a:null}var as="__closure_events_fn_"+(Math.random()*1e9>>>0);function Qm(a){return typeof a=="function"?a:(a[as]||(a[as]=function(f){return a.handleEvent(f)}),a[as])}function lt(){b.call(this),this.i=new nt(this),this.M=this,this.G=null}p(lt,b),lt.prototype[he]=!0,lt.prototype.removeEventListener=function(a,f,g,E){yd(this,a,f,g,E)};function yt(a,f){var g,E=a.G;if(E)for(g=[];E;E=E.G)g.push(E);if(a=a.M,E=f.type||f,typeof f=="string")f=new k(f,a);else if(f instanceof k)f.target=f.target||a;else{var O=f;f=new k(E,a),Tt(f,O)}O=!0;let L,$;if(g)for($=g.length-1;$>=0;$--)L=f.g=g[$],O=ml(L,E,!0,f)&&O;if(L=f.g=a,O=ml(L,E,!0,f)&&O,O=ml(L,E,!1,f)&&O,g)for($=0;$<g.length;$++)L=f.g=g[$],O=ml(L,E,!1,f)&&O}lt.prototype.N=function(){if(lt.Z.N.call(this),this.i){var a=this.i;for(const f in a.g){const g=a.g[f];for(let E=0;E<g.length;E++)z(g[E]);delete a.g[f],a.h--}}this.G=null},lt.prototype.J=function(a,f,g,E){return this.i.add(String(a),f,!1,g,E)},lt.prototype.K=function(a,f,g,E){return this.i.add(String(a),f,!0,g,E)};function ml(a,f,g,E){if(f=a.i.g[String(f)],!f)return!0;f=f.concat();let O=!0;for(let L=0;L<f.length;++L){const $=f[L];if($&&!$.da&&$.capture==g){const ne=$.listener,ze=$.ha||$.src;$.fa&&Ht(a.i,$),O=ne.call(ze,E)!==!1&&O}}return O&&!E.defaultPrevented}function WI(a,f){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=d(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:o.setTimeout(a,f||0)}function Ym(a){a.g=WI(()=>{a.g=null,a.i&&(a.i=!1,Ym(a))},a.l);const f=a.h;a.h=null,a.m.apply(null,f)}class HI extends b{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Ym(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function uo(a){b.call(this),this.h=a,this.g={}}p(uo,b);var Jm=[];function Xm(a){K(a.g,function(f,g){this.g.hasOwnProperty(g)&&lo(f)},a),a.g={}}uo.prototype.N=function(){uo.Z.N.call(this),Xm(this)},uo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vd=o.JSON.stringify,qI=o.JSON.parse,GI=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Zm(){}function eg(){}var ho={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function _d(){k.call(this,"d")}p(_d,k);function wd(){k.call(this,"c")}p(wd,k);var ls={},tg=null;function gl(){return tg=tg||new lt}ls.Ia="serverreachability";function ng(a){k.call(this,ls.Ia,a)}p(ng,k);function fo(a){const f=gl();yt(f,new ng(f))}ls.STAT_EVENT="statevent";function rg(a,f){k.call(this,ls.STAT_EVENT,a),this.stat=f}p(rg,k);function vt(a){const f=gl();yt(f,new rg(f,a))}ls.Ja="timingevent";function sg(a,f){k.call(this,ls.Ja,a),this.size=f}p(sg,k);function po(a,f){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},f)}function mo(){this.g=!0}mo.prototype.ua=function(){this.g=!1};function KI(a,f,g,E,O,L){a.info(function(){if(a.g)if(L){var $="",ne=L.split("&");for(let ge=0;ge<ne.length;ge++){var ze=ne[ge].split("=");if(ze.length>1){const Ke=ze[0];ze=ze[1];const vn=Ke.split("_");$=vn.length>=2&&vn[1]=="type"?$+(Ke+"="+ze+"&"):$+(Ke+"=redacted&")}}}else $=null;else $=L;return"XMLHTTP REQ ("+E+") [attempt "+O+"]: "+f+`
`+g+`
`+$})}function QI(a,f,g,E,O,L,$){a.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+O+"]: "+f+`
`+g+`
`+L+" "+$})}function Gs(a,f,g,E){a.info(function(){return"XMLHTTP TEXT ("+f+"): "+JI(a,g)+(E?" "+E:"")})}function YI(a,f){a.info(function(){return"TIMEOUT: "+f})}mo.prototype.info=function(){};function JI(a,f){if(!a.g)return f;if(!f)return null;try{const L=JSON.parse(f);if(L){for(a=0;a<L.length;a++)if(Array.isArray(L[a])){var g=L[a];if(!(g.length<2)){var E=g[1];if(Array.isArray(E)&&!(E.length<1)){var O=E[0];if(O!="noop"&&O!="stop"&&O!="close")for(let $=1;$<E.length;$++)E[$]=""}}}}return vd(L)}catch{return f}}var yl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ig={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},og;function xd(){}p(xd,Zm),xd.prototype.g=function(){return new XMLHttpRequest},og=new xd;function go(a){return encodeURIComponent(String(a))}function XI(a){var f=1;a=a.split(":");const g=[];for(;f>0&&a.length;)g.push(a.shift()),f--;return a.length&&g.push(a.join(":")),g}function ar(a,f,g,E){this.j=a,this.i=f,this.l=g,this.S=E||1,this.V=new uo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ag}function ag(){this.i=null,this.g="",this.h=!1}var lg={},Ed={};function Id(a,f,g){a.M=1,a.A=_l(yn(f)),a.u=g,a.R=!0,cg(a,null)}function cg(a,f){a.F=Date.now(),vl(a),a.B=yn(a.A);var g=a.B,E=a.S;Array.isArray(E)||(E=[String(E)]),Eg(g.i,"t",E),a.C=0,g=a.j.L,a.h=new ag,a.g=Ug(a.j,g?f:null,!a.u),a.P>0&&(a.O=new HI(d(a.Y,a,a.g),a.P)),f=a.V,g=a.g,E=a.ba;var O="readystatechange";Array.isArray(O)||(O&&(Jm[0]=O.toString()),O=Jm);for(let L=0;L<O.length;L++){const $=hl(g,O[L],E||f.handleEvent,!1,f.h||f);if(!$)break;f.g[$.key]=$}f=a.J?se(a.J):{},a.u?(a.v||(a.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,f)):(a.v="GET",a.g.ea(a.B,a.v,null,f)),fo(),KI(a.i,a.v,a.B,a.l,a.S,a.u)}ar.prototype.ba=function(a){a=a.target;const f=this.O;f&&ur(a)==3?f.j():this.Y(a)},ar.prototype.Y=function(a){try{if(a==this.g)e:{const ne=ur(this.g),ze=this.g.ya(),ge=this.g.ca();if(!(ne<3)&&(ne!=3||this.g&&(this.h.h||this.g.la()||kg(this.g)))){this.K||ne!=4||ze==7||(ze==8||ge<=0?fo(3):fo(2)),Td(this);var f=this.g.ca();this.X=f;var g=ZI(this);if(this.o=f==200,QI(this.i,this.v,this.B,this.l,this.S,ne,f),this.o){if(this.U&&!this.L){t:{if(this.g){var E,O=this.g;if((E=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(E)){var L=E;break t}}L=null}if(a=L)Gs(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,bd(this,a);else{this.o=!1,this.m=3,vt(12),cs(this),yo(this);break e}}if(this.R){a=!0;let Ke;for(;!this.K&&this.C<g.length;)if(Ke=eT(this,g),Ke==Ed){ne==4&&(this.m=4,vt(14),a=!1),Gs(this.i,this.l,null,"[Incomplete Response]");break}else if(Ke==lg){this.m=4,vt(15),Gs(this.i,this.l,g,"[Invalid Chunk]"),a=!1;break}else Gs(this.i,this.l,Ke,null),bd(this,Ke);if(ug(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ne!=4||g.length!=0||this.h.h||(this.m=1,vt(16),a=!1),this.o=this.o&&a,!a)Gs(this.i,this.l,g,"[Invalid Chunked Response]"),cs(this),yo(this);else if(g.length>0&&!this.W){this.W=!0;var $=this.j;$.g==this&&$.aa&&!$.P&&($.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),Dd($),$.P=!0,vt(11))}}else Gs(this.i,this.l,g,null),bd(this,g);ne==4&&cs(this),this.o&&!this.K&&(ne==4?Lg(this.j,this):(this.o=!1,vl(this)))}else pT(this.g),f==400&&g.indexOf("Unknown SID")>0?(this.m=3,vt(12)):(this.m=0,vt(13)),cs(this),yo(this)}}}catch{}finally{}};function ZI(a){if(!ug(a))return a.g.la();const f=kg(a.g);if(f==="")return"";let g="";const E=f.length,O=ur(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return cs(a),yo(a),"";a.h.i=new o.TextDecoder}for(let L=0;L<E;L++)a.h.h=!0,g+=a.h.i.decode(f[L],{stream:!(O&&L==E-1)});return f.length=0,a.h.g+=g,a.C=0,a.h.g}function ug(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function eT(a,f){var g=a.C,E=f.indexOf(`
`,g);return E==-1?Ed:(g=Number(f.substring(g,E)),isNaN(g)?lg:(E+=1,E+g>f.length?Ed:(f=f.slice(E,E+g),a.C=E+g,f)))}ar.prototype.cancel=function(){this.K=!0,cs(this)};function vl(a){a.T=Date.now()+a.H,dg(a,a.H)}function dg(a,f){if(a.D!=null)throw Error("WatchDog timer not null");a.D=po(d(a.aa,a),f)}function Td(a){a.D&&(o.clearTimeout(a.D),a.D=null)}ar.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(YI(this.i,this.B),this.M!=2&&(fo(),vt(17)),cs(this),this.m=2,yo(this)):dg(this,this.T-a)};function yo(a){a.j.I==0||a.K||Lg(a.j,a)}function cs(a){Td(a);var f=a.O;f&&typeof f.dispose=="function"&&f.dispose(),a.O=null,Xm(a.V),a.g&&(f=a.g,a.g=null,f.abort(),f.dispose())}function bd(a,f){try{var g=a.j;if(g.I!=0&&(g.g==a||Sd(g.h,a))){if(!a.L&&Sd(g.h,a)&&g.I==3){try{var E=g.Ba.g.parse(f)}catch{E=null}if(Array.isArray(E)&&E.length==3){var O=E;if(O[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<a.F)Tl(g),El(g);else break e;Pd(g),vt(18)}}else g.xa=O[1],0<g.xa-g.K&&O[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=po(d(g.Va,g),6e3));pg(g.h)<=1&&g.ta&&(g.ta=void 0)}else ds(g,11)}else if((a.L||g.g==a)&&Tl(g),!S(f))for(O=g.Ba.g.parse(f),f=0;f<O.length;f++){let ge=O[f];const Ke=ge[0];if(!(Ke<=g.K))if(g.K=Ke,ge=ge[1],g.I==2)if(ge[0]=="c"){g.M=ge[1],g.ba=ge[2];const vn=ge[3];vn!=null&&(g.ka=vn,g.j.info("VER="+g.ka));const hs=ge[4];hs!=null&&(g.za=hs,g.j.info("SVER="+g.za));const dr=ge[5];dr!=null&&typeof dr=="number"&&dr>0&&(E=1.5*dr,g.O=E,g.j.info("backChannelRequestTimeoutMs_="+E)),E=g;const hr=a.g;if(hr){const Sl=hr.g?hr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sl){var L=E.h;L.g||Sl.indexOf("spdy")==-1&&Sl.indexOf("quic")==-1&&Sl.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Nd(L,L.h),L.h=null))}if(E.G){const jd=hr.g?hr.g.getResponseHeader("X-HTTP-Session-Id"):null;jd&&(E.wa=jd,we(E.J,E.G,jd))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-a.F,g.j.info("Handshake RTT: "+g.T+"ms")),E=g;var $=a;if(E.na=Fg(E,E.L?E.ba:null,E.W),$.L){mg(E.h,$);var ne=$,ze=E.O;ze&&(ne.H=ze),ne.D&&(Td(ne),vl(ne)),E.g=$}else jg(E);g.i.length>0&&Il(g)}else ge[0]!="stop"&&ge[0]!="close"||ds(g,7);else g.I==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?ds(g,7):Ad(g):ge[0]!="noop"&&g.l&&g.l.qa(ge),g.A=0)}}fo(4)}catch{}}var tT=class{constructor(a,f){this.g=a,this.map=f}};function hg(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function fg(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function pg(a){return a.h?1:a.g?a.g.size:0}function Sd(a,f){return a.h?a.h==f:a.g?a.g.has(f):!1}function Nd(a,f){a.g?a.g.add(f):a.h=f}function mg(a,f){a.h&&a.h==f?a.h=null:a.g&&a.g.has(f)&&a.g.delete(f)}hg.prototype.cancel=function(){if(this.i=gg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function gg(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let f=a.i;for(const g of a.g.values())f=f.concat(g.G);return f}return w(a.i)}var yg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nT(a,f){if(a){a=a.split("&");for(let g=0;g<a.length;g++){const E=a[g].indexOf("=");let O,L=null;E>=0?(O=a[g].substring(0,E),L=a[g].substring(E+1)):O=a[g],f(O,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function lr(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;a instanceof lr?(this.l=a.l,vo(this,a.j),this.o=a.o,this.g=a.g,_o(this,a.u),this.h=a.h,Rd(this,Ig(a.i)),this.m=a.m):a&&(f=String(a).match(yg))?(this.l=!1,vo(this,f[1]||"",!0),this.o=wo(f[2]||""),this.g=wo(f[3]||"",!0),_o(this,f[4]),this.h=wo(f[5]||"",!0),Rd(this,f[6]||"",!0),this.m=wo(f[7]||"")):(this.l=!1,this.i=new Eo(null,this.l))}lr.prototype.toString=function(){const a=[];var f=this.j;f&&a.push(xo(f,vg,!0),":");var g=this.g;return(g||f=="file")&&(a.push("//"),(f=this.o)&&a.push(xo(f,vg,!0),"@"),a.push(go(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&a.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&a.push("/"),a.push(xo(g,g.charAt(0)=="/"?iT:sT,!0))),(g=this.i.toString())&&a.push("?",g),(g=this.m)&&a.push("#",xo(g,aT)),a.join("")},lr.prototype.resolve=function(a){const f=yn(this);let g=!!a.j;g?vo(f,a.j):g=!!a.o,g?f.o=a.o:g=!!a.g,g?f.g=a.g:g=a.u!=null;var E=a.h;if(g)_o(f,a.u);else if(g=!!a.h){if(E.charAt(0)!="/")if(this.g&&!this.h)E="/"+E;else{var O=f.h.lastIndexOf("/");O!=-1&&(E=f.h.slice(0,O+1)+E)}if(O=E,O==".."||O==".")E="";else if(O.indexOf("./")!=-1||O.indexOf("/.")!=-1){E=O.lastIndexOf("/",0)==0,O=O.split("/");const L=[];for(let $=0;$<O.length;){const ne=O[$++];ne=="."?E&&$==O.length&&L.push(""):ne==".."?((L.length>1||L.length==1&&L[0]!="")&&L.pop(),E&&$==O.length&&L.push("")):(L.push(ne),E=!0)}E=L.join("/")}else E=O}return g?f.h=E:g=a.i.toString()!=="",g?Rd(f,Ig(a.i)):g=!!a.m,g&&(f.m=a.m),f};function yn(a){return new lr(a)}function vo(a,f,g){a.j=g?wo(f,!0):f,a.j&&(a.j=a.j.replace(/:$/,""))}function _o(a,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);a.u=f}else a.u=null}function Rd(a,f,g){f instanceof Eo?(a.i=f,lT(a.i,a.l)):(g||(f=xo(f,oT)),a.i=new Eo(f,a.l))}function we(a,f,g){a.i.set(f,g)}function _l(a){return we(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function wo(a,f){return a?f?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function xo(a,f,g){return typeof a=="string"?(a=encodeURI(a).replace(f,rT),g&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function rT(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var vg=/[#\/\?@]/g,sT=/[#\?:]/g,iT=/[#\?]/g,oT=/[#\?@]/g,aT=/#/g;function Eo(a,f){this.h=this.g=null,this.i=a||null,this.j=!!f}function us(a){a.g||(a.g=new Map,a.h=0,a.i&&nT(a.i,function(f,g){a.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=Eo.prototype,t.add=function(a,f){us(this),this.i=null,a=Ks(this,a);let g=this.g.get(a);return g||this.g.set(a,g=[]),g.push(f),this.h+=1,this};function _g(a,f){us(a),f=Ks(a,f),a.g.has(f)&&(a.i=null,a.h-=a.g.get(f).length,a.g.delete(f))}function wg(a,f){return us(a),f=Ks(a,f),a.g.has(f)}t.forEach=function(a,f){us(this),this.g.forEach(function(g,E){g.forEach(function(O){a.call(f,O,E,this)},this)},this)};function xg(a,f){us(a);let g=[];if(typeof f=="string")wg(a,f)&&(g=g.concat(a.g.get(Ks(a,f))));else for(a=Array.from(a.g.values()),f=0;f<a.length;f++)g=g.concat(a[f]);return g}t.set=function(a,f){return us(this),this.i=null,a=Ks(this,a),wg(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[f]),this.h+=1,this},t.get=function(a,f){return a?(a=xg(this,a),a.length>0?String(a[0]):f):f};function Eg(a,f,g){_g(a,f),g.length>0&&(a.i=null,a.g.set(Ks(a,f),w(g)),a.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],f=Array.from(this.g.keys());for(let E=0;E<f.length;E++){var g=f[E];const O=go(g);g=xg(this,g);for(let L=0;L<g.length;L++){let $=O;g[L]!==""&&($+="="+go(g[L])),a.push($)}}return this.i=a.join("&")};function Ig(a){const f=new Eo;return f.i=a.i,a.g&&(f.g=new Map(a.g),f.h=a.h),f}function Ks(a,f){return f=String(f),a.j&&(f=f.toLowerCase()),f}function lT(a,f){f&&!a.j&&(us(a),a.i=null,a.g.forEach(function(g,E){const O=E.toLowerCase();E!=O&&(_g(this,E),Eg(this,O,g))},a)),a.j=f}function cT(a,f){const g=new mo;if(o.Image){const E=new Image;E.onload=h(cr,g,"TestLoadImage: loaded",!0,f,E),E.onerror=h(cr,g,"TestLoadImage: error",!1,f,E),E.onabort=h(cr,g,"TestLoadImage: abort",!1,f,E),E.ontimeout=h(cr,g,"TestLoadImage: timeout",!1,f,E),o.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=a}else f(!1)}function uT(a,f){const g=new mo,E=new AbortController,O=setTimeout(()=>{E.abort(),cr(g,"TestPingServer: timeout",!1,f)},1e4);fetch(a,{signal:E.signal}).then(L=>{clearTimeout(O),L.ok?cr(g,"TestPingServer: ok",!0,f):cr(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),cr(g,"TestPingServer: error",!1,f)})}function cr(a,f,g,E,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),E(g)}catch{}}function dT(){this.g=new GI}function kd(a){this.i=a.Sb||null,this.h=a.ab||!1}p(kd,Zm),kd.prototype.g=function(){return new wl(this.i,this.h)};function wl(a,f){lt.call(this),this.H=a,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(wl,lt),t=wl.prototype,t.open=function(a,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=f,this.readyState=1,To(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(f.body=a),(this.H||o).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Io(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,To(this)),this.g&&(this.readyState=3,To(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Tg(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Tg(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var f=a.value?a.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!a.done}))&&(this.response=this.responseText+=f)}a.done?Io(this):To(this),this.readyState==3&&Tg(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,Io(this))},t.Na=function(a){this.g&&(this.response=a,Io(this))},t.ga=function(){this.g&&Io(this)};function Io(a){a.readyState=4,a.l=null,a.j=null,a.B=null,To(a)}t.setRequestHeader=function(a,f){this.A.append(a,f)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,a.push(g[0]+": "+g[1]),g=f.next();return a.join(`\r
`)};function To(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(wl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function bg(a){let f="";return K(a,function(g,E){f+=E,f+=":",f+=g,f+=`\r
`}),f}function Cd(a,f,g){e:{for(E in g){var E=!1;break e}E=!0}E||(g=bg(g),typeof a=="string"?g!=null&&go(g):we(a,f,g))}function Re(a){lt.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Re,lt);var hT=/^https?$/i,fT=["POST","PUT"];t=Re.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,f,g,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);f=f?f.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():og.g(),this.g.onreadystatechange=m(d(this.Ca,this));try{this.B=!0,this.g.open(f,String(a),!0),this.B=!1}catch(L){Sg(this,L);return}if(a=g||"",g=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var O in E)g.set(O,E[O]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const L of E.keys())g.set(L,E.get(L));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(g.keys()).find(L=>L.toLowerCase()=="content-type"),O=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(fT,f,void 0)>=0)||E||O||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,$]of g)this.g.setRequestHeader(L,$);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(L){Sg(this,L)}};function Sg(a,f){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=f,a.o=5,Ng(a),xl(a)}function Ng(a){a.A||(a.A=!0,yt(a,"complete"),yt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,yt(this,"complete"),yt(this,"abort"),xl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xl(this,!0)),Re.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Rg(this):this.Xa())},t.Xa=function(){Rg(this)};function Rg(a){if(a.h&&typeof i<"u"){if(a.v&&ur(a)==4)setTimeout(a.Ca.bind(a),0);else if(yt(a,"readystatechange"),ur(a)==4){a.h=!1;try{const L=a.ca();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var E;if(E=L===0){let $=String(a.D).match(yg)[1]||null;!$&&o.self&&o.self.location&&($=o.self.location.protocol.slice(0,-1)),E=!hT.test($?$.toLowerCase():"")}g=E}if(g)yt(a,"complete"),yt(a,"success");else{a.o=6;try{var O=ur(a)>2?a.g.statusText:""}catch{O=""}a.l=O+" ["+a.ca()+"]",Ng(a)}}finally{xl(a)}}}}function xl(a,f){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const g=a.g;a.g=null,f||yt(a,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ur(a){return a.g?a.g.readyState:0}t.ca=function(){try{return ur(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var f=this.g.responseText;return a&&f.indexOf(a)==0&&(f=f.substring(a.length)),qI(f)}};function kg(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function pT(a){const f={};a=(a.g&&ur(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<a.length;E++){if(S(a[E]))continue;var g=XI(a[E]);const O=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const L=f[O]||[];f[O]=L,L.push(g)}Y(f,function(E){return E.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function bo(a,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[a]||f}function Cg(a){this.za=0,this.i=[],this.j=new mo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=bo("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=bo("baseRetryDelayMs",5e3,a),this.Za=bo("retryDelaySeedMs",1e4,a),this.Ta=bo("forwardChannelMaxRetries",2,a),this.va=bo("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new hg(a&&a.concurrentRequestLimit),this.Ba=new dT,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Cg.prototype,t.ka=8,t.I=1,t.connect=function(a,f,g,E){vt(0),this.W=a,this.H=f||{},g&&E!==void 0&&(this.H.OSID=g,this.H.OAID=E),this.F=this.X,this.J=Fg(this,null,this.W),Il(this)};function Ad(a){if(Ag(a),a.I==3){var f=a.V++,g=yn(a.J);if(we(g,"SID",a.M),we(g,"RID",f),we(g,"TYPE","terminate"),So(a,g),f=new ar(a,a.j,f),f.M=2,f.A=_l(yn(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(f.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=f.A,g=!0),g||(f.g=Ug(f.j,null),f.g.ea(f.A)),f.F=Date.now(),vl(f)}Mg(a)}function El(a){a.g&&(Dd(a),a.g.cancel(),a.g=null)}function Ag(a){El(a),a.v&&(o.clearTimeout(a.v),a.v=null),Tl(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Il(a){if(!fg(a.h)&&!a.m){a.m=!0;var f=a.Ea;A||y(),D||(A(),D=!0),v.add(f,a),a.D=0}}function mT(a,f){return pg(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=f.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=po(d(a.Ea,a,f),Vg(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const O=new ar(this,this.j,a);let L=this.o;if(this.U&&(L?(L=se(L),Tt(L,this.U)):L=this.U),this.u!==null||this.R||(O.J=L,L=null),this.S)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var E=this.i[g];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(f+=E,f>4096){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Dg(this,O,f),g=yn(this.J),we(g,"RID",a),we(g,"CVER",22),this.G&&we(g,"X-HTTP-Session-Id",this.G),So(this,g),L&&(this.R?f="headers="+go(bg(L))+"&"+f:this.u&&Cd(g,this.u,L)),Nd(this.h,O),this.Ra&&we(g,"TYPE","init"),this.S?(we(g,"$req",f),we(g,"SID","null"),O.U=!0,Id(O,g,null)):Id(O,g,f),this.I=2}}else this.I==3&&(a?Pg(this,a):this.i.length==0||fg(this.h)||Pg(this))};function Pg(a,f){var g;f?g=f.l:g=a.V++;const E=yn(a.J);we(E,"SID",a.M),we(E,"RID",g),we(E,"AID",a.K),So(a,E),a.u&&a.o&&Cd(E,a.u,a.o),g=new ar(a,a.j,g,a.D+1),a.u===null&&(g.J=a.o),f&&(a.i=f.G.concat(a.i)),f=Dg(a,g,1e3),g.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Nd(a.h,g),Id(g,E,f)}function So(a,f){a.H&&K(a.H,function(g,E){we(f,E,g)}),a.l&&K({},function(g,E){we(f,E,g)})}function Dg(a,f,g){g=Math.min(a.i.length,g);const E=a.l?d(a.l.Ka,a.l,a):null;e:{var O=a.i;let ne=-1;for(;;){const ze=["count="+g];ne==-1?g>0?(ne=O[0].g,ze.push("ofs="+ne)):ne=0:ze.push("ofs="+ne);let ge=!0;for(let Ke=0;Ke<g;Ke++){var L=O[Ke].g;const vn=O[Ke].map;if(L-=ne,L<0)ne=Math.max(0,O[Ke].g-100),ge=!1;else try{L="req"+L+"_"||"";try{var $=vn instanceof Map?vn:Object.entries(vn);for(const[hs,dr]of $){let hr=dr;l(dr)&&(hr=vd(dr)),ze.push(L+hs+"="+encodeURIComponent(hr))}}catch(hs){throw ze.push(L+"type="+encodeURIComponent("_badmap")),hs}}catch{E&&E(vn)}}if(ge){$=ze.join("&");break e}}$=void 0}return a=a.i.splice(0,g),f.G=a,$}function jg(a){if(!a.g&&!a.v){a.Y=1;var f=a.Da;A||y(),D||(A(),D=!0),v.add(f,a),a.A=0}}function Pd(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=po(d(a.Da,a),Vg(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Og(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=po(d(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,vt(10),El(this),Og(this))};function Dd(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Og(a){a.g=new ar(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var f=yn(a.na);we(f,"RID","rpc"),we(f,"SID",a.M),we(f,"AID",a.K),we(f,"CI",a.F?"0":"1"),!a.F&&a.ia&&we(f,"TO",a.ia),we(f,"TYPE","xmlhttp"),So(a,f),a.u&&a.o&&Cd(f,a.u,a.o),a.O&&(a.g.H=a.O);var g=a.g;a=a.ba,g.M=1,g.A=_l(yn(f)),g.u=null,g.R=!0,cg(g,a)}t.Va=function(){this.C!=null&&(this.C=null,El(this),Pd(this),vt(19))};function Tl(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Lg(a,f){var g=null;if(a.g==f){Tl(a),Dd(a),a.g=null;var E=2}else if(Sd(a.h,f))g=f.G,mg(a.h,f),E=1;else return;if(a.I!=0){if(f.o)if(E==1){g=f.u?f.u.length:0,f=Date.now()-f.F;var O=a.D;E=gl(),yt(E,new sg(E,g)),Il(a)}else jg(a);else if(O=f.m,O==3||O==0&&f.X>0||!(E==1&&mT(a,f)||E==2&&Pd(a)))switch(g&&g.length>0&&(f=a.h,f.i=f.i.concat(g)),O){case 1:ds(a,5);break;case 4:ds(a,10);break;case 3:ds(a,6);break;default:ds(a,2)}}}function Vg(a,f){let g=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(g*=2),g*f}function ds(a,f){if(a.j.info("Error code "+f),f==2){var g=d(a.bb,a),E=a.Ua;const O=!E;E=new lr(E||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||vo(E,"https"),_l(E),O?cT(E.toString(),g):uT(E.toString(),g)}else vt(2);a.I=0,a.l&&a.l.pa(f),Mg(a),Ag(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function Mg(a){if(a.I=0,a.ja=[],a.l){const f=gg(a.h);(f.length!=0||a.i.length!=0)&&(R(a.ja,f),R(a.ja,a.i),a.h.i.length=0,w(a.i),a.i.length=0),a.l.oa()}}function Fg(a,f,g){var E=g instanceof lr?yn(g):new lr(g);if(E.g!="")f&&(E.g=f+"."+E.g),_o(E,E.u);else{var O=o.location;E=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;const L=new lr(null);E&&vo(L,E),f&&(L.g=f),O&&_o(L,O),g&&(L.h=g),E=L}return g=a.G,f=a.wa,g&&f&&we(E,g,f),we(E,"VER",a.ka),So(a,E),E}function Ug(a,f,g){if(f&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=a.Aa&&!a.ma?new Re(new kd({ab:g})):new Re(a.ma),f.Fa(a.L),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function zg(){}t=zg.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function bl(){}bl.prototype.g=function(a,f){return new Lt(a,f)};function Lt(a,f){lt.call(this),this.g=new Cg(f),this.l=a,this.h=f&&f.messageUrlParams||null,a=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(a?a["X-WebChannel-Content-Type"]=f.messageContentType:a={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(a?a["X-WebChannel-Client-Profile"]=f.sa:a={"X-WebChannel-Client-Profile":f.sa}),this.g.U=a,(a=f&&f.Qb)&&!S(a)&&(this.g.u=a),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!S(f)&&(this.g.G=f,a=this.h,a!==null&&f in a&&(a=this.h,f in a&&delete a[f])),this.j=new Qs(this)}p(Lt,lt),Lt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){Ad(this.g)},Lt.prototype.o=function(a){var f=this.g;if(typeof a=="string"){var g={};g.__data__=a,a=g}else this.v&&(g={},g.__data__=vd(a),a=g);f.i.push(new tT(f.Ya++,a)),f.I==3&&Il(f)},Lt.prototype.N=function(){this.g.l=null,delete this.j,Ad(this.g),delete this.g,Lt.Z.N.call(this)};function $g(a){_d.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var f=a.__sm__;if(f){e:{for(const g in f){a=g;break e}a=void 0}(this.i=a)&&(a=this.i,f=f!==null&&a in f?f[a]:void 0),this.data=f}else this.data=a}p($g,_d);function Bg(){wd.call(this),this.status=1}p(Bg,wd);function Qs(a){this.g=a}p(Qs,zg),Qs.prototype.ra=function(){yt(this.g,"a")},Qs.prototype.qa=function(a){yt(this.g,new $g(a))},Qs.prototype.pa=function(a){yt(this.g,new Bg)},Qs.prototype.oa=function(){yt(this.g,"b")},bl.prototype.createWebChannel=bl.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,K1=function(){return new bl},G1=function(){return gl()},q1=ls,jf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},yl.NO_ERROR=0,yl.TIMEOUT=8,yl.HTTP_ERROR=6,pc=yl,ig.COMPLETE="complete",H1=ig,eg.EventType=ho,ho.OPEN="a",ho.CLOSE="b",ho.ERROR="c",ho.MESSAGE="d",lt.prototype.listen=lt.prototype.J,Wo=eg,Re.prototype.listenOnce=Re.prototype.K,Re.prototype.getLastError=Re.prototype.Ha,Re.prototype.getLastErrorCode=Re.prototype.ya,Re.prototype.getStatus=Re.prototype.ca,Re.prototype.getResponseJson=Re.prototype.La,Re.prototype.getResponseText=Re.prototype.la,Re.prototype.send=Re.prototype.ea,Re.prototype.setWithCredentials=Re.prototype.Fa,W1=Re}).apply(typeof Hl<"u"?Hl:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ht=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ht.UNAUTHENTICATED=new ht(null),ht.GOOGLE_CREDENTIALS=new ht("google-credentials-uid"),ht.FIRST_PARTY=new ht("first-party-uid"),ht.MOCK_USER=new ht("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eo="12.8.0";function hA(t){eo=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls=new rm("@firebase/firestore");function Js(){return Ls.logLevel}function H(t,...e){if(Ls.logLevel<=ae.DEBUG){const n=e.map(mm);Ls.debug(`Firestore (${eo}): ${t}`,...n)}}function Zn(t,...e){if(Ls.logLevel<=ae.ERROR){const n=e.map(mm);Ls.error(`Firestore (${eo}): ${t}`,...n)}}function Vs(t,...e){if(Ls.logLevel<=ae.WARN){const n=e.map(mm);Ls.warn(`Firestore (${eo}): ${t}`,...n)}}function mm(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Q1(t,r,n)}function Q1(t,e,n){let r=`FIRESTORE (${eo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Zn(r),new Error(r)}function fe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Q1(e,s,r)}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends jn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class J1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ht.UNAUTHENTICATED))}shutdown(){}}class fA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class pA{constructor(e){this.t=e,this.currentUser=ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){fe(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new zr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new zr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new zr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(fe(typeof r.accessToken=="string",31837,{l:r}),new Y1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string",2055,{h:e}),new ht(e)}}class mA{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ht.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class gA{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new mA(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yA{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Me(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){fe(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new $0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(fe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new $0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=vA(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function le(t,e){return t<e?-1:t>e?1:0}function Of(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return yh(s)===yh(i)?le(s,i):yh(s)?1:-1}return le(t.length,e.length)}const _A=55296,wA=57343;function yh(t){const e=t.charCodeAt(0);return e>=_A&&e<=wA}function Li(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="__name__";class En{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&J(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return En.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof En?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=En.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return le(e.length,n.length)}static compareSegments(e,n){const r=En.isNumericId(e),s=En.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?En.extractNumericId(e).compare(En.extractNumericId(n)):Of(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ur.fromString(e.substring(4,e.length-2))}}class ye extends En{construct(e,n,r){return new ye(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ye(n)}static emptyPath(){return new ye([])}}const xA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Je extends En{construct(e,n,r){return new Je(e,n,r)}static isValidIdentifier(e){return xA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Je.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===B0}static keyField(){return new Je([B0])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new W(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new W(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new W(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new W(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Je(n)}static emptyPath(){return new Je([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(ye.fromString(e))}static fromName(e){return new Q(ye.fromString(e).popFirst(5))}static empty(){return new Q(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new ye(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(t,e,n){if(!n)throw new W(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Z1(t,e,n,r){if(e===!0&&r===!0)throw new W(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function W0(t){if(!Q.isDocumentKey(t))throw new W(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function H0(t){if(Q.isDocumentKey(t))throw new W(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function eE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Yu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J(12329,{type:typeof t})}function Jt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Yu(t);throw new W(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(t,e){const n={typeString:t};return e&&(n.value=e),n}function nl(t,e){if(!eE(t))throw new W(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new W(M.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=-62135596800,G0=1e6;class ve{static now(){return ve.fromMillis(Date.now())}static fromDate(e){return ve.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*G0);return new ve(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<q0)throw new W(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/G0}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ve._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(nl(e,ve._jsonSchema))return new ve(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-q0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ve._jsonSchemaVersion="firestore/timestamp/1.0",ve._jsonSchema={type:Ue("string",ve._jsonSchemaVersion),seconds:Ue("number"),nanoseconds:Ue("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{static fromTimestamp(e){return new X(e)}static min(){return new X(new ve(0,0))}static max(){return new X(new ve(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma=-1;function EA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=X.fromTimestamp(r===1e9?new ve(n+1,0):new ve(n,r));return new Gr(s,Q.empty(),e)}function IA(t){return new Gr(t.readTime,t.key,Ma)}class Gr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Gr(X.min(),Q.empty(),Ma)}static max(){return new Gr(X.max(),Q.empty(),Ma)}}function TA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function to(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==bA)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(h=>{o[d]=h,++l,l===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function NA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function no(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ju.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm=-1;function Xu(t){return t==null}function Xc(t){return t===0&&1/t==-1/0}function RA(t){return typeof t=="number"&&Number.isInteger(t)&&!Xc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="";function kA(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=K0(e)),e=CA(t.get(n),e);return K0(e)}function CA(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case tE:n+="";break;default:n+=i}}return n}function K0(t){return t+tE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ss(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function nE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,n){this.comparator=e,this.root=n||st.EMPTY}insert(e,n){return new Ne(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,st.BLACK,null,null))}remove(e){return new Ne(this.comparator,this.root.remove(e,this.comparator).copy(null,null,st.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ql(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ql(this.root,e,this.comparator,!1)}getReverseIterator(){return new ql(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ql(this.root,e,this.comparator,!0)}}class ql{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class st{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??st.RED,this.left=s??st.EMPTY,this.right=i??st.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new st(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return st.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return st.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,st.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,st.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw J(43730,{key:this.key,value:this.value});if(this.right.isRed())throw J(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw J(27949);return e+(this.isRed()?0:1)}}st.EMPTY=null,st.RED=!0,st.BLACK=!1;st.EMPTY=new class{constructor(){this.size=0}get key(){throw J(57766)}get value(){throw J(16141)}get color(){throw J(16727)}get left(){throw J(29726)}get right(){throw J(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new st(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Y0(this.data.getIterator())}getIteratorFrom(e){return new Y0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof He)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new He(this.comparator);return n.data=e,n}}class Y0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.fields=e,e.sort(Je.comparator)}static empty(){return new Ut([])}unionWith(e){let n=new He(Je.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ut(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Li(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new rE("Invalid base64 string: "+i):i}}(e);return new et(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}et.EMPTY_BYTE_STRING=new et("");const AA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kr(t){if(fe(!!t,39018),typeof t=="string"){let e=0;const n=AA.exec(t);if(fe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ce(t.seconds),nanos:Ce(t.nanos)}}function Ce(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qr(t){return typeof t=="string"?et.fromBase64String(t):et.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="server_timestamp",iE="__type__",oE="__previous_value__",aE="__local_write_time__";function ym(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[iE])==null?void 0:r.stringValue)===sE}function Zu(t){const e=t.mapValue.fields[oE];return ym(e)?Zu(e):e}function Fa(t){const e=Kr(t.mapValue.fields[aE].timestampValue);return new ve(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,n,r,s,i,o,l,c,d,h,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h,this.apiKey=p}}const Zc="(default)";class Vi{constructor(e,n){this.projectId=e,this.database=n||Zc}static empty(){return new Vi("","")}get isDefaultDatabase(){return this.database===Zc}isEqual(e){return e instanceof Vi&&e.projectId===this.projectId&&e.database===this.database}}function DA(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new W(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vi(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="__type__",jA="__max__",Gl={mapValue:{}},cE="__vector__",eu="value";function Yr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ym(t)?4:LA(t)?9007199254740991:OA(t)?10:11:J(28295,{value:t})}function An(t,e){if(t===e)return!0;const n=Yr(t);if(n!==Yr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fa(t).isEqual(Fa(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Kr(s.timestampValue),l=Kr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Qr(s.bytesValue).isEqual(Qr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ce(s.geoPointValue.latitude)===Ce(i.geoPointValue.latitude)&&Ce(s.geoPointValue.longitude)===Ce(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ce(s.integerValue)===Ce(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ce(s.doubleValue),l=Ce(i.doubleValue);return o===l?Xc(o)===Xc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Li(t.arrayValue.values||[],e.arrayValue.values||[],An);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Q0(o)!==Q0(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!An(o[c],l[c])))return!1;return!0}(t,e);default:return J(52216,{left:t})}}function Ua(t,e){return(t.values||[]).find(n=>An(n,e))!==void 0}function Mi(t,e){if(t===e)return 0;const n=Yr(t),r=Yr(e);if(n!==r)return le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return le(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Ce(i.integerValue||i.doubleValue),c=Ce(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return J0(t.timestampValue,e.timestampValue);case 4:return J0(Fa(t),Fa(e));case 5:return Of(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Qr(i),c=Qr(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let d=0;d<l.length&&d<c.length;d++){const h=le(l[d],c[d]);if(h!==0)return h}return le(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=le(Ce(i.latitude),Ce(o.latitude));return l!==0?l:le(Ce(i.longitude),Ce(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return X0(t.arrayValue,e.arrayValue);case 10:return function(i,o){var m,w,R,C;const l=i.fields||{},c=o.fields||{},d=(m=l[eu])==null?void 0:m.arrayValue,h=(w=c[eu])==null?void 0:w.arrayValue,p=le(((R=d==null?void 0:d.values)==null?void 0:R.length)||0,((C=h==null?void 0:h.values)==null?void 0:C.length)||0);return p!==0?p:X0(d,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Gl.mapValue&&o===Gl.mapValue)return 0;if(i===Gl.mapValue)return 1;if(o===Gl.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){const m=Of(c[p],h[p]);if(m!==0)return m;const w=Mi(l[c[p]],d[h[p]]);if(w!==0)return w}return le(c.length,h.length)}(t.mapValue,e.mapValue);default:throw J(23264,{he:n})}}function J0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return le(t,e);const n=Kr(t),r=Kr(e),s=le(n.seconds,r.seconds);return s!==0?s:le(n.nanos,r.nanos)}function X0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Mi(n[s],r[s]);if(i)return i}return le(n.length,r.length)}function Fi(t){return Lf(t)}function Lf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Kr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Qr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Lf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Lf(n.fields[o])}`;return s+"}"}(t.mapValue):J(61005,{value:t})}function mc(t){switch(Yr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Zu(t);return e?16+mc(e):16;case 5:return 2*t.stringValue.length;case 6:return Qr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+mc(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ss(r.fields,(i,o)=>{s+=i.length+mc(o)}),s}(t.mapValue);default:throw J(13486,{value:t})}}function Z0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Vf(t){return!!t&&"integerValue"in t}function vm(t){return!!t&&"arrayValue"in t}function ev(t){return!!t&&"nullValue"in t}function tv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gc(t){return!!t&&"mapValue"in t}function OA(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[lE])==null?void 0:r.stringValue)===cE}function aa(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ss(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=aa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=aa(t.arrayValue.values[n]);return e}return{...t}}function LA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===jA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.value=e}static empty(){return new kt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!gc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=aa(n)}setAll(e){let n=Je.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=aa(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());gc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return An(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];gc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ss(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new kt(aa(this.value))}}function uE(t){const e=[];return ss(t.fields,(n,r)=>{const s=new Je([n]);if(gc(r)){const i=uE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ut(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new pt(e,0,X.min(),X.min(),X.min(),kt.empty(),0)}static newFoundDocument(e,n,r,s){return new pt(e,1,n,X.min(),r,s,0)}static newNoDocument(e,n){return new pt(e,2,n,X.min(),X.min(),kt.empty(),0)}static newUnknownDocument(e,n){return new pt(e,3,n,X.min(),X.min(),kt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n){this.position=e,this.inclusive=n}}function nv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Q.comparator(Q.fromName(o.referenceValue),n.key):r=Mi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function rv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!An(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,n="asc"){this.field=e,this.dir=n}}function VA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{}class Fe extends dE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new FA(e,n,r):n==="array-contains"?new $A(e,r):n==="in"?new BA(e,r):n==="not-in"?new WA(e,r):n==="array-contains-any"?new HA(e,r):new Fe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new UA(e,r):new zA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Mi(n,this.value)):n!==null&&Yr(this.value)===Yr(n)&&this.matchesComparison(Mi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gn extends dE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new gn(e,n)}matches(e){return hE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hE(t){return t.op==="and"}function fE(t){return MA(t)&&hE(t)}function MA(t){for(const e of t.filters)if(e instanceof gn)return!1;return!0}function Mf(t){if(t instanceof Fe)return t.field.canonicalString()+t.op.toString()+Fi(t.value);if(fE(t))return t.filters.map(e=>Mf(e)).join(",");{const e=t.filters.map(n=>Mf(n)).join(",");return`${t.op}(${e})`}}function pE(t,e){return t instanceof Fe?function(r,s){return s instanceof Fe&&r.op===s.op&&r.field.isEqual(s.field)&&An(r.value,s.value)}(t,e):t instanceof gn?function(r,s){return s instanceof gn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&pE(o,s.filters[l]),!0):!1}(t,e):void J(19439)}function mE(t){return t instanceof Fe?function(n){return`${n.field.canonicalString()} ${n.op} ${Fi(n.value)}`}(t):t instanceof gn?function(n){return n.op.toString()+" {"+n.getFilters().map(mE).join(" ,")+"}"}(t):"Filter"}class FA extends Fe{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class UA extends Fe{constructor(e,n){super(e,"in",n),this.keys=gE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class zA extends Fe{constructor(e,n){super(e,"not-in",n),this.keys=gE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function gE(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}class $A extends Fe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return vm(n)&&Ua(n.arrayValue,this.value)}}class BA extends Fe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ua(this.value.arrayValue,n)}}class WA extends Fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ua(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ua(this.value.arrayValue,n)}}class HA extends Fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!vm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ua(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function sv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new qA(t,e,n,r,s,i,o)}function _m(t){const e=ee(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Mf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Xu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Fi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Fi(r)).join(",")),e.Te=n}return e.Te}function wm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!VA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!pE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!rv(t.startAt,e.startAt)&&rv(t.endAt,e.endAt)}function Ff(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function GA(t,e,n,r,s,i,o,l){return new ro(t,e,n,r,s,i,o,l)}function xm(t){return new ro(t)}function iv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function KA(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function yE(t){return t.collectionGroup!==null}function la(t){const e=ee(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new He(Je.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new za(i,r))}),n.has(Je.keyField().canonicalString())||e.Ie.push(new za(Je.keyField(),r))}return e.Ie}function Rn(t){const e=ee(t);return e.Ee||(e.Ee=QA(e,la(t))),e.Ee}function QA(t,e){if(t.limitType==="F")return sv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new za(s.field,i)});const n=t.endAt?new tu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new tu(t.startAt.position,t.startAt.inclusive):null;return sv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Uf(t,e){const n=t.filters.concat([e]);return new ro(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function YA(t,e){const n=t.explicitOrderBy.concat([e]);return new ro(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function zf(t,e,n){return new ro(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ed(t,e){return wm(Rn(t),Rn(e))&&t.limitType===e.limitType}function vE(t){return`${_m(Rn(t))}|lt:${t.limitType}`}function Xs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>mE(s)).join(", ")}]`),Xu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Fi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Fi(s)).join(",")),`Target(${r})`}(Rn(t))}; limitType=${t.limitType})`}function td(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Q.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of la(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const d=nv(o,l,c);return o.inclusive?d<=0:d<0}(r.startAt,la(r),s)||r.endAt&&!function(o,l,c){const d=nv(o,l,c);return o.inclusive?d>=0:d>0}(r.endAt,la(r),s))}(t,e)}function JA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function _E(t){return(e,n)=>{let r=!1;for(const s of la(t)){const i=XA(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function XA(t,e,n){const r=t.field.isKeyField()?Q.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),d=l.data.field(i);return c!==null&&d!==null?Mi(c,d):J(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ss(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return nE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=new Ne(Q.comparator);function er(){return ZA}const wE=new Ne(Q.comparator);function Ho(...t){let e=wE;for(const n of t)e=e.insert(n.key,n);return e}function xE(t){let e=wE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Es(){return ca()}function EE(){return ca()}function ca(){return new Hs(t=>t.toString(),(t,e)=>t.isEqual(e))}const eP=new Ne(Q.comparator),tP=new He(Q.comparator);function ce(...t){let e=tP;for(const n of t)e=e.add(n);return e}const nP=new He(le);function rP(){return nP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xc(e)?"-0":e}}function IE(t){return{integerValue:""+t}}function sP(t,e){return RA(e)?IE(e):Em(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(){this._=void 0}}function iP(t,e,n){return t instanceof nu?function(s,i){const o={fields:{[iE]:{stringValue:sE},[aE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&ym(i)&&(i=Zu(i)),i&&(o.fields[oE]=i),{mapValue:o}}(n,e):t instanceof $a?bE(t,e):t instanceof Ba?SE(t,e):function(s,i){const o=TE(s,i),l=ov(o)+ov(s.Ae);return Vf(o)&&Vf(s.Ae)?IE(l):Em(s.serializer,l)}(t,e)}function oP(t,e,n){return t instanceof $a?bE(t,e):t instanceof Ba?SE(t,e):n}function TE(t,e){return t instanceof ru?function(r){return Vf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class nu extends nd{}class $a extends nd{constructor(e){super(),this.elements=e}}function bE(t,e){const n=NE(e);for(const r of t.elements)n.some(s=>An(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ba extends nd{constructor(e){super(),this.elements=e}}function SE(t,e){let n=NE(e);for(const r of t.elements)n=n.filter(s=>!An(s,r));return{arrayValue:{values:n}}}class ru extends nd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function ov(t){return Ce(t.integerValue||t.doubleValue)}function NE(t){return vm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function aP(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof $a&&s instanceof $a||r instanceof Ba&&s instanceof Ba?Li(r.elements,s.elements,An):r instanceof ru&&s instanceof ru?An(r.Ae,s.Ae):r instanceof nu&&s instanceof nu}(t.transform,e.transform)}class lP{constructor(e,n){this.version=e,this.transformResults=n}}class Ot{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ot}static exists(e){return new Ot(void 0,e)}static updateTime(e){return new Ot(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class rd{}function RE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new sd(t.key,Ot.none()):new rl(t.key,t.data,Ot.none());{const n=t.data,r=kt.empty();let s=new He(Je.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new is(t.key,r,new Ut(s.toArray()),Ot.none())}}function cP(t,e,n){t instanceof rl?function(s,i,o){const l=s.value.clone(),c=lv(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof is?function(s,i,o){if(!yc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=lv(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(kE(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ua(t,e,n,r){return t instanceof rl?function(i,o,l,c){if(!yc(i.precondition,o))return l;const d=i.value.clone(),h=cv(i.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof is?function(i,o,l,c){if(!yc(i.precondition,o))return l;const d=cv(i.fieldTransforms,c,o),h=o.data;return h.setAll(kE(i)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,l){return yc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function uP(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=TE(r.transform,s||null);i!=null&&(n===null&&(n=kt.empty()),n.set(r.field,i))}return n||null}function av(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Li(r,s,(i,o)=>aP(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class rl extends rd{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class is extends rd{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function kE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function lv(t,e,n){const r=new Map;fe(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,oP(o,l,n[s]))}return r}function cv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,iP(i,o,e))}return r}class sd extends rd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dP extends rd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&cP(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ua(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ua(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=EE();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=RE(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&Li(this.mutations,e.mutations,(n,r)=>av(n,r))&&Li(this.baseMutations,e.baseMutations,(n,r)=>av(n,r))}}class Im{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){fe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return eP}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Im(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe,ue;function mP(t){switch(t){case M.OK:return J(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return J(15467,{code:t})}}function CE(t){if(t===void 0)return Zn("GRPC error has no .code"),M.UNKNOWN;switch(t){case Oe.OK:return M.OK;case Oe.CANCELLED:return M.CANCELLED;case Oe.UNKNOWN:return M.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return M.INTERNAL;case Oe.UNAVAILABLE:return M.UNAVAILABLE;case Oe.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Oe.NOT_FOUND:return M.NOT_FOUND;case Oe.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Oe.ABORTED:return M.ABORTED;case Oe.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Oe.DATA_LOSS:return M.DATA_LOSS;default:return J(39323,{code:t})}}(ue=Oe||(Oe={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP=new Ur([4294967295,4294967295],0);function uv(t){const e=gP().encode(t),n=new B1;return n.update(e),new Uint8Array(n.digest())}function dv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ur([n,r],0),new Ur([s,i],0)]}class Tm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new qo(`Invalid padding: ${n}`);if(r<0)throw new qo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new qo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ur.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Ur.fromNumber(r)));return s.compare(yP)===1&&(s=new Ur([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=uv(e),[r,s]=dv(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Tm(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=uv(e),[r,s]=dv(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class qo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,sl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new id(X.min(),s,new Ne(le),er(),ce())}}class sl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new sl(r,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class AE{constructor(e,n){this.targetId=e,this.Ce=n}}class PE{constructor(e,n,r=et.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class hv{constructor(){this.ve=0,this.Fe=fv(),this.Me=et.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ce(),n=ce(),r=ce();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:J(38017,{changeType:i})}}),new sl(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=fv()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,fe(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class vP{constructor(e){this.Ge=e,this.ze=new Map,this.je=er(),this.He=Kl(),this.Je=Kl(),this.Ze=new Ne(le)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:J(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Ff(i))if(r===0){const o=new Q(i.path);this.et(n,o,pt.newNoDocument(o,X.min()))}else fe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Qr(r).toUint8Array()}catch(c){if(c instanceof rE)return Vs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Tm(o,s,i)}catch(c){return Vs(c instanceof qo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&Ff(l.target)){const c=new Q(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,pt.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.Ke())}});let r=ce();this.Je.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new id(e,n,this.Ze,this.je,r);return this.je=er(),this.He=Kl(),this.Je=Kl(),this.Ze=new Ne(le),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new hv,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new He(le),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new He(le),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new hv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Kl(){return new Ne(Q.comparator)}function fv(){return new Ne(Q.comparator)}const _P={asc:"ASCENDING",desc:"DESCENDING"},wP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xP={and:"AND",or:"OR"};class EP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function $f(t,e){return t.useProto3Json||Xu(e)?e:{value:e}}function su(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function IP(t,e){return su(t,e.toTimestamp())}function kn(t){return fe(!!t,49232),X.fromTimestamp(function(n){const r=Kr(n);return new ve(r.seconds,r.nanos)}(t))}function bm(t,e){return Bf(t,e).canonicalString()}function Bf(t,e){const n=function(s){return new ye(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function jE(t){const e=ye.fromString(t);return fe(FE(e),10190,{key:e.toString()}),e}function Wf(t,e){return bm(t.databaseId,e.path)}function vh(t,e){const n=jE(e);if(n.get(1)!==t.databaseId.projectId)throw new W(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(LE(n))}function OE(t,e){return bm(t.databaseId,e)}function TP(t){const e=jE(t);return e.length===4?ye.emptyPath():LE(e)}function Hf(t){return new ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function LE(t){return fe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function pv(t,e,n){return{name:Wf(t,e),fields:n.value.mapValue.fields}}function bP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:J(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(fe(h===void 0||typeof h=="string",58123),et.fromBase64String(h||"")):(fe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),et.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const h=d.code===void 0?M.UNKNOWN:CE(d.code);return new W(h,d.message||"")}(o);n=new PE(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=vh(t,r.document.name),i=kn(r.document.updateTime),o=r.document.createTime?kn(r.document.createTime):X.min(),l=new kt({mapValue:{fields:r.document.fields}}),c=pt.newFoundDocument(s,i,o,l),d=r.targetIds||[],h=r.removedTargetIds||[];n=new vc(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=vh(t,r.document),i=r.readTime?kn(r.readTime):X.min(),o=pt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new vc([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=vh(t,r.document),i=r.removedTargetIds||[];n=new vc([],i,s,null)}else{if(!("filter"in e))return J(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new pP(s,i),l=r.targetId;n=new AE(l,o)}}return n}function SP(t,e){let n;if(e instanceof rl)n={update:pv(t,e.key,e.value)};else if(e instanceof sd)n={delete:Wf(t,e.key)};else if(e instanceof is)n={update:pv(t,e.key,e.data),updateMask:OP(e.fieldMask)};else{if(!(e instanceof dP))return J(16599,{dt:e.type});n={verify:Wf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof nu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof $a)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ba)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ru)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw J(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:IP(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:J(27497)}(t,e.precondition)),n}function NP(t,e){return t&&t.length>0?(fe(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?kn(s.updateTime):kn(i);return o.isEqual(X.min())&&(o=kn(i)),new lP(o,s.transformResults||[])}(n,e))):[]}function RP(t,e){return{documents:[OE(t,e.path)]}}function kP(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=OE(t,s);const i=function(d){if(d.length!==0)return ME(gn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(h=>function(m){return{field:Zs(m.field),direction:PP(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=$f(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function CP(t){let e=TP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){fe(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(p){const m=VE(p);return m instanceof gn&&fE(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(R){return new za(ei(R.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,Xu(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(p){const m=!!p.before,w=p.values||[];return new tu(w,m)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const m=!p.before,w=p.values||[];return new tu(w,m)}(n.endAt)),GA(e,s,o,i,l,"F",c,d)}function AP(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function VE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ei(n.unaryFilter.field);return Fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ei(n.unaryFilter.field);return Fe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ei(n.unaryFilter.field);return Fe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ei(n.unaryFilter.field);return Fe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return J(61313);default:return J(60726)}}(t):t.fieldFilter!==void 0?function(n){return Fe.create(ei(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return J(58110);default:return J(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return gn.create(n.compositeFilter.filters.map(r=>VE(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return J(1026)}}(n.compositeFilter.op))}(t):J(30097,{filter:t})}function PP(t){return _P[t]}function DP(t){return wP[t]}function jP(t){return xP[t]}function Zs(t){return{fieldPath:t.canonicalString()}}function ei(t){return Je.fromServerFormat(t.fieldPath)}function ME(t){return t instanceof Fe?function(n){if(n.op==="=="){if(tv(n.value))return{unaryFilter:{field:Zs(n.field),op:"IS_NAN"}};if(ev(n.value))return{unaryFilter:{field:Zs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(tv(n.value))return{unaryFilter:{field:Zs(n.field),op:"IS_NOT_NAN"}};if(ev(n.value))return{unaryFilter:{field:Zs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zs(n.field),op:DP(n.op),value:n.value}}}(t):t instanceof gn?function(n){const r=n.getFilters().map(s=>ME(s));return r.length===1?r[0]:{compositeFilter:{op:jP(n.op),filters:r}}}(t):J(54877,{filter:t})}function OP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function FE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function UE(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,n,r,s,i=X.min(),o=X.min(),l=et.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Nr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e){this.yt=e}}function VP(t){const e=CP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?zf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(){this.Sn=new FP}addToCollectionParentIndex(e,n){return this.Sn.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Gr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Gr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class FP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new He(ye.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new He(ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zE=41943040;class Nt{static withCacheSize(e){return new Nt(e,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nt.DEFAULT_COLLECTION_PERCENTILE=10,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nt.DEFAULT=new Nt(zE,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nt.DISABLED=new Nt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ui(0)}static ar(){return new Ui(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="LruGarbageCollector",UP=1048576;function yv([t,e],[n,r]){const s=le(t,n);return s===0?le(e,r):s}class zP{constructor(e){this.Pr=e,this.buffer=new He(yv),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();yv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class $P{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){H(gv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){no(n)?H(gv,"Ignoring IndexedDB error during garbage collection: ",n):await to(n)}await this.Ar(3e5)})}}class BP{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return F.resolve(Ju.ce);const r=new zP(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(mv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mv):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,i,o,l,c,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),Js()<=ae.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function WP(t,e){return new BP(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(){this.changes=new Hs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ua(r.mutation,s,Ut.empty(),ve.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){const s=Es();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ho();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Es();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=er();const o=ca(),l=function(){return ca()}();return n.forEach((c,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof is)?i=i.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),ua(h.mutation,d,h.mutation.getFieldMask(),ve.now())):o.set(d.key,Ut.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>l.set(d,new qP(h,o.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=ca();let s=new Ne((o,l)=>o-l),i=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=r.get(c)||Ut.empty();h=l.applyToLocalView(d,h),r.set(c,h);const p=(s.get(l.batchId)||ce()).add(c);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,h=c.value,p=EE();h.forEach(m=>{if(!i.has(m)){const w=RE(n.get(m),r.get(m));w!==null&&p.set(m,w),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return KA(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):yE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(Es());let l=Ma,c=i;return o.next(d=>F.forEach(d,(h,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,ce())).next(h=>({batchId:l,changes:xE(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let s=Ho();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ho();return this.indexManager.getCollectionParents(e,i).next(l=>F.forEach(l,c=>{const d=function(p,m){return new ro(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,pt.newInvalidDocument(h)))});let l=Ho();return o.forEach((c,d)=>{const h=i.get(c);h!==void 0&&ua(h.mutation,d,Ut.empty(),ve.now()),td(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return F.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:kn(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(s){return{name:s.name,query:VP(s.bundledQuery),readTime:kn(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(){this.overlays=new Ne(Q.comparator),this.Lr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Es();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.bt(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Lr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=Es(),i=n.length+1,o=new Q(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ne((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=Es(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=Es(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=s)););return F.resolve(l)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new fP(n,r));let i=this.Lr.get(n);i===void 0&&(i=ce(),this.Lr.set(n,i)),this.Lr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(){this.sessionToken=et.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(){this.kr=new He(Qe.Kr),this.qr=new He(Qe.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Qe(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Qe(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new Q(new ye([])),r=new Qe(n,e),s=new Qe(n,e+1),i=[];return this.qr.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Q(new ye([])),r=new Qe(n,e),s=new Qe(n,e+1);let i=ce();return this.qr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Qe(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Qe{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Q.comparator(e.key,n.key)||le(e.Hr,n.Hr)}static Ur(e,n){return le(e.Hr,n.Hr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new He(Qe.Kr)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new hP(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Jr=this.Jr.add(new Qe(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?gm:this.Yn-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Qe(n,0),s=new Qe(n,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],o=>{const l=this.Zr(o.Hr);i.push(l)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new He(le);return n.forEach(s=>{const i=new Qe(s,0),o=new Qe(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,o],l=>{r=r.add(l.Hr)})}),F.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Q.isDocumentKey(i)||(i=i.child(""));const o=new Qe(new Q(i),0);let l=new He(le);return this.Jr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(c.Hr)),!0)},o),F.resolve(this.Yr(l))}Yr(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){fe(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return F.forEach(n.mutations,s=>{const i=new Qe(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new Qe(n,0),s=this.Jr.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e){this.ti=e,this.docs=function(){return new Ne(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():pt.newInvalidDocument(n))}getEntries(e,n){let r=er();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():pt.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=er();const o=n.path,l=new Q(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||TA(IA(h),r)<=0||(s.has(h.key)||td(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){J(9500)}ni(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ZP(this)}getSize(e){return F.resolve(this.size)}}class ZP extends HP{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e){this.persistence=e,this.ri=new Hs(n=>_m(n),wm),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.ii=0,this.si=new Sm,this.targetCount=0,this.oi=Ui._r()}forEachTarget(e,n){return this.ri.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),F.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Ui(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.lr(n),F.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ri.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ri.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,n){this._i={},this.overlays={},this.ai=new Ju(0),this.ui=!1,this.ui=!0,this.ci=new YP,this.referenceDelegate=e(this),this.li=new e4(this),this.indexManager=new MP,this.remoteDocumentCache=function(s){return new XP(s)}(r=>this.referenceDelegate.hi(r)),this.serializer=new LP(n),this.Pi=new KP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new QP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new JP(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new t4(this.ai.next());return this.referenceDelegate.Ti(),r(s).next(i=>this.referenceDelegate.Ii(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return F.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class t4 extends SA{constructor(e){super(),this.currentSequenceNumber=e}}class Nm{constructor(e){this.persistence=e,this.Ri=new Sm,this.Ai=null}static Vi(e){return new Nm(e)}get di(){if(this.Ai)return this.Ai;throw J(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),F.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.di,r=>{const s=Q.fromPath(r);return this.mi(e,s).next(i=>{i||n.removeEntry(s,X.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return F.or([()=>F.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class iu{constructor(e,n){this.persistence=e,this.fi=new Hs(r=>kA(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=WP(this,n)}static Vi(e,n){return new iu(e,n)}Ti(){}Ii(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return F.forEach(this.fi,(r,s)=>this.wr(e,r,s).next(i=>i?F.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,o=>this.wr(e,o,n).next(l=>{l||(r++,i.removeEntry(o,X.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),F.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=mc(e.data.value)),n}wr(e,n,r){return F.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return F.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=ce(),s=ce();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Rm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return dN()?8:NA(gt())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.gs(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ps(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new n4;return this.ys(e,n,o).next(l=>{if(i.result=l,this.As)return this.ws(e,n,o,l.size)})}).next(()=>i.result)}ws(e,n,r,s){return r.documentReadCount<this.Vs?(Js()<=ae.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Xs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),F.resolve()):(Js()<=ae.DEBUG&&H("QueryEngine","Query:",Xs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Js()<=ae.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Xs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rn(n))):F.resolve())}gs(e,n){if(iv(n))return F.resolve(null);let r=Rn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=zf(n,null,"F"),r=Rn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ce(...i);return this.fs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.bs(n,l);return this.Ss(n,d,o,c.readTime)?this.gs(e,zf(n,null,"F")):this.Ds(e,d,n,c)}))})))}ps(e,n,r,s){return iv(n)||s.isEqual(X.min())?F.resolve(null):this.fs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ss(n,o,r,s)?F.resolve(null):(Js()<=ae.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Xs(n)),this.Ds(e,o,n,EA(s,Ma)).next(l=>l))})}bs(e,n){let r=new He(_E(e));return n.forEach((s,i)=>{td(e,i)&&(r=r.add(i))}),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,n,r){return Js()<=ae.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Xs(n)),this.fs.getDocumentsMatchingQuery(e,n,Gr.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km="LocalStore",s4=3e8;class i4{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new Ne(le),this.Fs=new Hs(i=>_m(i),wm),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GP(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function o4(t,e,n,r){return new i4(t,e,n,r)}async function BE(t,e){const n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=ce();for(const d of s){o.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of i){l.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Ns:d,removedBatchIds:o,addedBatchIds:l}))})})}function a4(t,e){const n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(l,c,d,h){const p=d.batch,m=p.keys();let w=F.resolve();return m.forEach(R=>{w=w.next(()=>h.getEntry(c,R)).next(C=>{const P=d.docVersions.get(R);fe(P!==null,48541),C.version.compareTo(P)<0&&(p.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),h.addEntry(C)))})}),w.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=ce();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function WE(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function l4(t,e){const n=ee(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const l=[];e.targetChanges.forEach((h,p)=>{const m=s.get(p);if(!m)return;l.push(n.li.removeMatchingKeys(i,h.removedDocuments,p).next(()=>n.li.addMatchingKeys(i,h.addedDocuments,p)));let w=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(et.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):h.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(h.resumeToken,r)),s=s.insert(p,w),function(C,P,I){return C.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=s4?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(m,w,h)&&l.push(n.li.updateTargetData(i,w))});let c=er(),d=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(c4(i,o,e.documentUpdates).next(h=>{c=h.Bs,d=h.Ls})),!r.isEqual(X.min())){const h=n.li.getLastRemoteSnapshotVersion(i).next(p=>n.li.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return F.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.vs=s,i))}function c4(t,e,n){let r=ce(),s=ce();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=er();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(X.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):H(km,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{Bs:o,Ls:s}})}function u4(t,e){const n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=gm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function d4(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.li.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.li.allocateTargetId(r).next(o=>(s=new Nr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function qf(t,e,n){const r=ee(t),s=r.vs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!no(o))throw o;H(km,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function vv(t,e,n){const r=ee(t);let s=X.min(),i=ce();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,h){const p=ee(c),m=p.Fs.get(h);return m!==void 0?F.resolve(p.vs.get(m)):p.li.getTargetData(d,h)}(r,o,Rn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:X.min(),n?i:ce())).next(l=>(h4(r,JA(e),l),{documents:l,ks:i})))}function h4(t,e,n){let r=t.Ms.get(e)||X.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ms.set(e,r)}class _v{constructor(){this.activeTargetIds=rP()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class f4{constructor(){this.vo=new _v,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new _v,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv="ConnectivityMonitor";class xv{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){H(wv,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){H(wv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ql=null;function Gf(){return Ql===null?Ql=function(){return 268435456+Math.round(2147483648*Math.random())}():Ql++,"0x"+Ql.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h="RestConnection",m4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class g4{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===Zc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=Gf(),l=this.Qo(e,n.toUriEncodedString());H(_h,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,s,i);const{host:d}=new URL(l),h=$s(d);return this.zo(e,l,c,r,h).then(p=>(H(_h,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Vs(_h,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",r),p})}jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+eo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Qo(e,n){const r=m4[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt="WebChannelConnection",Lo=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(s){setTimeout(()=>{throw s},0)}})};class bi extends g4{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!bi.c_){const e=G1();Lo(e,q1.STAT_EVENT,n=>{n.stat===jf.PROXY?H(dt,"STAT_EVENT: detected buffering proxy"):n.stat===jf.NOPROXY&&H(dt,"STAT_EVENT: detected no buffering proxy")}),bi.c_=!0}}zo(e,n,r,s,i){const o=Gf();return new Promise((l,c)=>{const d=new W1;d.setWithCredentials(!0),d.listenOnce(H1.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case pc.NO_ERROR:const p=d.getResponseJson();H(dt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case pc.TIMEOUT:H(dt,`RPC '${e}' ${o} timed out`),c(new W(M.DEADLINE_EXCEEDED,"Request time out"));break;case pc.HTTP_ERROR:const m=d.getStatus();if(H(dt,`RPC '${e}' ${o} failed with status:`,m,"response text:",d.getResponseText()),m>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);const R=w==null?void 0:w.error;if(R&&R.status&&R.message){const C=function(I){const _=I.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(_)>=0?_:M.UNKNOWN}(R.status);c(new W(C,R.message))}else c(new W(M.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new W(M.UNAVAILABLE,"Connection failed."));break;default:J(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{H(dt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);H(dt,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",h,r,15)})}T_(e,n,r){const s=Gf(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");H(dt,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let p=!1,m=!1;const w=new y4({Ho:R=>{m?H(dt,`Not sending because RPC '${e}' stream ${s} is closed:`,R):(p||(H(dt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),p=!0),H(dt,`RPC '${e}' stream ${s} sending:`,R),h.send(R))},Jo:()=>h.close()});return Lo(h,Wo.EventType.OPEN,()=>{m||(H(dt,`RPC '${e}' stream ${s} transport opened.`),w.i_())}),Lo(h,Wo.EventType.CLOSE,()=>{m||(m=!0,H(dt,`RPC '${e}' stream ${s} transport closed`),w.o_(),this.E_(h))}),Lo(h,Wo.EventType.ERROR,R=>{m||(m=!0,Vs(dt,`RPC '${e}' stream ${s} transport errored. Name:`,R.name,"Message:",R.message),w.o_(new W(M.UNAVAILABLE,"The operation could not be completed")))}),Lo(h,Wo.EventType.MESSAGE,R=>{var C;if(!m){const P=R.data[0];fe(!!P,16349);const I=P,_=(I==null?void 0:I.error)||((C=I[0])==null?void 0:C.error);if(_){H(dt,`RPC '${e}' stream ${s} received error:`,_);const T=_.status;let N=function(v){const y=Oe[v];if(y!==void 0)return CE(y)}(T),A=_.message;N===void 0&&(N=M.INTERNAL,A="Unknown error status: "+T+" with message "+_.message),m=!0,w.o_(new W(N,A)),h.close()}else H(dt,`RPC '${e}' stream ${s} received:`,P),w.__(P)}}),bi.u_(),setTimeout(()=>{w.s_()},0),w}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return K1()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v4(t){return new bi(t)}function wh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(t){return new EP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bi.c_=!1;class HE{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev="PersistentStream";class qE{constructor(e,n,r,s,i,o,l,c){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new HE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(Zn(n.toString()),Zn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new W(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return H(Ev,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(H(Ev,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _4 extends qE{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=bP(this.serializer,e),r=function(i){if(!("targetChange"in i))return X.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?X.min():o.readTime?kn(o.readTime):X.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=Hf(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=Ff(c)?{documents:RP(i,c)}:{query:kP(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=DE(i,o.resumeToken);const d=$f(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(X.min())>0){l.readTime=su(i,o.snapshotVersion.toTimestamp());const d=$f(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=AP(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=Hf(this.serializer),n.removeTarget=e,this.K_(n)}}class w4 extends qE{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=NP(e.writeResults,e.commitTime),r=kn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Hf(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>SP(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{}class E4 extends x4{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new W(M.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,Bf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new W(M.UNKNOWN,i.toString())})}jo(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.jo(e,Bf(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(M.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function I4(t,e,n,r){return new E4(t,e,n,r)}class T4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Zn(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms="RemoteStore";class b4{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{qs(this)&&(H(Ms,"Restarting streams for network reachability change."),await async function(c){const d=ee(c);d.Ea.add(4),await il(d),d.Va.set("Unknown"),d.Ea.delete(4),await ad(d)}(this))})}),this.Va=new T4(r,s)}}async function ad(t){if(qs(t))for(const e of t.Ra)await e(!0)}async function il(t){for(const e of t.Ra)await e(!1)}function GE(t,e){const n=ee(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Dm(n)?Pm(n):so(n).O_()&&Am(n,e))}function Cm(t,e){const n=ee(t),r=so(n);n.Ia.delete(e),r.O_()&&KE(n,e),n.Ia.size===0&&(r.O_()?r.L_():qs(n)&&n.Va.set("Unknown"))}function Am(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}so(t).Z_(e)}function KE(t,e){t.da.$e(e),so(t).X_(e)}function Pm(t){t.da=new vP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),so(t).start(),t.Va.ua()}function Dm(t){return qs(t)&&!so(t).x_()&&t.Ia.size>0}function qs(t){return ee(t).Ea.size===0}function QE(t){t.da=void 0}async function S4(t){t.Va.set("Online")}async function N4(t){t.Ia.forEach((e,n)=>{Am(t,e)})}async function R4(t,e){QE(t),Dm(t)?(t.Va.ha(e),Pm(t)):t.Va.set("Unknown")}async function k4(t,e,n){if(t.Va.set("Online"),e instanceof PE&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.da.removeTarget(l))}(t,e)}catch(r){H(Ms,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ou(t,r)}else if(e instanceof vc?t.da.Xe(e):e instanceof AE?t.da.st(e):t.da.tt(e),!n.isEqual(X.min()))try{const r=await WE(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.da.Tt(o);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(d);h&&i.Ia.set(d,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,d)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(et.EMPTY_BYTE_STRING,h.snapshotVersion)),KE(i,c);const p=new Nr(h.target,c,d,h.sequenceNumber);Am(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){H(Ms,"Failed to raise snapshot:",r),await ou(t,r)}}async function ou(t,e,n){if(!no(e))throw e;t.Ea.add(1),await il(t),t.Va.set("Offline"),n||(n=()=>WE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(Ms,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await ad(t)})}function YE(t,e){return e().catch(n=>ou(t,n,e))}async function ld(t){const e=ee(t),n=Jr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:gm;for(;C4(e);)try{const s=await u4(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,A4(e,s)}catch(s){await ou(e,s)}JE(e)&&XE(e)}function C4(t){return qs(t)&&t.Ta.length<10}function A4(t,e){t.Ta.push(e);const n=Jr(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function JE(t){return qs(t)&&!Jr(t).x_()&&t.Ta.length>0}function XE(t){Jr(t).start()}async function P4(t){Jr(t).ra()}async function D4(t){const e=Jr(t);for(const n of t.Ta)e.ea(n.mutations)}async function j4(t,e,n){const r=t.Ta.shift(),s=Im.from(r,e,n);await YE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ld(t)}async function O4(t,e){e&&Jr(t).Y_&&await async function(r,s){if(function(o){return mP(o)&&o!==M.ABORTED}(s.code)){const i=r.Ta.shift();Jr(r).B_(),await YE(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ld(r)}}(t,e),JE(t)&&XE(t)}async function Iv(t,e){const n=ee(t);n.asyncQueue.verifyOperationInProgress(),H(Ms,"RemoteStore received new credentials");const r=qs(n);n.Ea.add(3),await il(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ad(n)}async function L4(t,e){const n=ee(t);e?(n.Ea.delete(2),await ad(n)):e||(n.Ea.add(2),await il(n),n.Va.set("Unknown"))}function so(t){return t.ma||(t.ma=function(n,r,s){const i=ee(n);return i.sa(),new _4(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:S4.bind(null,t),Yo:N4.bind(null,t),t_:R4.bind(null,t),J_:k4.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),Dm(t)?Pm(t):t.Va.set("Unknown")):(await t.ma.stop(),QE(t))})),t.ma}function Jr(t){return t.fa||(t.fa=function(n,r,s){const i=ee(n);return i.sa(),new w4(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:P4.bind(null,t),t_:O4.bind(null,t),ta:D4.bind(null,t),na:j4.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await ld(t)):(await t.fa.stop(),t.Ta.length>0&&(H(Ms,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new jm(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Om(t,e){if(Zn("AsyncQueue",`${e}: ${t}`),no(t))return new W(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{static emptySet(e){return new Si(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=Ho(),this.sortedSet=new Ne(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Si)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Si;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(){this.ga=new Ne(Q.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):J(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class zi{constructor(e,n,r,s,i,o,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new zi(e,n,Si.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ed(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class M4{constructor(){this.queries=bv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ee(n),i=s.queries;s.queries=bv(),i.forEach((o,l)=>{for(const c of l.ba)c.onError(r)})})(this,new W(M.ABORTED,"Firestore shutting down"))}}function bv(){return new Hs(t=>vE(t),ed)}async function ZE(t,e){const n=ee(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new V4,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Om(o,`Initialization of query '${Xs(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.ba.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Lm(n)}async function eI(t,e){const n=ee(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.ba.indexOf(e);o>=0&&(i.ba.splice(o,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function F4(t,e){const n=ee(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.ba)l.Fa(s)&&(r=!0);o.wa=s}}r&&Lm(n)}function U4(t,e,n){const r=ee(t),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(n);r.queries.delete(e)}function Lm(t){t.Ca.forEach(e=>{e.next()})}var Kf,Sv;(Sv=Kf||(Kf={})).Ma="default",Sv.Cache="cache";class tI{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new zi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=zi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Kf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e){this.key=e}}class rI{constructor(e){this.key=e}}class z4{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ce(),this.mutatedKeys=ce(),this.eu=_E(e),this.tu=new Si(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new Tv,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,p)=>{const m=s.get(h),w=td(this.query,p)?p:null,R=!!m&&this.mutatedKeys.has(m.key),C=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let P=!1;m&&w?m.data.isEqual(w.data)?R!==C&&(r.track({type:3,doc:w}),P=!0):this.su(m,w)||(r.track({type:2,doc:w}),P=!0,(c&&this.eu(w,c)>0||d&&this.eu(w,d)<0)&&(l=!0)):!m&&w?(r.track({type:0,doc:w}),P=!0):m&&!w&&(r.track({type:1,doc:m}),P=!0,(c||d)&&(l=!0)),P&&(w?(o=o.add(w),i=C?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Ss:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,p)=>function(w,R){const C=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J(20277,{Vt:P})}};return C(w)-C(R)}(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Ya.size===0&&this.current&&!s?1:0,d=c!==this.Xa;return this.Xa=c,o.length!==0||d?{snapshot:new zi(this.query,e.tu,i,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Tv,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ce(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new rI(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new nI(r))}),n}cu(e){this.Za=e.ks,this.Ya=ce();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return zi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Vm="SyncEngine";class $4{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class B4{constructor(e){this.key=e,this.hu=!1}}class W4{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Hs(l=>vE(l),ed),this.Iu=new Map,this.Eu=new Set,this.Ru=new Ne(Q.comparator),this.Au=new Map,this.Vu=new Sm,this.du={},this.mu=new Map,this.fu=Ui.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function H4(t,e,n=!0){const r=cI(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await sI(r,e,n,!0),s}async function q4(t,e){const n=cI(t);await sI(n,e,!0,!1)}async function sI(t,e,n,r){const s=await d4(t.localStore,Rn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await G4(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&GE(t.remoteStore,s),l}async function G4(t,e,n,r,s){t.pu=(p,m,w)=>async function(C,P,I,_){let T=P.view.ru(I);T.Ss&&(T=await vv(C.localStore,P.query,!1).then(({documents:v})=>P.view.ru(v,T)));const N=_&&_.targetChanges.get(P.targetId),A=_&&_.targetMismatches.get(P.targetId)!=null,D=P.view.applyChanges(T,C.isPrimaryClient,N,A);return Rv(C,P.targetId,D.au),D.snapshot}(t,p,m,w);const i=await vv(t.localStore,e,!0),o=new z4(e,i.ks),l=o.ru(i.documents),c=sl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,c);Rv(t,n,d.au);const h=new $4(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function K4(t,e,n){const r=ee(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!ed(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await qf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Cm(r.remoteStore,s.targetId),Qf(r,s.targetId)}).catch(to)):(Qf(r,s.targetId),await qf(r.localStore,s.targetId,!0))}async function Q4(t,e){const n=ee(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Cm(n.remoteStore,r.targetId))}async function Y4(t,e,n){const r=rD(t);try{const s=await function(o,l){const c=ee(o),d=ve.now(),h=l.reduce((w,R)=>w.add(R.key),ce());let p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",w=>{let R=er(),C=ce();return c.xs.getEntries(w,h).next(P=>{R=P,R.forEach((I,_)=>{_.isValidDocument()||(C=C.add(I))})}).next(()=>c.localDocuments.getOverlayedDocuments(w,R)).next(P=>{p=P;const I=[];for(const _ of l){const T=uP(_,p.get(_.key).overlayedDocument);T!=null&&I.push(new is(_.key,T,uE(T.value.mapValue),Ot.exists(!0)))}return c.mutationQueue.addMutationBatch(w,d,I,l)}).next(P=>{m=P;const I=P.applyToLocalDocumentSet(p,C);return c.documentOverlayCache.saveOverlays(w,P.batchId,I)})}).then(()=>({batchId:m.batchId,changes:xE(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let d=o.du[o.currentUser.toKey()];d||(d=new Ne(le)),d=d.insert(l,c),o.du[o.currentUser.toKey()]=d}(r,s.batchId,n),await ol(r,s.changes),await ld(r.remoteStore)}catch(s){const i=Om(s,"Failed to persist write");n.reject(i)}}async function iI(t,e){const n=ee(t);try{const r=await l4(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(fe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?fe(o.hu,14607):s.removedDocuments.size>0&&(fe(o.hu,42227),o.hu=!1))}),await ol(n,r,e)}catch(r){await to(r)}}function Nv(t,e,n){const r=ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=ee(o);c.onlineState=l;let d=!1;c.queries.forEach((h,p)=>{for(const m of p.ba)m.va(l)&&(d=!0)}),d&&Lm(c)}(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function J4(t,e,n){const r=ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ne(Q.comparator);o=o.insert(i,pt.newNoDocument(i,X.min()));const l=ce().add(i),c=new id(X.min(),new Map,new Ne(le),o,l);await iI(r,c),r.Ru=r.Ru.remove(i),r.Au.delete(e),Mm(r)}else await qf(r.localStore,e,!1).then(()=>Qf(r,e,n)).catch(to)}async function X4(t,e){const n=ee(t),r=e.batch.batchId;try{const s=await a4(n.localStore,e);aI(n,r,null),oI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ol(n,s)}catch(s){await to(s)}}async function Z4(t,e,n){const r=ee(t);try{const s=await function(o,l){const c=ee(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,l).next(p=>(fe(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(r.localStore,e);aI(r,e,n),oI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ol(r,s)}catch(s){await to(s)}}function oI(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function aI(t,e,n){const r=ee(t);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function Qf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||lI(t,r)})}function lI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(Cm(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),Mm(t))}function Rv(t,e,n){for(const r of n)r instanceof nI?(t.Vu.addReference(r.key,e),eD(t,r)):r instanceof rI?(H(Vm,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||lI(t,r.key)):J(19791,{wu:r})}function eD(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(H(Vm,"New document in limbo: "+n),t.Eu.add(r),Mm(t))}function Mm(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Q(ye.fromString(e)),r=t.fu.next();t.Au.set(r,new B4(n)),t.Ru=t.Ru.insert(n,r),GE(t.remoteStore,new Nr(Rn(xm(n.path)),r,"TargetPurposeLimboResolution",Ju.ce))}}async function ol(t,e,n){const r=ee(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{o.push(r.pu(c,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){s.push(d);const p=Rm.Es(c.targetId,d);i.push(p)}}))}),await Promise.all(o),r.Pu.J_(s),await async function(c,d){const h=ee(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(d,m=>F.forEach(m.Ts,w=>h.persistence.referenceDelegate.addReference(p,m.targetId,w)).next(()=>F.forEach(m.Is,w=>h.persistence.referenceDelegate.removeReference(p,m.targetId,w)))))}catch(p){if(!no(p))throw p;H(km,"Failed to update sequence numbers: "+p)}for(const p of d){const m=p.targetId;if(!p.fromCache){const w=h.vs.get(m),R=w.snapshotVersion,C=w.withLastLimboFreeSnapshotVersion(R);h.vs=h.vs.insert(m,C)}}}(r.localStore,i))}async function tD(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){H(Vm,"User change. New user:",e.toKey());const r=await BE(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new W(M.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ol(n,r.Ns)}}function nD(t,e){const n=ee(t),r=n.Au.get(e);if(r&&r.hu)return ce().add(r.key);{let s=ce();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function cI(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=iI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=J4.bind(null,e),e.Pu.J_=F4.bind(null,e.eventManager),e.Pu.yu=U4.bind(null,e.eventManager),e}function rD(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=X4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Z4.bind(null,e),e}class au{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=od(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return o4(this.persistence,new r4,e.initialUser,this.serializer)}Cu(e){return new $E(Nm.Vi,this.serializer)}Du(e){return new f4}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}au.provider={build:()=>new au};class sD extends au{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){fe(this.persistence.referenceDelegate instanceof iu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new $P(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Nt.withCacheSize(this.cacheSizeBytes):Nt.DEFAULT;return new $E(r=>iu.Vi(r,n),this.serializer)}}class Yf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Nv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=tD.bind(null,this.syncEngine),await L4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new M4}()}createDatastore(e){const n=od(e.databaseInfo.databaseId),r=v4(e.databaseInfo);return I4(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new b4(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Nv(this.syncEngine,n,0),function(){return xv.v()?new xv:new p4}())}createSyncEngine(e,n){return function(s,i,o,l,c,d,h){const p=new W4(s,i,o,l,c,d);return h&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ee(s);H(Ms,"RemoteStore shutting down."),i.Ea.add(5),await il(i),i.Aa.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Yf.provider={build:()=>new Yf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Zn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="FirestoreClient";class iD{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=ht.UNAUTHENTICATED,this.clientId=Qu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H(Xr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H(Xr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Om(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function xh(t,e){t.asyncQueue.verifyOperationInProgress(),H(Xr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await BE(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function kv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await oD(t);H(Xr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Iv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Iv(e.remoteStore,s)),t._onlineComponents=e}async function oD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(Xr,"Using user provided OfflineComponentProvider");try{await xh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===M.FAILED_PRECONDITION||s.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Vs("Error using user provided cache. Falling back to memory cache: "+n),await xh(t,new au)}}else H(Xr,"Using default OfflineComponentProvider"),await xh(t,new sD(void 0));return t._offlineComponents}async function dI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(Xr,"Using user provided OnlineComponentProvider"),await kv(t,t._uninitializedComponentsProvider._online)):(H(Xr,"Using default OnlineComponentProvider"),await kv(t,new Yf))),t._onlineComponents}function aD(t){return dI(t).then(e=>e.syncEngine)}async function Jf(t){const e=await dI(t),n=e.eventManager;return n.onListen=H4.bind(null,e.syncEngine),n.onUnlisten=K4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=q4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Q4.bind(null,e.syncEngine),n}function lD(t,e,n,r){const s=new uI(r),i=new tI(e,s,n);return t.asyncQueue.enqueueAndForget(async()=>ZE(await Jf(t),i)),()=>{s.Nu(),t.asyncQueue.enqueueAndForget(async()=>eI(await Jf(t),i))}}function cD(t,e,n={}){const r=new zr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const h=new uI({next:m=>{h.Nu(),o.enqueueAndForget(()=>eI(i,p)),m.fromCache&&c.source==="server"?d.reject(new W(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),p=new tI(l,h,{includeMetadataChanges:!0,Ka:!0});return ZE(i,p)}(await Jf(t),t.asyncQueue,e,n,r)),r.promise}function uD(t,e){const n=new zr;return t.asyncQueue.enqueueAndForget(async()=>Y4(await aD(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD="ComponentProvider",Cv=new Map;function hD(t,e,n,r,s){return new PA(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,hI(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI="firestore.googleapis.com",Av=!0;class Pv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new W(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fI,this.ssl=Av}else this.host=e.host,this.ssl=e.ssl??Av;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<UP)throw new W(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Z1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hI(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new W(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new W(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new W(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cd{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new J1;switch(r.type){case"firstParty":return new gA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Cv.get(n);r&&(H(dD,"Removing Datastore"),Cv.delete(n),r.terminate())}(this),Promise.resolve()}}function pI(t,e,n,r={}){var d;t=Jt(t,cd);const s=$s(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(tm(`https://${l}`),nm("Firestore",!0)),i.host!==fI&&i.host!==l&&Vs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!Ds(c,o)&&(t._setSettings(c),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=ht.MOCK_USER;else{h=Wx(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new W(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ht(m)}t._authCredentials=new fA(new Y1(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ir(this.firestore,e,this._query)}}class De{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new De(this.firestore,e,this._key)}toJSON(){return{type:De._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(nl(n,De._jsonSchema))return new De(e,r||null,new Q(ye.fromString(n.referencePath)))}}De._jsonSchemaVersion="firestore/documentReference/1.0",De._jsonSchema={type:Ue("string",De._jsonSchemaVersion),referencePath:Ue("string")};class Hn extends ir{constructor(e,n,r){super(e,n,xm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new De(this.firestore,null,new Q(e))}withConverter(e){return new Hn(this.firestore,e,this._path)}}function bs(t,e,...n){if(t=re(t),X1("collection","path",e),t instanceof cd){const r=ye.fromString(e,...n);return H0(r),new Hn(t,null,r)}{if(!(t instanceof De||t instanceof Hn))throw new W(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ye.fromString(e,...n));return H0(r),new Hn(t.firestore,null,r)}}function Qt(t,e,...n){if(t=re(t),arguments.length===1&&(e=Qu.newId()),X1("doc","path",e),t instanceof cd){const r=ye.fromString(e,...n);return W0(r),new De(t,null,new Q(r))}{if(!(t instanceof De||t instanceof Hn))throw new W(M.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ye.fromString(e,...n));return W0(r),new De(t.firestore,t instanceof Hn?t.converter:null,new Q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="AsyncQueue";class jv{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new HE(this,"async_queue_retry"),this._c=()=>{const r=wh();r&&H(Dv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=wh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=wh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new zr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!no(e))throw e;H(Dv,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Zn("INTERNAL UNHANDLED ERROR: ",Ov(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=jm.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&J(47125,{Pc:Ov(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Ov(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class tr extends cd{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new jv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jv(e),this._firestoreClient=void 0,await e}}}function mI(t,e){const n=typeof t=="object"?t:im(),r=typeof t=="string"?t:Zc,s=Vu(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=zx("firestore");i&&pI(s,...i)}return s}function al(t){if(t._terminated)throw new W(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||fD(t),t._firestoreClient}function fD(t){var r,s,i,o;const e=t._freezeSettings(),n=hD(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(s=t._app)==null?void 0:s.options.apiKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new iD(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mt(et.fromBase64String(e))}catch(n){throw new W(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Mt(et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Mt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(nl(e,Mt._jsonSchema))return Mt.fromBase64String(e.bytes)}}Mt._jsonSchemaVersion="firestore/bytes/1.0",Mt._jsonSchema={type:Ue("string",Mt._jsonSchemaVersion),bytes:Ue("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Je(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pn._jsonSchemaVersion}}static fromJSON(e){if(nl(e,pn._jsonSchema))return new pn(e.latitude,e.longitude)}}pn._jsonSchemaVersion="firestore/geoPoint/1.0",pn._jsonSchema={type:Ue("string",pn._jsonSchemaVersion),latitude:Ue("number"),longitude:Ue("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Xt._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(nl(e,Xt._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Xt(e.vectorValues);throw new W(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Xt._jsonSchemaVersion="firestore/vectorValue/1.0",Xt._jsonSchema={type:Ue("string",Xt._jsonSchemaVersion),vectorValues:Ue("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD=/^__.*__$/;class mD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new is(e,this.data,this.fieldMask,n,this.fieldTransforms):new rl(e,this.data,n,this.fieldTransforms)}}class gI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new is(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function yI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J(40011,{dataSource:t})}}class Fm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Fm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return lu(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(yI(this.dataSource)&&pD.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class gD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||od(e)}createContext(e,n,r,s=!1){return new Fm({dataSource:e,methodName:n,targetDoc:r,path:Je.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dd(t){const e=t._freezeSettings(),n=od(t._databaseId);return new gD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function vI(t,e,n,r,s,i={}){const o=t.createContext(i.merge||i.mergeFields?2:0,e,n,s);Um("Data must be an object, but it was:",o,r);const l=xI(r,o);let c,d;if(i.merge)c=new Ut(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const p of i.mergeFields){const m=Fs(e,p,n);if(!o.contains(m))throw new W(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);TI(h,m)||h.push(m)}c=new Ut(h),d=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=o.fieldTransforms;return new mD(new kt(l),c,d)}class hd extends ud{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hd}}function _I(t,e,n,r){const s=t.createContext(1,e,n);Um("Data must be an object, but it was:",s,r);const i=[],o=kt.empty();ss(r,(c,d)=>{const h=II(e,c,n);d=re(d);const p=s.childContextForFieldPath(h);if(d instanceof hd)i.push(h);else{const m=cl(d,p);m!=null&&(i.push(h),o.set(h,m))}});const l=new Ut(i);return new gI(o,l,s.fieldTransforms)}function wI(t,e,n,r,s,i){const o=t.createContext(1,e,n),l=[Fs(e,r,n)],c=[s];if(i.length%2!=0)throw new W(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(Fs(e,i[m])),c.push(i[m+1]);const d=[],h=kt.empty();for(let m=l.length-1;m>=0;--m)if(!TI(d,l[m])){const w=l[m];let R=c[m];R=re(R);const C=o.childContextForFieldPath(w);if(R instanceof hd)d.push(w);else{const P=cl(R,C);P!=null&&(d.push(w),h.set(w,P))}}const p=new Ut(d);return new gI(h,p,o.fieldTransforms)}function yD(t,e,n,r=!1){return cl(n,t.createContext(r?4:3,e))}function cl(t,e){if(EI(t=re(t)))return Um("Unsupported field value:",e,t),xI(t,e);if(t instanceof ud)return function(r,s){if(!yI(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=cl(l,s.childContextForArray(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=re(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return sP(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ve.fromDate(r);return{timestampValue:su(s.serializer,i)}}if(r instanceof ve){const i=new ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:su(s.serializer,i)}}if(r instanceof pn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Mt)return{bytesValue:DE(s.serializer,r._byteString)};if(r instanceof De){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:bm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Xt)return function(o,l){const c=o instanceof Xt?o.toArray():o;return{mapValue:{fields:{[lE]:{stringValue:cE},[eu]:{arrayValue:{values:c.map(h=>{if(typeof h!="number")throw l.createError("VectorValues must only contain numeric values.");return Em(l.serializer,h)})}}}}}}(r,s);if(UE(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${Yu(r)}`)}(t,e)}function xI(t,e){const n={};return nE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ss(t,(r,s)=>{const i=cl(s,e.childContextForField(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function EI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ve||t instanceof pn||t instanceof Mt||t instanceof De||t instanceof ud||t instanceof Xt||UE(t))}function Um(t,e,n){if(!EI(n)||!eE(n)){const r=Yu(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Fs(t,e,n){if((e=re(e))instanceof ll)return e._internalPath;if(typeof e=="string")return II(t,e);throw lu("Field path arguments must be of type string or ",t,!1,void 0,n)}const vD=new RegExp("[~\\*/\\[\\]]");function II(t,e,n){if(e.search(vD)>=0)throw lu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ll(...e.split("."))._internalPath}catch{throw lu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function lu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new W(M.INVALID_ARGUMENT,l+t+c)}function TI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{convertValue(e,n="none"){switch(Yr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ce(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw J(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ss(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[eu].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Ce(o.doubleValue));return new Xt(n)}convertGeoPoint(e){return new pn(Ce(e.latitude),Ce(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Zu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fa(e));default:return null}}convertTimestamp(e){const n=Kr(e);return new ve(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ye.fromString(e);fe(FE(r),9688,{name:e});const s=new Vi(r.get(1),r.get(3)),i=new Q(r.popFirst(5));return s.isEqual(n)||Zn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm extends bI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new De(this.firestore,null,n)}}const Lv="@firebase/firestore",Vv="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new De(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _D(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(Fs("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class _D extends SI{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $m{}class Bm extends $m{}function da(t,e,...n){let r=[];e instanceof $m&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof fd).length,l=i.filter(c=>c instanceof ul).length;if(o>1||o>0&&l>0)throw new W(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class ul extends Bm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ul(e,n,r)}_apply(e){const n=this._parse(e);return CI(e._query,n),new ir(e.firestore,e.converter,Uf(e._query,n))}_parse(e){const n=dd(e.firestore);return function(i,o,l,c,d,h,p){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new W(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Uv(p,h);const R=[];for(const C of p)R.push(Fv(c,i,C));m={arrayValue:{values:R}}}else m=Fv(c,i,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Uv(p,h),m=yD(l,o,p,h==="in"||h==="not-in");return Fe.create(d,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function RI(t,e,n){const r=e,s=Fs("where",t);return ul._create(s,r,n)}class fd extends $m{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new fd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:gn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)CI(o,c),o=Uf(o,c)}(e._query,n),new ir(e.firestore,e.converter,Uf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class pd extends Bm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new pd(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new W(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new W(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new za(i,o)}(e._query,this._field,this._direction);return new ir(e.firestore,e.converter,YA(e._query,n))}}function kI(t,e="asc"){const n=e,r=Fs("orderBy",t);return pd._create(r,n)}function Fv(t,e,n){if(typeof(n=re(n))=="string"){if(n==="")throw new W(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yE(e)&&n.indexOf("/")!==-1)throw new W(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ye.fromString(n));if(!Q.isDocumentKey(r))throw new W(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Z0(t,new Q(r))}if(n instanceof De)return Z0(t,n._key);throw new W(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yu(n)}.`)}function Uv(t,e){if(!Array.isArray(t)||t.length===0)throw new W(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function CI(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function AI(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class fi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $r extends SI{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ha(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Fs("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new W(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=$r._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}$r._jsonSchemaVersion="firestore/documentSnapshot/1.0",$r._jsonSchema={type:Ue("string",$r._jsonSchemaVersion),bundleSource:Ue("string","DocumentSnapshot"),bundleName:Ue("string"),bundle:Ue("string")};class ha extends $r{data(e={}){return super.data(e)}}class Br{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new fi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ha(this._firestore,this._userDataWriter,r.key,r,new fi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new ha(s._firestore,s._userDataWriter,l.doc.key,l.doc,new fi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new ha(s._firestore,s._userDataWriter,l.doc.key,l.doc,new fi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:wD(l.type),doc:c,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new W(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Br._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Qu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function wD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Br._jsonSchemaVersion="firestore/querySnapshot/1.0",Br._jsonSchema={type:Ue("string",Br._jsonSchemaVersion),bundleSource:Ue("string","QuerySnapshot"),bundleName:Ue("string"),bundle:Ue("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=dd(e)}set(e,n,r){this._verifyNotCommitted();const s=Eh(e,this._firestore),i=AI(s.converter,n,r),o=vI(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Ot.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Eh(e,this._firestore);let o;return o=typeof(n=re(n))=="string"||n instanceof ll?wI(this._dataReader,"WriteBatch.update",i._key,n,r,s):_I(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,Ot.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Eh(e,this._firestore);return this._mutations=this._mutations.concat(new sd(n._key,Ot.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new W(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Eh(t,e){if((t=re(t)).firestore!==e)throw new W(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Wm(t){t=Jt(t,ir);const e=Jt(t.firestore,tr),n=al(e),r=new zm(e);return NI(t._query),cD(n,t._query).then(s=>new Br(e,r,t,s))}function Bn(t,e,n,...r){t=Jt(t,De);const s=Jt(t.firestore,tr),i=dd(s);let o;return o=typeof(e=re(e))=="string"||e instanceof ll?wI(i,"updateDoc",t._key,e,n,r):_I(i,"updateDoc",t._key,e),dl(s,[o.toMutation(t._key,Ot.exists(!0))])}function xD(t){return dl(Jt(t.firestore,tr),[new sd(t._key,Ot.none())])}function ED(t,e){const n=Jt(t.firestore,tr),r=Qt(t),s=AI(t.converter,e),i=dd(t.firestore);return dl(n,[vI(i,"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Ot.exists(!1))]).then(()=>r)}function _c(t,...e){var d,h,p;t=re(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Mv(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Mv(e[r])){const m=e[r];e[r]=(d=m.next)==null?void 0:d.bind(m),e[r+1]=(h=m.error)==null?void 0:h.bind(m),e[r+2]=(p=m.complete)==null?void 0:p.bind(m)}let i,o,l;if(t instanceof De)o=Jt(t.firestore,tr),l=xm(t._key.path),i={next:m=>{e[r]&&e[r](ID(o,t,m))},error:e[r+1],complete:e[r+2]};else{const m=Jt(t,ir);o=Jt(m.firestore,tr),l=m._query;const w=new zm(o);i={next:R=>{e[r]&&e[r](new Br(o,w,m,R))},error:e[r+1],complete:e[r+2]},NI(t._query)}const c=al(o);return lD(c,l,s,i)}function dl(t,e){const n=al(t);return uD(n,e)}function ID(t,e,n){const r=n.docs.get(e._key),s=new zm(t);return new $r(t,s,e._key,r,new fi(n.hasPendingWrites,n.fromCache),e.converter)}function Xf(t){return t=Jt(t,tr),al(t),new PI(t,e=>dl(t,e))}(function(e,n=!0){hA(Bs),js(new qr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new tr(new pA(r.getProvider("auth-internal")),new yA(o,r.getProvider("app-check-internal")),DA(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Nn(Lv,Vv,e),Nn(Lv,Vv,"esm2020")})();const Ih=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:bI,Bytes:Mt,CollectionReference:Hn,DocumentReference:De,DocumentSnapshot:$r,FieldPath:ll,FieldValue:ud,Firestore:tr,FirestoreError:W,GeoPoint:pn,Query:ir,QueryCompositeFilterConstraint:fd,QueryConstraint:Bm,QueryDocumentSnapshot:ha,QueryFieldFilterConstraint:ul,QueryOrderByConstraint:pd,QuerySnapshot:Br,SnapshotMetadata:fi,Timestamp:ve,VectorValue:Xt,WriteBatch:PI,_AutoId:Qu,_ByteString:et,_DatabaseId:Vi,_DocumentKey:Q,_EmptyAuthCredentialsProvider:J1,_FieldPath:Je,_cast:Jt,_logWarn:Vs,_validateIsNotUsedTogether:Z1,addDoc:ED,collection:bs,connectFirestoreEmulator:pI,deleteDoc:xD,doc:Qt,ensureFirestoreConfigured:al,executeWrite:dl,getDocs:Wm,getFirestore:mI,onSnapshot:_c,orderBy:kI,query:da,updateDoc:Bn,where:RI,writeBatch:Xf},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI="firebasestorage.googleapis.com",TD="storageBucket",bD=2*60*1e3,SD=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On extends jn{constructor(e,n,r=0){super(Th(e),`Firebase Storage: ${n} (${Th(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,On.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Th(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Pn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Pn||(Pn={}));function Th(t){return"storage/"+t}function ND(){const t="An unknown error occurred, please check the error payload for server response.";return new On(Pn.UNKNOWN,t)}function RD(){return new On(Pn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function kD(){return new On(Pn.CANCELED,"User canceled the upload/download.")}function CD(t){return new On(Pn.INVALID_URL,"Invalid URL '"+t+"'.")}function AD(t){return new On(Pn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function zv(t){return new On(Pn.INVALID_ARGUMENT,t)}function jI(){return new On(Pn.APP_DELETED,"The Firebase app was deleted.")}function PD(t){return new On(Pn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=dn.makeFromUrl(e,n)}catch{return new dn(e,"")}if(r.path==="")return r;throw AD(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(N){N.path.charAt(N.path.length-1)==="/"&&(N.path_=N.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function d(N){N.path_=decodeURIComponent(N.path)}const h="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",w=new RegExp(`^https?://${p}/${h}/b/${s}/o${m}`,"i"),R={bucket:1,path:3},C=n===DI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",I=new RegExp(`^https?://${C}/${s}/${P}`,"i"),T=[{regex:l,indices:c,postModify:i},{regex:w,indices:R,postModify:d},{regex:I,indices:{bucket:1,path:2},postModify:d}];for(let N=0;N<T.length;N++){const A=T[N],D=A.regex.exec(e);if(D){const v=D[A.indices.bucket];let y=D[A.indices.path];y||(y=""),r=new dn(v,y),A.postModify(r);break}}if(r==null)throw CD(e);return r}}class DD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function c(){return l===2}let d=!1;function h(...P){d||(d=!0,e.apply(null,P))}function p(P){s=setTimeout(()=>{s=null,t(w,c())},P)}function m(){i&&clearTimeout(i)}function w(P,...I){if(d){m();return}if(P){m(),h.call(null,P,...I);return}if(c()||o){m(),h.call(null,P,...I);return}r<64&&(r*=2);let T;l===1?(l=2,T=0):T=(r+Math.random())*1e3,p(T)}let R=!1;function C(P){R||(R=!0,m(),!d&&(s!==null?(P||(l=2),clearTimeout(s),p(0)):P||(l=1)))}return p(0),i=setTimeout(()=>{o=!0,C(!0)},n),C}function OD(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(t){return t!==void 0}function $v(t,e,n,r){if(r<e)throw zv(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw zv(`Invalid value for '${t}'. Expected ${n} or less.`)}function VD(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var cu;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(cu||(cu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e,n,r,s,i,o,l,c,d,h,p,m=!0,w=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=p,this.retry=m,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,C)=>{this.resolve_=R,this.reject_=C,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Yl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const c=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===cu.NO_ERROR,c=i.getStatus();if(!l||MD(c,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===cu.ABORT;r(!1,new Yl(!1,null,h));return}const d=this.successCodes_.indexOf(c)!==-1;r(!0,new Yl(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());LD(c)?i(c):i()}catch(c){o(c)}else if(l!==null){const c=ND();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(s.canceled){const c=this.appDelete_?jI():kD();o(c)}else{const c=RD();o(c)}};this.canceled_?n(!1,new Yl(!1,null,!0)):this.backoffId_=jD(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&OD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Yl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function UD(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function zD(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function $D(t,e){e&&(t["X-Firebase-GMPID"]=e)}function BD(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function WD(t,e,n,r,s,i,o=!0,l=!1){const c=VD(t.urlParams),d=t.url+c,h=Object.assign({},t.headers);return $D(h,e),UD(h,n),zD(h,i),BD(h,r),new FD(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HD(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function qD(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,n){this._service=e,n instanceof dn?this._location=n:this._location=dn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new uu(e,n)}get root(){const e=new dn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return qD(this._location.path)}get storage(){return this._service}get parent(){const e=HD(this._location.path);if(e===null)return null;const n=new dn(this._location.bucket,e);return new uu(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw PD(e)}}function Bv(t,e){const n=e==null?void 0:e[TD];return n==null?null:dn.makeFromBucketSpec(n,t)}function GD(t,e,n,r={}){t.host=`${e}:${n}`;const s=$s(e);s&&(tm(`https://${t.host}/b`),nm("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Wx(i,t.app.options.projectId))}class KD{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=DI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=bD,this._maxUploadRetryTime=SD,this._requests=new Set,s!=null?this._bucket=dn.makeFromBucketSpec(s,this._host):this._bucket=Bv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=dn.makeFromBucketSpec(this._url,e):this._bucket=Bv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){$v("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){$v("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Me(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new uu(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new DD(jI());{const o=WD(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Wv="@firebase/storage",Hv="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI="storage";function QD(t=im(),e){t=re(t);const r=Vu(t,OI).getImmediate({identifier:e}),s=zx("storage");return s&&YD(r,...s),r}function YD(t,e,n,r={}){GD(t,e,n,r)}function JD(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new KD(n,r,s,e,Bs)}function XD(){js(new qr(OI,JD,"PUBLIC").setMultipleInstances(!0)),Nn(Wv,Hv,""),Nn(Wv,Hv,"esm2020")}XD();/*! Capacitor: https://capacitorjs.com/ - MIT License */var $i;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})($i||($i={}));class bh extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const ZD=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},ej=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>e!==null?e.name:ZD(t),i=()=>s()!=="web",o=p=>{const m=d.get(p);return!!(m!=null&&m.platforms.has(s())||l(p))},l=p=>{var m;return(m=n.PluginHeaders)===null||m===void 0?void 0:m.find(w=>w.name===p)},c=p=>t.console.error(p),d=new Map,h=(p,m={})=>{const w=d.get(p);if(w)return console.warn(`Capacitor plugin "${p}" already registered. Cannot register plugins twice.`),w.proxy;const R=s(),C=l(p);let P;const I=async()=>(!P&&R in m?P=typeof m[R]=="function"?P=await m[R]():P=m[R]:e!==null&&!P&&"web"in m&&(P=typeof m.web=="function"?P=await m.web():P=m.web),P),_=(y,x)=>{var b,k;if(C){const j=C==null?void 0:C.methods.find(S=>x===S.name);if(j)return j.rtype==="promise"?S=>n.nativePromise(p,x.toString(),S):(S,te)=>n.nativeCallback(p,x.toString(),S,te);if(y)return(b=y[x])===null||b===void 0?void 0:b.bind(y)}else{if(y)return(k=y[x])===null||k===void 0?void 0:k.bind(y);throw new bh(`"${p}" plugin is not implemented on ${R}`,$i.Unimplemented)}},T=y=>{let x;const b=(...k)=>{const j=I().then(S=>{const te=_(S,y);if(te){const he=te(...k);return x=he==null?void 0:he.remove,he}else throw new bh(`"${p}.${y}()" is not implemented on ${R}`,$i.Unimplemented)});return y==="addListener"&&(j.remove=async()=>x()),j};return b.toString=()=>`${y.toString()}() { [capacitor code] }`,Object.defineProperty(b,"name",{value:y,writable:!1,configurable:!1}),b},N=T("addListener"),A=T("removeListener"),D=(y,x)=>{const b=N({eventName:y},x),k=async()=>{const S=await b;A({eventName:y,callbackId:S},x)},j=new Promise(S=>b.then(()=>S({remove:k})));return j.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await k()},j},v=new Proxy({},{get(y,x){switch(x){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return C?D:N;case"removeListener":return A;default:return T(x)}}});return r[p]=v,d.set(p,{name:p,proxy:v,platforms:new Set([...Object.keys(m),...C?[R]:[]])}),v};return n.convertFileSrc||(n.convertFileSrc=p=>p),n.getPlatform=s,n.handleError=c,n.isNativePlatform=i,n.isPluginAvailable=o,n.registerPlugin=h,n.Exception=bh,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},tj=t=>t.Capacitor=ej(t),cn=tj(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),io=cn.registerPlugin;class Hm{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const s=this.listeners[e];if(!s){if(r){let i=this.retainedEventArguments[e];i||(i=[]),i.push(n),this.retainedEventArguments[e]=i}return}s.forEach(i=>i(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new cn.Exception(e,$i.Unimplemented)}unavailable(e="not available"){return new cn.Exception(e,$i.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const s=r.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const qv=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Gv=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class nj extends Hm{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=Gv(s).trim(),i=Gv(i).trim(),n[s]=i}),n}async setCookie(e){try{const n=qv(e.key),r=qv(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${i}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}io("CapacitorCookies",{web:()=>new nj});const rj=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(t)}),sj=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,i,o)=>(s[i]=t[e[o]],s),{})},ij=(t,e=!0)=>t?Object.entries(t).reduce((r,s)=>{const[i,o]=s;let l,c;return Array.isArray(o)?(c="",o.forEach(d=>{l=e?encodeURIComponent(d):d,c+=`${i}=${l}&`}),c.slice(0,-1)):(l=e?encodeURIComponent(o):o,c=`${i}=${l}`),`${r}&${c}`},"").substr(1):null,oj=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=sj(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,l]of Object.entries(t.data||{}))i.set(o,l);n.body=i.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((l,c)=>{i.append(c,l)});else for(const l of Object.keys(t.data))i.append(l,t.data[l]);n.body=i;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class aj extends Hm{async request(e){const n=oj(e,e.webFetchExtra),r=ij(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,i=await fetch(s,n),o=i.headers.get("content-type")||"";let{responseType:l="text"}=i.ok?e:{};o.includes("application/json")&&(l="json");let c,d;switch(l){case"arraybuffer":case"blob":d=await i.blob(),c=await rj(d);break;case"json":c=await i.json();break;case"document":case"text":default:c=await i.text()}const h={};return i.headers.forEach((p,m)=>{h[m]=p}),{data:c,headers:h,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}io("CapacitorHttp",{web:()=>new aj});var Kv;(function(t){t.Dark="DARK",t.Light="LIGHT",t.Default="DEFAULT"})(Kv||(Kv={}));var Qv;(function(t){t.StatusBar="StatusBar",t.NavigationBar="NavigationBar"})(Qv||(Qv={}));class lj extends Hm{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}io("SystemBars",{web:()=>new lj});const cj={apiKey:"AIzaSyCH2Q18CquL9IGi9t6KovkSqQj3DYnXf9g",authDomain:"munirathnam-illam.firebaseapp.com",projectId:"munirathnam-illam",storageBucket:"munirathnam-illam.firebasestorage.app",messagingSenderId:"852272424128",appId:"1:852272424128:web:e5400d3d2f512d7e477925"},du=Gx(cj),Mn=cn.isNativePlatform()?g1(du,{persistence:R1}):lA(du),Ae=mI(du);QD(du);const LI=new Tn,uj="modulepreload",dj=function(t){return"/"+t},Yv={},Ni=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=dj(c),c in Yv)return;Yv[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":uj,d||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((m,w)=>{p.addEventListener("load",m),p.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};var Jv;(function(t){t.IndexedDbLocal="INDEXED_DB_LOCAL",t.InMemory="IN_MEMORY",t.BrowserLocal="BROWSER_LOCAL",t.BrowserSession="BROWSER_SESSION"})(Jv||(Jv={}));var Xv;(function(t){t.APPLE="apple.com",t.FACEBOOK="facebook.com",t.GAME_CENTER="gc.apple.com",t.GITHUB="github.com",t.GOOGLE="google.com",t.MICROSOFT="microsoft.com",t.PLAY_GAMES="playgames.google.com",t.TWITTER="twitter.com",t.YAHOO="yahoo.com",t.PASSWORD="password",t.PHONE="phone"})(Xv||(Xv={}));const Zv=io("FirebaseAuthentication",{web:()=>Ni(()=>import("./web-DRdbuE0H.js"),[]).then(t=>new t.FirebaseAuthenticationWeb)}),hj=io("App",{web:()=>Ni(()=>import("./web-D0qbbD9U.js"),[]).then(t=>new t.AppWeb)});var e_;(function(t){t[t.NONE=0]="NONE",t[t.TOUCH_ID=1]="TOUCH_ID",t[t.FACE_ID=2]="FACE_ID",t[t.FINGERPRINT=3]="FINGERPRINT",t[t.FACE_AUTHENTICATION=4]="FACE_AUTHENTICATION",t[t.IRIS_AUTHENTICATION=5]="IRIS_AUTHENTICATION",t[t.MULTIPLE=6]="MULTIPLE"})(e_||(e_={}));var t_;(function(t){t[t.NONE=0]="NONE",t[t.STRONG=1]="STRONG",t[t.WEAK=2]="WEAK"})(t_||(t_={}));var n_;(function(t){t[t.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",t[t.BIOMETRICS_UNAVAILABLE=1]="BIOMETRICS_UNAVAILABLE",t[t.USER_LOCKOUT=2]="USER_LOCKOUT",t[t.BIOMETRICS_NOT_ENROLLED=3]="BIOMETRICS_NOT_ENROLLED",t[t.USER_TEMPORARY_LOCKOUT=4]="USER_TEMPORARY_LOCKOUT",t[t.AUTHENTICATION_FAILED=10]="AUTHENTICATION_FAILED",t[t.APP_CANCEL=11]="APP_CANCEL",t[t.INVALID_CONTEXT=12]="INVALID_CONTEXT",t[t.NOT_INTERACTIVE=13]="NOT_INTERACTIVE",t[t.PASSCODE_NOT_SET=14]="PASSCODE_NOT_SET",t[t.SYSTEM_CANCEL=15]="SYSTEM_CANCEL",t[t.USER_CANCEL=16]="USER_CANCEL",t[t.USER_FALLBACK=17]="USER_FALLBACK"})(n_||(n_={}));const VI=io("NativeBiometric",{web:()=>Ni(()=>import("./web-BqkoTjxx.js"),[]).then(t=>new t.NativeBiometricWeb)}),MI=V.createContext();function oo(){return V.useContext(MI)}function fj({children:t}){const[e,n]=V.useState(null),[r,s]=V.useState(!0),[i,o]=V.useState(cn.isNativePlatform()),l=V.useRef(!1),c=()=>o(!0),d=async()=>{if(!cn.isNativePlatform()){o(!1);return}try{l.current=!0;const R=await VI.verifyIdentity({reason:"Unlock Rent Manager",title:"Authentication Required",subtitle:"Confirm your identity",description:"Use Face ID to access the app"});o(!1)}catch(R){console.error("Biometric Unlock Failed:",R)}finally{setTimeout(()=>{l.current=!1},500)}};async function h(){if(cn.isNativePlatform())try{const R=await Zv.signInWithGoogle(),C=Tn.credential(R.credential.idToken);return await Wu(Mn,C)}catch(R){throw console.error("Native Google Sign-In Error:",R),R}else return V1(Mn,LI)}function p(){return cn.isNativePlatform()?Zv.signOut().then(()=>Pf(Mn)):Pf(Mn)}V.useEffect(()=>{const R=b1(Mn,I=>{n(I),s(!1),I||o(!1)});let C;cn.isNativePlatform()&&(C=hj.addListener("appStateChange",({isActive:I})=>{if(!I&&Mn.currentUser){if(l.current)return;console.log("App backgrounded. Locking..."),o(!0)}}));const P=setTimeout(()=>{s(I=>I&&!1)},5e3);return()=>{R(),C&&C.remove(),clearTimeout(P)}},[]);const m=15*60*1e3;V.useEffect(()=>{if(!e)return;let R;const C=()=>{R&&clearTimeout(R),R=setTimeout(()=>{console.log("User inactive for 15 mins, logging out..."),p()},m)},P=["mousemove","keydown","click","scroll","touchstart"];return C(),P.forEach(I=>window.addEventListener(I,C)),()=>{R&&clearTimeout(R),P.forEach(I=>window.removeEventListener(I,C))}},[e]);const w={currentUser:e,loginWithGoogle:h,logout:p,loading:r,isAppLocked:i,lockApp:c,unlockWithBiometrics:d};return u.jsx(MI.Provider,{value:w,children:!r&&t})}const Xe={"01":{roomNo:"01",roomId:"G01",keyNo:"124",ebServNo:"19781",ebAcNo:"5097784"},"02":{roomNo:"02",roomId:"G02",keyNo:"153",ebServNo:"19778",ebAcNo:"5097781"},"04":{roomNo:"04",roomId:"102",keyNo:"76",ebServNo:"19780",ebAcNo:"5097783"},"05":{roomNo:"05",roomId:"201",keyNo:"151",ebServNo:"19779",ebAcNo:"5097782"},"06":{roomNo:"06",roomId:"202",keyNo:"185",ebServNo:"19782",ebAcNo:"5097785"},"07":{roomNo:"07",roomId:"203",keyNo:"101",ebServNo:"19783",ebAcNo:"5097786"},"08":{roomNo:"08",roomId:"301",keyNo:"403",ebServNo:"19784",ebAcNo:"5097787"},"09":{roomNo:"09",roomId:"302",keyNo:"249",ebServNo:"19785",ebAcNo:"5097788"},10:{roomNo:"10",roomId:"303",keyNo:"123",ebServNo:"19789",ebAcNo:"5097792"},11:{roomNo:"11",roomId:"401",keyNo:"35",ebServNo:"19788",ebAcNo:"5097791"},12:{roomNo:"12",roomId:"402",keyNo:"144",ebServNo:"19787",ebAcNo:"5097790"},13:{roomNo:"13",roomId:"403",keyNo:"120",ebServNo:"19786",ebAcNo:"5097789"}},pj=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Wa=.25,mj=.2,gj=["11","12","13"],fa=10,qm=60,ln=pj;function Dn(t,e){return`${t}-${ln[e]}`}function Bi(t,e){return`${ln[e]} ${t}`}function hu(t,e,n=new Date){const r=n.getFullYear(),s=n.getMonth();return t>r||t===r&&e>s}function Be(t,e){return!t||!e?null:(Array.isArray(t)?t:Object.values(t)).find(r=>String(r.roomId||"").trim()===String(e||"").trim()||String(r.roomNo||"").trim()===String(e||"").trim())||null}function Ss(t){return t?String(t.status||"").trim()==="Occupied":!1}function md(t,e,n){if(!t||!t.isEvictionConfirmed||!t.evictionNoticeDate)return!1;const r=new Date(t.evictionNoticeDate),s=new Date(e,n,1),i=new Date(r.getFullYear(),r.getMonth(),1);return s>=i}function fu(t,e,n){if(!t||md(t,e,n))return 0;let r=Number(t.rent)||0;if(t.lastRevision){const s=new Date(t.lastRevision),i=new Date(e,n,1),o=new Date(s.getFullYear(),s.getMonth(),1);i<o&&(r=Number(t.lastRent)||r)}return r}function yj(t,e,n,r){const s=Dn(n,r);let i=0;return Object.keys(Xe).forEach(o=>{const l=Xe[o],c=Be(t,l.roomId);if(!c||md(c,n,r))return;const h=(c.paymentHistory||{})[s]||null,p=c.archivedTenant||null,m=(p==null?void 0:p.paymentHistory)||{},w=(m==null?void 0:m[s])||null,R=(!h||h==="None")&&w;if((R?w:h)!=="Paid")return;const I=fu(R?p:c,n,r);i+=I}),i}function vj(t,e,n,r){const s=Dn(n,r);let i=0;return Object.keys(Xe).forEach(o=>{const l=Xe[o],c=Be(t,l.roomId);if(!c||md(c,n,r))return;const h=(c.paymentHistory||{})[s]||null,p=c.archivedTenant||null,m=(p==null?void 0:p.paymentHistory)||{},w=(m==null?void 0:m[s])||null,R=(!h||h==="None")&&w;if((R?w:h)!=="Pending")return;i+=fu(R?p:c,n,r)}),i}function _j(t,e,n,r){const s=Dn(n,r);let i={rent:0,water:0,total:0,pending:0};return Object.keys(Xe).forEach(o=>{const l=Xe[o],c=Be(t,l.roomId);if(!c||md(c,n,r))return;const d=c.paymentHistory||{};c.paymentTotals;const h=d[s]||null,p=c.archivedTenant||null,m=(p==null?void 0:p.paymentHistory)||{};p!=null&&p.paymentTotals;const w=(m==null?void 0:m[s])||null,R=(!h||h==="None")&&w,C=R?w:h,P=R?p:c;if(C==="Pending"){i.pending+=fu(P,n,r);return}if(C!=="Paid")return;const I=fu(P,n,r),_=R?(p==null?void 0:p.waterRate)||Wa:(c==null?void 0:c.waterRate)||Wa,A=(gd(P,n,r,_).amount||0)+qm;i.rent+=I,i.water+=A,i.total+=I+A}),i}function wj(t,e,n){const r=Dn(e,n);return!t||!Array.isArray(t)?0:t.filter(s=>String((s==null?void 0:s.monthKey)||"")===String(r)).reduce((s,i)=>s+(Number(i==null?void 0:i.amount)||0),0)}function pu(t){const e=String(t||"").trim();return gj.includes(e)?mj:Wa}function vs(t,e){return`${t}-${ln[e]}`}function Ns(t,e){return e>0?{year:t,monthIndex:e-1}:{year:t-1,monthIndex:11}}function gd(t,e,n,r){const s=(t==null?void 0:t.waterReadings)||{},i=(t==null?void 0:t.waterMeterReset)||{},o=vs(e,n),l=Ns(e,n),c=vs(l.year,l.monthIndex),d=s==null?void 0:s[o],h=s==null?void 0:s[c],p=d!=null&&d!=="",m=h!=null&&h!=="",w=p?Number(d):NaN,R=m?Number(h):NaN;if(!!(i!=null&&i[o])){if(!Number.isFinite(w))return{currentReading:null,units:null,amount:null,meterReset:!0};const T=w*fa,N=Number.isFinite(r)?r:Wa,A=Math.round(T*N);return{currentReading:w,units:T,amount:A,meterReset:!0}}if(!Number.isFinite(w)||!Number.isFinite(R))return{currentReading:Number.isFinite(w)?w:null,units:null,amount:null,meterReset:!1};const P=(w-R)*fa,I=Number.isFinite(r)?r:Wa,_=Math.round(P*I);return{currentReading:w,units:P,amount:_,meterReset:!1}}const xj=15;function FI(t,e=new Date){if(!t)return{isDue:!1};const n=!!(t!=null&&t.noRevision),r=!!(t!=null&&t.isEvictionConfirmed);if(n||r)return{isDue:!1,reason:r?"Eviction in progress":"Disabled"};const s=t==null?void 0:t.lastRevision,i=t==null?void 0:t.joinDate,o=P=>P?new Date(P):null,l=o(s),c=o(i),d=l||c;if(!d)return{isDue:!1,reason:"No date available"};const h=new Date(d);h.setFullYear(h.getFullYear()+1);const p=new Date(e.getFullYear(),e.getMonth(),e.getDate()),w=new Date(h.getFullYear(),h.getMonth(),h.getDate())-p,R=Math.ceil(w/(1e3*60*60*24));return{isDue:R<=xj,daysRemaining:R,nextDue:h,baseDate:d,isOverdue:R<0}}const UI=V.createContext();function Zr(){return V.useContext(UI)}function Ej({children:t}){const[e,n]=V.useState([]),[r,s]=V.useState([]),[i,o]=V.useState(!0),[l,c]=V.useState(Xe);V.useEffect(()=>{const T=da(bs(Ae,"properties")),N=_c(T,x=>{const b={};x.forEach(k=>{b[k.id]={id:k.id,...k.data()}}),n(b)},x=>{console.error("Error fetching tenants:",x)}),A=da(bs(Ae,"expenses"),kI("date","desc")),D=_c(A,x=>{const b=[];x.forEach(k=>{b.push({id:k.id,...k.data()})}),s(b)},x=>{console.error("Error fetching expenses:",x)}),v=da(bs(Ae,"rooms")),y=_c(v,x=>{if(x.empty)console.warn("Rooms collection empty. Using hardcoded fallback."),c(Xe);else{const b={...Xe};x.forEach(S=>{b[S.id]?b[S.id]={...b[S.id],...S.data()}:b[S.id]=S.data()});const k=Object.keys(b).sort(),j={};k.forEach(S=>j[S]=b[S]),c(j)}o(!1)},x=>{console.error("Error fetching rooms:",x),c(Xe),o(!1)});return()=>{N(),D(),y()}},[]);const d=async(T,N,A,D,v,y)=>{let x="Pending";A==="Pending"?x="Rent Only":A==="Rent Only"?x="Paid":A==="Paid"&&(x="None");const b={};if(x==="Paid"){const k=Number(D==null?void 0:D.rent)||0,j=(D==null?void 0:D.waterRate)!==null&&(D==null?void 0:D.waterRate)!==void 0&&String(D==null?void 0:D.waterRate).trim()!==""?Number(D==null?void 0:D.waterRate):pu(D==null?void 0:D.roomNo),S=gd(D,v,y,j);if(!Number.isFinite(S==null?void 0:S.amount))throw new Error("Please enter water readings for this month AND previous month (Water Bill screen) before marking Paid.");if(Number(S==null?void 0:S.units)<0)throw new Error("Water units cannot be negative. Please check readings.");const te=Math.round((k+Number(S.amount)+qm)*100)/100;b[`paymentHistory.${N}`]="Paid",b[`paymentTotals.${N}`]=te}else x==="None"?(b[`paymentHistory.${N}`]=null,b[`paymentTotals.${N}`]=null):(b[`paymentHistory.${N}`]=x,b[`paymentTotals.${N}`]=null);if(!(D!=null&&D.id))throw new Error("Tenant ID missing");await Bn(Qt(Ae,"properties",D.id),b)},h=async T=>{const{addDoc:N,collection:A}=await Ni(async()=>{const{addDoc:D,collection:v}=await Promise.resolve().then(()=>Ih);return{addDoc:D,collection:v}},void 0);await N(A(Ae,"expenses"),T)},p=async T=>{const{deleteDoc:N,doc:A}=await Ni(async()=>{const{deleteDoc:D,doc:v}=await Promise.resolve().then(()=>Ih);return{deleteDoc:D,doc:v}},void 0);await N(A(Ae,"expenses",T))},m=async(T,N)=>{await Bn(Qt(Ae,"properties",T),N)},[w,R]=V.useState(new Date().getFullYear()),[C,P]=V.useState(null),{currentUser:I}=oo(),_={tenants:e,expenses:r,error:C,debugUser:{email:"Check AuthContext"},rooms:l,loading:i,globalYear:w,setGlobalYear:R,updateRentStatus:d,addExpense:h,deleteExpense:p,updateTenant:m,createTenant:async T=>{const{addDoc:N,collection:A}=await Ni(async()=>{const{addDoc:D,collection:v}=await Promise.resolve().then(()=>Ih);return{addDoc:D,collection:v}},void 0);await N(A(Ae,"properties"),T)}};return u.jsx(UI.Provider,{value:_,children:t})}/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ij={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Z=(t,e)=>{const n=V.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...d},h)=>V.createElement("svg",{ref:h,...Ij,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${Tj(t)}`,l].join(" "),...d},[...e.map(([p,m])=>V.createElement(p,m)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=Z("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=Z("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=Z("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=Z("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=Z("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=Z("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=Z("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=Z("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=Z("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=Z("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=Z("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=Z("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=Z("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=Z("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=Z("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=Z("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=Z("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=Z("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gm=Z("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=Z("Fingerprint",[["path",{d:"M2 12C2 6.5 6.5 2 12 2a10 10 0 0 1 8 4",key:"1jc9o5"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12c0-.7.12-1.37.34-2",key:"1mxgy1"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2c0 .47 0 1.17-.02 2",key:"1fgabc"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=Z("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=Z("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=Z("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=Z("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=Z("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=Z("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=Z("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=Z("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=Z("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sh=Z("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=Z("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=Z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=Z("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=Z("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=Z("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=Z("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=Z("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=Z("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=Z("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=Z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Km=Z("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=Z("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=Z("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=Z("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=Z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),BI=V.createContext();function ao(){return V.useContext(BI)}function Gj({children:t}){const[e,n]=V.useState([]),[r,s]=V.useState({isOpen:!1,title:"",message:"",confirmText:"Confirm",cancelText:"Cancel",type:"confirm",resolve:null}),i=V.useCallback((h,p="info")=>{const m=Date.now();n(w=>[...w,{id:m,message:h,type:p}]),setTimeout(()=>{n(w=>w.filter(R=>R.id!==m))},3e3)},[]),o=h=>{n(p=>p.filter(m=>m.id!==h))},l=V.useCallback(({title:h,message:p,confirmText:m="Confirm",cancelText:w="Cancel",type:R="confirm"})=>new Promise(C=>{s({isOpen:!0,title:h,message:p,confirmText:m,cancelText:w,type:R,resolve:C})}),[]),c=()=>{r.resolve&&r.resolve(!0),s(h=>({...h,isOpen:!1}))},d=()=>{r.resolve&&r.resolve(!1),s(h=>({...h,isOpen:!1}))};return u.jsxs(BI.Provider,{value:{showToast:i,confirm:l},children:[t,u.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-[100] flex flex-col items-center gap-2 pointer-events-none",children:e.map(h=>u.jsxs("div",{className:`pointer-events-auto flex items-center gap-3 px-6 py-3 rounded-2xl shadow-xl border animate-in slide-in-from-bottom-5 fade-in duration-300 min-w-[300px] justify-between ${h.type==="error"?"bg-rose-50 border-rose-100 text-rose-700":h.type==="success"?"bg-emerald-50 border-emerald-100 text-emerald-700":h.type==="warning"?"bg-amber-50 border-amber-100 text-amber-700":"bg-slate-50 border-slate-200 text-slate-700"}`,children:[u.jsxs("div",{className:"flex items-center gap-3",children:[h.type==="error"&&u.jsx(Ri,{size:20}),h.type==="success"&&u.jsx(Nj,{size:20}),h.type==="warning"&&u.jsx(Ri,{size:20}),h.type==="info"&&u.jsx(Lj,{size:20}),u.jsx("span",{className:"font-bold text-sm",children:h.message})]}),u.jsx("button",{onClick:()=>o(h.id),className:"opacity-50 hover:opacity-100",children:u.jsx(Wi,{size:16})})]},h.id))}),r.isOpen&&u.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:u.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-[400px] overflow-hidden animate-in zoom-in-95 duration-200",children:[u.jsxs("div",{className:"p-8 text-center space-y-4",children:[u.jsx("div",{className:`mx-auto size-16 rounded-full flex items-center justify-center mb-2 ${r.type==="danger"?"bg-rose-100 text-rose-600":"bg-blue-100 text-blue-600"}`,children:r.type==="danger"?u.jsx(Ri,{size:32}):u.jsx(jj,{size:32})}),u.jsx("h3",{className:"text-xl font-extrabold text-slate-900 leading-tight",children:r.title}),u.jsx("p",{className:"text-slate-500 font-medium",children:r.message})]}),u.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-100 flex gap-3",children:[u.jsx("button",{onClick:d,className:"flex-1 py-3 px-4 rounded-xl font-bold text-slate-600 hover:bg-slate-200 transition-colors",children:r.cancelText}),u.jsx("button",{onClick:c,className:`flex-1 py-3 px-4 rounded-xl font-bold text-white shadow-lg transition-all hover:scale-105 active:scale-95 ${r.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-200":"bg-blue-600 hover:bg-blue-700 shadow-blue-200"}`,children:r.confirmText})]})]})})]})}function fs({children:t}){const{currentUser:e,logout:n}=oo(),r=Yi(),s=o=>r.pathname===o,i=({to:o,icon:l,label:c,mobile:d=!1})=>u.jsxs(Lx,{to:o,className:`flex items-center gap-3 px-4 py-3 rounded-2xl transition-all ${s(o)?"bg-emerald-100 text-emerald-900 font-bold shadow-sm ring-1 ring-emerald-200":"text-slate-500 hover:text-slate-900 hover:bg-slate-50"} ${d?"flex-col text-[10px] gap-1 px-1 py-1 rounded-none bg-transparent hover:bg-transparent ring-0 shadow-none":"text-sm"}`,children:[u.jsx("div",{className:`p-2 rounded-xl transition-colors ${s(o)&&!d?"bg-emerald-200/50 text-emerald-800":"bg-transparent"}`,children:u.jsx(l,{size:d?20:18})}),u.jsx("span",{children:c})]});return u.jsxs("div",{className:"min-h-screen bg-white md:bg-stone-50/30 flex flex-col md:flex-row",children:[u.jsxs("aside",{className:"hidden md:flex flex-col w-64 shrink-0 h-screen sticky top-0 bg-white border-r border-stone-100 p-6 z-40",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-10 px-2",children:[u.jsx("span",{className:"inline-flex size-10 items-center justify-center rounded-2xl bg-emerald-100/70 border border-emerald-200/60 text-emerald-800 shadow-sm",children:u.jsx(Zf,{size:20})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-lg font-extrabold tracking-tight text-slate-900 leading-tight",children:"Munirathnam"}),u.jsx("p",{className:"text-xs font-bold text-emerald-600 tracking-wide uppercase",children:"Illam Manager"})]})]}),u.jsxs("nav",{className:"space-y-2 flex-1",children:[u.jsx("div",{className:"px-4 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Menu"}),u.jsx(i,{to:"/",icon:l_,label:"Dashboard"}),u.jsx(i,{to:"/rooms",icon:Ha,label:"Room Details"}),u.jsx(i,{to:"/rent",icon:c_,label:"Rent Status"}),u.jsx(i,{to:"/water",icon:a_,label:"Water Bill"}),u.jsx(i,{to:"/expenses",icon:u_,label:"Expenses"}),u.jsx("div",{className:"h-px bg-stone-100 my-2"}),u.jsx(i,{to:"/admin",icon:Km,label:"Admin"}),u.jsx(i,{to:"/admin/migrate",icon:Aj,label:"Migration"})]}),u.jsx("div",{className:"pt-6 border-t border-stone-100",children:u.jsx("div",{className:"flex items-center gap-3 px-2 py-2",children:e&&u.jsxs(u.Fragment,{children:[u.jsx("img",{src:e.photoURL,alt:"User",className:"w-9 h-9 rounded-full border border-stone-200 bg-stone-50",onError:o=>{o.target.style.display="none"}}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-sm font-bold text-slate-700 truncate",children:e.displayName}),u.jsx("p",{className:"text-[10px] font-medium text-slate-400 truncate",children:"Admin Access"})]}),u.jsx("button",{onClick:n,className:"p-2 rounded-xl text-slate-400 hover:text-rose-600 hover:bg-rose-50 transition-colors",title:"Sign Out",children:u.jsx(zI,{size:16})})]})})})]}),u.jsxs("div",{className:"flex-1 min-w-0 flex flex-col min-h-screen",children:[u.jsxs("header",{className:"md:hidden bg-white/90 backdrop-blur-md border-b border-stone-100 sticky top-0 z-30 px-4 pb-3 pt-[calc(env(safe-area-inset-top)+16px)] flex items-center justify-between transition-all",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"inline-flex size-9 items-center justify-center rounded-xl bg-emerald-100 text-emerald-700 shadow-sm ring-1 ring-emerald-50",children:u.jsx(Zf,{size:18})}),u.jsxs("div",{children:[u.jsx("h1",{className:"font-black text-slate-900 text-base leading-tight tracking-tight",children:"Munirathnam"}),u.jsx("p",{className:"text-[10px] font-bold text-emerald-600 uppercase tracking-widest",children:"Rent Manager"})]})]}),u.jsx("div",{className:"flex items-center gap-2",children:e&&u.jsx("img",{src:e.photoURL,className:"w-8 h-8 rounded-full border border-stone-200 shadow-sm"})})]}),u.jsx("main",{className:"p-4 md:p-8 lg:p-10 max-w-7xl w-full mx-auto pb-24 md:pb-10",children:t})]}),u.jsx("div",{className:"fixed bottom-0 inset-x-0 z-50 md:hidden bg-white border-t border-stone-100 pb-safe",children:u.jsxs("div",{className:"grid grid-cols-5 gap-1 p-2",children:[u.jsx(i,{to:"/",icon:l_,label:"Dash",mobile:!0}),u.jsx(i,{to:"/rooms",icon:Ha,label:"Rooms",mobile:!0}),u.jsx(i,{to:"/rent",icon:c_,label:"Rent",mobile:!0}),u.jsx(i,{to:"/water",icon:a_,label:"Water",mobile:!0}),u.jsx(i,{to:"/expenses",icon:u_,label:"Expenses",mobile:!0})]})})]})}function Kj(){const{tenants:t,expenses:e,rooms:n,loading:r,globalYear:s,setGlobalYear:i}=Zr(),o=s;if(r)return u.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading data..."});const l=p=>i(m=>m+p),c=[];for(let p=0;p<12;p++){const m=hu(o,p),w=_j(t,n,o,p);c.push({label:Bi(o,p),rent:m?0:w.rent,water:m?0:w.water,total:m?0:w.total,expenses:wj(e,o,p),pending:m?0:w.pending,locked:m})}const d=c.some(p=>p.pending>0),h=[];return Object.keys(Xe).forEach(p=>{const m=n[p];if(!m)return;const w=Be(t,m.roomId);if(w&&w.status==="Occupied"){const R=FI(w);R.isDue&&h.push({roomNo:m.roomNo,tenantName:w.tenant,days:R.daysRemaining,date:R.nextDue})}}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsx("h2",{className:"text-2xl sm:text-3xl font-extrabold tracking-tight text-slate-900",children:"Dashboard"}),u.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700",children:[u.jsx("span",{className:"font-semibold",children:"Year"}),u.jsxs("div",{className:"inline-flex items-center gap-1 rounded-full bg-stone-50 border border-black/5 shadow-sm px-2 py-1.5",children:[u.jsx("button",{onClick:()=>l(-1),className:"p-1 hover:bg-stone-200 rounded-full",children:u.jsx(Rj,{size:16})}),u.jsx("span",{className:"min-w-[4rem] text-center font-extrabold text-emerald-800",children:o}),u.jsx("button",{onClick:()=>l(1),className:"p-1 hover:bg-stone-200 rounded-full",children:u.jsx(i_,{size:16})})]})]})]}),(h.length>0||d)&&u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 animate-in slide-in-from-top-4",children:[h.length>0&&u.jsxs("div",{className:"bg-amber-50 rounded-3xl p-5 border border-amber-100 shadow-sm relative overflow-hidden group",children:[u.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition",children:u.jsx(o_,{size:80,className:"text-amber-600"})}),u.jsxs("div",{className:"relative z-10",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:"p-2 bg-amber-100 rounded-xl text-amber-700",children:u.jsx(o_,{size:20})}),u.jsx("h3",{className:"text-base font-bold text-amber-900",children:"Annual Revision Due"}),u.jsx("span",{className:"bg-amber-200 text-amber-800 text-xs font-bold px-2 py-0.5 rounded-full",children:h.length})]}),u.jsx("div",{className:"space-y-2 mt-3 max-h-32 overflow-y-auto custom-scrollbar",children:h.map((p,m)=>u.jsxs("div",{className:"flex justify-between items-center bg-white/60 p-2 rounded-lg text-sm",children:[u.jsxs("div",{children:[u.jsxs("span",{className:"font-bold text-slate-800",children:["Room ",p.roomNo]}),u.jsxs("span",{className:"text-slate-500 text-xs ml-2",children:["(",p.tenantName,")"]})]}),u.jsx("div",{className:`text-xs font-bold ${p.days<0?"text-rose-600":"text-amber-600"}`,children:p.days<0?`${Math.abs(p.days)} days overdue`:`Due in ${p.days} days`})]},m))})]})]}),d&&u.jsxs("div",{className:"bg-rose-50 rounded-3xl p-5 border border-rose-100 shadow-sm relative overflow-hidden group",children:[u.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition",children:u.jsx(r_,{size:80,className:"text-rose-600"})}),u.jsxs("div",{className:"relative z-10",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:"p-2 bg-rose-100 rounded-xl text-rose-700",children:u.jsx(r_,{size:20})}),u.jsx("h3",{className:"text-base font-bold text-rose-900",children:"Pending Payments"}),u.jsxs("span",{className:"bg-rose-200/50 text-rose-800 text-xs font-bold px-2 py-0.5 rounded-full",children:["",c.reduce((p,m)=>p+m.pending,0).toLocaleString("en-IN")]})]}),u.jsx("p",{className:"text-sm text-rose-800/80 mt-1 font-medium",children:"Action required for unpaid rents. Check the Rent Details page for breakdown."}),u.jsxs(Lx,{to:"/rent",className:"inline-flex items-center gap-2 mt-3 text-xs font-bold text-rose-700 hover:text-rose-900 transition",children:["View details ",u.jsx(i_,{size:14})]})]})]})]}),u.jsxs("div",{className:"bg-stone-50 rounded-3xl shadow-sm border border-black/5 overflow-hidden",children:[u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-sm text-left",children:[u.jsx("thead",{className:"bg-emerald-100/60 text-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-5 py-4 font-semibold",children:"Month"}),u.jsx("th",{className:"px-5 py-4 text-right font-semibold",children:"Rent Collected"}),u.jsx("th",{className:"px-5 py-4 text-right font-semibold",children:"Expenses"}),u.jsx("th",{className:"px-5 py-4 text-right font-semibold",children:"Water Charges"}),u.jsx("th",{className:"px-5 py-4 text-right font-semibold",children:"Pending Rent"})]})}),u.jsx("tbody",{className:"divide-y divide-slate-100",children:c.map((p,m)=>u.jsxs("tr",{className:p.locked?"bg-stone-100/50 text-slate-400":"hover:bg-emerald-50/30 transition",children:[u.jsx("td",{className:"px-5 py-4 font-bold text-slate-800",children:p.label}),u.jsx("td",{className:"px-5 py-4 text-right font-medium text-emerald-700",children:p.locked?"0":`${p.rent.toLocaleString("en-IN")}`}),u.jsx("td",{className:"px-5 py-4 text-right font-medium text-rose-700",children:`${p.expenses.toLocaleString("en-IN")}`}),u.jsx("td",{className:"px-5 py-4 text-right font-medium text-blue-600",children:p.locked?"0":`${p.water.toLocaleString("en-IN")}`}),u.jsx("td",{className:"px-5 py-4 text-right font-medium text-amber-800",children:p.locked?"0":`${p.pending.toLocaleString("en-IN")}`})]},m))})]})}),u.jsx("div",{className:"p-4 bg-emerald-50/50 text-[10px] text-slate-500 text-center border-t border-emerald-100",children:"Rent Collected includes only months marked Paid. Water Charges are computed from meter readings."})]})]})}function pa({roomNo:t,roomData:e,tenantData:n,rentStatus:r,onClick:s,isPlaceholder:i=!1}){if(i||!e)return u.jsx("div",{className:"h-[200px] rounded-t-xl mx-2 border-b-0 border-2 border-dashed border-slate-200 bg-slate-50/30 flex items-center justify-center",children:u.jsx("span",{className:"text-slate-200 font-bold text-xs uppercase tracking-widest",children:"Empty"})});const o=(n==null?void 0:n.status)==="Occupied",l=!!(n!=null&&n.evictionConfirmed),c=o?(n==null?void 0:n.tenant)||"Unknown":"Vacant",h=FI(n).isDue,p=o?l?"bg-rose-50 border-rose-200":"bg-white border-slate-200":"bg-slate-100 border-slate-200",m=o?l?"border-rose-900 bg-rose-900":"border-slate-800 bg-slate-800":"border-slate-400 bg-slate-400",w=o?"bg-amber-400 shadow-sm":"bg-slate-300",R=()=>{if(!o||!r||r==="None")return null;const C=r==="Adjusted"?"Adjusted":r,P={Paid:"bg-emerald-500 text-white border-emerald-600",Pending:"bg-rose-500 text-white border-rose-600 animate-pulse","Rent Only":"bg-purple-500 text-white border-purple-600",Adjusted:"bg-blue-500 text-white border-blue-600"},I={Paid:"PAID",Pending:"DUE","Rent Only":"PARTIAL",Adjusted:"ADJ (SD)"},_=P[C]||"bg-slate-500 text-white",T=I[C]||C;return u.jsx("div",{className:`mt-2 px-1.5 py-0.5 text-[8px] font-bold rounded shadow-sm border ${_} tracking-wider`,children:T})};return u.jsxs("div",{onClick:s,className:"group relative flex flex-col items-center justify-end h-[220px] cursor-pointer",title:`Room ${t}`,children:[u.jsx("div",{className:`relative w-full h-full rounded-t-2xl border-x-8 border-t-8 ${m} shadow-xl overflow-hidden transition-transform transform group-hover:-translate-y-1`,children:u.jsxs("div",{className:`absolute inset-0 top-0.5 mx-0.5 mb-0 rounded-t-xl ${p} border-x border-t shadow-inner flex flex-col items-center pt-6`,children:[u.jsx("div",{className:"bg-gradient-to-br from-amber-100 to-amber-200 border border-amber-300 px-3 py-1 rounded shadow text-amber-900 font-bold text-lg font-mono",children:t}),o&&u.jsx("div",{className:"text-[9px] text-slate-400 mt-1 font-mono",children:e.roomId}),u.jsx("div",{className:"mt-2",children:l?u.jsx("div",{className:"w-3 h-3 rounded-full bg-rose-500 shadow-lg shadow-rose-500/50 animate-pulse"}):o?u.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 shadow-lg shadow-emerald-500/50"}):u.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-300"})}),R(),o&&h&&u.jsx("div",{className:"absolute top-10 right-2 bg-yellow-300 text-yellow-900 text-[8px] font-bold px-1.5 py-0.5 rounded-sm shadow-sm rotate-[-12deg] border border-yellow-400 z-10",children:"REV DUE"}),u.jsx("div",{className:`absolute right-3 top-1/2 w-3 h-3 rounded-full ${w} border border-black/10`}),u.jsx("div",{className:"mt-auto mb-8 w-3/4 text-center",children:u.jsx("div",{className:`py-1 px-2 rounded border ${o?"bg-white border-slate-200 shadow-sm":"bg-transparent border-transparent"}`,children:u.jsx("div",{className:`text-xs font-bold truncate ${o?"text-slate-700":"text-slate-400 italic"}`,children:c})})})]})}),u.jsx("div",{className:"absolute -bottom-2 w-[90%] h-2 bg-black/10 rounded-full blur-sm"})]})}function Qj({room:t,tenant:e,onClose:n}){if(!t)return null;const{updateTenant:r,createTenant:s}=Zr(),{showToast:i}=ao(),o=(e==null?void 0:e.status)||"Vacant",[l,c]=V.useState(o),d=l==="Occupied";pi.useEffect(()=>{c((e==null?void 0:e.status)||"Vacant")},[e]),pi.useEffect(()=>{const G=ie=>{ie.key==="Escape"&&n()};return window.addEventListener("keydown",G),()=>window.removeEventListener("keydown",G)},[n]);const[h,p]=V.useState("tenant"),[m,w]=V.useState(!1),[R,C]=V.useState({}),P=G=>{const ie=G.target.value;c(ie),ie==="Occupied"&&!e&&(w(!0),C({tenant:"",phone:"",email:"",rent:"",waterRate:"0.25",advance:"",lastRevision:"",joinDate:new Date().toISOString().split("T")[0],status:"Occupied",roomNo:t.roomNo,roomId:t.roomId}),p("tenant"))},I=()=>{C({tenant:(e==null?void 0:e.tenant)??"",phone:(e==null?void 0:e.phone)??"",email:(e==null?void 0:e.email)??"",rent:(e==null?void 0:e.rent)??"",waterRate:(e==null?void 0:e.waterRate)??"0.25",advance:(e==null?void 0:e.advance)??"",lastRevision:(e==null?void 0:e.lastRevision)??"",joinDate:(e==null?void 0:e.joinDate)??""}),w(!0),p("tenant")},[_,T]=V.useState(!1),N=async()=>{T(!0);try{const G={...R,status:l,isEvictionConfirmed:A,noRevision:v,evictionNoticeDate:A?x:null,evictionDate:A?k:null};if(e!=null&&e.rent&&String(e.rent)!==String(G.rent)&&(G.lastRent=e.rent),(G.waterRate===void 0||G.waterRate==="")&&(G.waterRate="0.25"),e!=null&&e.id)await r(e.id,G),i("Tenant details updated successfully","success");else{if(!t.roomId)throw new Error("Room ID missing");await s({...G,status:"Occupied",roomId:t.roomId,roomNo:t.roomNo}),i("New tenant created successfully","success")}w(!1),e!=null&&e.id||n()}catch(G){console.error("Failed to update/create tenant:",G),i("Failed to save: "+G.message,"error")}finally{T(!1)}},[A,D]=V.useState(!1),[v,y]=V.useState(!1);pi.useEffect(()=>{e?(D(!!e.isEvictionConfirmed),y(!!e.noRevision),b(e.evictionNoticeDate||""),j(e.evictionDate||"")):(D(!1),y(!1),b(""),j(""))},[e]);const[x,b]=V.useState(""),[k,j]=V.useState(""),S=V.useMemo(()=>{if(!d||!x||!k)return null;const G=new Date(x),ie=new Date(k),z=Number(e.rent||0),K=Number(e.advance||0),Y=[];let se=new Date(G.getFullYear(),G.getMonth(),1);const me=new Date(ie.getFullYear(),ie.getMonth(),1);for(;se<=me;)Y.push({year:se.getFullYear(),monthIndex:se.getMonth(),label:Bi(se.getFullYear(),se.getMonth())}),se.setMonth(se.getMonth()+1);const Tt=Y.length,nt=Tt*z,Ht=z,at=pu(t.roomNo);let bt=0;const nn=60;let hl=Tt*nn;const fl=Y.map(or=>{const co=gd(e,or.year,or.monthIndex,at),os=co.amount||0;bt+=os;let as="";return co.units!==null?as=`${co.units} units + ${nn}`:as=`Water data missing + ${nn}`,{...or,rent:z,waterCost:os,totalWater:os+nn,notes:as}}),pl=bt+hl,lo=nt+Ht+pl-K;return{monthsCount:Tt,rentDeduction:nt,mandatoryRent:Ht,waterAndServiceTotal:pl,deposit:K,balance:lo,monthDetails:fl,isWaterComplete:fl.every(or=>!or.notes.includes("missing"))}},[d,x,k,e,t.roomNo]),te=G=>{p(ie=>ie===G?null:G)},he=(G,ie)=>{if(G==="phone"){const z=ie.replace(/\D/g,"");if(z.length>10)return;C(K=>({...K,[G]:z}));return}C(z=>({...z,[G]:ie}))};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-in fade-in duration-200",children:u.jsxs("div",{className:"bg-stone-50 rounded-[2rem] shadow-2xl w-full max-w-lg h-[90vh] md:h-auto md:max-h-[90vh] overflow-y-auto flex flex-col",children:[u.jsxs("div",{className:"flex justify-between items-start p-6 pb-2 bg-stone-50 sticky top-0 z-10",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[u.jsxs("h3",{className:"text-2xl font-extrabold text-slate-900",children:["Room ",t.roomNo]}),d&&u.jsx("span",{className:"bg-emerald-100 text-emerald-700 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase tracking-wide border border-emerald-200/50",children:"Occupied"})]}),u.jsxs("p",{className:"text-xs font-bold text-slate-400",children:["ID: ",t.roomId]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[d&&!m&&u.jsx("button",{onClick:I,className:"p-2 bg-white rounded-full hover:bg-stone-200 transition text-slate-400 border border-stone-100 shadow-sm",title:"Edit Tenant Details",children:u.jsx(Fj,{size:18})}),m&&u.jsxs("button",{onClick:N,disabled:_,className:"px-4 py-2 bg-emerald-600 text-white rounded-xl hover:bg-emerald-700 transition shadow-sm flex items-center gap-2 text-xs font-bold disabled:opacity-50",children:[u.jsx(vu,{size:16})," ",_?"Saving...":"Save"]}),u.jsx("button",{onClick:()=>{w(!1),n()},className:"p-2 bg-white rounded-full hover:bg-stone-200 transition text-slate-400 border border-stone-100 shadow-sm",children:u.jsx(Wi,{size:20})})]})]}),u.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto custom-scrollbar",children:[u.jsxs("div",{className:"bg-white p-4 rounded-3xl border border-stone-200 shadow-sm",children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-2 block ml-1",children:"Room Status"}),u.jsxs("div",{className:"relative",children:[u.jsxs("select",{className:"w-full appearance-none bg-stone-50 border border-stone-200 text-slate-700 text-sm font-bold rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-emerald-500/20",value:l,onChange:P,children:[u.jsx("option",{value:"Occupied",children:"Occupied - Tenant Present"}),u.jsx("option",{value:"Vacant",children:"Vacant - Ready for Tenant"}),u.jsx("option",{value:"Maintenance",children:"Maintenance - Not Available"})]}),u.jsx(gu,{className:"absolute right-4 top-3.5 text-slate-400 pointer-events-none",size:16})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx(Nh,{id:"tenant",title:"Tenant Information",icon:Km,badge:d?"Occupied":null,expandedSection:h,onToggle:te,children:d?u.jsxs("div",{className:"grid grid-cols-2 gap-y-5 gap-x-4",children:[u.jsx(St,{label:"Tenant Name",value:e.tenant,fieldKey:"tenant",isEditing:m,editForm:R,onChange:he}),u.jsx(St,{label:"Phone",value:e.phone,fieldKey:"phone",type:"tel",isEditing:m,editForm:R,onChange:he,maxLength:10}),u.jsx(St,{label:"Email",value:e.email,fieldKey:"email",type:"email",isEditing:m,editForm:R,onChange:he}),u.jsx(St,{label:"Move-in Date",value:e.joinDate,fieldKey:"joinDate",type:"date",isEditing:m,editForm:R,onChange:he}),u.jsx(St,{label:"Room ID",value:t.roomId})]}):u.jsx("div",{className:"text-center py-4 text-slate-400 text-sm",children:"No tenant assigned."})}),u.jsx(Nh,{id:"financial",title:"Financial Details",icon:Cj,badge:(()=>{var Y;if(!d)return null;if(A)return"Adjusted in SD";const G=new Date,ie=Ns(G.getFullYear(),G.getMonth()),z=Dn(ie.year,ie.monthIndex);return((Y=e==null?void 0:e.paymentHistory)==null?void 0:Y[z])==="Paid"?"Paid":"Pending"})(),expandedSection:h,onToggle:te,children:d?u.jsxs("div",{className:"grid grid-cols-2 gap-y-5 gap-x-4",children:[u.jsx(St,{label:"Monthly Rent",value:`${Number(e.rent||0).toLocaleString("en-IN")}`,fieldKey:"rent",type:"number",isEditing:m,editForm:R,onChange:he}),u.jsx(St,{label:"Water Rate (/Unit)",value:e.waterRate||"0.25",fieldKey:"waterRate",type:"number",step:"0.01",isEditing:m,editForm:R,onChange:he}),u.jsx(St,{label:`Payment Status (${(()=>{const G=new Date,ie=Ns(G.getFullYear(),G.getMonth());return Bi(ie.year,ie.monthIndex)})()})`,value:(()=>{var Y;if(A)return"Adjusted in SD";if(!e)return"Pending";const G=new Date,ie=Ns(G.getFullYear(),G.getMonth()),z=Dn(ie.year,ie.monthIndex);return((Y=e.paymentHistory)==null?void 0:Y[z])==="Paid"?"Paid":"Pending"})()}),u.jsx(St,{label:"Advance Amount",value:`${Number(e.advance||0).toLocaleString("en-IN")}`,fieldKey:"advance",type:"number",isEditing:m,editForm:R,onChange:he}),u.jsx(St,{label:"Advance Balance",value:`${Number(e.advance||0).toLocaleString("en-IN")}`}),u.jsx(St,{label:"Last Rent Revision",value:e.lastRevision||"N/A",fieldKey:"lastRevision",type:"date",isEditing:m,editForm:R,onChange:he}),e.lastRent&&u.jsx(St,{label:"Last Recorded Rent",value:`${Number(e.lastRent).toLocaleString("en-IN")}`})]}):u.jsx("div",{className:"text-center py-4 text-slate-400 text-sm",children:"No financial data."})}),u.jsx(Nh,{id:"room",title:"Room Details",icon:Ha,badge:null,expandedSection:h,onToggle:te,children:u.jsxs("div",{className:"grid grid-cols-1 gap-y-4",children:[u.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:A?u.jsx("span",{className:"px-2 py-1 rounded-md bg-rose-50 text-rose-600 text-[10px] font-bold uppercase border border-rose-100",children:"Eviction: Pending"}):u.jsx("span",{className:"px-2 py-1 rounded-md bg-emerald-100 text-emerald-800 text-[10px] font-bold uppercase",children:"Paid"})}),u.jsx(St,{label:"Room Number",value:t.roomNo}),u.jsx(St,{label:"EB Service No",value:t.ebServNo})]})})]}),u.jsxs("div",{className:"space-y-3 pt-2",children:[u.jsx(Yj,{isOccupied:d,isEvictionConfirmed:A,setIsEvictionConfirmed:D,noRevision:v,setNoRevision:y}),A&&d&&u.jsxs("div",{className:"bg-stone-50 rounded-3xl p-6 border border-stone-200 mt-4 animate-in slide-in-from-top-4",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h4",{className:"font-bold text-slate-800 text-sm mb-4",children:"Eviction dates"}),u.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-4",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Eviction notice date"}),u.jsx("input",{type:"date",value:x,onChange:G=>b(G.target.value),className:"w-full bg-white border border-stone-200 rounded-xl px-3 py-2 text-sm font-bold text-slate-800 focus:outline-none focus:ring-2 focus:ring-emerald-500/20"})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Eviction date"}),u.jsx("input",{type:"date",value:k,onChange:G=>j(G.target.value),className:"w-full bg-white border border-stone-200 rounded-xl px-3 py-2 text-sm font-bold text-slate-800 focus:outline-none focus:ring-2 focus:ring-emerald-500/20"})]})]}),u.jsx("p",{className:"text-[10px] text-slate-400 mt-3 font-medium",children:"Step 1: Set Notice  Step 2: Set Eviction. When eviction date is reached, scheduler auto-vacates."})]}),S&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"bg-white rounded-2xl p-5 border border-stone-200 shadow-sm mb-6",children:[u.jsx("h4",{className:"font-bold text-slate-800 text-sm mb-1",children:"Eviction Settlement (from deposit)"}),u.jsx("p",{className:"text-[10px] text-slate-400 font-medium mb-4",children:"Deduct rent + water + 60 service (full months), plus mandatory 1 month rent."}),u.jsxs("div",{className:"grid grid-cols-2 gap-y-6 gap-x-4",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Months (Notice  Vacate)"}),u.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:S.monthsCount})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Mandatory 1 Month Rent"}),u.jsxs("div",{className:"text-xl font-bold text-slate-900",children:["",S.mandatoryRent.toLocaleString("en-IN")]})]}),u.jsxs("div",{children:[u.jsxs("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:["Rent Deduction (",S.monthsCount," months)"]}),u.jsxs("div",{className:"text-xl font-bold text-slate-900",children:["",S.rentDeduction.toLocaleString("en-IN")]})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Water + Service (known)"}),u.jsxs("div",{className:"text-xl font-bold text-slate-900",children:["",S.waterAndServiceTotal.toLocaleString("en-IN")]})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Security Deposit"}),u.jsxs("div",{className:"text-xl font-bold text-slate-900",children:["",S.deposit.toLocaleString("en-IN")]})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Result (known)"}),u.jsxs("div",{className:`text-xl font-extrabold ${S.balance>0?"text-rose-600":"text-emerald-600"}`,children:[S.balance>0?"Tenant owes":"Refund",": ",Math.abs(S.balance).toLocaleString("en-IN")]})]})]}),u.jsxs("div",{className:"mt-6 bg-rose-50/50 rounded-xl overflow-hidden border border-rose-100",children:[u.jsx("div",{className:"px-4 py-2 bg-rose-100/50 border-b border-rose-100",children:u.jsx("h5",{className:"text-xs font-bold text-rose-800",children:"Month-wise deduction"})}),u.jsxs("table",{className:"w-full text-xs text-left",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"text-slate-500 border-b border-rose-100/50",children:[u.jsx("th",{className:"px-4 py-2 font-bold",children:"Month"}),u.jsx("th",{className:"px-4 py-2 text-right font-bold",children:"Rent"}),u.jsx("th",{className:"px-4 py-2 text-right font-bold",children:"Water"}),u.jsx("th",{className:"px-4 py-2 font-bold",children:"Notes"})]})}),u.jsx("tbody",{className:"divide-y divide-rose-100/50",children:S.monthDetails.map((G,ie)=>u.jsxs("tr",{className:"bg-white",children:[u.jsx("td",{className:"px-4 py-2 font-bold text-slate-800",children:G.label}),u.jsxs("td",{className:"px-4 py-2 text-right font-medium text-slate-600",children:["",G.rent.toLocaleString("en-IN")]}),u.jsxs("td",{className:"px-4 py-2 text-right font-medium text-slate-600",children:["",G.waterCost.toLocaleString("en-IN")]}),u.jsx("td",{className:"px-4 py-2 text-slate-500",children:G.notes})]},ie))})]})]})]}),u.jsx("p",{className:"text-[11px] text-slate-400 font-medium mb-4",children:S.isWaterComplete?"All required water readings are available for the selected months.":" Some water readings are missing. Please update them in Water Bill section."}),u.jsx("button",{className:"w-full py-3 bg-rose-600 hover:bg-rose-700 text-white font-bold rounded-xl shadow-sm shadow-rose-200 transition",children:"Finalize Settlement & Mark Vacant"})]})]})]}),u.jsxs("div",{className:"mt-8 flex items-center justify-end gap-3 pt-6 border-t border-stone-100",children:[u.jsx("button",{className:"px-5 py-2.5 bg-amber-500 hover:bg-amber-600 text-white text-sm font-bold rounded-xl shadow-sm shadow-amber-200 transition",children:"Mark Rent Revised"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{className:"px-5 py-2.5 bg-rose-600 hover:bg-rose-700 text-white text-sm font-bold rounded-xl shadow-sm shadow-rose-200 transition",children:"Mark Vacant"}),u.jsx("button",{onClick:N,disabled:_,className:"p-2.5 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl shadow-sm shadow-emerald-200 transition disabled:opacity-50",title:"Save Changes",children:u.jsx(vu,{size:20})})]}),u.jsx("button",{onClick:n,className:"p-2.5 bg-stone-100 hover:bg-stone-200 text-slate-600 rounded-xl transition",children:u.jsx(Wi,{size:18})})]})]})]})})}function Yj({isOccupied:t,isEvictionConfirmed:e,setIsEvictionConfirmed:n,noRevision:r,setNoRevision:s}){return u.jsxs(u.Fragment,{children:[u.jsxs("label",{className:`flex items-start gap-3 p-1 cursor-pointer group ${t?"":"opacity-50 pointer-events-none"}`,children:[u.jsxs("div",{className:"relative flex items-center",children:[u.jsx("input",{type:"checkbox",checked:e,onChange:i=>n(i.target.checked),className:"peer size-5 appearance-none rounded-md border-2 border-slate-300 checked:bg-emerald-500 checked:border-emerald-500 transition cursor-pointer"}),u.jsx("svg",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-3.5 h-3.5 text-white opacity-0 peer-checked:opacity-100 pointer-events-none transition",viewBox:"0 0 14 14",fill:"none",children:u.jsx("path",{d:"M11.6666 3.5L5.24992 9.91667L2.33325 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-bold text-slate-700 group-hover:text-slate-900 transition flex items-center gap-2",children:"Tenant confirmed eviction"}),u.jsx("p",{className:"text-[11px] text-slate-400 font-medium leading-relaxed mt-0.5",children:"Enable eviction notice/date and deposit settlement controls."})]})]}),u.jsxs("label",{className:"flex items-start gap-3 p-1 cursor-pointer group",children:[u.jsxs("div",{className:"relative flex items-center",children:[u.jsx("input",{type:"checkbox",checked:r,onChange:i=>s(i.target.checked),className:"peer size-5 appearance-none rounded-md border-2 border-slate-300 checked:bg-emerald-500 checked:border-emerald-500 transition cursor-pointer"}),u.jsx("svg",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-3.5 h-3.5 text-white opacity-0 peer-checked:opacity-100 pointer-events-none transition",viewBox:"0 0 14 14",fill:"none",children:u.jsx("path",{d:"M11.6666 3.5L5.24992 9.91667L2.33325 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-bold text-slate-700 group-hover:text-slate-900 transition",children:"No annual revision"}),u.jsx("p",{className:"text-[11px] text-slate-400 font-medium leading-relaxed mt-0.5",children:"Exclude from Rent Revision Due Soon list."})]})]})]})}const Nh=({id:t,title:e,icon:n,badge:r,expandedSection:s,onToggle:i,children:o})=>{const l=s===t;return u.jsxs("div",{className:`bg-white rounded-3xl border transition-all duration-200 overflow-hidden ${l?"border-emerald-500 shadow-md ring-1 ring-emerald-100":"border-stone-200"}`,children:[u.jsxs("button",{onClick:()=>i(t),className:"w-full flex items-center justify-between p-4 bg-white",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-2 rounded-xl ${l?"bg-emerald-100 text-emerald-700":"bg-stone-100 text-slate-500"}`,children:u.jsx(n,{size:18})}),u.jsxs("div",{className:"text-left",children:[u.jsx("h4",{className:"font-bold text-slate-800 text-sm",children:e}),u.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Hover (or tap) to expand"})]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[r&&u.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-0.5 rounded-md ${r==="Occupied"||r==="Paid"?"bg-emerald-100 text-emerald-700":"bg-stone-100 text-slate-500"}`,children:r}),l?u.jsx(ep,{size:16,className:"text-slate-400"}):u.jsx(gu,{size:16,className:"text-slate-400"})]})]}),l&&u.jsxs("div",{className:"px-4 pb-5 pt-0 animate-in slide-in-from-top-2 duration-200",children:[u.jsx("div",{className:"h-px bg-stone-100 mb-4 mx-2"}),o]})]})},St=({label:t,value:e,fieldKey:n,type:r="text",step:s,isEditing:i,editForm:o,onChange:l,maxLength:c})=>u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1",children:t}),i&&n?u.jsx("input",{type:r,step:s,maxLength:c,value:o[n]||"",onChange:d=>l(n,d.target.value),className:"w-full bg-white border border-stone-200 rounded-lg px-3 py-2 text-sm font-bold text-slate-800 focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none"}):u.jsx("div",{className:"text-sm font-bold text-slate-800 break-words",children:e||"N/A"})]});function Jj(){const{rooms:t,tenants:e,loading:n}=Zr(),[r,s]=pi.useState(null);if(n)return u.jsx("div",{className:"p-12 text-center text-slate-400",children:"Loading rooms..."});const i=12,o=[{name:"Ground Floor",rooms:["01","02"]},{name:"1st Floor",rooms:["04"]},{name:"2nd Floor",rooms:["05","06","07"]},{name:"3rd Floor",rooms:["08","09","10"]},{name:"4th Floor",rooms:["11","12","13"]}];let l=0;o.forEach(_=>{_.rooms.forEach(T=>{const N=t[T];if(N){const A=Be(e,N.roomId);Ss(A)&&l++}})});const c=i-l,d=({label:_,mainValue:T,subValue:N,icon:A,bgClass:D,iconClass:v})=>u.jsx("div",{className:`p-6 rounded-3xl ${D} flex flex-col justify-between h-40 relative overflow-hidden`,children:u.jsxs("div",{className:"flex justify-between items-start z-10",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-semibold text-slate-600 mb-1",children:_}),u.jsx("h3",{className:"text-4xl font-extrabold text-slate-900",children:T}),N&&u.jsx("p",{className:"text-xs text-slate-500 mt-2",children:N})]}),u.jsx("div",{className:`p-2 rounded-full ${v}`,children:u.jsx(A,{size:24})})]})}),h=(_,T)=>{s({room:_,tenant:T})},p=new Date().getFullYear(),m=new Date().getMonth(),w=Ns(p,m),R=Dn(w.year,w.monthIndex),C=yj(e,t,w.year,w.monthIndex),P=vj(e,t,w.year,w.monthIndex),I=[];return Object.keys(Xe).forEach(_=>{var A;const T=t[_]||Xe[_],N=Be(e,T.roomId);N&&N.status==="Occupied"&&!N.isEvictionConfirmed&&((A=N.paymentHistory)==null?void 0:A[R])==="Pending"&&I.push({roomNo:T.roomNo,amount:N.rent,tenantName:N.tenant})}),u.jsxs("div",{className:"space-y-8 pb-12",children:[u.jsx("h2",{className:"text-3xl font-extrabold text-slate-900",children:"Room Details"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsx(d,{label:"Occupied Rooms",mainValue:l,subValue:`Out of ${i}`,icon:Ha,bgClass:"bg-stone-50 border border-stone-100",iconClass:"bg-emerald-100 text-emerald-700"}),u.jsx(d,{label:"Vacant Rooms",mainValue:c,subValue:"Available",icon:Ha,bgClass:"bg-stone-50 border border-stone-100",iconClass:"bg-slate-200 text-slate-600"}),u.jsx(d,{label:"Rent Received",mainValue:`${C.toLocaleString("en-IN")}`,subValue:`Month of ${Bi(w.year,w.monthIndex)}`,icon:Sj,bgClass:"bg-stone-50 border border-stone-100",iconClass:"bg-emerald-100 text-emerald-700"}),u.jsx(d,{label:"Pending Rent",mainValue:`${P.toLocaleString("en-IN")}`,subValue:`Month of ${Bi(w.year,w.monthIndex)}`,icon:Ri,bgClass:"bg-stone-50 border border-stone-100",iconClass:"bg-amber-100 text-amber-600"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsx("div",{className:"lg:col-span-2 space-y-8 bg-stone-50/50 p-6 rounded-3xl border border-stone-100",children:o.map(_=>u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[u.jsx("div",{className:"md:col-span-1 flex items-center",children:u.jsx("span",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:_.name})}),u.jsxs("div",{className:"md:col-span-3 grid grid-cols-1 sm:grid-cols-3 gap-4",children:[_.rooms.map(T=>{var v;const N=t[T],A=Be(e,N==null?void 0:N.roomId);let D=null;return A&&A.status==="Occupied"&&(A.isEvictionConfirmed?D="Adjusted":D=((v=A.paymentHistory)==null?void 0:v[R])||"Pending"),u.jsx(pa,{roomNo:T,roomData:N,tenantData:A,rentStatus:D,isPlaceholder:!N,onClick:()=>h(N,A)},T)}),_.name==="1st Floor"?u.jsx("div",{className:"sm:col-span-2",children:u.jsx(pa,{roomNo:"Owner",roomData:{roomId:"Flat"},tenantData:{status:"Occupied",tenant:"Munirathnam",evictionConfirmed:!1},rentStatus:"Paid",onClick:()=>{}})}):Array.from({length:3-_.rooms.length}).map((T,N)=>u.jsx(pa,{isPlaceholder:!0},`placeholder-${N}`))]})]},_.name))}),u.jsx("div",{className:"lg:col-span-1",children:u.jsxs("div",{className:"bg-stone-50 rounded-3xl border border-stone-100 p-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h3",{className:"font-bold text-slate-800",children:"Last Month Pending"}),u.jsx("span",{className:"bg-amber-100 text-amber-800 text-xs font-bold px-2 py-1 rounded-full",children:I.length})]}),u.jsxs("div",{className:"space-y-3",children:[I.length>0?I.map((_,T)=>u.jsxs("div",{className:"bg-white p-4 rounded-xl border border-stone-100 shadow-sm cursor-pointer hover:border-rose-200 transition",onClick:()=>{const N=t[_.roomNo],A=Be(e,N==null?void 0:N.roomId);N&&A&&h(N,A)},children:[u.jsxs("div",{className:"flex justify-between mb-1",children:[u.jsxs("span",{className:"font-bold text-slate-700",children:["Room ",_.roomNo]}),u.jsxs("span",{className:"font-bold text-rose-600",children:["",Number(_.amount).toLocaleString()]})]}),u.jsx("div",{className:"text-xs text-slate-500",children:_.tenantName})]},T)):u.jsx("div",{className:"text-center py-8 text-slate-400 text-sm",children:"No pending payments from last month."}),u.jsx("p",{className:"text-xs text-slate-400 mt-4 text-center",children:"Click a row to open Rent Details."})]})]})})]}),r&&u.jsx(Qj,{room:r.room,tenant:Be(e,r.room.roomId),onClose:()=>s(null)})]})}function Xj(){const{rooms:t,tenants:e,loading:n,updateRentStatus:r,globalYear:s}=Zr(),{showToast:i}=ao(),o=s;if(n)return u.jsx("div",{className:"p-12 text-center text-slate-400",children:"Loading rent details..."});const l=Object.keys(Xe).map(d=>t[d]||Xe[d]).sort((d,h)=>String(d.roomNo).localeCompare(String(h.roomNo),void 0,{numeric:!0})),c=async(d,h,p)=>{const m=Be(e,d.roomId);if(!Ss(m))return;const w=Dn(o,h),R=new Date;if(!(hu(o,h)||o===R.getFullYear()&&h===R.getMonth()))try{await r(d.roomId,w,p,m,o,h)}catch(P){i(P.message,"error")}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsx("h2",{className:"text-3xl font-extrabold text-slate-900",children:"Rent Status"}),u.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[u.jsxs("span",{className:"font-semibold",children:["Year: ",o]}),u.jsx("span",{className:"text-xs text-slate-400",children:"(Change in Dashboard)"})]})]}),u.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden",children:u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-base text-left whitespace-nowrap",children:[u.jsx("thead",{className:"bg-slate-50 text-slate-700 font-semibold border-b border-slate-200",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-2 py-4 border-r border-slate-200 sticky left-0 bg-slate-50 z-10 w-20 text-center",children:"Room ID"}),u.jsx("th",{className:"px-2 py-4 border-r border-slate-200 w-20 text-center",children:"Room No"}),u.jsx("th",{className:"px-4 py-4 border-r border-slate-200 w-40",children:"Tenant"}),ln.map(d=>u.jsx("th",{className:"px-1 py-4 text-center w-12",children:d},d))]})}),u.jsx("tbody",{className:"divide-y divide-slate-100",children:l.map(d=>{const h=Be(e,d.roomId),p=Ss(h),m=p?(h==null?void 0:h.tenant)||"Unknown":"Vacant",w=(h==null?void 0:h.paymentHistory)||{};return u.jsxs("tr",{className:p?"hover:bg-slate-50":"bg-slate-50/50",children:[u.jsx("td",{className:"px-2 py-4 border-r border-slate-100 font-bold text-blue-600 sticky left-0 bg-white z-10 text-center",children:d.roomId}),u.jsx("td",{className:"px-2 py-4 border-r border-slate-100 font-medium text-center",children:d.roomNo}),u.jsx("td",{className:`px-4 py-4 border-r border-slate-100 font-medium truncate max-w-[160px] ${p?"text-slate-800":"text-slate-400 italic"}`,title:m,children:m}),ln.map((R,C)=>{const P=Dn(o,C),I=w[P]||"None",_=new Date,T=o===_.getFullYear()&&C===_.getMonth(),N=hu(o,C)||T;let A=u.jsx(Sh,{size:14,className:"mx-auto text-slate-300"}),D="cursor-not-allowed bg-slate-100/50";if(p)if(N)A=u.jsx(Sh,{size:14,className:"mx-auto text-slate-300"}),D="cursor-not-allowed bg-slate-50";else{let v=!1;if(h.isEvictionConfirmed)if(h.evictionNoticeDate){const y=new Date(h.evictionNoticeDate),x=new Date(y.getFullYear(),y.getMonth(),1);new Date(o,C,1)>=x&&(v=!0)}else v=!0;v?(A=u.jsx("span",{className:"text-[10px] font-black text-cyan-600",children:"SD"}),D="cursor-not-allowed bg-cyan-50"):I==="Paid"?(A=u.jsx(mu,{size:16,className:"mx-auto text-green-600",strokeWidth:3}),D="cursor-pointer bg-green-50 hover:bg-green-100"):I==="Pending"?(A=u.jsx(Wi,{size:16,className:"mx-auto text-amber-600",strokeWidth:3}),D="cursor-pointer bg-amber-50 hover:bg-amber-100"):I==="Rent Only"?(A=u.jsx(mu,{size:16,className:"mx-auto text-purple-600",strokeWidth:3}),D="cursor-pointer bg-purple-50 hover:bg-purple-100"):(A=u.jsx(Sh,{size:14,className:"mx-auto text-slate-400"}),D="cursor-pointer bg-white hover:bg-slate-50")}return u.jsx("td",{className:`px-1 py-4 border-r border-slate-100 text-center transition-colors ${D}`,onClick:()=>c(d,C,I),title:p?N?"Locked":I:"Vacant",children:A},P)})]},d.roomId)})})]})})}),u.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden mt-8",children:[u.jsxs("div",{className:"p-6 border-b border-slate-100 bg-emerald-50/50",children:[u.jsx("h3",{className:"text-xl font-bold text-emerald-900",children:"Rent and Water"}),u.jsx("p",{className:"text-sm text-emerald-700 mt-1",children:"Rent and Water Details (Water Calculation Disabled Temporarily for Debugging)"})]}),u.jsx("div",{className:"overflow-x-auto text-sm",children:u.jsxs("table",{className:"w-full text-left whitespace-nowrap",children:[u.jsx("thead",{className:"bg-emerald-100 text-emerald-900 font-bold",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-2 py-4 sticky left-0 bg-emerald-100 z-10 w-20 text-center",children:"Room ID"}),u.jsx("th",{className:"px-2 py-4 border-r border-emerald-200/50 w-20 text-center",children:"Room No"}),u.jsx("th",{className:"px-4 py-4 border-r border-emerald-200/50 w-40",children:"Tenant Name"}),Array.from({length:12}).map((d,h)=>u.jsx("th",{className:"px-1 py-4 text-center min-w-[70px]",children:Bi(o,h).split(" ")[0]},h))]})}),u.jsx("tbody",{className:"divide-y divide-emerald-50",children:l.map(d=>{const h=Be(e,d.roomId),p=h&&h.status==="Occupied";return u.jsxs("tr",{className:"hover:bg-slate-50 transition",children:[u.jsx("td",{className:"px-2 py-4 font-bold text-blue-600 sticky left-0 bg-white shadow-[1px_0_5px_-2px_rgba(0,0,0,0.1)] text-center",children:d.roomId}),u.jsx("td",{className:"px-2 py-4 border-r border-slate-100 font-medium text-slate-700 text-center",children:d.roomNo}),u.jsx("td",{className:"px-4 py-4 border-r border-slate-100 font-medium text-slate-900 truncate max-w-[160px]",title:p?h.tenant:"Vacant",children:p?h.tenant:u.jsx("span",{className:"text-slate-400 italic",children:"Vacant"})}),Array.from({length:12}).map((m,w)=>{const R=`${o}-${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][w]}`;let C="-",P="text-slate-300";if(h){const I=h.paymentHistory||{},_=h.paymentTotals||{},T=I[R];let N=Number(h.rent);if(h.lastRevision){const v=new Date(h.lastRevision),y=new Date(o,w,1),x=new Date(v.getFullYear(),v.getMonth(),1);y<x&&(N=Number(h.lastRent)||N)}const A=qm;let D=!1;if(h.isEvictionConfirmed&&h.evictionNoticeDate){const v=new Date(h.evictionNoticeDate),y=new Date(o,w,1),x=new Date(v.getFullYear(),v.getMonth(),1);y>=x&&(D=!0,N=0)}if(T==="Paid")if(D)C="0",P="text-slate-900 font-bold";else{const v=_[R];Number.isFinite(v)?(C=v.toLocaleString("en-IN"),P="text-slate-900 font-bold"):(C=(N+A).toLocaleString("en-IN"),P="text-slate-900 font-bold")}}return u.jsx("td",{className:`px-1 py-4 text-center ${P} border-r border-slate-50`,children:C},w)})]},d.roomId)})})]})})]})]})}const d_="AIzaSyA0itcrnHPFW7Y_OSuOsG3o9zJ0ONPl2ew",Zj="gemini-1.5-flash",eO=`https://generativelanguage.googleapis.com/v1beta/models/${Zj}:generateContent`;async function tO(t,e="image/jpeg"){var n,r,s,i,o,l;try{console.log("Starting Gemini analysis...");const c=new AbortController,d=setTimeout(()=>c.abort(),3e4),h=await fetch(`${eO}?key=${d_}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:"Analyze this image of a water meter. Extract the numeric reading shown on the counter. Return ONLY the number as a plain integer or float. Ignore any units or leading zeros if they are not part of the value. If you cannot clearly see a number, return 'ERROR'."},{inline_data:{mime_type:e,data:t}}]}],generationConfig:{maxOutputTokens:50,temperature:.2}}),signal:c.signal});if(clearTimeout(d),!h.ok){const R=await h.text();throw console.error("Gemini API Error Body:",R),new Error(`Gemini API Error: ${h.status} ${h.statusText}`)}const p=await h.json(),m=(l=(o=(i=(s=(r=(n=p==null?void 0:p.candidates)==null?void 0:n[0])==null?void 0:r.content)==null?void 0:s.parts)==null?void 0:i[0])==null?void 0:o.text)==null?void 0:l.trim();if(console.log("Gemini Raw Response:",m),!m||m.includes("ERROR"))return null;const w=m.match(/(\d+\.?\d*)/);return w?parseFloat(w[0]):null}catch(c){throw console.error("Failed to analyze image with Gemini:",c),c}}const nO=({size:t=24,className:e=""})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"currentColor",className:e,children:u.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})});function rO(){const{rooms:t,tenants:e,loading:n,globalYear:r}=Zr(),{showToast:s,confirm:i}=ao(),o=r,[l,c]=V.useState(null),[d,h]=V.useState(""),[p,m]=V.useState(!1),[w,R]=V.useState(!1);if(n)return u.jsx("div",{className:"p-12 text-center text-slate-400",children:"Loading water details..."});const C=Object.keys(Xe).map(N=>t[N]||Xe[N]).sort((N,A)=>String(N.roomNo).localeCompare(String(A.roomNo),void 0,{numeric:!0})),P=(N,A,D,v,y,x,b)=>{!v&&!Ss(Be(e,N.roomId))||D||(c({room:N,monthIndex:A,currentVal:y,prevVal:b,existingReset:x}),h(y??""),m(!!x))},I=async()=>{if(!l)return;const{room:N,monthIndex:A}=l;try{const D=Be(e,N.roomId);if(!D||!D.id)throw new Error("Tenant record not found");const v=Number(d);if(d!==""&&(!Number.isFinite(v)||v<0)){s("Please enter a valid non-negative reading","warning");return}const y=vs(o,A);!p&&d!==""&&Number.isFinite(l.prevVal)&&v<l.prevVal&&await i({title:"Potential Meter Reset?",message:`Reading (${v}) is lower than previous (${l.prevVal}).

Is this a meter reset/replacement?`,confirmText:"Yes, Meter Reset",cancelText:"No, Save Anyway",type:"danger"})&&m(!0);const x={[`waterReadings.${y}`]:d===""?null:v,[`waterMeterReset.${y}`]:!!p};await Bn(Qt(Ae,"properties",D.id),x),c(null),s("Water reading saved successfully","success")}catch(D){console.error(D),s("Error saving reading: "+D.message,"error")}},_=N=>{N!==null?(h(N.toString()),s("Reading extracted successfully!","success")):s("Could not extract reading. Please try again or enter manually.","error"),R(!1)},T=async(N,A=null,D=null)=>{var y,x;const v=N.target.files[0];if(v){if(A!==null&&D){const b=Be(e,D.roomId);Ss(b);const k=vs(o,A),j=(y=b==null?void 0:b.waterReadings)==null?void 0:y[k],S=((b==null?void 0:b.waterMeterReset)||{})[k],te=Ns(o,A),he=vs(te.year,te.monthIndex),G=Number((x=b==null?void 0:b.waterReadings)==null?void 0:x[he]);c({room:D,monthIndex:A,currentVal:j,prevVal:G,existingReset:S}),h("")}R(!0);try{const b=new FileReader;b.onloadend=async()=>{try{const k=b.result.toString().split(",")[1],j=v.type,S=await tO(k,j);_(S)}catch(k){console.error("Error in AI analysis:",k),s("Error scanning image: "+k.message,"error"),R(!1)}},b.readAsDataURL(v)}catch(b){console.error(b),s("Error processing image: "+b.message,"error"),R(!1)}}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsx("h2",{className:"text-3xl font-extrabold text-slate-900",children:"Water Bill"}),u.jsx("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:u.jsxs("span",{className:"font-semibold",children:["Year: ",o]})})]}),u.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden",children:u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-sm text-center whitespace-nowrap",children:[u.jsx("thead",{className:"bg-slate-50 text-slate-700 font-semibold border-b border-slate-200",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 border-r border-slate-200 sticky left-0 bg-slate-50 z-10 text-left min-w-[100px]",children:"Room"}),ln.map(N=>u.jsx("th",{className:"px-2 py-3 w-24",children:N},N)),u.jsx("th",{className:"px-2 py-3 w-16 sticky right-0 bg-slate-50 z-10 border-l border-slate-200",children:"Scan"})]})}),u.jsx("tbody",{className:"divide-y divide-slate-100",children:C.map(N=>{var b;const A=Be(e,N.roomId),D=Ss(A),v=(A==null?void 0:A.waterReadings)&&Object.keys(A.waterReadings).length>0,y=((b=A==null?void 0:A.archivedTenant)==null?void 0:b.tenant)||"",x=D?(A==null?void 0:A.tenant)||"Unknown":y?`${y} (Vacated)`:"Vacant";return u.jsxs("tr",{className:"hover:bg-slate-50/50",children:[u.jsxs("td",{className:"px-4 py-3 border-r border-slate-100 sticky left-0 bg-white z-10 text-left",children:[u.jsx("div",{className:"font-bold text-blue-600",children:N.roomNo}),u.jsx("div",{className:"text-xs text-slate-500 truncate max-w-[120px]",children:x})]}),ln.map((k,j)=>{var at,bt;const S=hu(o,j),te=D||v,he=Number(A==null?void 0:A.waterRate),G=Number.isFinite(he)?he:pu(N.roomNo),ie=gd(A,o,j,G),z=vs(o,j),K=(at=A==null?void 0:A.waterReadings)==null?void 0:at[z],Y=((A==null?void 0:A.waterMeterReset)||{})[z];let se=u.jsx("span",{className:"text-slate-300",children:"-"}),me="bg-slate-50 text-slate-400 cursor-not-allowed";if(te)if(S&&D)se=u.jsx("span",{className:"text-slate-300",children:"-"}),me="bg-slate-100 text-slate-400 cursor-not-allowed";else if(me="cursor-pointer bg-white hover:bg-blue-50 transition-colors",ie.units!==null&&ie.amount!==null){const nn=ie.units<0;se=u.jsxs("div",{className:"flex flex-col items-center leading-tight",children:[u.jsxs("span",{className:"font-extrabold text-blue-700",children:["",ie.amount]}),u.jsxs("span",{className:`text-[10px] ${nn?"text-red-600 font-bold":"text-slate-500"}`,children:["Units: ",ie.units]}),Y&&u.jsxs("span",{className:"text-[9px] text-amber-600 font-bold flex items-center gap-0.5",children:[u.jsx(zj,{size:8})," Reset"]})]}),nn&&(me+=" bg-red-50 hover:bg-red-100")}else Number.isFinite(Number(K))?se=u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx("span",{className:"font-semibold text-slate-700",children:K}),u.jsx("span",{className:"text-[9px] text-slate-400",children:"reading"})]}):se=u.jsx("span",{className:"text-slate-200",children:""});const Tt=Ns(o,j),nt=vs(Tt.year,Tt.monthIndex),Ht=Number((bt=A==null?void 0:A.waterReadings)==null?void 0:bt[nt]);return u.jsx("td",{className:`px-1 py-2 border-r border-slate-100 h-16 align-middle ${me}`,onClick:()=>P(N,j,te&&S&&D,te,K,Y,Ht),children:se},j)}),u.jsx("td",{className:"px-2 py-2 h-16 align-middle sticky right-0 bg-white z-10 border-l border-slate-100",children:(()=>{const k=new Date().getMonth();return o===new Date().getFullYear()?u.jsxs("label",{className:"flex items-center justify-center size-10 rounded-xl bg-blue-50 text-blue-600 hover:bg-blue-600 hover:text-white transition-all cursor-pointer mx-auto",children:[u.jsx("input",{type:"file",accept:"image/*",capture:"environment",className:"hidden",onChange:S=>T(S,k,N),disabled:w}),w?u.jsx(yu,{size:18,className:"animate-spin"}):u.jsx(s_,{size:18})]}):u.jsx("span",{className:"text-slate-200",children:"-"})})()})]},N.roomId)})})]})})}),l&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:u.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-[340px] overflow-hidden animate-in zoom-in-95 duration-200",children:[u.jsxs("div",{className:"bg-white px-6 pt-6 pb-2",children:[u.jsx("h3",{className:"text-xl font-extrabold text-slate-800 tracking-tight",children:"Water meter reading"}),u.jsxs("p",{className:"text-sm font-medium text-slate-400 mt-1",children:["Room ",l.room.roomNo,"  ",ln[l.monthIndex]," ",o]})]}),u.jsxs("div",{className:"p-6 space-y-5",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsxs("label",{className:"block text-xs font-bold text-slate-400 uppercase tracking-wider",children:["Previous month reading (",ln[(l.monthIndex-1+12)%12]," ",l.monthIndex===0?o-1:o,")"]}),u.jsx("div",{className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-600 font-mono font-bold text-lg",children:Number.isFinite(l.prevVal)?l.prevVal:"N/A"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Units multiplier"}),u.jsxs("div",{className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-600 font-bold",children:["",fa]})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Meter reset?"}),u.jsxs("select",{className:"w-full px-3 py-3 bg-white border border-slate-200 rounded-xl text-slate-700 font-bold focus:outline-none focus:ring-2 focus:ring-blue-500/20 appearance-none",value:p?"Yes":"No",onChange:N=>m(N.target.value==="Yes"),children:[u.jsx("option",{value:"No",children:"No"}),u.jsx("option",{value:"Yes",children:"Yes"})]})]})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("label",{className:"block text-sm font-bold text-blue-900",children:"Current reading"}),u.jsxs("label",{className:"flex items-center gap-1.5 text-xs font-bold text-blue-600 bg-blue-50 px-2 py-1 rounded-lg cursor-pointer hover:bg-blue-100 transition-colors",children:[u.jsx("input",{type:"file",accept:"image/*",capture:"environment",className:"hidden",onChange:T,disabled:w}),w?u.jsxs(u.Fragment,{children:[u.jsx(yu,{size:14,className:"animate-spin"}),"Analyzing..."]}):u.jsxs(u.Fragment,{children:[u.jsx(s_,{size:14}),"Scan Meter"]})]})]}),u.jsx("div",{className:"relative",children:u.jsx("input",{type:"number",autoFocus:!0,className:"w-full px-4 py-3 rounded-xl border-2 border-blue-100 bg-blue-50/50 focus:bg-white focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 outline-none text-2xl font-mono font-bold text-blue-900 placeholder:text-blue-200 transition-all",placeholder:"000",value:d,onChange:N=>h(N.target.value),onKeyDown:N=>N.key==="Enter"&&I()})})]})]}),u.jsxs("div",{className:"px-6 pb-6 flex items-center justify-end gap-3",children:[u.jsx("button",{onClick:()=>c(null),className:"size-12 rounded-2xl flex items-center justify-center bg-slate-100 text-slate-400 hover:bg-slate-200 hover:text-slate-600 transition-all",title:"Close",children:u.jsx("span",{className:"text-2xl leading-none",children:""})}),(()=>{const N=Be(e,l.room.roomId),A=N==null?void 0:N.phone,D=Number(d);let v="#",y=!1;if(A){if(d!==""&&Number.isFinite(D)){Number.isFinite(l.prevVal)&&l.prevVal;const x=p;let b=null;if(x?b=D*fa:Number.isFinite(l.prevVal)&&(b=(D-l.prevVal)*fa),b!==null&&b>=0){const k=Number(N==null?void 0:N.waterRate),j=Number.isFinite(k)?k:pu(l.room.roomNo),S=Math.round(b*j),he=`Water Bill - ${`${ln[l.monthIndex]} ${o}`}
No of Ltrs - ${b}
Amnt.        - ${S}`;v=`https://wa.me/91${A}?text=${encodeURIComponent(he)}`,y=!0}}}return!y&&A&&(v=`https://wa.me/91${A}?text=Hi, please send the water meter reading for ${ln[l.monthIndex]} ${o}.`),u.jsx("a",{href:A?v:void 0,onClick:x=>!A&&alert("No phone number for tenant"),target:"_blank",rel:"noreferrer",className:"size-12 rounded-2xl flex items-center justify-center bg-emerald-100 text-emerald-600 hover:bg-emerald-500 hover:text-white transition-all border border-emerald-200",title:y?"Send Bill on WhatsApp":"Request Reading on WhatsApp",children:u.jsx(nO,{})})})(),u.jsx("button",{onClick:I,className:"size-12 rounded-2xl flex items-center justify-center bg-blue-600 text-white hover:bg-blue-700 hover:scale-105 active:scale-95 transition-all shadow-lg shadow-blue-200",title:"Save Recording",children:u.jsx(vu,{size:24})})]})]})})]})}const Rh=["House Keeping Salary","Electricity Bill","Internet Bill","Painting","Room Maintenance","Other"];function sO(){const{expenses:t,addExpense:e,deleteExpense:n,loading:r,globalYear:s}=Zr(),{showToast:i,confirm:o}=ao(),l=s,[c,d]=V.useState(new Date().toISOString().split("T")[0]),[h,p]=V.useState(Rh[0]),[m,w]=V.useState(""),[R,C]=V.useState(""),[P,I]=V.useState(!1),_=async D=>{if(D.preventDefault(),!c||!h||!m||Number(m)<=0){i("Please fill in all required fields with valid values.","warning");return}I(!0);try{const v=new Date(c),y=Dn(v.getFullYear(),v.getMonth());await e({date:c,category:h,amount:Number(m),note:R.trim(),monthKey:y,createdAt:new Date().toISOString()}),w(""),C(""),p(Rh[0]),i("Expense added successfully","success")}catch(v){console.error(v),i("Failed to add expense: "+v.message,"error")}finally{I(!1)}},T=async D=>{if(await o({title:"Delete Expense?",message:"Are you sure you want to delete this expense? This action cannot be undone.",type:"danger",confirmText:"Delete"}))try{await n(D),i("Expense deleted successfully","success")}catch(y){i("Failed to delete: "+y.message,"error")}};if(r)return u.jsx("div",{className:"p-12 text-center text-slate-400",children:"Loading expenses..."});const N=t.filter(D=>D.date?new Date(D.date).getFullYear()===l:!1),A=N.reduce((D,v)=>D+(Number(v.amount)||0),0);return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsx("h2",{className:"text-3xl font-extrabold text-slate-900",children:"Expenses"}),u.jsx("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:u.jsxs("span",{className:"font-semibold",children:["Year: ",l]})})]}),u.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-rose-600 rounded-3xl p-6 text-white shadow-lg shadow-rose-200",children:[u.jsxs("div",{className:"text-white/80 font-medium mb-1",children:["Total Expenses (",l,")"]}),u.jsxs("div",{className:"text-4xl font-extrabold tracking-tight",children:["",A.toLocaleString("en-IN")]})]}),u.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 p-6",children:[u.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[u.jsx(Uj,{className:"text-blue-600",size:20})," New Expense"]}),u.jsxs("form",{onSubmit:_,className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-end",children:[u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"Date"}),u.jsxs("div",{className:"relative",children:[u.jsx(bj,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),u.jsx("input",{type:"date",required:!0,value:c,onChange:D=>d(D.target.value),className:"w-full pl-9 pr-3 py-2.5 rounded-xl border border-slate-200 bg-slate-50 focus:ring-2 focus:ring-blue-500 outline-none font-medium text-slate-700"})]})]}),u.jsxs("div",{className:"md:col-span-3",children:[u.jsx("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"Category"}),u.jsxs("div",{className:"relative",children:[u.jsx(Wj,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),u.jsx("select",{required:!0,value:h,onChange:D=>p(D.target.value),className:"w-full pl-9 pr-3 py-2.5 rounded-xl border border-slate-200 bg-slate-50 focus:ring-2 focus:ring-blue-500 outline-none font-medium text-slate-700 appearance-none",children:Rh.map(D=>u.jsx("option",{value:D,children:D},D))})]})]}),u.jsxs("div",{className:"md:col-span-3",children:[u.jsx("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"Note (Optional)"}),u.jsxs("div",{className:"relative",children:[u.jsx(Gm,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),u.jsx("input",{type:"text",placeholder:"Details...",value:R,onChange:D=>C(D.target.value),className:"w-full pl-9 pr-3 py-2.5 rounded-xl border border-slate-200 bg-slate-50 focus:ring-2 focus:ring-blue-500 outline-none font-medium text-slate-700"})]})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"Amount"}),u.jsxs("div",{className:"relative",children:[u.jsx(Oj,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),u.jsx("input",{type:"number",required:!0,min:"0",step:"any",placeholder:"0.00",value:m,onChange:D=>w(D.target.value),className:"w-full pl-9 pr-3 py-2.5 rounded-xl border border-slate-200 bg-slate-50 focus:ring-2 focus:ring-blue-500 outline-none font-bold text-slate-900"})]})]}),u.jsx("div",{className:"md:col-span-2",children:u.jsx("button",{type:"submit",disabled:P,className:"w-full py-2.5 bg-slate-900 text-white rounded-xl font-bold hover:bg-black transition-colors disabled:opacity-50",children:P?"Adding...":"Add"})})]})]}),u.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden",children:u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-sm text-left",children:[u.jsx("thead",{className:"bg-slate-50 text-slate-500 font-semibold border-b border-slate-200",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-4 w-32",children:"Date"}),u.jsx("th",{className:"px-6 py-4 w-48",children:"Category"}),u.jsx("th",{className:"px-6 py-4",children:"Note"}),u.jsx("th",{className:"px-6 py-4 w-32 text-right",children:"Amount"}),u.jsx("th",{className:"px-6 py-4 w-16"})]})}),u.jsx("tbody",{className:"divide-y divide-slate-100",children:N.length===0?u.jsx("tr",{children:u.jsxs("td",{colspan:"5",className:"px-6 py-12 text-center text-slate-400 italic",children:["No expenses recorded for ",l,"."]})}):N.map(D=>u.jsxs("tr",{className:"hover:bg-slate-50 group",children:[u.jsx("td",{className:"px-6 py-4 font-medium text-slate-600 whitespace-nowrap",children:D.date}),u.jsx("td",{className:"px-6 py-4 font-medium text-slate-900",children:u.jsx("span",{className:"inline-block px-2 py-1 bg-slate-100 rounded-lg text-xs border border-slate-200",children:D.category})}),u.jsx("td",{className:"px-6 py-4 text-slate-500",children:D.note||u.jsx("span",{className:"text-slate-300",children:"-"})}),u.jsxs("td",{className:"px-6 py-4 text-right font-bold text-slate-900",children:["",Number(D.amount).toLocaleString("en-IN")]}),u.jsx("td",{className:"px-6 py-4 text-right",children:u.jsx("button",{onClick:()=>T(D.id),className:"p-2 text-slate-300 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors opacity-0 group-hover:opacity-100",title:"Delete Expense",children:u.jsx($I,{size:16})})})]},D.id))})]})})})]})}function iO(){var c;const{rooms:t,tenants:e,loading:n}=Zr(),{showToast:r}=ao(),[s,i]=V.useState(null);if(n)return u.jsx("div",{className:"p-12 text-center text-slate-400",children:"Loading admin panel..."});const o=[{name:"Ground Floor",rooms:["01","02"]},{name:"1st Floor",rooms:["04"]},{name:"2nd Floor",rooms:["05","06","07"]},{name:"3rd Floor",rooms:["08","09","10"]},{name:"4th Floor",rooms:["11","12","13"]}],l=(d,h)=>{i({room:d,tenant:h})};return u.jsxs("div",{className:"space-y-8 pb-12",children:[u.jsx("h2",{className:"text-3xl font-extrabold text-slate-900",children:"Admin"}),u.jsx("div",{className:"space-y-8 bg-stone-50/50 p-6 rounded-3xl border border-stone-100",children:o.map(d=>u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[u.jsx("div",{className:"md:col-span-1 flex items-center",children:u.jsx("span",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:d.name})}),u.jsxs("div",{className:"md:col-span-3 grid grid-cols-1 sm:grid-cols-3 gap-4",children:[d.rooms.map(h=>{const p=t[h],m=Be(e,p==null?void 0:p.roomId);return u.jsx(pa,{roomNo:h,roomData:p,tenantData:m,rentStatus:null,isPlaceholder:!p,onClick:()=>l(p,m),showStatus:!1},h)}),Array.from({length:3-d.rooms.length}).map((h,p)=>u.jsx(pa,{isPlaceholder:!0},`placeholder-${p}`))]})]},d.name))}),s&&u.jsx(oO,{room:s.room,tenant:Be(e,(c=s.room)==null?void 0:c.roomId),onClose:()=>i(null),showToast:r,updateTenant:Zr().updateTenant})]})}function oO({room:t,tenant:e,onClose:n,showToast:r,updateTenant:s}){const i=Ss(e),[o,l]=V.useState((e==null?void 0:e.tenantType)||"Family"),[c,d]=V.useState((e==null?void 0:e.occupantCount)||3),[h,p]=V.useState(!1),m=async()=>{if(!e||!e.id){r("No tenant record to update","error");return}p(!0);try{await Bn(Qt(Ae,"properties",e.id),{tenantType:o,occupantCount:c||1}),r("Tenant details updated","success"),n()}catch(w){console.error(w),r("Failed to update: "+w.message,"error")}finally{p(!1)}};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:u.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:[u.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xl font-extrabold text-slate-800",children:["Room ",t.roomNo]}),u.jsx("p",{className:"text-sm text-slate-500 font-medium",children:i?e.tenant:"Vacant"})]}),u.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600",children:u.jsx(Wi,{size:24})})]}),u.jsx("div",{className:"p-6 space-y-6 overflow-y-auto custom-scrollbar max-h-[60vh]",children:i?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100 flex items-start gap-3",children:[u.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg",children:u.jsx(Hj,{size:20})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs font-bold text-blue-400 uppercase tracking-wider",children:"Tenant Details"}),u.jsx("p",{className:"text-lg font-bold text-blue-900",children:e.tenant}),u.jsxs("p",{className:"text-sm text-blue-600 mt-0.5",children:["ID: ",t.roomId]})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"block text-sm font-bold text-slate-700",children:"Occupancy Type"}),u.jsx("div",{className:"grid grid-cols-2 gap-3",children:["Family","Bachelors"].map(w=>u.jsxs("label",{className:`
                                                flex items-center justify-center px-4 py-3 rounded-xl border-2 cursor-pointer transition-all
                                                ${o===w?"border-blue-500 bg-blue-50 text-blue-700 font-bold":"border-slate-100 bg-white text-slate-500 hover:border-slate-200"}
                                            `,children:[u.jsx("input",{type:"radio",name:"tenantType",className:"hidden",checked:o===w,onChange:()=>l(w)}),w]},w))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"No. of Occupants"}),u.jsx("input",{type:"number",min:"1",max:"10",className:"w-full bg-white border border-stone-200 rounded-xl px-4 py-2 text-sm font-bold text-slate-800 focus:outline-none focus:ring-2 focus:ring-emerald-500/20",value:c,onChange:w=>d(Number(w.target.value))})]}),u.jsxs("div",{className:"pt-4 border-t border-slate-100",children:[u.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3",children:"Document Vault"}),u.jsx(aO,{tenant:e,updateTenant:s,showToast:r,tenantType:o||"Family",occupantCount:c||1})]})]}):u.jsx("div",{className:"text-center py-8 text-slate-400",children:"No active tenant details to manage for this room."})}),i&&u.jsx("div",{className:"px-6 py-4 bg-slate-50 flex justify-end",children:u.jsxs("button",{onClick:m,disabled:h,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx(vu,{size:18}),h?"Saving...":"Save Changes"]})})]})})}function aO({tenant:t,updateTenant:e,showToast:n,tenantType:r,occupantCount:s}){const[i,o]=V.useState(!1),[l,c]=V.useState(0),d=(t==null?void 0:t.documents)||{},h=(t==null?void 0:t.bachelorDetails)||[],p=async()=>{const P=crypto.randomUUID();try{await e(t.id,{uploadToken:P,uploadTokenCreatedAt:new Date().toISOString()}),n("Secure upload link generated","success")}catch{n("Failed to generate link","error")}},m=()=>{const P=`${window.location.origin}/upload/${t.uploadToken}`;navigator.clipboard.writeText(P),n("Link copied to clipboard","success")},w=()=>{const P=`${window.location.origin}/upload/${t.uploadToken}`,I=`Document Upload Link for Room ${t.roomNo}`,_=`Hi ${t.tenant},

Please use the following secure link to upload your documents for Room ${t.roomNo}.

${P}

This link is valid for 24 hours.

Regards,
Munirathnam Illam`,T=`https://mail.google.com/mail/?view=cm&fs=1&to=${encodeURIComponent(t.email||"")}&su=${encodeURIComponent(I)}&body=${encodeURIComponent(_)}`;window.open(T,"_blank")},R=async P=>{const I={...d};delete I[P];try{await e(t.id,{documents:I}),n("Document removed","success")}catch{n("Failed to remove document","error")}},C=async(P,I,_)=>{const T=[...t.bachelorDetails||[]];T[P]||(T[P]={}),T[P][I]=_;try{await e(t.id,{bachelorDetails:T})}catch(N){console.error("Failed to update bachelor details",N)}};return u.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 overflow-hidden",children:[u.jsxs("button",{onClick:()=>o(!i),className:"w-full flex items-center justify-between p-4 bg-slate-50/50 hover:bg-slate-50 transition",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"bg-blue-100 p-2 rounded-xl text-blue-600",children:u.jsx(Vj,{size:18})}),u.jsxs("div",{className:"text-left",children:[u.jsx("h4",{className:"font-bold text-slate-800 text-sm",children:"Vault Access"}),u.jsx("p",{className:"text-[10px] text-slate-500",children:"Manage documents"})]})]}),i?u.jsx(ep,{size:18,className:"text-slate-400"}):u.jsx(gu,{size:18,className:"text-slate-400"})]}),i&&u.jsxs("div",{className:"p-4 border-t border-slate-100 animate-in slide-in-from-top-2",children:[u.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-3 mb-4",children:[u.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase mb-2",children:"Secure Upload Link"}),t!=null&&t.uploadToken?u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("div",{className:"flex-1 bg-white border border-slate-200 rounded-lg px-2 py-2 text-xs text-slate-600 truncate font-mono",children:[window.location.origin,"/upload/..."]}),u.jsx("button",{onClick:m,className:"p-2 bg-slate-200 hover:bg-slate-300 text-slate-700 rounded-lg transition",title:"Copy Link",children:u.jsx(kj,{size:16})}),u.jsx("button",{onClick:w,className:"p-2 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-lg transition",title:"Share via Email",children:u.jsx($j,{size:16})})]}):u.jsx("button",{onClick:p,className:"w-full py-2 bg-blue-600 text-white rounded-lg font-bold text-xs hover:bg-blue-700 transition",children:"generate Link"}),u.jsx("p",{className:"text-[9px] text-slate-400 mt-2",children:"Link expires in 24 hours."})]}),u.jsx("div",{className:"space-y-6",children:r==="Bachelors"||s>1?u.jsx("div",{className:"space-y-3",children:Array.from({length:s||1}).map((P,I)=>{var N,A,D;const _=l===I,T=((N=h[I])==null?void 0:N.name)||`Occupant #${I+1}`;return u.jsxs("div",{className:`rounded-xl border transition-all duration-200 overflow-hidden ${_?"bg-slate-50 border-blue-200 shadow-sm":"bg-white border-slate-100 hover:bg-slate-50"}`,children:[u.jsxs("button",{onClick:()=>c(_?-1:I),className:"w-full flex items-center justify-between p-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold transition-colors ${_?"bg-blue-600 text-white":"bg-slate-100 text-slate-500"}`,children:I+1}),u.jsxs("div",{className:"text-left",children:[u.jsx("h5",{className:`text-sm font-bold ${_?"text-blue-900":"text-slate-700"}`,children:T}),!_&&u.jsx("p",{className:"text-[10px] text-slate-400",children:"Click to view documents"})]})]}),_?u.jsx(ep,{size:16,className:"text-blue-500"}):u.jsx(gu,{size:16,className:"text-slate-300"})]}),_&&u.jsxs("div",{className:"p-4 pt-0 border-t border-blue-100/50 mt-3 animate-in slide-in-from-top-1",children:[u.jsxs("div",{className:"grid grid-cols-1 gap-3 mb-4 mt-3",children:[u.jsx("input",{placeholder:"Occupant Name",className:"w-full text-xs px-3 py-2.5 rounded-lg border border-slate-200 focus:ring-2 focus:ring-blue-500/20 outline-none font-medium",value:((A=h[I])==null?void 0:A.name)||"",onChange:v=>C(I,"name",v.target.value)}),u.jsx("input",{placeholder:"Family Contact Number",className:"w-full text-xs px-3 py-2.5 rounded-lg border border-slate-200 focus:ring-2 focus:ring-blue-500/20 outline-none font-medium",value:((D=h[I])==null?void 0:D.familyPhone)||"",onChange:v=>C(I,"familyPhone",v.target.value)})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(mr,{title:"Photo",docUrl:d[`bachelor_${I}_photo`],onDelete:()=>R(`bachelor_${I}_photo`)}),u.jsx(mr,{title:"Aadhar",docUrl:d[`bachelor_${I}_aadhar`],onDelete:()=>R(`bachelor_${I}_aadhar`)}),u.jsx(mr,{title:"ID Proof",docUrl:d[`bachelor_${I}_pan`],onDelete:()=>R(`bachelor_${I}_pan`)}),u.jsx(mr,{title:"Agreement",docUrl:d[`bachelor_${I}_agreement`],onDelete:()=>R(`bachelor_${I}_agreement`)})]})]})]},I)})}):u.jsxs("div",{className:"space-y-3",children:[t.familyMembers&&u.jsxs("div",{className:"bg-amber-50 border border-amber-100 rounded-xl p-4 mb-4",children:[u.jsx("h4",{className:"text-xs font-bold text-amber-800 uppercase mb-1",children:"Family Contacts"}),u.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:t.familyMembers})]}),u.jsx(mr,{title:"Tenant Photo",docUrl:d.photo,onDelete:()=>R("photo")}),u.jsx(mr,{title:"Aadhar Card",docUrl:d.aadhar,onDelete:()=>R("aadhar")}),u.jsx(mr,{title:"ID Proof",docUrl:d.pan,onDelete:()=>R("pan")}),u.jsx(mr,{title:"Rental Agreement",docUrl:d.agreement,onDelete:()=>R("agreement")})]})})]})]})}function mr({title:t,docUrl:e,onDelete:n}){const r=e==null?void 0:e.toLowerCase().includes(".pdf");return u.jsxs("div",{className:"flex items-center justify-between p-3 border border-slate-100 rounded-xl hover:bg-slate-50 transition group",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-2 rounded-lg ${e?r?"bg-rose-100 text-rose-600":"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-400"}`,children:e?r?u.jsx(Gm,{size:16}):u.jsx(mu,{size:16}):u.jsx(Km,{size:16})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-xs text-slate-700",children:t}),u.jsx("div",{className:"text-[10px] text-slate-400 flex items-center gap-1",children:e?u.jsxs(u.Fragment,{children:[u.jsx("span",{children:"Uploaded"}),u.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-300"}),u.jsx("span",{className:"uppercase",children:r?"PDF":"IMG"})]}):"Pending"})]})]}),e&&u.jsxs("div",{className:"flex gap-1 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:[u.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 text-blue-600 hover:bg-blue-100 rounded-lg transition",title:"View Document",children:u.jsx(Pj,{size:16})}),u.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to delete this document?")&&n()},className:"p-1.5 text-rose-500 hover:bg-rose-100 rounded-lg transition",title:"Delete Document",children:u.jsx($I,{size:16})})]})]})}const lO=[{roomNo:"01",roomId:"G01",tenant:"Remish",rent:5200,advance:15e3,join:"15-Oct-2024",rev:"15-Oct-2024",phone:"8526487895"},{roomNo:"02",roomId:"G02",tenant:"Anil (L)",rent:500,advance:65e4,join:"24-Aug-2022",rev:"24-Aug-2022",phone:"8073256471"},{roomNo:"04",roomId:"102",tenant:"Venkatesh(L)",rent:500,advance:45e4,join:"24-Nov-2021",rev:"24-Nov-2021",phone:"9513072188"},{roomNo:"05",roomId:"201",tenant:"Prem",rent:8800,advance:3e4,join:"1-Feb-2024",rev:"1-Feb-2024",phone:"8639384523"},{roomNo:"06",roomId:"202",tenant:"Aravind",rent:8800,advance:35e3,join:"1-Aug-2025",rev:"",phone:"8147161034"},{roomNo:"07",roomId:"203",tenant:"Panduranga",rent:8800,advance:28e3,join:"23-Nov-2024",rev:"23-Nov-2024",phone:"9742392131"},{roomNo:"08",roomId:"301",tenant:"Nirmal Raj",rent:8800,advance:3e4,join:"1-Nov-2024",rev:"1-Nov-2024",phone:"6382702408"},{roomNo:"09",roomId:"302",tenant:"Logesh",rent:8300,advance:25e3,join:"26-Feb-2023",rev:"26-Feb-2024",phone:"7010250108"},{roomNo:"10",roomId:"303",tenant:"Prasanth Patil",rent:8800,advance:25e3,join:"01-Jan-2023",rev:"1-Jan-2024",phone:"9880662547"},{roomNo:"11",roomId:"401",tenant:"Mastan",rent:8e3,advance:25e3,join:"31-Jul-2023",rev:"31-Jul-2024",phone:"9902217031"},{roomNo:"12",roomId:"402",tenant:"Sudha / Bharath",rent:8e3,advance:25e3,join:"31-Jul-2023",rev:"31-Jul-2024",phone:"9100770982"},{roomNo:"13",roomId:"403",tenant:"Siri/Vamsi",rent:8e3,advance:25e3,join:"31-Jul-2023",rev:"31-Jul-2024",phone:"6303596330"}],cO={"01":[67,125,191,316,534,584,723,967,1129,1389,1503,1813,1944,2180,2379,2550,2649,2768,2865,3174,3314],"02":[270,1005,1377,1892,2407,2959,3498,3797,4309,4803,5264,6150,7065,7302,7880,8594,9148,10088,10957,11449,11456],"04":[211,572,861,1228,1528,1793,2025,2263,2579,3030,3361,4278,4771,5476,6008,6461,6902,7382,7886,8313,8684],"05":[79,158,502,956,1360,1734,1900,2422,2953,3112,3673,4347,4885,5262,5649,5914,6174,6430,6569,6816,6986],"06":[213,242,640,1078,1306,1643,2095,2572,2842,3207,3710,4182,4404,4637,4811,4855,5113,5465,5678,5991,6299],"07":[609,1375,2635,3621,3621,4378,4624,4738,5068,5441,5865,6428,6781,7162,7411,8186,8983,9800,10339,10972,11814],"08":[0,0,137,578,1007,1007,1007,1007,1007,494,1223,1769,2216,2258,2403,2439,3039,3039,3039,3039,3039],"09":[137,359,500,700,847,1058,1240,1419,1586,1683,1858,2154,2464,2674,2888,3092,3141,3342,3446,3595,3708],10:[101,275,540,673,1227,1412,1527,1642,1807,1951,2278,2472,3084,4500,5511,6628,7066,8161,9391,10388,11723],11:[150,303,524,756,932,1087,1240,1451,1625,1802,1953,2181,2426,2719,2945,3189,3474,3734,3986,4184,4400],12:[88,169,345,471,728,1037,1260,1621,2047,2112,2500,2821,3097,3341,3503,3934,4245,4577,4915,5144,5331],13:[214,488,754,1152,1606,2048,2409,2888,3387,3791,4255,4676,4887,5154,5575,6516,6710,7293,7509,7757,8005]},h_=t=>{if(!t)return"";const e={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"},n=t.split("-");if(n.length!==3)return"";const r=n[0].padStart(2,"0"),s=e[n[1]],i=n[2];return s?`${i}-${s}-${r}`:""};function uO(){const[t,e]=V.useState(""),[n,r]=V.useState(!1),{confirm:s,showToast:i}=ao(),o=async()=>{if(await s({title:"Migrate Rooms?",message:"This will overwrite/create room data in 'rooms' collection. Continue?"})){r(!0),e("Starting migration...");try{const d=Xf(Ae),h=bs(Ae,"rooms");let p=0;Object.entries(Xe).forEach(([w,R])=>{const C=Qt(Ae,"rooms",w);d.set(C,{...R,sortOrder:parseInt(w)}),p++}),await d.commit();const m=`Successfully migrated ${p} rooms to Firestore.`;e(m),i(m,"success")}catch(d){console.error(d);const h="Error: "+d.message;e(h),i(h,"error")}finally{r(!1)}}},l=async()=>{if(await s({title:"Seed Tenant Data?",message:`This will CREATE new tenant records in 'properties'.
Warning: This clears existing data and overwrites it. Continue?`,type:"danger",confirmText:"Yes, Overwrite"})){r(!0),e("Seeding tenants...");try{const d=Xf(Ae),h=bs(Ae,"properties");(await Wm(h)).forEach(m=>{d.delete(m.ref)}),lO.forEach(m=>{const w=Qt(Ae,"properties",`tenant_room_${m.roomNo}`),R=h_(m.join),C=h_(m.rev),P={},I={},_=cO[m.roomNo]||[],T=["Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],N=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];let A=0,D=0;T.forEach(v=>{const y=`2024-${v}`,x=_[A];x!=null&&(P[y]=x,A>0&&x<D&&(I[y]=!0,console.log(`Reset detected for Room ${m.roomNo} at ${y}: ${D} -> ${x}`)),D=x),A++}),N.forEach(v=>{const y=`2025-${v}`,x=_[A];x!=null&&(P[y]=x,x<D&&(I[y]=!0,console.log(`Reset detected for Room ${m.roomNo} at ${y}: ${D} -> ${x}`)),D=x),A++}),d.set(w,{tenant:m.tenant,roomNo:m.roomNo,roomId:m.roomId,rent:String(m.rent),advance:String(m.advance),joinDate:R,lastRevision:C,status:"Occupied",phone:m.phone||"",email:"",waterRate:"0.25",waterReadings:P,waterMeterReset:I,paymentHistory:{},paymentTotals:{}})}),await d.commit(),e("Successfully seeded tenants.")}catch(d){console.error(d),e("Error seeding: "+d.message)}finally{r(!1)}}};return u.jsxs("div",{className:"p-8 bg-white rounded-3xl shadow-sm border border-slate-200",children:[u.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Data Migration Admin"}),u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"font-semibold mb-2",children:"Migrate Rooms"}),u.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Uploads the hardcoded IMMUTABLE_ROOMS_DATA to Firestore 'rooms' collection."}),u.jsx("button",{onClick:o,disabled:n,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:n?"Migrating...":"Start Migration"})]}),u.jsxs("div",{className:"mb-6 border-t pt-6",children:[u.jsx("h3",{className:"font-semibold mb-2",children:"Seed Tenant Data"}),u.jsxs("p",{className:"text-sm text-slate-500 mb-4",children:["Populates 'properties' collection with data from screenshot (Remish, Anil, etc.).",u.jsx("br",{}),u.jsx("span",{className:"text-amber-600 font-bold",children:"Warning:"})," Clears/Overwrites if ID 'tenant_room_XX' exists."]}),u.jsx("button",{onClick:l,disabled:n,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50",children:n?"Seeding...":"Seed Tenants"})]}),t&&u.jsx("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-lg text-sm font-mono whitespace-pre-wrap",children:t})]})}const dO="dhze5ifcf",hO="mi_unsigned_preset",fO=async t=>{var n;const e=new FormData;e.append("file",t),e.append("upload_preset",hO);try{const r=await fetch(`https://api.cloudinary.com/v1_1/${dO}/auto/upload`,{method:"POST",body:e});if(!r.ok){const i=await r.json();throw new Error(((n=i.error)==null?void 0:n.message)||"Cloudinary Upload Failed")}return(await r.json()).secure_url}catch(r){throw console.error("Cloudinary Service Error:",r),r}};function pO(){const{token:t}=xS(),[e,n]=V.useState("verifying"),[r,s]=V.useState(null),[i,o]=V.useState(null),[l,c]=V.useState({}),[d,h]=V.useState({}),[p,m]=V.useState(""),w=T=>{m(T),setTimeout(()=>m(""),5e3)};V.useEffect(()=>{const T=b1(Mn,N=>{s(N),N?P():n("login_required")});return()=>T()},[t]);const R=async()=>{try{await V1(Mn,LI)}catch(T){console.error("Login failed",T),alert("Login failed. Please try again.")}},C=()=>{Pf(Mn),o(null),n("login_required")},P=async()=>{n("verifying");try{const T=da(bs(Ae,"properties"),RI("uploadToken","==",t)),N=await Wm(T);if(N.empty){n("invalid");return}const A=N.docs[0],D=A.data();o({id:A.id,...D}),h(D.documents||{}),n("valid")}catch(T){console.error("Link validation failed:",T),n("error")}},I=async(T,N)=>{if(!(!T||!i)){if(T.size>10*1024*1024){alert("File is too large. Max 10MB.");return}c(A=>({...A,[N]:!0}));try{const A=await fO(T),D={...d,[N]:A};await Bn(Qt(Ae,"properties",i.id),{documents:D,[`meta_${N}_uploadedBy`]:r.email,[`meta_${N}_uploadedAt`]:new Date().toISOString()}),h(D)}catch(A){console.error("Upload Error Details:",A),alert(`Upload failed: ${A.message}`)}finally{c(A=>({...A,[N]:!1}))}}};if(e==="verifying")return u.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 text-slate-400",children:[u.jsx(yu,{className:"animate-spin mb-2",size:32}),u.jsx("p",{children:"Verifying Access..."})]});if(e==="login_required")return u.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 p-6",children:u.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-slate-200 w-full max-w-md text-center",children:[u.jsx(tp,{className:"mx-auto text-blue-600 mb-4",size:48}),u.jsx("h1",{className:"text-xl font-bold text-slate-900 mb-2",children:"Secure Upload Portal"}),u.jsx("p",{className:"text-slate-500 mb-8",children:"Please sign in with Google to verify your identity and access the document vault."}),u.jsxs("button",{onClick:R,className:"w-full py-3 bg-black text-white rounded-xl font-bold hover:bg-slate-800 transition flex items-center justify-center gap-2",children:[u.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[u.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),u.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),u.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),u.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign in with Google"]}),u.jsx("p",{className:"text-xs text-slate-400 mt-4",children:"Munirathnam Illam Secure Cloud"})]})});if(e==="invalid")return u.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 p-6 text-center",children:u.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-slate-200 w-full max-w-md",children:[u.jsx(Ri,{className:"mx-auto text-rose-500 mb-4",size:48}),u.jsx("h1",{className:"text-xl font-bold text-slate-900 mb-2",children:"Invalid Link"}),u.jsx("p",{className:"text-slate-500",children:"This link does not exist. Please request a new one."})]})});if(e==="expired")return u.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 p-6 text-center",children:u.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-slate-200 w-full max-w-md",children:[u.jsx("div",{className:"bg-amber-100 p-4 rounded-full inline-block mb-4 text-amber-600",children:u.jsx(tp,{size:32})}),u.jsx("h1",{className:"text-xl font-bold text-slate-900 mb-2",children:"Link Expired"}),u.jsx("p",{className:"text-slate-500 mb-4",children:"This secure upload link has expired (valid for 24h only)."}),u.jsx("p",{className:"text-sm font-bold text-slate-400",children:"Please request a new link from the Admin."})]})});if(e==="error")return u.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 p-6 text-center",children:u.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-slate-200 w-full max-w-md",children:[u.jsx(Ri,{className:"mx-auto text-rose-500 mb-4",size:48}),u.jsx("h1",{className:"text-xl font-bold text-slate-900 mb-2",children:"An Error Occurred"}),u.jsx("p",{className:"text-slate-500",children:"Please try again later or contact support."})]})});const _=({title:T,type:N,description:A})=>{const D=!!d[N],v=l[N];return u.jsxs("div",{className:`relative overflow-hidden rounded-2xl border transition-all ${D?"bg-emerald-50 border-emerald-200":"bg-white border-slate-200 shadow-sm"}`,children:[u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-start justify-between mb-4",children:[u.jsx("div",{className:`p-3 rounded-xl ${D?"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-600"}`,children:D?u.jsx(mu,{size:24,strokeWidth:3}):u.jsx(Gm,{size:24})}),D&&u.jsx("span",{className:"text-xs font-bold text-emerald-600 bg-white px-2 py-1 rounded-full shadow-sm",children:"UPLOADED"})]}),u.jsx("h3",{className:"font-bold text-slate-900 mb-1",children:T}),u.jsx("p",{className:"text-sm text-slate-500 mb-6",children:A}),u.jsxs("label",{className:`block w-full text-center py-3 rounded-xl font-bold cursor-pointer transition-colors ${D?"bg-white text-emerald-600 border-2 border-emerald-100 hover:border-emerald-200":"bg-black text-white hover:bg-slate-800"}`,children:[v?"Uploading...":D?"Replace File":"Select File",u.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",disabled:v,onChange:y=>I(y.target.files[0],N)})]})]}),v&&u.jsx("div",{className:"absolute inset-0 bg-white/80 flex items-center justify-center",children:u.jsx(yu,{className:"animate-spin text-black",size:32})})]})};return u.jsxs("div",{className:"min-h-screen bg-slate-50 p-6 md:p-12",children:[u.jsxs("div",{className:"max-w-xl mx-auto",children:[u.jsxs("div",{className:"flex justify-between items-center mb-8",children:[u.jsx("div",{className:"inline-block px-4 py-1.5 bg-blue-100 text-blue-700 rounded-full text-xs font-bold tracking-wide uppercase",children:"Secure Document Portal"}),u.jsxs("button",{onClick:C,className:"text-slate-400 hover:text-slate-600 flex items-center gap-1 text-sm font-bold",children:[u.jsx(zI,{size:16})," Sign Out"]})]}),u.jsxs("div",{className:"text-center mb-10",children:[u.jsxs("h1",{className:"text-3xl font-extrabold text-slate-900 mb-2",children:["Hello, ",i.tenant,"!"]}),u.jsxs("p",{className:"text-slate-500",children:["Room ",i.roomNo," (",i.roomId,")"]}),u.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["Logged in as ",r.email]})]}),u.jsx("div",{className:"space-y-6",children:i.tenantType==="Bachelors"||i.occupantCount&&i.occupantCount>1?Array.from({length:i.occupantCount||1}).map((T,N)=>{var A,D,v,y,x,b;return u.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm mb-6",children:[u.jsxs("h2",{className:"text-lg font-bold text-slate-900 mb-4 pb-2 border-b border-slate-100 flex justify-between items-center",children:[u.jsxs("span",{children:["Occupant #",N+1]}),((D=(A=i.bachelorDetails)==null?void 0:A[N])==null?void 0:D.name)&&u.jsx("span",{className:"text-xs font-medium text-slate-500 bg-slate-100 px-2 py-1 rounded-lg",children:i.bachelorDetails[N].name})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Name"}),u.jsx("input",{className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm font-medium focus:ring-2 focus:ring-blue-500/20 outline-none",placeholder:"Enter full name",defaultValue:((y=(v=i.bachelorDetails)==null?void 0:v[N])==null?void 0:y.name)||"",onBlur:k=>{const j=[...i.bachelorDetails||[]];j[N]||(j[N]={}),j[N].name=k.target.value,Bn(Qt(Ae,"properties",i.id),{bachelorDetails:j})}})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Family Contact Number"}),u.jsx("input",{className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm font-medium focus:ring-2 focus:ring-blue-500/20 outline-none",placeholder:"Parent/Guardian number",defaultValue:((b=(x=i.bachelorDetails)==null?void 0:x[N])==null?void 0:b.familyPhone)||"",onBlur:k=>{const j=k.target.value.trim();if(!j)return;const S=ie=>String(ie||"").replace(/\D/g,""),te=S(i.phone),he=S(j);if(te&&te.length>5&&he===te){w("Only Family contact numbers accepted. You cannot use your own number."),k.target.value="";return}const G=[...i.bachelorDetails||[]];G[N]||(G[N]={}),G[N].familyPhone=j,Bn(Qt(Ae,"properties",i.id),{bachelorDetails:G})}})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx(_,{title:"Photo",type:`bachelor_${N}_photo`,description:"Passport size photo."}),u.jsx(_,{title:"Aadhar Card",type:`bachelor_${N}_aadhar`,description:"Front and back."}),u.jsx(_,{title:"ID Proof",type:`bachelor_${N}_pan`,description:"PAN or Voter ID."}),u.jsx(_,{title:"Rental Agreement",type:`bachelor_${N}_agreement`,description:"Page with signature."})]})]},N)}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[u.jsx("label",{className:"block text-sm font-bold text-slate-900 mb-2",children:"Family Member Contact Numbers"}),u.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Please provide contact details for your family members (Name & Phone)."}),u.jsx("textarea",{className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm font-medium focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition",rows:3,placeholder:"e.g. Spouse: 9876543210, Father: 9123456780",defaultValue:i.familyMembers||"",onBlur:T=>{Bn(Qt(Ae,"properties",i.id),{familyMembers:T.target.value})}})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx(_,{title:"Tenant Photo",type:"photo",description:"Recent passport size photo."}),u.jsx(_,{title:"Aadhar Card",type:"aadhar",description:"Front and back photo or PDF."}),u.jsx(_,{title:"ID Proof",type:"pan",description:"Any valid government ID (PAN/Voter)."}),u.jsx(_,{title:"Rental Agreement",type:"agreement",description:"Signed copy of the agreement."})]})]})}),u.jsx("div",{className:"mt-12 text-center text-xs text-slate-400",children:u.jsx("p",{children:"Files are securely stored in Munirathnam Illam Cloud."})})]}),p&&u.jsx("div",{className:"fixed top-6 left-1/2 -translate-x-1/2 z-50 animate-in slide-in-from-top-4 fade-in duration-300",children:u.jsxs("div",{className:"bg-rose-500 text-white px-6 py-4 rounded-xl shadow-2xl flex items-center gap-3 max-w-sm mx-4 border-2 border-rose-400/50",children:[u.jsx(qj,{className:"shrink-0 text-white/90",size:24}),u.jsx("p",{className:"font-bold text-sm leading-tight",children:p}),u.jsx("button",{onClick:()=>m(""),className:"ml-auto p-1.5 hover:bg-white/20 rounded-lg transition-colors",children:u.jsx(Wi,{size:16})})]})})]})}function mO(){const{unlockWithBiometrics:t}=oo(),[e,n]=V.useState(null),[r,s]=V.useState(!1);V.useEffect(()=>{i()},[]);async function i(){if(cn.isNativePlatform())try{const l=await VI.isAvailable();s(l.isAvailable)}catch(l){console.error("Biometric Check Error:",l),n("Biometrics not available")}}const o=async()=>{n(null);try{await t()}catch{n("Authentication failed.")}};return cn.isNativePlatform()?u.jsxs("div",{className:"fixed inset-0 z-[100] flex flex-col items-center justify-center p-8 bg-gradient-to-br from-emerald-900 via-emerald-800 to-slate-900 text-white",children:[u.jsxs("div",{className:"flex flex-col items-center space-y-8 animate-in fade-in zoom-in duration-300",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-0 bg-emerald-400 rounded-full blur-3xl opacity-20"}),u.jsx("div",{className:"relative p-6 bg-white/10 backdrop-blur-xl rounded-full ring-1 ring-white/20 shadow-2xl",children:u.jsx(Mj,{size:48,className:"text-emerald-100"})})]}),u.jsxs("div",{className:"text-center space-y-2",children:[u.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"App Locked"}),u.jsx("p",{className:"text-emerald-100/70 text-sm",children:"Munirathnam Illam Rental Manager"})]}),u.jsxs("div",{className:"pt-8 flex flex-col items-center gap-4",children:[u.jsxs("button",{onClick:o,className:"flex items-center gap-3 px-8 py-4 bg-emerald-500 hover:bg-emerald-400 text-emerald-950 rounded-2xl font-bold transition-all active:scale-95 shadow-lg shadow-emerald-900/50",children:[u.jsx(Dj,{size:24}),u.jsx("span",{children:"Unlock with Face ID"})]}),u.jsx("button",{onClick:()=>window.location.reload(),className:"text-sm text-emerald-200/50 font-medium hover:text-white transition",children:"Reload App"})]}),e&&u.jsx("p",{className:"text-rose-300 text-sm font-medium mt-4 animate-pulse",children:e})]}),u.jsx("div",{className:"absolute bottom-8 text-center",children:u.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-white/30 uppercase tracking-widest font-bold",children:[u.jsx(Bj,{size:12}),u.jsx("span",{children:"Secured by Biometrics"})]})})]}):u.jsx("div",{className:"fixed inset-0 z-[100] bg-stone-900 flex items-center justify-center",children:u.jsxs("div",{className:"bg-white p-8 rounded-2xl text-center space-y-4",children:[u.jsx("p",{children:"Biometrics not supported on Web."}),u.jsx("button",{onClick:o,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg",children:"Mock Unlock"})]})})}function gO(){const{loginWithGoogle:t,currentUser:e}=oo(),[n,r]=V.useState(!1);if(e)return u.jsx(Ox,{to:"/"});const s=async()=>{try{r(!0),await t()}catch(i){console.error("Login failed:",i),alert("Login failed. Please try again."),r(!1)}};return u.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row bg-white",children:[u.jsxs("div",{className:"w-full md:w-1/2 bg-gradient-to-br from-emerald-50 via-emerald-50 to-emerald-100 p-8 md:p-12 lg:p-20 flex flex-col justify-between relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-emerald-100/50 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),u.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-emerald-200/20 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"}),u.jsxs("div",{className:"relative z-10",children:[u.jsxs("div",{className:"flex items-center gap-3 text-emerald-800 mb-12",children:[u.jsx("div",{className:"p-2 bg-white/60 rounded-xl backdrop-blur-sm shadow-sm ring-1 ring-black/5",children:u.jsx(Zf,{size:24})}),u.jsx("span",{className:"font-bold tracking-tight",children:"Munirathnam Illam"})]}),u.jsxs("div",{className:"space-y-6 max-w-lg",children:[u.jsx("h1",{className:"text-4xl md:text-5xl font-black text-slate-900 tracking-tight leading-[1.1]",children:"Property Management System"}),u.jsx("p",{className:"text-lg text-slate-600 font-medium leading-relaxed",children:"Manage tenants, rent, maintenance, and reports from one unified dashboard."})]})]}),u.jsxs("div",{className:"relative z-10 mt-12 text-sm font-medium text-emerald-800/60",children:[" ",new Date().getFullYear()," Munirathnam Illam"]})]}),u.jsxs("div",{className:"w-full md:w-1/2 p-4 flex items-center justify-center bg-white relative",children:[u.jsx("div",{className:"absolute top-0 w-full h-[env(safe-area-inset-top)] bg-transparent md:hidden"}),u.jsxs("div",{className:"w-full max-w-md space-y-8 p-8",children:[u.jsxs("div",{className:"text-center space-y-4",children:[u.jsx("div",{className:"inline-flex p-4 bg-stone-50 rounded-2xl mb-4 ring-1 ring-stone-100 shadow-sm",children:u.jsx(tp,{className:"w-10 h-10 text-emerald-600"})}),u.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Welcome Back"}),u.jsx("p",{className:"text-slate-500",children:"Sign in to manage your property"})]}),u.jsxs("div",{className:"space-y-4 pt-4",children:[u.jsx("button",{onClick:s,disabled:n,className:"w-full flex items-center justify-center gap-3 px-6 py-4 bg-white border-2 border-stone-200 rounded-2xl text-slate-700 font-bold hover:bg-stone-50 hover:border-stone-300 transition-all active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed group shadow-sm",children:n?u.jsx("span",{className:"w-5 h-5 border-2 border-slate-300 border-t-slate-600 rounded-full animate-spin"}):u.jsxs(u.Fragment,{children:[u.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[u.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),u.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),u.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),u.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),u.jsx("span",{children:"Continue with Google"})]})}),u.jsx("p",{className:"text-center text-xs text-slate-400 font-medium pt-4",children:"Your data is securely encrypted"})]})]})]})]})}function ps({children:t}){const{currentUser:e,loading:n}=oo();return n?u.jsx("div",{children:"Loading..."}):e?t:u.jsx(Ox,{to:"/login"})}function yO(){const{isAppLocked:t,unlockApp:e,currentUser:n}=oo();return n&&t?u.jsx(mO,{}):null}function vO(){return u.jsx(fj,{children:u.jsx(Gj,{children:u.jsxs(Ej,{children:[u.jsx(yO,{}),u.jsx(WS,{children:u.jsxs(VS,{children:[u.jsx(wn,{path:"/login",element:u.jsx(gO,{})}),u.jsx(wn,{path:"/upload/:token",element:u.jsx(pO,{})}),u.jsx(wn,{path:"/",element:u.jsx(ps,{children:u.jsx(fs,{children:u.jsx(Kj,{})})})}),u.jsx(wn,{path:"/rooms",element:u.jsx(ps,{children:u.jsx(fs,{children:u.jsx(Jj,{})})})}),u.jsx(wn,{path:"/rent",element:u.jsx(ps,{children:u.jsx(fs,{children:u.jsx(Xj,{})})})}),u.jsx(wn,{path:"/water",element:u.jsx(ps,{children:u.jsx(fs,{children:u.jsx(rO,{})})})}),u.jsx(wn,{path:"/expenses",element:u.jsx(ps,{children:u.jsx(fs,{children:u.jsx(sO,{})})})}),u.jsx(wn,{path:"/admin",element:u.jsx(ps,{children:u.jsx(fs,{children:u.jsx(iO,{})})})}),u.jsx(wn,{path:"/admin/migrate",element:u.jsx(ps,{children:u.jsx(fs,{children:u.jsx(uO,{})})})})]})})]})})})}kh.createRoot(document.getElementById("root")).render(u.jsx(pi.StrictMode,{children:u.jsx(vO,{})}));export{mk as A,PO as B,WO as C,V1 as D,Ws as E,wr as F,xr as G,HO as H,BO as I,Vk as J,Xn as K,LO as L,T0 as M,aC as N,dc as O,Xv as P,C1 as Q,UO as R,R1 as S,Er as T,e_ as U,t_ as V,Hm as W,TO as a,IO as b,bO as c,FO as d,qO as e,CO as f,lA as g,Tn as h,RO as i,MO as j,EO as k,$O as l,NO as m,Jv as n,VO as o,_O as p,xO as q,WR as r,AO as s,SO as t,kO as u,zO as v,wO as w,jO as x,OO as y,DO as z};
